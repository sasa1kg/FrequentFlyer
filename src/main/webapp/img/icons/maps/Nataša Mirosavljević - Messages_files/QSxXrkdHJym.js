/*!CK:2088941981!*//*1452156348,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GjNZv"]); }

__d("MessageThreadViewSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",NEW_MESSAGETAB:"new_message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};},null);
__d("MNCommerceErrors",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALREADY_UNLINKED:1893001};},null);
__d("MNCommerceReplyTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMMERCE_LINK:2,COMMERCE_UNLINK:3};},null);
__d("P2PPaymentLogMessageSubtype",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired"};},null);
__d("PagesManagerMessagingTabPerfEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGE_TAB_WILL_RENDER:"message_tab_will_render",MESSAGE_TAB_APP_DID_RENDER:"message_tab_app_did_render",MESSAGE_TAB_THREAD_LIST_DID_RENDER:"message_tab_thread_list_did_render",MESSAGE_TAB_DETAIL_VIEW_DID_RENDER:"message_tab_detail_view_did_render",OLD_MESSAGE_TAB_WILL_RENDER:"old_message_tab_will_render",OLD_MESSAGE_TAB_DID_RENDER:"old_message_tab_did_render"};},null);
__d("PagesMessagingActionPlacement",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SPRINGBOARD_INLINE_ACTION:"springboard_inline_action",THREAD_LIST_BATCH_ACTION:"thread_list_batch_action",THREAD_ROW_ACTION_ICON:"thread_row_action_icon",MESSAGE_DIALOG_ACTION_LIST:"message_dialog_action_list",MESSAGE_DIALOG_OPENING:"message_dialog_opening",MESSAGE_DIALOG_SHOWN:"message_dialog_shown",THREAD_TITLE_BAR:"thread_title_bar",HOME_PAGE_PAGELET_INLINE_ACTION:"home_page_pagelet_inline_action",UNKNOWN:"unknown"};},null);
__d('PagesMessengerConfirmCloseThreadDialog.react',['React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p,q=h.PropTypes,r=300;o=babelHelpers.inherits(s,h.Component);p=o&&o.prototype;function s(t){'use strict';p.constructor.call(this,t);}s.prototype.render=function(){'use strict';return (h.createElement(i,{layerHideOnBlur:false,shown:this.props.shown,width:r},h.createElement(m,{showCloseButton:false},n._("Close Message Thread")),h.createElement(j,null,n._("You haven't sent your message yet. Do you want to leave without sending it?")),h.createElement(l,null,h.createElement(k,{action:'cancel',label:n._("Continue Writing"),onClick:this.props.onCancel,use:'default'}),h.createElement(k,{action:'confirm',label:n._("Leave This Thread"),onClick:this.props.onConfirm,use:'confirm'}))));};s.propTypes={onCancel:q.func.isRequired,onConfirm:q.func.isRequired,shown:q.bool.isRequired};f.exports=s;},null);
__d('UFICreatorInfo.react',['HelpLink.react','Image.react','React','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'UFICreatorInfo',propTypes:{creatorID:n.string.isRequired,creatorType:n.string.isRequired,creatorName:n.string.isRequired,labelType:n.string.isRequired,pageID:n.string.isRequired,profileURI:n.string},render:function(){var p,q=this.getCreatorLink();switch(this.props.labelType){case 'commented':p=m._("Commented on by {creator}",[m.param('creator',q)]);break;case 'edited_comment':p=m._("Edited by {creator}",[m.param('creator',q)]);break;case 'sent_message':p=m._("Sent by {creator}",[m.param('creator',q)]);break;case 'page_admin_note':p=m._("Noted by {creator}",[m.param('creator',q)]);break;default:return;}return (j.createElement('span',null,p,j.createElement(h,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (j.createElement('a',{className:'uiLinkSubtle','aria-label':this.getTooltipText(),'data-hover':'tooltip'},this.props.creatorName));case 'business_admin':return (j.createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (j.createElement('span',{className:'uiLinkSubtle'},j.createElement(i,{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (j.createElement('span',{className:'uiLinkSubtle'},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return j.createElement('span',null,this.props.creatorName);var p=new k('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (j.createElement('a',{className:'uiLinkSubtle','data-hovercard':p,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return m._("This was commented on by someone using {application}.",[m.param('application',this.props.creatorName)]);case 'edited_comment':return m._("This was edited by someone using {application}.",[m.param('application',this.props.creatorName)]);case 'sent_message':return m._("This was sent by someone using {application}.",[m.param('application',this.props.creatorName)]);case 'page_admin_note':return m._("This was noted by someone using {application}.",[m.param('application',this.props.creatorName)]);}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return m._("This was commented on by someone from {page}.",[m.param('page',this.props.creatorName)]);case 'edited_comment':return m._("This was edited by someone from {page}.",[m.param('page',this.props.creatorName)]);case 'sent_message':return m._("This was sent by someone from {page}.",[m.param('page',this.props.creatorName)]);case 'page_admin_note':return m._("This was noted by someone from {page}.",[m.param('page',this.props.creatorName)]);}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return m._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return m._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return m._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return m._("This was noted by someone who doesn't have a personal Facebook account.");}},getHelpText:function(){switch(this.props.labelType){case 'commented':return m._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return m._("Only people who manage this Page can see who edited a comment");case 'sent_message':return m._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return m._("Only people who manage this Page can see who created a note");}}});f.exports=o;},null);
__d('PagesMessengerCreatorInfo.react',['React','UFICreatorInfo.react','XUIGrayText.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;o.prototype.render=function(){return (h.createElement(j,{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},h.createElement(i,{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI})));};function o(){l.apply(this,arguments);}o.propTypes={creator_info:n.shape({creatorID:n.string.isRequired,creatorName:n.string.isRequired,creatorType:n.string.isRequired,labelType:n.string.isRequired,pageID:n.string.isRequired,profileURI:n.string}).isRequired};f.exports=o;},null);
__d('ChatFileUploaderMixin',['SubscriptionsHandler','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k={propTypes:{attachmentsShelf:j.object,onFileUploaderMounted:j.func,onUploadFinished:j.func,onUpdateAttachmentsShelf:j.func,onSubmit:j.func},setUpSubscriptionsHandler:function(l){this._uploader=l;this._subscriptions=new h();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function(){return this._uploader.isUploading();},getAttachments:function(){return this._uploader.getAttachments();},getImageFiles:function(){return this._uploader.getImageFiles();},getVideoFiles:function(){return this._uploader.getVideoFiles();},getAudioFiles:function(){return this._uploader.getAudioFiles();},getFiles:function(){return this._uploader.getFiles();},removeAttachments:function(){return this._uploader.removeAttachments();},_handleUploadFinished:function(){if(this.props.onUploadFinished){var l;(l=this.props).onUploadFinished.apply(l,arguments);}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var l;(l=this.props).onUpdateAttachmentsShelf.apply(l,arguments);}},_handleSubmit:function(){if(this.props.onSubmit){var l;(l=this.props).onSubmit.apply(l,arguments);}}};f.exports=k;},null);
__d('PagesMessengerFileUploader.react',['ChatFileUploaderMixin','Image.react','InlineBlock.react','Link.react','MercuryConfig','MercuryFileUploader','React','ReactDOM','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'PagesMessengerFileUploader',mixins:[h],propTypes:{actionURI:s.string,iconSize:s.oneOf(['small','large'])},shouldComponentUpdate:function(u,v){return u.actionURI!=this.props.actionURI;},componentDidMount:function(){this._fileUploader=new m(this.props.attachmentsShelf,o.findDOMNode(this.refs.form),o.findDOMNode(this.refs.input),o.findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(this._fileUploader);},addFiles:function(u){this._fileUploader.addDroppedFiles(u);},getDefaultProps:function(){return {actionURI:l.upload_url,iconSize:'small'};},render:function(){return (n.createElement('form',{action:this.props.actionURI,method:'post',ref:'form'},n.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),n.createElement(j,{className:"_m _4q60 _3rzn"},n.createElement(k,{className:"_4q61"+(this.props.iconSize==='small'?' '+"_509v":'')+(this.props.iconSize==='large'?' '+"_5njm":'')+(' '+"bizOK")},this._renderIcon()),n.createElement('input',{type:'file',className:"_n",name:'attachment[]',multiple:'true',ref:'input'}))));},_renderIcon:function(){if(this.props.iconSize==='small'){return (n.createElement(i,{alt:q._("File"),src:r('/images/composer/attachments/paperclip_icon.png')}));}else if(this.props.iconSize==='large')return (n.createElement(i,{alt:q._("File"),src:r('/images/pages/pages_manager/messages/composer-attach.png')}));}});f.exports=t;},null);
__d('MercuryPageMessageActions',['MercuryActionType','MercuryMessageActions','MercuryPayloadSource','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){m.constructor.call(this,o);}n.prototype.createNote=function(o,p,q){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:h.CREATE_PAGE_ADMIN_NOTE,message_id:q,note:o,thread_id:p},j.CLIENT_CREATE_PAGE_ADMIN_NOTE));this.__serverRequests.createNote(o.body.text,q,p);};Object.assign(n,k,{_instances:{}});f.exports=n;},null);
__d('PagesMessengerTextInput.react',['AbstractTextFieldMixin.react','React','TextAreaControl','InputCaretUtility','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'PagesMessengerTextInput',mixins:[h],propTypes:{onClick:n.func,onKeyUp:n.func,onPaste:n.func,onFocus:n.func,tabIndex:n.string},componentDidMount:function(){var p=this.getTextFieldDOM();new j(p);},moveCaretToBeginning:function(){var p=this.getTextFieldDOM();k.delayedMoveCaretToBeginning(p);},resetHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.resetHeight();},updateHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.updateHeight();},renderTextField:function(){var p=m(this.props.className,"_58al"+(' '+"uiTextareaAutogrow"));return this.setTextFieldPropsOn(i.createElement('textarea',{type:'text',className:p,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste,onFocus:this.props.onFocus}));}});f.exports=o;},null);
__d('PagesMessengerSimpleMultilineComposer.react',['MercuryMessageObject','MercurySourceType','MercuryPageMessageActions','PagesEventObserver','PagesEventType','PagesMessengerTextInput.react','React','ReactDOM','XUIButton.react','cx','fbt','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u,v=n.PropTypes;t=babelHelpers.inherits(w,n.Component);u=t&&t.prototype;function w(x){'use strict';u.constructor.call(this,x);this.state={value:''};this.$PagesMessengerSimpleMultilineComposer1=j.getForFBID(this.props.sourceID);this.$PagesMessengerSimpleMultilineComposer2=h.getForFBID(this.props.sourceID);}w.prototype.hasInput=function(){'use strict';return !!this.state.value;};w.prototype.clearInput=function(){'use strict';this.setState({value:''});};w.prototype.focusInput=function(){'use strict';o.findDOMNode(this.refs.textInput).focus();};w.prototype.getConfirmButtonLabel=function(){'use strict';return r._("Send");};w.prototype.getTextInputPlaceholder=function(){'use strict';return r._("Write a message");};w.prototype.onTextInputChanged=function(event){'use strict';this.setState({value:event.target.value});};w.prototype.processSend=function(event){'use strict';var x=this.refs.textInput.getValue();if(!x)return;var y=this.$PagesMessengerSimpleMultilineComposer2.constructUserGeneratedMessageObject(x,i.TITAN_WEB,this.props.threadID,null,null);k.logData_DEPRECATED({page_id:this.props.sourceID,event_name:l.MESSAGES_DIALOG_SEND,thread_id:this.props.destinationID},null);event.preventDefault();if(this.props.allowSend()){this.$PagesMessengerSimpleMultilineComposer1.send(y);this.setState({value:''});this.props.afterSend();}};w.prototype.render=function(){'use strict';return (n.createElement('div',{className:"_1yn"},n.createElement('div',null,n.createElement(m,{className:"_1yq"+(' '+"_32wh")+(s(this.state.value)?' '+"_1yx":''),placeholder:this.getTextInputPlaceholder(),onChange:this.onTextInputChanged.bind(this),onKeyUp:this.props.onKeyUp,value:this.state.value,ref:'textInput'})),n.createElement('hr',{className:"_1yy"}),n.createElement('div',{className:"_1yz"},n.createElement('div',{className:"_1y-"},n.createElement(p,{use:'confirm',onClick:this.processSend.bind(this),label:this.getConfirmButtonLabel()})))));};w.propTypes={afterSend:v.func.isRequired,allowSend:v.func.isRequired,destinationID:v.string.isRequired,onKeyUp:v.func.isRequired,sourceID:v.string.isRequired,threadID:v.string.isRequired};f.exports=w;},null);
__d("XPagesMessagingFindPageController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/search\/page_name_typeahead\/",{page_id:{type:"String",required:true},value:{type:"String"}});},null);
__d('PagesMessengerNewThreadDialog.react',['Event','Keys','MercuryIDs','MercuryParticipants','PagesEventObserver','PagesEventType','PagesMessengerConfirmCloseThreadDialog.react','PagesMessengerSimpleMultilineComposer.react','React','SearchableEntry','WebAsyncSearchSource','XPagesMessagingFindPageController','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUITokenizerRichToken.react','XUITypeahead.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa,ba,ca=p.PropTypes,da=445,ea=326;aa=babelHelpers.inherits(fa,p.Component);ba=aa&&aa.prototype;function fa(ga){'use strict';ba.constructor.call(this,ga);this.state={typeaheadErrorMessage:null,initDialog:false,pageName:'...',query:'',selectedItem:null,showCloseConfirmationDialog:false};this.$PagesMessengerNewThreadDialog1=false;this.$PagesMessengerNewThreadDialog2=false;var ha=s.getURIBuilder().setString('page_id',this.props.pageID).getURI(),ia={uri:ha};this.$PagesMessengerNewThreadDialog3=new r({bootstrapRequests:[ia],queryRequests:[ia],getAllForEmptyQuery:true});}fa.prototype.$PagesMessengerNewThreadDialog4=function(ga){'use strict';l.notify(m.MESSAGES_CLOSE_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID,close_state:ga});};fa.prototype.$PagesMessengerNewThreadDialog5=function(){'use strict';if(this.refs.newThreadComposer.hasInput()){this.setState({showCloseConfirmationDialog:true});this.$PagesMessengerNewThreadDialog4('has_message');}else{this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('no_message');}};fa.prototype.$PagesMessengerNewThreadDialog6=function(){'use strict';this.refs.newThreadComposer.clearInput();this.setState({query:'',selectedItem:null,showCloseConfirmationDialog:false});};fa.prototype.$PagesMessengerNewThreadDialog7=function(){'use strict';this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('confirm_close');};fa.prototype.$PagesMessengerNewThreadDialog8=function(){'use strict';this.setState({showCloseConfirmationDialog:false});};fa.prototype.$PagesMessengerNewThreadDialog9=function(ga,event){'use strict';if(h.getKeyCode(event)===i.ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog10=function(event){'use strict';if(h.getKeyCode(event)===i.ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog11=function(ga){'use strict';if(!ga&&this.props.shown)this.$PagesMessengerNewThreadDialog5();};fa.prototype.subscribeEvents=function(){'use strict';if(this.refs.newPageMessageDialog&&!this.$PagesMessengerNewThreadDialog2){this.refs.newPageMessageDialog.layerSubscribe('key',this.$PagesMessengerNewThreadDialog9.bind(this));this.$PagesMessengerNewThreadDialog2=true;}};fa.prototype.loadPageName=function(){'use strict';if(!this.$PagesMessengerNewThreadDialog1){this.$PagesMessengerNewThreadDialog1=true;k.get(j.getParticipantIDFromUserID(this.props.pageID),(function(ga){this.setState({pageName:ga.name});}).bind(this));}};fa.prototype.componentDidUpdate=function(ga,ha){'use strict';if(!this.props.shown)return;this.subscribeEvents();this.loadPageName();if(!this.refs.pageTypeahead)return;var ia=this.refs.pageTypeahead.getTextFieldDOM();ia.style.border='0px';ia.style.fontSize='14px';ia.style.lineHeight='14px';if(this.props.shown&&!ga.shown)this.refs.pageTypeahead.focusInput();};fa.prototype.renderFrom=function(){'use strict';return (p.createElement('div',{className:"_1vwk"},z._("From: {pageName}",[z.param('pageName',this.state.pageName)])));};fa.prototype.renderSelectedResult=function(){'use strict';if(!this.state.selectedItem)return null;return (p.createElement('span',{className:"_31d6"},p.createElement(w,{entry:this.state.selectedItem,highlighted:false,label:this.state.selectedItem.getTitle(),onRemove:this.$PagesMessengerNewThreadDialog12.bind(this)})));};fa.prototype.renderTypeahead=function(){'use strict';if(this.state.selectedItem)return null;return (p.createElement(x,{className:(!this.state.selectedItem?"_1vwn":'')+(this.state.selectedItem?' '+"_29ez":'')+(' '+"_2pir"),clearable:!!this.state.selectedItem,highlightOnSelect:true,onChange:this.$PagesMessengerNewThreadDialog13.bind(this),onClear:this.$PagesMessengerNewThreadDialog12.bind(this),onSelectAttempt:this.$PagesMessengerNewThreadDialog14.bind(this),queryString:this.state.query,ref:'pageTypeahead',searchSource:this.$PagesMessengerNewThreadDialog3,selectedEntry:this.state.selectedItem,showPhoto:!!this.state.selectedItem,tallInput:false,viewStyle:'rich',xuiError:this.state.typeaheadErrorMessage}));};fa.prototype.renderTo=function(){'use strict';return (p.createElement('div',{className:"_1vwl"},p.createElement('span',{className:"_1vwm"},z._("To:")),this.renderSelectedResult(),this.renderTypeahead(),p.createElement('span',{className:"_2f3y"},z._("Pages only"))));};fa.prototype.$PagesMessengerNewThreadDialog14=function(ga){'use strict';this.refs.newThreadComposer.focusInput();this.setState({typeaheadErrorMessage:null,query:ga.getTitle(),selectedItem:ga});l.notify(m.MESSAGES_PAGE_MESSAGE_DIALOG_CHOOSE_RECIPIENT,this.props.pageID,{flowID:this.props.flowID,recipient:ga.getUniqueID()});};fa.prototype.$PagesMessengerNewThreadDialog13=function(event){'use strict';this.setState({typeaheadErrorMessage:null,query:event.target.value,selectedItem:null});};fa.prototype.$PagesMessengerNewThreadDialog12=function(){'use strict';this.setState({typeaheadErrorMessage:null,query:'',selectedItem:null});setTimeout((function(){this.refs.pageTypeahead.focusInput();}).bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog15=function(){'use strict';setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};fa.prototype.$PagesMessengerNewThreadDialog16=function(){'use strict';if(!this.state.selectedItem||this.state.selectedItem.getUniqueID().length==0){var ga=z._("Please choose a Page to receive your message");this.refs.pageTypeahead.focusInput();this.setState({typeaheadErrorMessage:ga});return false;}l.notify(m.MESSAGES_PAGE_MESSAGE_DIALOG_SEND,this.props.pageID,{flowID:this.props.flowID,recipient:this.state.selectedItem.getUniqueID()});return true;};fa.prototype.renderAttachmentShelf=function(){'use strict';return (p.createElement('div',{ref:'newThreadAttachmentsShelf',className:"_jz4"}));};fa.prototype.renderComposer=function(){'use strict';var ga=this.state.selectedItem?this.state.selectedItem.getUniqueID():'',ha='user:'+ga;return (p.createElement(o,{afterSend:this.$PagesMessengerNewThreadDialog15.bind(this),allowSend:this.$PagesMessengerNewThreadDialog16.bind(this),destinationID:ga,onKeyUp:this.$PagesMessengerNewThreadDialog10.bind(this),ref:'newThreadComposer',sourceID:this.props.pageID,threadID:ha}));};fa.prototype.componentWillReceiveProps=function(ga){'use strict';if(!this.state.initDialog&&ga.shown)this.setState({initDialog:true});};fa.prototype.renderCloseConfirmationDialog=function(){'use strict';if(!this.state.showCloseConfirmationDialog)return null;return (p.createElement(n,{shown:this.state.showCloseConfirmationDialog,onCancel:this.$PagesMessengerNewThreadDialog8.bind(this),onConfirm:this.$PagesMessengerNewThreadDialog7.bind(this)}));};fa.prototype.render=function(){'use strict';if(!this.state.initDialog)return null;return (p.createElement('div',null,p.createElement(t,{layerHideOnBlur:false,ref:'newPageMessageDialog',shown:this.props.shown,onToggle:this.$PagesMessengerNewThreadDialog11.bind(this),width:da,height:ea},p.createElement(v,{className:"_2ga7"},z._("New Message to Page")),p.createElement(u,{className:"_1vwv"},this.renderFrom(),this.renderTo(),this.renderAttachmentShelf(),this.renderComposer())),this.renderCloseConfirmationDialog()));};fa.propTypes={flowID:ca.string,onHide:ca.func.isRequired,shown:ca.bool.isRequired,pageID:ca.string.isRequired};f.exports=fa;},null);
__d('PagesMessengerMessagePageButton.react',['ix','PagesEventObserver','PagesEventType','PagesMessengerNewThreadDialog.react','React','Image.react','XUIButton.react','cx','fbglyph'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=l.PropTypes;q=babelHelpers.inherits(t,l.Component);r=q&&q.prototype;t.getButtonSize=function(u){'use strict';return u.size||'medium';};function t(u){'use strict';r.constructor.call(this,u);this.state={showDialog:false};}t.prototype.$PagesMessengerMessagePageButton1=function(){'use strict';this.setState({showDialog:false});};t.prototype.$PagesMessengerMessagePageButton2=function(){'use strict';if(this.state.showDialog)return;this.setState({showDialog:true});i.notify(j.MESSAGES_OPEN_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID});};t.prototype.render=function(){'use strict';return (l.createElement('span',{className:!this.props.pagesCommNewMessagesTab?"_3-9a":''},l.createElement(n,{className:this.props.pagesCommNewMessagesTab?"_3kr2":'',image:l.createElement(m,{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/plus_16_bluegray-40.png")}),label:'Message Page',onClick:this.$PagesMessengerMessagePageButton2.bind(this),size:this.props.size}),l.createElement(k,{flowID:this.props.flowID,shown:this.state.showDialog,onHide:this.$PagesMessengerMessagePageButton1.bind(this),pageID:this.props.pageID})));};t.propTypes={flowID:s.string,pageID:s.string.isRequired,pagesCommNewMessagesTab:s.bool};f.exports=t;},null);
__d('ChatShareLinkUploader',['AsyncRequest','CSS','DOM','URLScraper','MercuryShareLinkUploader','MercuryAttachmentTemplates','Event'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,l);p=o&&o.prototype;q.prototype.__initialize=function(r,s,t,u,v){'use strict';this.$ChatShareLinkUploader1=r;this.$ChatShareLinkUploader2=s;this.$ChatShareLinkUploader3=t;this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader6=u;this.$ChatShareLinkUploader7=v;this.$ChatShareLinkUploader8=false;n.listen(s,'keyup',(function(){!this.getInputValue().length&&this.$ChatShareLinkUploader9.enable();}).bind(this));this.$ChatShareLinkUploader9=new k(s,u);this.$ChatShareLinkUploader9.subscribe('match',(function(w,x){this.loadShare(x&&x.url);}).bind(this));this.$ChatShareLinkUploader10=1337;this.$ChatShareLinkUploader11=null;};q.prototype.getInputValue=function(){'use strict';return this.$ChatShareLinkUploader6?this.$ChatShareLinkUploader6():this.$ChatShareLinkUploader2.value;};q.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2,this.$ChatShareLinkUploader6);};q.prototype.getShareData=function(){'use strict';if(!this.$ChatShareLinkUploader4)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1);};q.prototype.close=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.disable();this.inform('closed');};q.prototype.clear=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.enable();};q.prototype.$ChatShareLinkUploader12=function(){'use strict';var r=this.$ChatShareLinkUploader11;delete this.$ChatShareLinkUploader11;if(r){j.remove(r);this.inform('dom-updated');}this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader8=false;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader9&&this.$ChatShareLinkUploader9.reset();};q.prototype.loadShareFromParams=function(r,s){'use strict';this.$ChatShareLinkUploader8=true;this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:r,share_params:s}));};q.prototype.loadShare=function(r,s){'use strict';this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_scrape.php').setData({chat:true,extra_params:JSON.stringify(s),u:r}),r);};q.prototype.loadedFromFeed=function(){'use strict';return this.$ChatShareLinkUploader8;};q.prototype.$ChatShareLinkUploader13=function(){'use strict';return ++this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader15=function(){'use strict';return this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader14=function(r,s){'use strict';this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var t=m[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploader11)j.remove(this.$ChatShareLinkUploader11);this.$ChatShareLinkUploader11=t.getRoot();n.listen(t.getNode('closeFileUpload'),'click',(function(event){this.close();event.kill();}).bind(this));j.appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader11);i.show(this.$ChatShareLinkUploader1);this.inform('dom-updated');var u=this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader5=r.setHandler((function(v){return this.$ChatShareLinkUploader16(u,v,s);}).bind(this));this.$ChatShareLinkUploader5.send();this.inform('link-detected');};q.prototype.$ChatShareLinkUploader16=function(r,s,t){'use strict';if(this.$ChatShareLinkUploader15()!==r)return;this.$ChatShareLinkUploader5=null;j.appendContent(this.$ChatShareLinkUploader11,s.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=true;this.inform('share-loaded');if(!this.getAttachData()){this.close();if(t&&this.getInputValue().indexOf(t)===-1)this.$ChatShareLinkUploader7(t);return;}i.addClass(this.$ChatShareLinkUploader11,'done');};function q(){'use strict';o.apply(this,arguments);}f.exports=q;},null);
__d('PagesMessengerShareLinkUploader',['ChatShareLinkUploader','emptyFunction','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n,o,p,q){'use strict';l.constructor.call(this,n,o,i);this.$PagesMessengerShareLinkUploader1=new j();this.$PagesMessengerShareLinkUploader1.addSubscriptions(this.subscribe(['all-uploads-completed','upload-canceled'],p),this.subscribe('submit',q));}m.prototype.destroy=function(){'use strict';this.$PagesMessengerShareLinkUploader1&&this.$PagesMessengerShareLinkUploader1.release();};f.exports=m;},null);
__d("XPagesMessagingSuggestedResponseController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/",{});},null);
__d("XPagesMessagingSuggestedResponseFeedbackController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/feedback\/",{});},null);
__d('PagesMessageSuggestedResponseHandler',['ActorURI','AsyncRequest','XPagesMessagingSuggestedResponseController','XPagesMessagingSuggestedResponseFeedbackController','invariant','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler1=o;this.$PagesMessageSuggestedResponseHandler2=p;this.$PagesMessageSuggestedResponseHandler3=false;this.$PagesMessageSuggestedResponseHandler4=false;}n.prototype.requestSuggestedResponseAsync=function(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler3=true;var q=j.getURIBuilder().getURI();new i().setURI(h.create(q,this.$PagesMessageSuggestedResponseHandler2)).setData({message:this.$PagesMessageSuggestedResponseHandler1.body}).setMethod('POST').setHandler((function(r){return this.$PagesMessageSuggestedResponseHandler5(r.payload,o);}).bind(this)).setErrorHandler(p).send();};n.prototype.sendFeedback=function(o){'use strict';!this.hasReceviedSuggestedResponse()?l(0):undefined;var p=k.getURIBuilder().getURI();new i().setURI(h.create(p,this.$PagesMessageSuggestedResponseHandler2)).setMethod('POST').setData({message_id:this.$PagesMessageSuggestedResponseHandler6,accepted:o}).send();};n.prototype.$PagesMessageSuggestedResponseHandler5=function(o,p){'use strict';if(o.messageFound)this.$PagesMessageSuggestedResponseHandler6=o.messageID;p(this.$PagesMessageSuggestedResponseHandler1.message_id,o);};n.prototype.shouldBeTreatedAsRejected=function(){'use strict';return !this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse();};n.prototype.hasReceviedSuggestedResponse=function(){'use strict';return !m(this.$PagesMessageSuggestedResponseHandler6);};n.prototype.alreadyRequested=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler3;};n.prototype.getMessageID=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler1.message_id;};n.prototype.getHasBeenAccepted=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler4;};f.exports=n;},null);
__d('PagesMessengerSuggestedResponseView.react',['LoadingIndicator.react','PagesMessageSuggestedResponseHandler','React','XUIGrayText.react','XUIButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'PagesMessengerSuggestedResponseView',propTypes:{onAccepted:o.func.isRequired,onDeclined:o.func,suggestedResponseHandler:o.instanceOf(i)},getInitialState:function(){return {shouldShowResult:false,shouldShowProgress:false,responseMessage:"",witMessageId:""};},_reset:function(){this.setState(this.getInitialState());},componentWillReceiveProps:function(q){if(q.suggestedResponseHandler!==this.props.suggestedResponseHandler){this._reset();var r=q.suggestedResponseHandler;if(!r||r.alreadyRequested())return;this.setState({shouldShowProgress:true});r.requestSuggestedResponseAsync(this._onSuggestedResponseReceived,this._onSuggestedResponseError);}},_onSuggestedResponseReceived:function(q,r){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false});if(!!r.responseMessage&&r.responseMessage.length>0)this.setState({shouldShowResult:true,responseMessage:r.responseMessage,witMessageId:r.message_id});},_onSuggestedResponseError:function(q){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false,shouldShowResult:false});},_isMessageIDCurrent:function(q){return !!this.props.suggestedResponseHandler&&q===this.props.suggestedResponseHandler.getMessageID();},render:function(){return (j.createElement('div',{className:"_710"+(' '+"_2ph-")+(!this.state.shouldShowResult&&!this.state.shouldShowProgress?' '+"hidden_elem":'')},this._renderProgressPart(),this._renderSuggestionPart()));},_renderSuggestionPart:function(){return (j.createElement('div',{className:!this.state.shouldShowResult?"hidden_elem":''},j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'light'},n._("We found a suggested reply:"))),j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'dark',className:"_711"},this.state.responseMessage)),j.createElement('div',{className:"_712"},j.createElement(k,{shade:'light',className:"_3-90"},n._("Do you want to use this reply?")),j.createElement(l,{label:n._("No"),use:'default',className:"_3-8_",onClick:this._onDeclined}),j.createElement(l,{label:n._("Yes"),use:'confirm',onClick:this._onAccepted}))));},_renderProgressPart:function(){return (j.createElement('div',{className:(!this.state.shouldShowProgress?"hidden_elem":'')+(' '+"_71d")},j.createElement(k,{shade:'light'},n._("Looking for suggested responses")),j.createElement(h,{size:'small',color:'white',className:"_3-9a"})));},_hide:function(){this.setState({shouldShowResult:false,shouldShowProgress:false});},_onAccepted:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(true);this.props.onAccepted&&this.props.onAccepted(this.state.responseMessage);},_onDeclined:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(false);this.props.onDeclined&&this.props.onDeclined();}});f.exports=p;},null);
__d('PageCustomTagSearchableEntry',['SearchableEntry'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.$PageCustomTagSearchableEntry1=l.color;}k.prototype.getColor=function(){'use strict';return this.$PageCustomTagSearchableEntry1||'';};f.exports=k;},null);
__d('PageCustomTagSearchSource',['AbstractSearchSource','PageCustomTagSearchableEntry'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k,l=3,m=null;j=babelHelpers.inherits(n,h);k=j&&j.prototype;n.getInstance=function(o,p){'use strict';if(!m)m=new n(o,p);m.setAvailableTags(o);m.setShowQueryAsEntry(p);return m;};function n(o,p){'use strict';k.constructor.call(this);if(!(m)){this.setAvailableTags(o);this.setShowQueryAsEntry(p);m=this;}}n.prototype.setAvailableTags=function(o){'use strict';this.$PageCustomTagSearchSource1=o;};n.prototype.setShowQueryAsEntry=function(o){'use strict';this.$PageCustomTagSearchSource2=o;};n.prototype.searchImpl=function(o,p,q){'use strict';var r=[],s=false;if(o){var t=o.toLowerCase();this.$PageCustomTagSearchSource1.forEach(function(w){if(w.name.toLowerCase().indexOf(t)!==-1)r.push(w);if(o===w.name)s=true;});}else r=this.$PageCustomTagSearchSource1.slice(0,l);var u=[],v=0;if(o&&!s&&this.$PageCustomTagSearchSource2)u.push(new i({order:v++,title:o,color:null,uniqueID:o}));r.forEach(function(w){u.push(new i({order:v++,title:w.name,color:'#'+w.color.substring(2),uniqueID:w.id}));});p(u,o);};f.exports=n;},null);
__d('PageCustomTagTypeaheadPresenter.react',['ContextualLayerUpdateOnScroll','PageCustomTagSearchableEntry','React','XUITypeaheadViewItem.react','TypeaheadViewPropTypes','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p,q,r,s;n=babelHelpers.inherits(t,j.Component);o=n&&n.prototype;t.prototype.render=function(){'use strict';var x=this.props.entry,y="_599m"+(this.props.highlighted?' '+"_599n":'');return (j.createElement('li',{'aria-selected':this.props.highlighted,className:y,key:x.getUniqueID(),onMouseDown:(function(z){return this.props.onSelect(x,z);}).bind(this),onMouseEnter:(function(){return this.props.onHighlight(x);}).bind(this)},j.createElement('div',{className:"_599p",style:{color:x.getColor()}},x.getTitle())));};function t(){'use strict';n.apply(this,arguments);}p=babelHelpers.inherits(u,j.Component);q=p&&p.prototype;u.prototype.$PageCustomTagsRenderer1=function(x){'use strict';return (j.createElement(t,{entry:x,key:x.getUniqueID(),highlighted:x===this.props.highlightedEntry,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect}));};u.prototype.render=function(){'use strict';var x="_599r"+(!this.props.entries.length?' '+"_599s":'');return (j.createElement('ul',{className:x},this.props.entries.map((function(y){return this.$PageCustomTagsRenderer1(y);}).bind(this))));};function u(){'use strict';p.apply(this,arguments);}r=babelHelpers.inherits(v,j.Component);s=r&&r.prototype;v.prototype.render=function(){'use strict';var x=this.props.entry;return (j.createElement('span',{className:"_4n1-",style:{color:x.getColor()}},x.getTitle()));};function v(){'use strict';r.apply(this,arguments);}var w={useLayer:true,layerBehaviors:{ContextualLayerUpdateOnScroll:h},ViewRenderer:u,TokenRenderer:v};f.exports=w;},null);
__d('NuxTour.react',['ContextualLayerBlind','CSS','LayerFadeOnHide','LayerHideOnEscape','Link.react','ReactLayeredComponentMixin','React','XUIContextualDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialog.react','XUIDialogTitle.react','XUIGrayText.react','cx','fbt','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=n.PropTypes,aa=n.createClass({displayName:'NuxTour',mixins:[m],propTypes:{width:z.number,contextualWidth:z.number,steps:z.array.isRequired,visible:z.bool.isRequired,bodyClassName:z.string,footerClassName:z.string,useCustomPadding:z.bool,notNowStep:z.object,hideOnBlur:z.bool,title:z.node,initialStep:z.number,onHide:z.func,onCompleted:z.func,onNotNowClicked:z.func,onStepChange:z.func,showCloseButton:z.bool},getInitialState:function(){this._focused=null;return {isRerender:false,overlayShown:false,step:this.props.initialStep,notNowClicked:false};},getDefaultProps:function(){return {initialStep:0,width:600,hideOnBlur:true,showCloseButton:false};},render:function(){return (n.createElement('div',{className:"_4bf6"+(!this.state.overlayShown?' '+"hidden_elem":'')}));},getCurrentStep:function(){return this.state.step;},_getCurrentStepConfig:function(){if(this.state.notNowClicked)return this.props.notNowStep;return this.props.steps[this.state.step];},_isStepContextual:function(){return !!this._getCurrentStepConfig().isContextual;},_getContextNode:function(){return this._getCurrentStepConfig().context;},_getContextPosition:function(){return this._getCurrentStepConfig().position;},_getContextAlignment:function(){return this._getCurrentStepConfig().alignment;},_getFocusContext:function(){return !!this._getCurrentStepConfig().focusContext;},_getDialogOffsetX:function(){var ba=this._getCurrentStepConfig().offsetX;if(!ba)return 0;return ba;},_getDialogOffsetY:function(){var ba=this._getCurrentStepConfig().offsetY;if(!ba)return 0;return ba;},_renderCurrentStep:function(){return this._getCurrentStepConfig().render();},renderLayers:function(){var ba=y("_4bf7"+(this.state.step===0?' '+"_4bf8":''),this.props.bodyClassName),ca=null;if(this.props.visible&&this._isStepContextual()){var da={};if(this._getFocusContext())da={ContextualLayerBlind:h};ca=n.createElement(o,{shown:true,position:this._getContextPosition(),context:this._getContextNode(),alignment:this._getContextAlignment(),offsetX:this._getDialogOffsetX(),offsetY:this._getDialogOffsetY(),behaviors:da,width:this.props.contextualWidth},this._renderCurrentStep(),this._renderFooter());}var ea=null;if(this.props.visible&&!this._isStepContextual()){var fa=null;if(this.props.title)fa=n.createElement(t,null,this.props.title);ea=n.createElement(s,{width:this.props.width,behaviors:{LayerFadeOnHide:j,LayerHideOnEscape:k},layerHideOnBlur:this.props.hideOnBlur,shown:true,ref:'dialog'},fa,n.createElement(p,{className:ba,useCustomPadding:this.props.useCustomPadding},this._renderCurrentStep()),this._renderFooter());}return {dialog:ea,contextualDialog:ca};},_renderFooter:function(){var ba=y("_4bf9",this.props.footerClassName);if(this.state.step===0&&!this.state.notNowClicked){var ca=n.createElement(l,{onClick:this._notNowClicked},w._("Not Now"));return (n.createElement(r,{className:ba,leftContent:ca},n.createElement(q,{use:'confirm',action:'button',onClick:this.nextStep,label:w._("Take Tour")})));}var da;if(this.state.step!==1&&!this.state.notNowClicked)da=n.createElement(q,{use:'default',action:'button',onClick:this.prevStep,label:w._("Back")});var ea=this._getCurrentStepConfig().nextButtonText||w._("Next");if(this._isLastStep(this.state.step))ea=this._getCurrentStepConfig().doneButtonText||w._("Done");return (n.createElement(r,{className:ba,leftContent:this._renderLeftContent()},this._renderStepExtraFooterContent(),da,n.createElement(q,{use:'confirm',action:'button',onClick:this.nextStep,label:ea})));},_renderStepExtraFooterContent:function(){var ba=this._getCurrentStepConfig();if(!ba)return null;if(ba.renderFooterExtraContent)return ba.renderFooterExtraContent();},_isLastStep:function(ba){return (this.state.step===this.props.steps.length-1||this.state.notNowClicked);},_renderCloseButton:function(){if(this._isLastStep(this.state.step))return null;return this.props.showCloseButton?n.createElement(l,{onClick:this.closeNux},w._("Close")):null;},_renderLeftContent:function(){var ba=this._renderStepsCounter();if(ba)return ba;return this._renderCloseButton();},_renderStepsCounter:function(){if(!this.props.showStepsCounter||this.state.notNowClicked)return null;!(this.props.steps.length<100)?x(0):undefined;return (n.createElement(u,{size:'small'},w._("{current step #} of {total # of steps}",[w.param('current step #',this.state.step),w.param('total # of steps',this.props.steps.length-1)])));},hide:function(){this._unfocus();this._hideOverlay();if(this.props.onHide)this.props.onHide();},nextStep:function(){if(this._isLastStep(this.state.step)){this.hide();if(this.props.onCompleted&&!this.state.notNowClicked)this.props.onCompleted();return;}this.goToStep(this.state.step+1);},closeNux:function(){this.hide();if(this.props.onCompleted&&!this.state.notNowClicked)this.props.onCompleted();return;},prevStep:function(){if(this.state.step===0){this.hide();return;}this.goToStep(this.state.step-1);},goToStep:function(ba){this.setState({step:ba});if(this.props.onStepChange)this.props.onStepChange(ba);},_notNowClicked:function(){if(this.props.notNowStep){this.setState({notNowClicked:true});}else this.hide();if(this.props.onNotNowClicked)this.props.onNotNowClicked();},_focusElementsForCurrentStep:function(){if(this.state.isRerender){this.state.isRerender=false;return;}this._unfocus();var ba=this._getCurrentStepConfig().focus;if(ba){this._showOverlay();this._focused=[];ba.forEach(this._focusElement);}else this._hideOverlay();},_focusElement:function(ba){this._focused.push(ba);i.addClass(ba,"_4bfa");},_unfocus:function(){if(this._focused){this._focused.forEach(function(ba){return i.removeClass(ba,"_4bfa");});this._focused=null;}},_hideOverlay:function(){this.setState({isRerender:true,overlayShown:false});},_showOverlay:function(){this.setState({isRerender:true,overlayShown:true});},componentDidUpdate:function(){this._focusElementsForCurrentStep();window.setTimeout((function(){this.refs.dialog&&this.refs.dialog.layer.updatePosition();}).bind(this),5);}});f.exports=aa;},null);
__d('NuxTourContextualStep.react',['LeftRight.react','React','XUICloseButton.react','XUIText.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'NuxTourContextualStep',propTypes:{title:n.string.isRequired,showCloseButton:n.bool,onClose:n.func},getDefaultProps:function(){return {showCloseButton:true,onClose:function(){}};},render:function(){var p=null;if(this.props.showCloseButton)p=i.createElement(j,{className:"layerCancel",size:'small',label:m._("Close"),onClick:this.props.onClose});return (i.createElement('div',{className:"_2sjz pam"},i.createElement(h,null,i.createElement(k,{size:'medium',weight:'bold',display:'block',className:'pbs'},this.props.title),p),this.props.children));}});f.exports=o;},null);
__d('BUISwitch.react',['Event','Keys','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'BUISwitch',propTypes:{animate:m.bool,disabled:m.bool,onToggle:m.func,showLabel:m.bool,value:m.bool.isRequired},getDefaultProps:function(){return {animate:true};},render:function(){return (j.createElement('div',babelHelpers._extends({},this.props,{className:"_128j"+(this.props.value?' '+"_128k":'')+(!this.props.value?' '+"_128l":'')+(this.props.disabled?' '+"_128m":'')+(this.props.animate?' '+"_128n":''),role:'checkbox','aria-checked':this.props.value?'true':'false'}),j.createElement('div',{className:"_128o",onClick:this._onClick,onKeyDown:this._onKeyDown,onMouseDown:this._preventFocus,tabIndex:this.props.disabled?'-1':'0'},j.createElement('div',{className:"_128p"})),this._renderLabel()));},_renderLabel:function(){if(!this.props.showLabel)return null;return (j.createElement('span',{className:"_128q"},this.props.value?l._("ON"):l._("OFF")));},_onClick:function(event){if(this.props.disabled)return;this.props.onToggle&&this.props.onToggle(!this.props.value);},_onKeyDown:function(event){if(this.props.disabled)return;var o=h.getKeyCode(event);if(o===i.RETURN||o===i.SPACE)this.props.onToggle&&this.props.onToggle(!this.props.value);},_preventFocus:function(event){event.preventDefault();}});f.exports=n;},null);
__d('ResizeListener',['EventListener','SubscriptionList','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k,l=false,m=new i(function(){k=h.listen(window,'resize',n);},function(){k.remove();});function n(){if(!l){l=true;j(function(){m.fireCallbacks();l=false;});}}f.exports=m;},null);
__d('PagesManagerPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(){this.clear();}k.prototype.log=function(){i.log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$PagesManagerPerfTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$PagesManagerPerfTypedLogger1=babelHelpers._extends({},this.$PagesManagerPerfTypedLogger1,m);return this;};k.prototype.setEventName=function(m){this.$PagesManagerPerfTypedLogger1.event_name=m;return this;};k.prototype.setEventSeriesID=function(m){this.$PagesManagerPerfTypedLogger1.event_series_id=m;return this;};k.prototype.setPageID=function(m){this.$PagesManagerPerfTypedLogger1.page_id=m;return this;};k.prototype.setPerfTime=function(m){this.$PagesManagerPerfTypedLogger1.perf_time=m;return this;};k.prototype.setVC=function(m){this.$PagesManagerPerfTypedLogger1.vc=m;return this;};var l={event_name:true,event_series_id:true,page_id:true,perf_time:true,vc:true};f.exports=k;},null);
__d('MercuryPageThreadActions',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);}n.prototype.addFlag=function(o,p){'use strict';this.batchFlag([o],p);};n.prototype.batchAddFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.addThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,true,p));};n.prototype.removeFlag=function(o,p){'use strict';this.batchRemoveFlag([o],p);};n.prototype.batchRemoveFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.removeThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,false,p));};n.prototype.$MercuryPageThreadActions1=function(o,p,q){'use strict';return this.__constructClientPayload(o,h.CHANGE_FLAG,i.CLIENT_CHANGE_FLAG,{mark_as_flag:p,source:q});};Object.assign(n,j,{_instances:{}});f.exports=n;},null);
__d('MessengerErrorAttachment.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h.Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){return (h.createElement('div',{className:"_1o12 _52mr"},h.createElement('div',{className:"_1o13"},this.props.attachment.error_msg)));};f.exports=l;},null);
__d('MessengerFileAttachment.react',['Link.react','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerFileAttachment',mixins:[i],propTypes:{attachment:l.object.isRequired},render:function(){return (j.createElement(h,{className:"_4pcn _2uf4",href:this.props.attachment.url},j.createElement('div',{className:"_2uf5"}),this.props.attachment.name));}});f.exports=m;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.props.children)));},_onClick:function(u){u.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(u){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle)return j.createElement(h,{alt:'',src:u.src});return null;}});f.exports=t;},null);
__d('MessengerVideo.react',['Image.react','MessengerPhoto.react','ReactComponentWithPureRenderMixin','React','cx','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=k.createClass({displayName:'MessengerVideo',mixins:[j],propTypes:{attachment:o.object.isRequired,isSingle:o.bool.isRequired,onClick:o.func},render:function(){return (k.createElement(i,babelHelpers._extends({},this.props,{className:n(this.props.className,"_ccq")}),k.createElement(h,{className:"_ccr",src:m('/images/chat/chat_play_icon.png')}),k.createElement('span',{className:"_ccs"},this._getDuration())));},_getDuration:function(){var q;if(!!this.props.attachment.metadata){q=this.props.attachment.metadata.duration;}else if(!!this.props.attachment.media)q=this.props.attachment.media.duration;return !!q?this._formatDuration(q):null;},_formatDuration:function(q){var r=q%60;return Math.floor(q/60)+':'+(r<10?'0':'')+r;}});f.exports=p;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r='empty-spacer',s=n.PropTypes,t=n.createClass({displayName:'MessengerPhotosGroup',mixins:[m],propTypes:{attachType:s.string,attachments:s.arrayOf(s.object).isRequired,message:s.object},componentDidMount:function(){l.preload();},render:function(){var u=this.props.attachments;return (n.createElement('div',babelHelpers._extends({},this.props,{className:this._getRootClassNameFor(u)}),this._rowsFor(u)));},_onChildClicked:function(u){if(u.preview_uploading)return;if(u.attach_type===i.VIDEO){l.renderVideo({rootClassName:"_1j1h",videoID:u.metadata.fbid,videoSize:new o(u.metadata.dimensions.width,u.metadata.dimensions.height),videoURI:u.url});}else if(u.attach_type===i.PHOTO||u.attach_type===i.ANIMATED_IMAGE){l.bootstrapWithConfig({dimensions:u.metadata.dimensions,disablePaging:this.props.attachments.length===1,endpoint:u.url,fbid:u.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:u.preview_url});}else if(u.uri)window.open(u.uri);},_rowsFor:function(u){if(u.length===1)return [this._photo(u[0],true)];var v=3;if(u.length===2||u.length===4)v=2;var w=[];for(var x=0,y=u.length;x<y;x+=v){var z=u.slice(x,x+v),aa=v-z.length;while(aa>0){z.push({attach_type:r,key:'ghost'+aa});aa--;}w.push(n.createElement('div',{className:"_2n8g",key:x},z.map((function(ba){return this._photo(ba);}).bind(this))));}return w;},_photo:function(u,v){var w;if(u.deduplication_key){w=u.deduplication_key;}else if(u.metadata){w=u.metadata.fbid;}else w=u.upload_id;var x={attachment:u,isSingle:v||false,key:w,onClick:this._onChildClicked},y=this.props.attachType||u.attach_type;switch(y){case i.PHOTO:case i.ANIMATED_IMAGE:return n.createElement(j,x);case i.VIDEO:if(u.metadata&&u.metadata.render_as_sticker)return (n.createElement(h,{videoSize:u.metadata.dimensions,videoURI:u.url}));return n.createElement(k,x);case r:return (n.createElement('div',{key:u.key,className:"_4tsk _4rf-"}));default:throw u.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(u){var v=u.length===2||u.length===4;return q(this.props.className,"_2n8h"+(u.length===1?' '+"_2n8i":'')+(v?' '+"_4ksk":'')+(u.length>1&&!v?' '+"_2n8k":''));}});f.exports=t;},null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l){return !!(l&&l.attach_type===h.STICKER);}function j(l){var m=l.attachments;return !!(l.is_like_preview||l.sticker_id||m&&m.length===1&&i(m[0]));}function k(l){return l.size===1&&j(l.first());}f.exports={isStickerMessageGroup:k,isStickerMessage:j,isStickerAttachment:i};},null);
__d("chroma",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();(function(){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic=[].slice;dc=(function(){var jc,kc,lc,mc,nc;jc={};nc="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(mc=0,kc=nc.length;mc<kc;mc++){lc=nc[mc];jc["[object "+lc+"]"]=lc.toLowerCase();}return function(oc){var pc;pc=Object.prototype.toString.call(oc);return jc[pc]||"object";};})();za=function(jc,kc,lc){if(kc==null)kc=0;if(lc==null)lc=1;if(jc<kc)jc=kc;if(jc>lc)jc=lc;return jc;};ec=function(jc){if(jc.length>=3){return [].slice.call(jc);}else return jc[0];};aa=function(jc){var kc;for(kc in jc)if(kc<3){if(jc[kc]<0)jc[kc]=0;if(jc[kc]>255)jc[kc]=255;}else if(kc===3){if(jc[kc]<0)jc[kc]=0;if(jc[kc]>1)jc[kc]=1;}return jc;};k=Math.PI,yb=Math.round,da=Math.cos,ia=Math.floor,ib=Math.pow,ab=Math.log,ac=Math.sin,bc=Math.sqrt,t=Math.atan2,db=Math.max,s=Math.abs;n=k*2;l=k/3;i=k/180;m=180/k;z=function(){if(arguments[0] instanceof h)return arguments[0];return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,arguments,function(){});};r=[];if((typeof f!=="undefined"&&f!==null)&&(f.exports!=null))f.exports=z;if(typeof define==='function'&&define.amd){define([],function(){return z;});}else{xb=typeof g!=="undefined"&&g!==null?g:this;xb.chroma=z;}z.version='1.1.1';q={};o=[];p=false;h=(function(){function jc(){var kc,lc,mc,nc,oc,pc,qc,rc,sc;pc=this;lc=[];for(rc=0,nc=arguments.length;rc<nc;rc++){kc=arguments[rc];if(kc!=null)lc.push(kc);}qc=lc[lc.length-1];if(q[qc]!=null){pc._rgb=aa(q[qc](ec(lc.slice(0,-1))));}else{if(!p){o=o.sort(function(tc,uc){return uc.p-tc.p;});p=true;}for(sc=0,oc=o.length;sc<oc;sc++){mc=o[sc];qc=mc.test.apply(mc,lc);if(qc)break;}if(qc)pc._rgb=aa(q[qc].apply(q,lc));}pc._rgb==null;if(pc._rgb==null)pc._rgb=[0,0,0];if(pc._rgb.length===3)pc._rgb.push(1);}jc.prototype.alpha=function(kc){if(arguments.length){this._rgb[3]=kc;return this;}return this._rgb[3];};jc.prototype.toString=function(){return this.name();};return jc;})();z._input=q;z.brewer=x={OrRd:['#fff7ec','#fee8c8','#fdd49e','#fdbb84','#fc8d59','#ef6548','#d7301f','#b30000','#7f0000'],PuBu:['#fff7fb','#ece7f2','#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858'],BuPu:['#f7fcfd','#e0ecf4','#bfd3e6','#9ebcda','#8c96c6','#8c6bb1','#88419d','#810f7c','#4d004b'],Oranges:['#fff5eb','#fee6ce','#fdd0a2','#fdae6b','#fd8d3c','#f16913','#d94801','#a63603','#7f2704'],BuGn:['#f7fcfd','#e5f5f9','#ccece6','#99d8c9','#66c2a4','#41ae76','#238b45','#006d2c','#00441b'],YlOrBr:['#ffffe5','#fff7bc','#fee391','#fec44f','#fe9929','#ec7014','#cc4c02','#993404','#662506'],YlGn:['#ffffe5','#f7fcb9','#d9f0a3','#addd8e','#78c679','#41ab5d','#238443','#006837','#004529'],Reds:['#fff5f0','#fee0d2','#fcbba1','#fc9272','#fb6a4a','#ef3b2c','#cb181d','#a50f15','#67000d'],RdPu:['#fff7f3','#fde0dd','#fcc5c0','#fa9fb5','#f768a1','#dd3497','#ae017e','#7a0177','#49006a'],Greens:['#f7fcf5','#e5f5e0','#c7e9c0','#a1d99b','#74c476','#41ab5d','#238b45','#006d2c','#00441b'],YlGnBu:['#ffffd9','#edf8b1','#c7e9b4','#7fcdbb','#41b6c4','#1d91c0','#225ea8','#253494','#081d58'],Purples:['#fcfbfd','#efedf5','#dadaeb','#bcbddc','#9e9ac8','#807dba','#6a51a3','#54278f','#3f007d'],GnBu:['#f7fcf0','#e0f3db','#ccebc5','#a8ddb5','#7bccc4','#4eb3d3','#2b8cbe','#0868ac','#084081'],Greys:['#ffffff','#f0f0f0','#d9d9d9','#bdbdbd','#969696','#737373','#525252','#252525','#000000'],YlOrRd:['#ffffcc','#ffeda0','#fed976','#feb24c','#fd8d3c','#fc4e2a','#e31a1c','#bd0026','#800026'],PuRd:['#f7f4f9','#e7e1ef','#d4b9da','#c994c7','#df65b0','#e7298a','#ce1256','#980043','#67001f'],Blues:['#f7fbff','#deebf7','#c6dbef','#9ecae1','#6baed6','#4292c6','#2171b5','#08519c','#08306b'],PuBuGn:['#fff7fb','#ece2f0','#d0d1e6','#a6bddb','#67a9cf','#3690c0','#02818a','#016c59','#014636'],Spectral:['#9e0142','#d53e4f','#f46d43','#fdae61','#fee08b','#ffffbf','#e6f598','#abdda4','#66c2a5','#3288bd','#5e4fa2'],RdYlGn:['#a50026','#d73027','#f46d43','#fdae61','#fee08b','#ffffbf','#d9ef8b','#a6d96a','#66bd63','#1a9850','#006837'],RdBu:['#67001f','#b2182b','#d6604d','#f4a582','#fddbc7','#f7f7f7','#d1e5f0','#92c5de','#4393c3','#2166ac','#053061'],PiYG:['#8e0152','#c51b7d','#de77ae','#f1b6da','#fde0ef','#f7f7f7','#e6f5d0','#b8e186','#7fbc41','#4d9221','#276419'],PRGn:['#40004b','#762a83','#9970ab','#c2a5cf','#e7d4e8','#f7f7f7','#d9f0d3','#a6dba0','#5aae61','#1b7837','#00441b'],RdYlBu:['#a50026','#d73027','#f46d43','#fdae61','#fee090','#ffffbf','#e0f3f8','#abd9e9','#74add1','#4575b4','#313695'],BrBG:['#543005','#8c510a','#bf812d','#dfc27d','#f6e8c3','#f5f5f5','#c7eae5','#80cdc1','#35978f','#01665e','#003c30'],RdGy:['#67001f','#b2182b','#d6604d','#f4a582','#fddbc7','#ffffff','#e0e0e0','#bababa','#878787','#4d4d4d','#1a1a1a'],PuOr:['#7f3b08','#b35806','#e08214','#fdb863','#fee0b6','#f7f7f7','#d8daeb','#b2abd2','#8073ac','#542788','#2d004b'],Set2:['#66c2a5','#fc8d62','#8da0cb','#e78ac3','#a6d854','#ffd92f','#e5c494','#b3b3b3'],Accent:['#7fc97f','#beaed4','#fdc086','#ffff99','#386cb0','#f0027f','#bf5b17','#666666'],Set1:['#e41a1c','#377eb8','#4daf4a','#984ea3','#ff7f00','#ffff33','#a65628','#f781bf','#999999'],Set3:['#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#ccebc5','#ffed6f'],Dark2:['#1b9e77','#d95f02','#7570b3','#e7298a','#66a61e','#e6ab02','#a6761d','#666666'],Paired:['#a6cee3','#1f78b4','#b2df8a','#33a02c','#fb9a99','#e31a1c','#fdbf6f','#ff7f00','#cab2d6','#6a3d9a','#ffff99','#b15928'],Pastel2:['#b3e2cd','#fdcdac','#cbd5e8','#f4cae4','#e6f5c9','#fff2ae','#f1e2cc','#cccccc'],Pastel1:['#fbb4ae','#b3cde3','#ccebc5','#decbe4','#fed9a6','#ffffcc','#e5d8bd','#fddaec','#f2f2f2']};fc={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"};z.colors=ca=fc;ua=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc;kc=ec(arguments);nc=kc[0],jc=kc[1],lc=kc[2];qc=(nc+16)/116;pc=isNaN(jc)?qc:qc+jc/500;rc=isNaN(lc)?qc:qc-lc/200;qc=j.Yn*va(qc);pc=j.Xn*va(pc);rc=j.Zn*va(rc);oc=hc(3.2404542*pc-1.5371385*qc-.4985314*rc);mc=hc(-.969266*pc+1.8760108*qc+.041556*rc);lc=hc(.0556434*pc-.2040259*qc+1.0572252*rc);oc=za(oc,0,255);mc=za(mc,0,255);lc=za(lc,0,255);return [oc,mc,lc,kc.length>3?kc[3]:1];};hc=function(jc){return yb(255*(jc<=.00304?12.92*jc:1.055*ib(jc,1/2.4)-.055));};va=function(jc){if(jc>j.t1){return jc*jc*jc;}else return j.t2*(jc-j.t0);};j={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452};pb=function(){var jc,kc,lc,mc,nc,oc,pc,qc;mc=ec(arguments),lc=mc[0],kc=mc[1],jc=mc[2];nc=ub(lc,kc,jc),oc=nc[0],pc=nc[1],qc=nc[2];return [116*pc-16,500*(oc-pc),200*(pc-qc)];};vb=function(jc){if((jc/=255)<=.04045){return jc/12.92;}else return ib((jc+.055)/1.055,2.4);};gc=function(jc){if(jc>j.t3){return ib(jc,1/3);}else return jc/j.t2+j.t0;};ub=function(){var jc,kc,lc,mc,nc,oc,pc;mc=ec(arguments),lc=mc[0],kc=mc[1],jc=mc[2];lc=vb(lc);kc=vb(kc);jc=vb(jc);nc=gc((.4124564*lc+.3575761*kc+.1804375*jc)/j.Xn);oc=gc((.2126729*lc+.7151522*kc+.072175*jc)/j.Yn);pc=gc((.0193339*lc+.119192*kc+.9503041*jc)/j.Zn);return [nc,oc,pc];};z.lab=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['lab']),function(){});};q.lab=ua;h.prototype.lab=function(){return pb(this._rgb);};u=function(jc){var kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc;jc=(function(){var vc,wc,xc;xc=[];for(wc=0,vc=jc.length;wc<vc;wc++){nc=jc[wc];xc.push(z(nc));}return xc;})();if(jc.length===2){sc=(function(){var vc,wc,xc;xc=[];for(wc=0,vc=jc.length;wc<vc;wc++){nc=jc[wc];xc.push(nc.lab());}return xc;})(),oc=sc[0],pc=sc[1];kc=function(vc){var wc,xc;xc=(function(){var yc,zc;zc=[];for(wc=yc=0;yc<=2;wc=++yc)zc.push(oc[wc]+vc*(pc[wc]-oc[wc]));return zc;})();return z.lab.apply(z,xc);};}else if(jc.length===3){tc=(function(){var vc,wc,xc;xc=[];for(wc=0,vc=jc.length;wc<vc;wc++){nc=jc[wc];xc.push(nc.lab());}return xc;})(),oc=tc[0],pc=tc[1],qc=tc[2];kc=function(vc){var wc,xc;xc=(function(){var yc,zc;zc=[];for(wc=yc=0;yc<=2;wc=++yc)zc.push((1-vc)*(1-vc)*oc[wc]+2*(1-vc)*vc*pc[wc]+vc*vc*qc[wc]);return zc;})();return z.lab.apply(z,xc);};}else if(jc.length===4){uc=(function(){var vc,wc,xc;xc=[];for(wc=0,vc=jc.length;wc<vc;wc++){nc=jc[wc];xc.push(nc.lab());}return xc;})(),oc=uc[0],pc=uc[1],qc=uc[2],rc=uc[3];kc=function(vc){var wc,xc;xc=(function(){var yc,zc;zc=[];for(wc=yc=0;yc<=2;wc=++yc)zc.push((1-vc)*(1-vc)*(1-vc)*oc[wc]+3*(1-vc)*(1-vc)*vc*pc[wc]+3*(1-vc)*vc*vc*qc[wc]+vc*vc*vc*rc[wc]);return zc;})();return z.lab.apply(z,xc);};}else if(jc.length===5){lc=u(jc.slice(0,3));mc=u(jc.slice(2,5));kc=function(vc){if(vc<.5){return lc(vc*2);}else return mc((vc-.5)*2);};}return kc;};z.bezier=function(jc){var kc;kc=u(jc);kc.scale=function(){return z.scale(kc);};return kc;};z.cubehelix=function(jc,kc,lc,mc,nc){var oc,pc,qc;if(jc==null)jc=300;if(kc==null)kc=-1.5;if(lc==null)lc=1;if(mc==null)mc=1;if(nc==null)nc=[0,1];pc=nc[1]-nc[0];oc=0;qc=function(rc){var sc,tc,uc,vc,wc,xc,yc,zc,ad;sc=n*((jc+120)/360+kc*rc);yc=ib(nc[0]+pc*rc,mc);xc=oc!==0?lc[0]+rc*oc:lc;tc=xc*yc*(1-yc)/2;vc=da(sc);ad=ac(sc);zc=yc+tc*(-.14861*vc+1.78277*ad);wc=yc+tc*(-.29227*vc-.90649*ad);uc=yc+tc*(+1.97294*vc);return z(aa([zc*255,wc*255,uc*255]));};qc.start=function(rc){if(rc==null)return jc;jc=rc;return qc;};qc.rotations=function(rc){if(rc==null)return kc;kc=rc;return qc;};qc.gamma=function(rc){if(rc==null)return mc;mc=rc;return qc;};qc.hue=function(rc){if(rc==null)return lc;lc=rc;if(dc(lc)==='array'){oc=lc[1]-lc[0];if(oc===0)lc=lc[1];}else oc=0;return qc;};qc.lightness=function(rc){if(rc==null)return nc;nc=rc;if(dc(nc)==='array'){pc=nc[1]-nc[0];if(pc===0)nc=nc[1];}else pc=0;return qc;};qc.scale=function(){return z.scale(qc);};qc.hue(lc);return qc;};z.random=function(){var jc,kc,lc,mc;kc='0123456789abcdef';jc='#';for(lc=mc=0;mc<6;lc=++mc)jc+=kc.charAt(ia(Math.random()*16));return new h(jc);};q.rgb=function(){var jc,kc,lc,mc;kc=ec(arguments);lc=[];for(jc in kc){mc=kc[jc];lc.push(mc);}return lc;};z.rgb=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['rgb']),function(){});};h.prototype.rgb=function(){return this._rgb.slice(0,3);};h.prototype.rgba=function(){return this._rgb;};o.push({p:15,test:function(jc){var kc;kc=ec(arguments);if(dc(kc)==='array'&&kc.length===3)return 'rgb';if(kc.length===4&&dc(kc[3])==="number"&&kc[3]>=0&&kc[3]<=1)return 'rgb';}});ja=function(jc){var kc,lc,mc,nc,oc,pc;if(jc.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){if(jc.length===4||jc.length===7)jc=jc.substr(1);if(jc.length===3){jc=jc.split("");jc=jc[0]+jc[0]+jc[1]+jc[1]+jc[2]+jc[2];}pc=parseInt(jc,16);nc=pc>>16;mc=pc>>8&255;lc=pc&255;return [nc,mc,lc,1];}if(jc.match(/^#?([A-Fa-f0-9]{8})$/)){if(jc.length===9)jc=jc.substr(1);pc=parseInt(jc,16);nc=pc>>24&255;mc=pc>>16&255;lc=pc>>8&255;kc=yb((pc&255)/255*100)/100;return [nc,mc,lc,kc];}if((q.css!=null)&&(oc=q.css(jc)))return oc;throw "unknown color: "+jc;};lb=function(jc,kc){var lc,mc,nc,oc,pc,qc,rc;if(kc==null)kc='rgb';pc=jc[0],nc=jc[1],mc=jc[2],lc=jc[3];rc=pc<<16|nc<<8|mc;qc="000000"+rc.toString(16);qc=qc.substr(qc.length-6);oc='0'+yb(lc*255).toString(16);oc=oc.substr(oc.length-2);return "#"+(function(){switch(kc.toLowerCase()){case 'rgba':return qc+oc;case 'argb':return oc+qc;default:return qc;}})();};q.hex=function(jc){return ja(jc);};z.hex=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['hex']),function(){});};h.prototype.hex=function(jc){if(jc==null)jc='rgb';return lb(this._rgb,jc);};o.push({p:10,test:function(jc){if(arguments.length===1&&dc(jc)==="string")return 'hex';}});ma=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc;jc=ec(arguments);nc=jc[0],tc=jc[1],pc=jc[2];if(tc===0){rc=mc=kc=pc*255;}else{wc=[0,0,0];lc=[0,0,0];vc=pc<.5?pc*(1+tc):pc+tc-pc*tc;uc=2*pc-vc;nc/=360;wc[0]=nc+1/3;wc[1]=nc;wc[2]=nc-1/3;for(oc=qc=0;qc<=2;oc=++qc){if(wc[oc]<0)wc[oc]+=1;if(wc[oc]>1)wc[oc]-=1;if(6*wc[oc]<1){lc[oc]=uc+(vc-uc)*6*wc[oc];}else if(2*wc[oc]<1){lc[oc]=vc;}else if(3*wc[oc]<2){lc[oc]=uc+(vc-uc)*((2/3)-wc[oc])*6;}else lc[oc]=uc;}sc=[yb(lc[0]*255),yb(lc[1]*255),yb(lc[2]*255)],rc=sc[0],mc=sc[1],kc=sc[2];}if(jc.length>3){return [rc,mc,kc,jc[3]];}else return [rc,mc,kc];};nb=function(jc,kc,lc){var mc,nc,oc,pc,qc;if(jc!==void 0&&jc.length>=3)pc=jc,jc=pc[0],kc=pc[1],lc=pc[2];jc/=255;kc/=255;lc/=255;oc=Math.min(jc,kc,lc);db=Math.max(jc,kc,lc);nc=(db+oc)/2;if(db===oc){qc=0;mc=Number.NaN;}else qc=nc<.5?(db-oc)/(db+oc):(db-oc)/(2-db-oc);if(jc===db){mc=(kc-lc)/(db-oc);}else if(kc===db){mc=2+(lc-jc)/(db-oc);}else if(lc===db)mc=4+(jc-kc)/(db-oc);mc*=60;if(mc<0)mc+=360;return [mc,qc,nc];};z.hsl=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['hsl']),function(){});};q.hsl=ma;h.prototype.hsl=function(){return nb(this._rgb);};na=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad;jc=ec(arguments);nc=jc[0],yc=jc[1],ad=jc[2];ad*=255;if(yc===0){rc=mc=kc=ad;}else{if(nc===360)nc=0;if(nc>360)nc-=360;if(nc<0)nc+=360;nc/=60;oc=ia(nc);lc=nc-oc;pc=ad*(1-yc);qc=ad*(1-yc*lc);zc=ad*(1-yc*(1-lc));switch(oc){case 0:sc=[ad,zc,pc],rc=sc[0],mc=sc[1],kc=sc[2];break;case 1:tc=[qc,ad,pc],rc=tc[0],mc=tc[1],kc=tc[2];break;case 2:uc=[pc,ad,zc],rc=uc[0],mc=uc[1],kc=uc[2];break;case 3:vc=[pc,qc,ad],rc=vc[0],mc=vc[1],kc=vc[2];break;case 4:wc=[zc,pc,ad],rc=wc[0],mc=wc[1],kc=wc[2];break;case 5:xc=[ad,pc,qc],rc=xc[0],mc=xc[1],kc=xc[2];}}rc=yb(rc);mc=yb(mc);kc=yb(kc);return [rc,mc,kc,jc.length>3?jc[3]:1];};ob=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc;pc=ec(arguments),oc=pc[0],lc=pc[1],jc=pc[2];nc=Math.min(oc,lc,jc);db=Math.max(oc,lc,jc);kc=db-nc;rc=db/255;if(db===0){mc=Number.NaN;qc=0;}else{qc=kc/db;if(oc===db)mc=(lc-jc)/kc;if(lc===db)mc=2+(jc-oc)/kc;if(jc===db)mc=4+(oc-lc)/kc;mc*=60;if(mc<0)mc+=360;}return [mc,qc,rc];};z.hsv=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['hsv']),function(){});};q.hsv=na;h.prototype.hsv=function(){return ob(this._rgb);};gb=function(jc){var kc,lc,mc;if(dc(jc)==="number"&&jc>=0&&jc<=16777215){mc=jc>>16;lc=(jc>>8)&255;kc=jc&255;return [mc,lc,kc,1];}return [0,0,0,1];};sb=function(){var jc,kc,lc,mc;mc=ec(arguments),lc=mc[0],kc=mc[1],jc=mc[2];return (lc<<16)+(kc<<8)+jc;};z.num=function(jc){return new h(jc,'num');};h.prototype.num=function(jc){if(jc==null)jc='rgb';return sb(this._rgb,jc);};q.num=gb;o.push({p:10,test:function(jc){if(arguments.length===1&&dc(jc)==="number"&&jc>=0&&jc<=16777215)return 'num';}});ea=function(jc){var kc,lc,mc,nc,oc,pc,qc,rc;jc=jc.toLowerCase();if((z.colors!=null)&&z.colors[jc])return ja(z.colors[jc]);if(oc=jc.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){qc=oc.slice(1,4);for(nc=pc=0;pc<=2;nc=++pc)qc[nc]=+qc[nc];qc[3]=1;}else if(oc=jc.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/)){qc=oc.slice(1,5);for(nc=rc=0;rc<=3;nc=++rc)qc[nc]=+qc[nc];}else if(oc=jc.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){qc=oc.slice(1,4);for(nc=kc=0;kc<=2;nc=++kc)qc[nc]=yb(qc[nc]*2.55);qc[3]=1;}else if(oc=jc.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){qc=oc.slice(1,5);for(nc=lc=0;lc<=2;nc=++lc)qc[nc]=yb(qc[nc]*2.55);qc[3]=+qc[3];}else if(oc=jc.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){mc=oc.slice(1,4);mc[1]*=.01;mc[2]*=.01;qc=ma(mc);qc[3]=1;}else if(oc=jc.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){mc=oc.slice(1,4);mc[1]*=.01;mc[2]*=.01;qc=ma(mc);qc[3]=+oc[4];}return qc;};kb=function(jc){var kc;kc=jc[3]<1?'rgba':'rgb';if(kc==='rgb'){return kc+'('+jc.slice(0,3).map(yb).join(',')+')';}else if(kc==='rgba')return kc+'('+jc.slice(0,3).map(yb).join(',')+','+jc[3]+')';};wb=function(jc){return yb(jc*100)/100;};la=function(jc,kc){var lc;lc=kc<1?'hsla':'hsl';jc[0]=wb(jc[0]||0);jc[1]=wb(jc[1]*100)+'%';jc[2]=wb(jc[2]*100)+'%';if(lc==='hsla')jc[3]=kc;return lc+'('+jc.join(',')+')';};q.css=function(jc){return ea(jc);};z.css=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['css']),function(){});};h.prototype.css=function(jc){if(jc==null)jc='rgb';if(jc.slice(0,3)==='rgb'){return kb(this._rgb);}else if(jc.slice(0,3)==='hsl')return la(this.hsl(),this.alpha());};q.named=function(jc){return ja(fc[jc]);};o.push({p:20,test:function(jc){if(arguments.length===1&&(fc[jc]!=null))return 'named';}});h.prototype.name=function(jc){var kc,lc;if(arguments.length){if(fc[jc])this._rgb=ja(fc[jc]);this._rgb[3]=1;this;}kc=this.hex();for(lc in fc)if(kc===fc[lc])return lc;return kc;};wa=function(){var jc,kc,lc,mc;mc=ec(arguments),lc=mc[0],jc=mc[1],kc=mc[2];kc=kc*i;return [lc,da(kc)*jc,ac(kc)*jc];};xa=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc;lc=ec(arguments);qc=lc[0],nc=lc[1],pc=lc[2];sc=wa(qc,nc,pc),jc=sc[0],kc=sc[1],mc=sc[2];tc=ua(jc,kc,mc),rc=tc[0],oc=tc[1],mc=tc[2];return [za(rc,0,255),za(oc,0,255),za(mc,0,255),lc.length>3?lc[3]:1];};ta=function(){var jc,kc,lc,mc,nc,oc;oc=ec(arguments),nc=oc[0],jc=oc[1],kc=oc[2];lc=bc(jc*jc+kc*kc);mc=(t(kc,jc)*m+360)%360;if(yb(lc*10000)===0)mc=Number.NaN;return [nc,lc,mc];};qb=function(){var jc,kc,lc,mc,nc,oc,pc;oc=ec(arguments),nc=oc[0],lc=oc[1],kc=oc[2];pc=pb(nc,lc,kc),mc=pc[0],jc=pc[1],kc=pc[2];return ta(mc,jc,kc);};z.lch=function(){var jc;jc=ec(arguments);return new h(jc,'lch');};z.hcl=function(){var jc;jc=ec(arguments);return new h(jc,'hcl');};q.lch=xa;q.hcl=function(){var jc,kc,lc,mc;mc=ec(arguments),kc=mc[0],jc=mc[1],lc=mc[2];return xa([lc,jc,kc]);};h.prototype.lch=function(){return qb(this._rgb);};h.prototype.hcl=function(){return qb(this._rgb).reverse();};jb=function(jc){var kc,lc,mc,nc,oc,pc,qc,rc,sc;if(jc==null)jc='rgb';rc=ec(arguments),qc=rc[0],nc=rc[1],kc=rc[2];qc=qc/255;nc=nc/255;kc=kc/255;oc=1-Math.max(qc,Math.max(nc,kc));mc=oc<1?1/(1-oc):0;lc=(1-qc-oc)*mc;pc=(1-nc-oc)*mc;sc=(1-kc-oc)*mc;return [lc,pc,sc,oc];};ba=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc;kc=ec(arguments);mc=kc[0],pc=kc[1],rc=kc[2],oc=kc[3];jc=kc.length>4?kc[4]:1;if(oc===1)return [0,0,0,jc];qc=mc>=1?0:yb(255*(1-mc)*(1-oc));nc=pc>=1?0:yb(255*(1-pc)*(1-oc));lc=rc>=1?0:yb(255*(1-rc)*(1-oc));return [qc,nc,lc,jc];};q.cmyk=function(){return ba(ec(arguments));};z.cmyk=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['cmyk']),function(){});};h.prototype.cmyk=function(){return jb(this._rgb);};q.gl=function(){var jc,kc,lc,mc,nc;mc=(function(){var oc,pc;oc=ec(arguments);pc=[];for(kc in oc){nc=oc[kc];pc.push(nc);}return pc;}).apply(this,arguments);for(jc=lc=0;lc<=2;jc=++lc)mc[jc]*=255;return mc;};z.gl=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['gl']),function(){});};h.prototype.gl=function(){var jc;jc=this._rgb;return [jc[0]/255,jc[1]/255,jc[2]/255,jc[3]];};rb=function(jc,kc,lc){var mc;mc=ec(arguments),jc=mc[0],kc=mc[1],lc=mc[2];jc=bb(jc);kc=bb(kc);lc=bb(lc);return .2126*jc+.7152*kc+.0722*lc;};bb=function(jc){jc/=255;if(jc<=.03928){return jc/12.92;}else return ib((jc+.055)/1.055,2.4);};r=[];oa=function(jc,kc,lc,mc){var nc,oc,pc,qc;if(lc==null)lc=.5;if(mc==null)mc='rgb';if(dc(jc)!=='object')jc=z(jc);if(dc(kc)!=='object')kc=z(kc);for(pc=0,oc=r.length;pc<oc;pc++){nc=r[pc];if(mc===nc[0]){qc=nc[1](jc,kc,lc,mc);break;}}if(qc==null)throw "color mode "+mc+" is not supported";qc.alpha(jc.alpha()+lc*(kc.alpha()-jc.alpha()));return qc;};z.interpolate=oa;h.prototype.interpolate=function(jc,kc,lc){return oa(this,jc,kc,lc);};z.mix=oa;h.prototype.mix=h.prototype.interpolate;sa=function(jc,kc,lc,mc){var nc,oc;nc=jc._rgb;oc=kc._rgb;return new h(nc[0]+lc*(oc[0]-nc[0]),nc[1]+lc*(oc[1]-nc[1]),nc[2]+lc*(oc[2]-nc[2]),mc);};r.push(['rgb',sa]);h.prototype.luminance=function(jc,kc){var lc,mc,nc,oc;if(kc==null)kc='rgb';if(!arguments.length)return rb(this._rgb);if(jc===0){this._rgb=[0,0,0,this._rgb[3]];}else if(jc===1){this._rgb=[255,255,255,this._rgb[3]];}else{mc=1e-07;nc=20;oc=function(pc,qc){var rc,sc;sc=pc.interpolate(qc,.5,kc);rc=sc.luminance();if(Math.abs(jc-rc)<mc||!nc--)return sc;if(rc>jc)return oc(pc,sc);return oc(sc,qc);};lc=rb(this._rgb);this._rgb=(lc>jc?oc(z('black'),this):oc(this,z('white'))).rgba();}return this;};cc=function(jc){var kc,lc,mc,nc;nc=jc/100;if(nc<66){mc=255;lc=-155.25485562709179-.44596950469579133*(lc=nc-2)+104.49216199393888*ab(lc);kc=nc<20?0:-254.76935184120902+.8274096064007395*(kc=nc-10)+115.67994401066147*ab(kc);}else{mc=351.97690566805693+.114206453784165*(mc=nc-55)-40.25366309332127*ab(mc);lc=325.4494125711974+.07943456536662342*(lc=nc-50)-28.0852963507957*ab(lc);kc=255;}return aa([mc,lc,kc]);};tb=function(){var jc,kc,lc,mc,nc,oc,pc,qc,rc;pc=ec(arguments),oc=pc[0],lc=pc[1],jc=pc[2];nc=1000;mc=40000;kc=.4;while(mc-nc>kc){rc=(mc+nc)*.5;qc=cc(rc);if((qc[2]/qc[0])>=(jc/oc)){mc=rc;}else nc=rc;}return yb(rc);};z.temperature=z.kelvin=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['temperature']),function(){});};q.temperature=q.kelvin=q.K=cc;h.prototype.temperature=function(){return tb(this._rgb);};h.prototype.kelvin=h.prototype.temperature;z.contrast=function(jc,kc){var lc,mc,nc,oc;if((nc=dc(jc))==='string'||nc==='number')jc=new h(jc);if((oc=dc(kc))==='string'||oc==='number')kc=new h(kc);lc=jc.luminance();mc=kc.luminance();if(lc>mc){return (lc+.05)/(mc+.05);}else return (mc+.05)/(lc+.05);};h.prototype.get=function(jc){var kc,lc,mc,nc,oc,pc;mc=this;oc=jc.split('.'),nc=oc[0],kc=oc[1];pc=mc[nc]();if(kc){lc=nc.indexOf(kc);if(lc>-1){return pc[lc];}else return false;}else return pc;};h.prototype.set=function(jc,kc){var lc,mc,nc,oc,pc,qc;nc=this;pc=jc.split('.'),oc=pc[0],lc=pc[1];if(lc){qc=nc[oc]();mc=oc.indexOf(lc);if(mc>-1)if(dc(kc)==='string'){switch(kc.charAt(0)){case '+':qc[mc]+=+kc;break;case '-':qc[mc]+=+kc;break;case '*':qc[mc]*=+(kc.substr(1));break;case '/':qc[mc]/=+(kc.substr(1));break;default:qc[mc]=+kc;}}else qc[mc]=kc;}else qc=kc;nc._rgb=z(qc,oc).alpha(nc.alpha())._rgb;return nc;};h.prototype.darken=function(jc){var kc,lc;if(jc==null)jc=1;lc=this;kc=lc.lab();kc[0]-=j.Kn*jc;return z.lab(kc).alpha(lc.alpha());};h.prototype.brighten=function(jc){if(jc==null)jc=1;return this.darken(-jc);};h.prototype.darker=h.prototype.darken;h.prototype.brighter=h.prototype.brighten;h.prototype.saturate=function(jc){var kc,lc;if(jc==null)jc=1;lc=this;kc=lc.lch();kc[1]+=jc*j.Kn;if(kc[1]<0)kc[1]=0;return z.lch(kc).alpha(lc.alpha());};h.prototype.desaturate=function(jc){if(jc==null)jc=1;return this.saturate(-jc);};h.prototype.premultiply=function(){var jc,kc;kc=this.rgb();jc=this.alpha();return z(kc[0]*jc,kc[1]*jc,kc[2]*jc,jc);};v=function(jc,kc,lc){if(!v[lc])throw 'unknown blend mode '+lc;return v[lc](jc,kc);};w=function(jc){return function(kc,lc){var mc,nc;mc=z(lc).rgb();nc=z(kc).rgb();return z(jc(mc,nc),'rgb');};};ha=function(jc){return function(kc,lc){var mc,nc,oc;oc=[];for(mc=nc=0;nc<=3;mc=++nc)oc[mc]=jc(kc[mc],lc[mc]);return oc;};};fb=function(jc,kc){return jc;};eb=function(jc,kc){return jc*kc/255;};fa=function(jc,kc){if(jc>kc){return kc;}else return jc;};ya=function(jc,kc){if(jc>kc){return jc;}else return kc;};zb=function(jc,kc){return 255*(1-(1-jc/255)*(1-kc/255));};hb=function(jc,kc){if(kc<128){return 2*jc*kc/255;}else return 255*(1-2*(1-jc/255)*(1-kc/255));};y=function(jc,kc){return 255*(1-(1-kc/255)/(jc/255));};ga=function(jc,kc){if(jc===255)return 255;jc=255*(kc/255)/(1-jc/255);if(jc>255){return 255;}else return jc;};v.normal=w(ha(fb));v.multiply=w(ha(eb));v.screen=w(ha(zb));v.overlay=w(ha(hb));v.darken=w(ha(fa));v.lighten=w(ha(ya));v.dodge=w(ha(ga));v.burn=w(ha(y));z.blend=v;z.analyze=function(jc){var kc,lc,mc,nc;mc={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};for(lc=0,kc=jc.length;lc<kc;lc++){nc=jc[lc];if((nc!=null)&&!isNaN(nc)){mc.values.push(nc);mc.sum+=nc;if(nc<mc.min)mc.min=nc;if(nc>mc.max)mc.max=nc;mc.count+=1;}}mc.domain=[mc.min,mc.max];mc.limits=function(oc,pc){return z.limits(mc,oc,pc);};return mc;};z.scale=function(jc,kc){var lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd;tc='rgb';uc=z('#ccc');yc=0;qc=false;pc=[0,1];xc=[];wc=[0,0];lc=false;nc=[];vc=false;sc=0;rc=1;oc=false;mc={};ed=function(gd){var hd,id,jd,kd,ld,md,nd;if(gd==null)gd=['#fff','#000'];if((gd!=null)&&dc(gd)==='string'&&(((kd=z.brewer)!=null?kd[gd]:void 0)!=null))gd=z.brewer[gd];if(dc(gd)==='array'){gd=gd.slice(0);for(hd=jd=0,ld=gd.length-1;0<=ld?jd<=ld:jd>=ld;hd=0<=ld?++jd:--jd){id=gd[hd];if(dc(id)==="string")gd[hd]=z(id);}xc.length=0;for(hd=nd=0,md=gd.length-1;0<=md?nd<=md:nd>=md;hd=0<=md?++nd:--nd)xc.push(hd/(gd.length-1));}dd();return nc=gd;};bd=function(gd){var hd,id;if(lc!=null){id=lc.length-1;hd=0;while(hd<id&&gd>=lc[hd])hd++;return hd-1;}return 0;};fd=function(gd){return gd;};zc=function(gd){var hd,id,jd,kd,ld;ld=gd;if(lc.length>2){kd=lc.length-1;hd=bd(gd);jd=lc[0]+(lc[1]-lc[0])*(0+yc*.5);id=lc[kd-1]+(lc[kd]-lc[kd-1])*(1-yc*.5);ld=sc+((lc[hd]+(lc[hd+1]-lc[hd])*.5-jd)/(id-jd))*(rc-sc);}return ld;};cd=function(gd,hd){var id,jd,kd,ld,md,nd,od,pd;if(hd==null)hd=false;if(isNaN(gd))return uc;if(!hd){if(lc&&lc.length>2){id=bd(gd);pd=id/(lc.length-2);pd=wc[0]+(pd*(1-wc[0]-wc[1]));}else if(rc!==sc){pd=(gd-sc)/(rc-sc);pd=wc[0]+(pd*(1-wc[0]-wc[1]));pd=Math.min(1,Math.max(0,pd));}else pd=1;}else pd=gd;if(!hd)pd=fd(pd);ld=Math.floor(pd*10000);if(mc[ld]){jd=mc[ld];}else{if(dc(nc)==='array'){for(kd=md=0,od=xc.length-1;0<=od?md<=od:md>=od;kd=0<=od?++md:--md){nd=xc[kd];if(pd<=nd){jd=nc[kd];break;}if(pd>=nd&&kd===xc.length-1){jd=nc[kd];break;}if(pd>nd&&pd<xc[kd+1]){pd=(pd-nd)/(xc[kd+1]-nd);jd=z.interpolate(nc[kd],nc[kd+1],pd,tc);break;}}}else if(dc(nc)==='function')jd=nc(pd);mc[ld]=jd;}return jd;};dd=function(){return mc={};};ed(jc);ad=function(gd){var hd;hd=z(cd(gd));if(vc&&hd[vc]){return hd[vc]();}else return hd;};ad.classes=function(gd){var hd;if(gd!=null){if(dc(gd)==='array'){lc=gd;pc=[gd[0],gd[gd.length-1]];}else{hd=z.analyze(pc);if(gd===0){lc=[hd.min,hd.max];}else lc=z.limits(hd,'e',gd);}return ad;}return lc;};ad.domain=function(gd){var hd,id,jd,kd,ld,md,nd;if(!arguments.length)return pc;sc=gd[0];rc=gd[gd.length-1];xc=[];jd=nc.length;if(gd.length===jd&&sc!==rc){for(ld=0,kd=gd.length;ld<kd;ld++){id=gd[ld];xc.push((id-sc)/(rc-sc));}}else for(hd=nd=0,md=jd-1;0<=md?nd<=md:nd>=md;hd=0<=md?++nd:--nd)xc.push(hd/(jd-1));pc=[sc,rc];return ad;};ad.mode=function(gd){if(!arguments.length)return tc;tc=gd;dd();return ad;};ad.range=function(gd,hd){ed(gd,hd);return ad;};ad.out=function(gd){vc=gd;return ad;};ad.spread=function(gd){if(!arguments.length)return yc;yc=gd;return ad;};ad.correctLightness=function(gd){if(gd==null)gd=true;oc=gd;dd();if(oc){fd=function(hd){var id,jd,kd,ld,md,nd,od,pd,qd;id=cd(0,true).lab()[0];jd=cd(1,true).lab()[0];od=id>jd;kd=cd(hd,true).lab()[0];md=id+(jd-id)*hd;ld=kd-md;pd=0;qd=1;nd=20;while(Math.abs(ld)>.01&&nd-->0)(function(){if(od)ld*=-1;if(ld<0){pd=hd;hd+=(qd-hd)*.5;}else{qd=hd;hd+=(pd-hd)*.5;}kd=cd(hd,true).lab()[0];return ld=kd-md;})();return hd;};}else fd=function(hd){return hd;};return ad;};ad.padding=function(gd){if(gd!=null){if(dc(gd)==='number')gd=[gd,gd];wc=gd;return ad;}else return wc;};ad.colors=function(){var gd,hd,id,jd,kd,ld,md,nd,od,pd;jd=0;ld='hex';if(arguments.length===1)if(dc(arguments[0])==='string'){ld=arguments[0];}else jd=arguments[0];if(arguments.length===2)jd=arguments[0],ld=arguments[1];if(jd){hd=pc[0];gd=pc[1]-hd;return (function(){nd=[];for(var qd=0;0<=jd?qd<jd:qd>jd;0<=jd?qd++:qd--)nd.push(qd);return nd;}).apply(this).map(function(qd){return ad(hd+qd/(jd-1)*gd)[ld]();});}jc=[];od=[];if(lc&&lc.length>2){for(id=pd=1,md=lc.length;1<=md?pd<md:pd>md;id=1<=md?++pd:--pd)od.push((lc[id-1]+lc[id])*.5);}else od=pc;return od.map(function(qd){return ad(qd)[ld]();});};return ad;};if(z.scales==null)z.scales={};z.scales.cool=function(){return z.scale([z.hsl(180,1,.9),z.hsl(250,.7,.4)]);};z.scales.hot=function(){return z.scale(['#000','#f00','#ff0','#fff'],[0,.25,.75,1]).mode('rgb');};z.analyze=function(jc,kc,lc){var mc,nc,oc,pc,qc,rc,sc;qc={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};if(lc==null)lc=function(){return true;};mc=function(tc){if((tc!=null)&&!isNaN(tc)){qc.values.push(tc);qc.sum+=tc;if(tc<qc.min)qc.min=tc;if(tc>qc.max)qc.max=tc;qc.count+=1;}};sc=function(tc,uc){if(lc(tc,uc))if((kc!=null)&&dc(kc)==='function'){return mc(kc(tc));}else if((kc!=null)&&dc(kc)==='string'||dc(kc)==='number'){return mc(tc[kc]);}else return mc(tc);};if(dc(jc)==='array'){for(pc=0,oc=jc.length;pc<oc;pc++){rc=jc[pc];sc(rc);}}else for(nc in jc){rc=jc[nc];sc(rc,nc);}qc.domain=[qc.min,qc.max];qc.limits=function(tc,uc){return z.limits(qc,tc,uc);};return qc;};z.limits=function(jc,kc,lc){var mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd,zd,ae,be,ce,de,ee,fe,ge,he,ie,je,ke,le,me,ne,oe;if(kc==null)kc='equal';if(lc==null)lc=7;if(dc(jc)==='array')jc=z.analyze(jc);kd=jc.min;db=jc.max;ke=jc.sum;ne=jc.values.sort(function(pe,qe){return pe-qe;});id=[];if(kc.substr(0,1)==='c'){id.push(kd);id.push(db);}if(kc.substr(0,1)==='e'){id.push(kd);for(fd=qd=1,ud=lc-1;1<=ud?qd<=ud:qd>=ud;fd=1<=ud?++qd:--qd)id.push(kd+(fd/lc)*(db-kd));id.push(db);}else if(kc.substr(0,1)==='l'){if(kd<=0)throw 'Logarithmic scales are only possible for values > 0';ld=Math.LOG10E*ab(kd);jd=Math.LOG10E*ab(db);id.push(kd);for(fd=oe=1,vd=lc-1;1<=vd?oe<=vd:oe>=vd;fd=1<=vd?++oe:--oe)id.push(ib(10,ld+(fd/lc)*(jd-ld)));id.push(db);}else if(kc.substr(0,1)==='q'){id.push(kd);for(fd=mc=1,be=lc-1;1<=be?mc<=be:mc>=be;fd=1<=be?++mc:--mc){rd=ne.length*fd/lc;sd=ia(rd);if(sd===rd){id.push(ne[sd]);}else{td=rd-sd;id.push(ne[sd]*td+ne[sd+1]*(1-td));}}id.push(db);}else if(kc.substr(0,1)==='k'){nd=ne.length;zc=new Array(nd);dd=new Array(lc);je=true;od=0;bd=null;bd=[];bd.push(kd);for(fd=nc=1,ce=lc-1;1<=ce?nc<=ce:nc>=ce;fd=1<=ce?++nc:--nc)bd.push(kd+(fd/lc)*(db-kd));bd.push(db);while(je){for(gd=oc=0,de=lc-1;0<=de?oc<=de:oc>=de;gd=0<=de?++oc:--oc)dd[gd]=0;for(fd=pc=0,ee=nd-1;0<=ee?pc<=ee:pc>=ee;fd=0<=ee?++pc:--pc){me=ne[fd];md=Number.MAX_VALUE;for(gd=qc=0,fe=lc-1;0<=fe?qc<=fe:qc>=fe;gd=0<=fe?++qc:--qc){ed=s(bd[gd]-me);if(ed<md){md=ed;ad=gd;}}dd[ad]++;zc[fd]=ad;}pd=new Array(lc);for(gd=rc=0,ge=lc-1;0<=ge?rc<=ge:rc>=ge;gd=0<=ge?++rc:--rc)pd[gd]=null;for(fd=sc=0,he=nd-1;0<=he?sc<=he:sc>=he;fd=0<=he?++sc:--sc){cd=zc[fd];if(pd[cd]===null){pd[cd]=ne[fd];}else pd[cd]+=ne[fd];}for(gd=tc=0,ie=lc-1;0<=ie?tc<=ie:tc>=ie;gd=0<=ie?++tc:--tc)pd[gd]*=1/dd[gd];je=false;for(gd=uc=0,wd=lc-1;0<=wd?uc<=wd:uc>=wd;gd=0<=wd?++uc:--uc)if(pd[gd]!==bd[fd]){je=true;break;}bd=pd;od++;if(od>200)je=false;}hd={};for(gd=vc=0,xd=lc-1;0<=xd?vc<=xd:vc>=xd;gd=0<=xd?++vc:--vc)hd[gd]=[];for(fd=wc=0,yd=nd-1;0<=yd?wc<=yd:wc>=yd;fd=0<=yd?++wc:--wc){cd=zc[fd];hd[cd].push(ne[fd]);}le=[];for(gd=xc=0,zd=lc-1;0<=zd?xc<=zd:xc>=zd;gd=0<=zd?++xc:--xc){le.push(hd[gd][0]);le.push(hd[gd][hd[gd].length-1]);}le=le.sort(function(pe,qe){return pe-qe;});id.push(le[0]);for(fd=yc=1,ae=le.length-1;yc<=ae;fd=yc+=2)if(!isNaN(le[fd]))id.push(le[fd]);}return id;};ka=function(jc,kc,lc){var mc,nc,oc,pc;mc=ec(arguments);jc=mc[0],kc=mc[1],lc=mc[2];jc/=360;if(jc<1/3){nc=(1-kc)/3;pc=(1+kc*da(n*jc)/da(l-n*jc))/3;oc=1-(nc+pc);}else if(jc<2/3){jc-=1/3;pc=(1-kc)/3;oc=(1+kc*da(n*jc)/da(l-n*jc))/3;nc=1-(pc+oc);}else{jc-=2/3;oc=(1-kc)/3;nc=(1+kc*da(n*jc)/da(l-n*jc))/3;pc=1-(oc+nc);}pc=za(lc*pc*3);oc=za(lc*oc*3);nc=za(lc*nc*3);return [pc*255,oc*255,nc*255,mc.length>3?mc[3]:1];};mb=function(){var jc,kc,lc,mc,nc,oc,pc,qc;pc=ec(arguments),oc=pc[0],kc=pc[1],jc=pc[2];n=Math.PI*2;oc/=255;kc/=255;jc/=255;nc=Math.min(oc,kc,jc);mc=(oc+kc+jc)/3;qc=1-nc/mc;if(qc===0){lc=0;}else{lc=((oc-kc)+(oc-jc))/2;lc/=Math.sqrt((oc-kc)*(oc-kc)+(oc-jc)*(kc-jc));lc=Math.acos(lc);if(jc>kc)lc=n-lc;lc/=n;}return [lc*360,qc,mc];};z.hsi=function(){return (function(jc,kc,lc){lc.prototype=jc.prototype;var mc=new lc(),nc=jc.apply(mc,kc);return Object(nc)===nc?nc:mc;})(h,ic.call(arguments).concat(['hsi']),function(){});};q.hsi=ka;h.prototype.hsi=function(){return mb(this._rgb);};pa=function(jc,kc,lc,mc){var nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc;if(mc==='hsl'){yc=jc.hsl();zc=kc.hsl();}else if(mc==='hsv'){yc=jc.hsv();zc=kc.hsv();}else if(mc==='hsi'){yc=jc.hsi();zc=kc.hsi();}else if(mc==='lch'||mc==='hcl'){mc='hcl';yc=jc.hcl();zc=kc.hcl();}if(mc.substr(0,1)==='h'){pc=yc[0],wc=yc[1],sc=yc[2];qc=zc[0],xc=zc[1],tc=zc[2];}if(!isNaN(pc)&&!isNaN(qc)){if(qc>pc&&qc-pc>180){nc=qc-(pc+360);}else if(qc<pc&&pc-qc>180){nc=qc+360-pc;}else nc=qc-pc;oc=pc+lc*nc;}else if(!isNaN(pc)){oc=pc;if((tc===1||tc===0)&&mc!=='hsv')vc=wc;}else if(!isNaN(qc)){oc=qc;if((sc===1||sc===0)&&mc!=='hsv')vc=xc;}else oc=Number.NaN;if(vc==null)vc=wc+lc*(xc-wc);rc=sc+lc*(tc-sc);return uc=z[mc](oc,vc,rc);};r=r.concat((function(){var jc,kc,lc,mc;lc=['hsv','hsl','hsi','hcl','lch'];mc=[];for(kc=0,jc=lc.length;kc<jc;kc++){cb=lc[kc];mc.push([cb,pa]);}return mc;})());ra=function(jc,kc,lc,mc){var nc,oc;nc=jc.num();oc=kc.num();return z.num(nc+(oc-nc)*lc,'num');};r.push(['num',ra]);qa=function(jc,kc,lc,mc){var nc,oc,pc;oc=jc.lab();pc=kc.lab();return nc=new h(oc[0]+lc*(pc[0]-oc[0]),oc[1]+lc*(pc[1]-oc[1]),oc[2]+lc*(pc[2]-oc[2]),mc);};r.push(['lab',qa]);}).call(this);},null);
__d('messengerCustomColorUtils',['chroma','cssVar'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(l,m){m=m||{};m.backgroundColor=l;m.color=h.hex(l).luminance()>=.6?'black':'white';return m;}function k(l,m){m=m||{};var n=h("#0084ff").get('hsl.h'),o=h(l).get('hsl.h'),p=n>o?-n+o:o-n;m.WebkitFilter=m.MozFilter=m.MsFilter=m.filter='hue-rotate('+p+'deg)';return m;}f.exports={customBubbleStyle:j,customHueStyle:k};},null);
__d('MessengerVoiceClipAttachment.react',['MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','ReactComponentWithPureRenderMixin','React','cx','messengerCustomColorUtils'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MessengerVoiceClipAttachment',mixins:[j],propTypes:{attachment:n.object.isRequired,customColor:n.string,message:n.object.isRequired},render:function(){var p=this.props.attachment,q=p.metadata.duration/1000,r=!!p.app_attribution,s={};if(this.props.customColor)s=m.customBubbleStyle(this.props.customColor,s);return (k.createElement('div',{className:"_hh7"+(' '+"_s1-")+(!!this.props.customColor?' '+"_5sxi":'')+(!r?' '+"_52mr":'')+(r?' '+"_mxz":'')+(' '+"_1fz8")+(r?' '+"_1-wa":'')+(' '+"_1nqp"),style:s},k.createElement(h,{src:p.url,duration:q,key:'audio:'+this.props.message.message_id,showHelp:false,width:200,location:i.MESSENGER,rootClassName:"_3czg"+(r?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")})));}});f.exports=o;},null);
__d('isRetina',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=function(){return (window.devicePixelRatio||1)>1;};},null);
__d('MessengerAttachmentRenderer',['EmojiSticker.react','EmojiLikeUtils','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MessengerVoiceClipAttachment.react','React','Set','Sticker.react','StickerActions','StickerAssetType','StickerConstants','StickerImages','StickerUtils','StoryAttachmentStyle','XStickerAssetController','cx','isRetina'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new w([k.ANIMATED_IMAGE,k.PHOTO,k.VIDEO]),ia=700,ja='sticker:',ka=function(ma){return ma===Object(ma);},la={getAttachmentsInsideBubble:function(ma){var na=j.get(ma).filter(ka).filter((function(oa){return (!this.attachmentShouldAppearOutsideBubble(oa));}).bind(this));return this._getAttachmentComponents(na,ma);},getAttachmentsOutsideBubble:function(ma,na){var oa=j.get(ma).filter(ka).filter((function(pa){return (this.attachmentShouldAppearOutsideBubble(pa));}).bind(this));return this._getAttachmentComponents(oa,ma,na);},_getAttachmentComponents:function(ma,na,oa){var pa=this._getPhotosGroup(ma.filter(this.isPhotoAttachment),na),qa=ma.filter((function(ra){return !this.isPhotoAttachment(ra);}).bind(this)).map((function(ra){return this._getAttachmentComponent(ra,na,oa);}).bind(this));if(pa)qa.push(pa);return qa;},_getAttachmentComponent:function(ma,na,oa){if(t.isStickerAttachment(ma))return this._getStickerComponent(ma,na);if(this.isEmojiLikeAttachment(ma))return this._getEmojiLikeAttachment(ma,na);if(this.isVoiceClip(ma))return this._getVoiceClip(ma,na,oa);if(this.isFileAttchment(ma))return this._getFileComponent(ma,na);if(this.isP2P(ma)||this.isShareAttachment(ma))return this._getShareAttachment(ma,na);if(this.isErrorAttachment(ma))return this._getErrorAttachment(ma,na);},_getStickerComponent:function(ma,na){if(na.is_like_preview)return (v.createElement(q,{customLike:na.customLike,key:'hlp:'+na.like_preview_since,since:na.like_preview_since}));var oa=ma.metadata;if(!oa){oa=r.getMetadataForHotLike(na.sticker_id);if(!oa){var pa=ba.getSticker(na.sticker_id);oa=babelHelpers._extends({},pa);var qa=ca.getScaledDimensions(pa?pa.height:aa.THREAD_SIZE,pa?pa.width:aa.THREAD_SIZE,aa.THREAD_SIZE),ra=qa.height,sa=qa.width;oa.height=ra;oa.width=sa;}oa.stickerID=na.sticker_id;}var ta=ea.getURIBuilder().setInt('sticker_id',oa.stickerID),ua=null,va=null;if(ga()){ua=oa.paddedSpriteURI2x;va=oa.spriteURI2x;}else{ua=oa.paddedSpriteURI;va=oa.spriteURI;}return (v.createElement(x,{className:"_2poz _ui9",animationTrigger:'hover',frameCount:oa.frameCount||1,frameRate:oa.frameRate||aa.DEFAULT_FRAME_RATE,framesPerCol:oa.framesPerCol||1,framesPerRow:oa.framesPerRow||1,key:ja+na.message_id,onStickerClick:function(wa,xa){y.handleStickerClick(wa,na.thread_id);},packID:oa.packID&&oa.packID.toString(),paddedSpriteURI:ua,sourceHeight:oa.height,sourceURI:ta.setEnum('image_type',z.IMAGE).getURI().toString(),sourceWidth:oa.width,spriteURI:va,stickerID:oa.stickerID.toString()}));},_getEmojiLikeAttachment:function(ma,na){var oa=i.getURI(na.body,ma.size);return (v.createElement(h,{className:"_2poz _ui9",key:ja+na.message_id,emoji:na.body,sourceURI:oa}));},_getShareAttachment:function(ma,na){return v.createElement(m,{attachment:ma.share,location:n.MESSENGER,key:'share:'+na.message_id,maxWidth:ia,messageID:na.message_id,thread_id:na.thread_id});},_getVoiceClip:function(ma,na,oa){return (v.createElement(u,{attachment:ma,customColor:oa||undefined,key:'audio:'+na.message_id,message:na}));},_getErrorAttachment:function(ma,na){return (v.createElement(o,{attachment:ma,key:'error:'+na.message_id}));},_getPhotosGroup:function(ma,na){return ma.length?v.createElement(s,{attachments:ma,className:"_2poz _52mr _ui9",key:'photos:'+na.message_id,message:na}):null;},_getFileComponent:function(ma,na){return (v.createElement(p,{attachment:ma,className:"_2poz",key:'file:'+ma.url}));},attachmentShouldAppearOutsideBubble:function(ma){return t.isStickerAttachment(ma)||this.isPhotoAttachment(ma)||this.isShareAttachment(ma)||this.isP2P(ma)||this.isVoiceClip(ma)||this.isErrorAttachment(ma)||this.isEmojiLikeAttachment(ma);},isPhotoAttachment:function(ma){return ha.has(ma.attach_type);},isFileAttchment:function(ma){return ma.attach_type===k.FILE;},isShareAttachment:function(ma){return !!(this._isStoryBased(ma)&&!this.isP2P(ma)&&(ma.share.style_list.indexOf(da.SHARE)>-1||ma.share.style_list.indexOf(da.FALLBACK)>-1));},isP2P:function(ma){return !!(this._isStoryBased(ma)&&ma.share.style_list.indexOf(da.ORION)>-1);},_isStoryBased:function(ma){return !!(ma.attach_type===k.SHARE&&ma.share&&ma.share.style_list);},isEmojiLikeAttachment:function(ma){return ma.attach_type===k.EMOJI_LIKE;},isVoiceClip:function(ma){return !!ma.metadata&&(ma.metadata.type===l.AudioClip||ma.metadata.type===l.VoiceMessageWithTranscript);},isVoiceClipAttachment:function(ma){var na=j.get(ma).filter(ka).filter((function(oa){return (this.isVoiceClip(oa));}).bind(this));return !!na.length;},isP2PAttachment:function(ma){var na=j.get(ma).filter((function(oa){return (ka(oa)&&this.isP2P(oa));}).bind(this));return !!na.length;},isErrorAttachment:function(ma){return ma.attach_type===k.ERROR;}};f.exports=la;},null);
__d('MessengerBubble.react',['EmojiLikeUtils','EmojiOnlyMessage.react','immutable','MercuryMessageBody.react','ReactComponentWithPureRenderMixin','React','cx','joinClasses','messengerCustomColorUtils'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=m.PropTypes,r=m.createClass({displayName:'MessengerBubble',mixins:[l],propTypes:{attachments:q.instanceOf(j.List),body:q.string,customColor:q.string,customLike:q.object,isP2PAttachment:q.bool,ranges:q.array,threadID:q.string},getInitialState:function(){return {emojis:undefined};},componentDidMount:function(){if(!this.props.emojis){var s=this.props.body||'',t=h.richContent(s);if(t)this.setState({emojis:t});}},render:function(){var s={};if(!this.state.emojis&&this.props.customColor)s=p.customBubbleStyle(this.props.customColor,s);if(this.state.emojis){var t=h.getSourceURIs(this.state.emojis),u=m.createElement(i,{sourceURIs:t});}else u=m.createElement(k,{className:"_3oh-",body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID,customLike:this.props.customLike});return (m.createElement('div',babelHelpers._extends({},this.props,{style:s,className:o(this.props.className,"_hh7"+(' '+"_s1-")+(' '+"_52mr")+(this.props.isP2PAttachment?' '+"_4z55":'')+(!!this.state.emojis?' '+"_2f5r":''))}),u,this.props.attachments));}});f.exports=r;},null);
__d('MessengerCodePasteUtils',['BanzaiODS','MessengerBubble.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=/`{3,}/;function m(o){return !!(o&&o.search(l)!==-1&&o.split('\n').length>1);}function n(o,p,q){var r=o.split(l),s=[];for(var t=0;t<r.length;t+=2){var u=r[t].trim();if(u&&u.length>0)s.push(j.createElement(i,{key:t,body:u,className:"clearfix _3058 _ui9",ranges:p,threadID:q}));if(t+1<r.length&&r[t+1]){var v=r[t+1].split('\n'),w=v[0].replace(/[^a-zA-Z]+/g,''),x=v.slice(1).join('\n');h.bumpEntityKey('messenger_code_paste','render_bubble');s.push(j.createElement('div',{key:t+1,className:"_3058 _15gf _wu0 _52mr"},j.createElement('div',{ref:'syntaxTarget'+t,className:'language-'+w},x)));}}return s;}f.exports={containsCodeBlock:m,getCodeAndMessageBubbles:n};},null);
__d('MessengerStore',['MessengerDispatcher','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(){this.$MessengerStore1=h.register(this.__onDispatch.bind(this));}j.prototype.getDispatchToken=function(){return this.$MessengerStore1;};j.prototype.emitChange=function(){this.emit('change');};j.prototype.destroy=function(){h.unregister(this.$MessengerStore1);};i(j,{change:true});f.exports=j;},null);
__d('MessengerStateStore',['MessengerActions','MessengerStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(){k.constructor.call(this);this.$MessengerStateStore1={activeThreadID:null,detailView:null,folder:null,masterView:null,serverThreadID:null};this.$MessengerStateStore2=babelHelpers._extends({},this.$MessengerStateStore1);}l.prototype.getState=function(){return this.$MessengerStateStore1;};l.prototype.getPrevState=function(){return this.$MessengerStateStore2;};l.prototype.__onDispatch=function(m){switch(m.type){case h.Types.REPLACE_STATE:this.$MessengerStateStore2=this.$MessengerStateStore1;this.$MessengerStateStore1=babelHelpers._extends({activeThreadID:null,detailView:null,folder:null,masterView:null,serverThreadID:null},m.nextState);this.emitChange();break;}};f.exports=new l();},null);
__d('MessengerAttachmentAttribution.react',['ImmutableObject','MercuryAttachmentAttribution.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerAttachmentAttribution',propTypes:{attachment:l.instanceOf(h)},render:function(){return (j.createElement(i,{attachment:this.props.attachment,className:"_2f5n _4br2"}));}});f.exports=m;},null);
__d('MessengerBubbleBlock.react',['React','cx'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'MessengerBubbleBlock',render:function(){return (h.createElement('div',{className:"_52mr _4h13 _3058"},this.props.children));}});f.exports=j;},null);
__d('MessengerCodeBubble.react',['Bootloader','immutable','MessengerCodePasteUtils','ReactComponentWithPureRenderMixin','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=l.PropTypes,o=l.createClass({displayName:'MessengerCodeBubble',mixins:[k],propTypes:{attachments:n.instanceOf(i.List),body:n.string.isRequired,ranges:n.array.isRequired,threadID:n.string.isRequired},componentDidMount:function(){h.loadModules(["Prism.Complete"],(function(p){for(var q in this.refs){var r=m.findDOMNode(this.refs[q]);p.highlightElement(r);}}).bind(this));},render:function(){var p=j.getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID);return l.createElement('div',null,p);}});f.exports=o;},null);
__d('MessengerDateBreak.react',['React','cx','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'MessengerDateBreak',propTypes:{date:l.instanceOf(Date).isRequired},shouldComponentUpdate:function(n){return this.props.date.getTime()!==n.date.getTime();},render:function(){var n=j(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (h.createElement('h4',{className:k(this.props.className,"_497p _2lpt")},h.createElement('time',{className:"_3oh-"},n)));}});f.exports=m;},null);
__d('MessengerDialogCancelButton.react',['MessengerDialogButton.react','ReactComponentWithPureRenderMixin','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MessengerDialogCancelButton',mixins:[i],render:function(){return (j.createElement(h,babelHelpers._extends({action:'cancel',label:k._("Cancel"),type:'secondary'},this.props)));}});f.exports=l;},null);
__d('MessengerDeleteMessageDialog.react',['MercuryConfig','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','ReactComponentWithPureRenderMixin','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=p.PropTypes,s=p.createClass({displayName:'MessengerDeleteMessageDialog',mixins:[o],propTypes:{isFromViewer:r.bool,onDelete:r.func,onToggle:r.func},render:function(){return (p.createElement(i,{onToggle:this.props.onToggle},p.createElement(n,null,this._renderDialogHeaderMsg()),p.createElement(j,null,this._renderDialogBodyMsg()),p.createElement(m,null,p.createElement(l,{onClick:this._handleCancel}),p.createElement(k,{label:this._renderDialogButtonMsg(),onClick:this._handleDelete,type:'primary',use:'danger'}))));},_renderDialogHeaderMsg:function(){if(h.MessengerGlobalDeleteGK)if(this.props.isFromViewer){return q._("Delete message?");}else return q._("Hide message?");return q._("Delete message");},_renderDialogBodyMsg:function(){if(h.MessengerGlobalDeleteGK)if(this.props.isFromViewer){return q._("If you delete this message, no one in this conversation will be able to see it any longer and this can't be undone.");}else return q._("If you hide your copy of this message, you won't be able to get it back. The other person in the conversation may still be able to see it.");return q._("Are you sure you want to delete this message?");},_renderDialogButtonMsg:function(){if(!this.props.isFromViewer&&h.MessengerGlobalDeleteGK)return q._("Hide");return q._("Delete");},_handleDelete:function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();},_handleCancel:function(){this.props.onCancel&&this.props.onCancel();}});f.exports=s;},null);
__d('MNCommerceLoggingConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:'checkout_order_config',SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error',MANAGE:'manage'}};f.exports=h;},null);
__d('MNCommerceUnlinkDialog.react',['MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=m.PropTypes,p=m.createClass({displayName:'MNCommerceUnlinkDialog',propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=n._("Cancel"),r=n._("Turn Off");return (m.createElement(i,{onToggle:this.props.onToggle,shown:this.props.shown},m.createElement(l,{showCloseButton:false},n._("Unlink account?")),m.createElement(j,null,m.createElement('div',null,n._("You can turn off updates if you haven't signed up or just no longer want to get them."))),m.createElement(k,null,m.createElement(h,{label:q,onClick:this.props.onCancelButtonClick,use:'default'}),m.createElement(h,{label:r,onClick:this.props.onTurnOffButtonClick,use:'confirm'}))));}});f.exports=p;},null);
__d('MNCommerceUnlinkErrorDialog.react',['MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=j.createClass({displayName:'MNCommerceUnlinkErrorDialog',propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=p._("OK"),t=null,u=null;switch(this.props.errorType){case i.ALREADY_UNLINKED:u=j.createElement('div',null,p._("Updates are already off"));t=j.createElement('div',null,p._("You aren't getting updates in Messenger."));break;default:u=j.createElement('div',null,p._("Couldn't turn off updates"));t=j.createElement('div',null,p._("Sorry, something went wrong. Please try again."));break;}return (j.createElement(l,{onToggle:this.props.onToggle,shown:this.props.shown,width:h.UNLINK_ERROR_DIALOG.WIDTH},j.createElement(o,null,u),j.createElement(m,null,t),j.createElement(n,null,j.createElement(k,{label:s,onClick:this.props.onOkayButtonClick,use:'confirm'}))));}});f.exports=r;},null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o.createClass({displayName:'MNCommerceUnlinkDialogContainer',render:function(){var q=j.getState();if(q&&q.errorType){h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK_ERROR})});return (o.createElement(n,{onToggle:this._onToggle,shown:!!q,errorType:q.errorType,onOkayButtonClick:this._hideDialog}));}else{h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});return (o.createElement(m,{onToggle:this._onToggle,shown:!!q,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:q&&q.onTurnOffButtonClick}));}},_onToggle:function(q){if(!q)this._hideDialog();},_hideDialog:function(){i.hideDialog();}});f.exports=p;},null);
__d("XMNCommerceUnlinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null);
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();l.prototype.unlink=function(m,n){var o=k.getURIBuilder().setString('page_id',m).setString('user_id',n).getURI();new h().setURI(o).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};l.prototype.$MNCommerceUnlinkDataManager1=function(m){i.showDialog(j,{errorType:m.error});};function l(){}f.exports=new l();},null);
__d('MNCommerceLogMessageUtils',['BanzaiLogger','Link.react','MercuryConfig','MercuryIDs','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','MNCommerceUnlinkDataManager','MNCommerceUnlinkDialogContainer.react','React','cx','fbt','invariant','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';if(c.__markCompiled)c.__markCompiled();var x=c('MercuryThreads').get();y.prototype.isCommercePageAdminMessage=function(z){return !!(z&&z.log_message_data&&(z.log_message_data.replyType===o.COMMERCE_LINK||z.log_message_data.replyType===o.COMMERCE_UNLINK));};y.prototype.getCommercePageManage=function(z,aa){var ba=null;if(j.WWWMessengerManageAdminGK){var ca=function(){var ea=k.getUserIDFromParticipantID(z.author),fa=function(ga,ha){return p.block(ga,ha);};n.showDialog(q,{pageID:ea,onConfirmButtonClick:fa});h.log('MessengerCommerceLoggerConfig',{event:m.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:l.DIALOG_SURFACE.MANAGE})});};ba=t.createElement(i,{className:(!aa?"_2w2m":'')+(aa?' '+"_1jvn":''),onClick:ca},v._("Manage"));}else if(z.log_message_data.replyType===o.COMMERCE_LINK){var da=function(){var ea=k.getUserIDFromParticipantID(z.author),fa=x.getThreadMetaNow(z.thread_id);!fa?w(0):undefined;var ga=null;fa.participants.every(function(ia){if(ia!==z.author){ga=k.getUserIDFromParticipantID(ia);return false;}return true;});var ha=function(){n.hideDialog();r.unlink(ea,ga);};n.showDialog(s,{onTurnOffButtonClick:ha});h.log('MessengerCommerceLoggerConfig',{event:m.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:l.DIALOG_SURFACE.UNLINK})});};ba=t.createElement(i,{className:(!aa?"_2w2m":'')+(aa?' '+"_1jvn":''),onClick:da},v._("Turn off"));}return (t.createElement('span',null,z.log_message_body,' ',ba));};function y(){}f.exports=new y();},null);
__d('P2PBigAmount.react',['CurrentEnvironment','Image.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'P2PBigAmount',propTypes:{amount:m.string.isRequired,isPending:m.bool,size:m.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium'};},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){if(this.props.size==='large'){return l('/images/p2p/message-icon-dark-gray-large.png');}else return l('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-messenger-blue.png');}else return l('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){if(this.props.size==='large'){return l('/images/p2p/message-icon-gray-large.png');}else return l('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-facebook-blue.png');}else return l('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return h.messengerdotcom;},render:function(){var o=this.props.size==='large'?'24':'16';return (j.createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},j.createElement('div',{className:"_8j8"},j.createElement(i,{height:o,src:this.getImage(),width:o})),j.createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount)));}});f.exports=n;},null);
__d('P2PGroupSendReceiptDialog.react',['CurrentEnvironment','Image.react','Link.react','P2PAmountUtils','P2PButton.react','P2PBigAmount.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLinkConstants','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=w.PropTypes,aa=w.createClass({displayName:'P2PGroupSendReceiptDialog',propTypes:{amount:z.string.isRequired,eventFlow:z.string,isGrayAmount:z.bool,onClose:z.func.isRequired,receiver:z.object.isRequired,sender:z.object.isRequired,title:z.node},getDefaultProps:function(){return {bodyText:y._("You can send money to friends in groups."),eventFlow:u.UI_FLOW_P2P_GROUP_SEND,isGrayAmount:false,title:y._("Payment Details")};},componentDidMount:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount});},log:function(ba,ca){s.log(ba,babelHelpers._extends({www_event_flow:this.props.eventFlow},ca));},handleClose:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED);this.props.onClose();},renderParticipantRow:function(ba,ca){var da;if(ca){da=y._("From");}else da=y._("To");return (w.createElement('li',{className:"_2chg",key:ba.id},w.createElement('div',{className:"_2chh"},w.createElement(j,{href:ba.profile_uri,onClick:this.props.onClose},w.createElement(i,{height:50,src:ba.picture,width:50}))),w.createElement('div',{className:"_2chi"},w.createElement(v,{type:'primary'},w.createElement(v,{type:'secondary'},da),ba.full_name))));},render:function(){var ba=h.messengerdotcom,ca=ba?380:360,da=this.props.title;return (w.createElement(n,{className:ba?"_bpv":'',layerHideOnBlur:false,onToggle:this.props.onClose,width:ca},w.createElement(q,null,da),w.createElement(o,null,w.createElement('ul',null,this.renderParticipantRow(this.props.sender,true),this.renderParticipantRow(this.props.receiver,false)),w.createElement('div',{className:"_bpy"},w.createElement(m,{amount:k.sanitizeAmount(this.props.amount),isPending:this.props.isGrayAmount,size:'large'})),w.createElement(v,{className:"_bpt",size:'small',type:'secondary'},this.props.bodyText,' ',w.createElement(j,{className:"_1ed3",href:r.helpCenterURI,target:'_blank'},y._("Learn More")))),w.createElement(p,null,w.createElement(l,{label:y._("OK"),onClick:this.handleClose,type:'primary'}))));}});f.exports=aa;},null);
__d('P2PGroupPaymentRequestReceiptDialog.react',['P2PActions','P2PPaymentLoggerEventFlow','P2PGroupSendReceiptDialog.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=k.createClass({displayName:'P2PGroupPaymentRequestReceiptDialog',propTypes:{amount:m.string,onClose:m.func,requestee:m.object.isRequired,requester:m.object.isRequired},render:function(){return (k.createElement(j,{amount:this.props.amount,bodyText:l._("You can send payment requests to friends in groups"),eventFlow:i.UI_FLOW_P2P_GROUP_REQUEST,isGrayAmount:true,onClose:this.props.onClose||h.hideDialog,title:l._("Payment request details"),receiver:this.props.requestee,sender:this.props.requester}));}});f.exports=n;},null);
__d("XP2PPaymentRequestReceiptController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/p2p\/payment_request\/",{id:{type:"String",required:true}});},null);
__d("XP2PTransactionDetailController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null);
__d('P2PMercuryLogMessage.react',['CurrentEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupPaymentRequestReceiptDialog.react','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin','XP2PPaymentRequestReceiptController','XP2PTransactionDetailController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=o.PropTypes,v=o.createClass({displayName:'P2PMercuryLogMessage',mixins:[p],propTypes:{amount:u.string,receiver:u.object.isRequired,sender:u.object.isRequired,subtype:u.oneOf(Object.keys(n).map(function(w){return n[w];})),transferID:u.string.isRequired,threadFBID:u.string,threadID:u.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:true});},handleGroupPaymentRequestDetailsLinkClicked:function(){this.setState({groupPaymentRequestReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false});},isViewerSender:function(){return (k.getUserIDFromParticipantID(this.props.sender.id)===i.getID());},isViewerReceiver:function(){return (k.getUserIDFromParticipantID(this.props.receiver.id)===i.getID());},renderPaymentRequestDetailsLink:function(){var w=q.getURIBuilder().setString('id',this.props.transferID).getURI();return (o.createElement(j,{className:"_kiq",href:w,target:'_blank'},t._("See details")));},renderTransferDetailsLink:function(){var w=r.getURIBuilder().setString('id',this.props.transferID).getURI();return (o.createElement(j,{className:"_kiq",href:w,target:'_blank'},t._("See details")));},renderGroupDetailsLink:function(){return (o.createElement(j,{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},t._("See details")));},renderGroupPaymentRequestDetailsLink:function(){return (o.createElement(j,{className:"_kiq",href:'#',onClick:this.handleGroupPaymentRequestDetailsLinkClicked},t._("See details")));},renderLayers:function(){var w={},x={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},y={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};if(this.state.groupSendReceiptDetailsShown){w.groupSendReceiptDetailsDialog=o.createElement(m,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:x,sender:y});}else if(this.state.groupPaymentRequestReceiptDetailsShown)w.groupPaymentRequestReceiptDetailsDialog=o.createElement(l,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:x,requester:y});return w;},render:function(){var w=null,x=this.props.amount,y=this.props.subtype,z=this.isViewerSender(),aa=this.isViewerReceiver(),ba;if(!z&&!aa){ba=this.renderGroupDetailsLink();}else ba=this.renderTransferDetailsLink();switch(y){case n.SENT_IN_GROUP:w=t._("{sendername} sent {amount} to {receivername}. {details}",[t.param('sendername',this.props.sender.name),t.param('amount',x),t.param('receivername',this.props.receiver.name),t.param('details',ba)]);break;case n.CANCELED_EXPIRED:case n.CANCELED_SAME_CARD:case n.CANCELED_SENDER_RISK:case n.CANCELED_RECIPIENT_RISK:case n.CANCELED_CUSTOMER_SERVICE:if(z){w=t._("Your payment of {amount} was cancelled. {details}",[t.param('amount',x),t.param('details',this.renderTransferDetailsLink())]);}else if(aa){w=t._("{name}'s payment of {amount} was cancelled. {details}",[t.param('name',this.props.sender.name),t.param('amount',x),t.param('details',this.renderTransferDetailsLink())]);}else w=t._("{sender_name}'s payment of {amount} to {receiver_name} was cancelled. {details}",[t.param('sender_name',this.props.sender.name),t.param('amount',x),t.param('receiver_name',this.props.receiver.name),t.param('details',ba)]);w=o.createElement('span',{className:"_5rdx"},w);break;case n.CANCELED_DECLINED:if(z){w=t._("{name} didn't accept your payment of {amount}. {details}",[t.param('name',this.props.receiver.name),t.param('amount',x),t.param('details',this.renderTransferDetailsLink())]);}else if(aa){w=t._("You didn't accept {name}'s payment of {amount}. {details}",[t.param('name',this.props.sender.name),t.param('amount',x),t.param('details',this.renderTransferDetailsLink())]);}else w=t._("{receiver_name} didn't accept {sender_name}'s payment of {amount}. {details}",[t.param('receiver_name',this.props.receiver.name),t.param('sender_name',this.props.sender.name),t.param('amount',x),t.param('details',ba)]);w=o.createElement('span',{className:"_5rdx"},w);break;case n.REQUEST_CANCELED_BY_REQUESTER:if(z){w=t._("You cancelled your request for {payment request amount}. {details}",[t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else if(aa){w=t._("{sender's name} cancelled their request for {payment request amount}. {details}",[t.param('sender\'s name',this.props.sender.name),t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else w=t._("{sender's name} cancelled their request for {payment request amount} from {receiver's name}. {details}",[t.param('sender\'s name',this.props.sender.name),t.param('payment request amount',x),t.param('receiver\'s name',this.props.receiver.name),t.param('details',this.renderGroupPaymentRequestDetailsLink())]);w=o.createElement('span',{className:"_5rdx"},w);break;case n.REQUEST_DECLINED_BY_REQUESTEE:if(z){w=t._("{receiver's name} declined your request for {payment request amount}. {details}",[t.param('receiver\'s name',this.props.receiver.name),t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else if(aa){w=t._("You declined {sender's name}'s request for {payment request amount}. {details}",[t.param('sender\'s name',this.props.sender.name),t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else w=t._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[t.param('receiver\'s name',this.props.receiver.name),t.param('sender\'s name',this.props.sender.name),t.param('payment request amount',x),t.param('details',this.renderGroupPaymentRequestDetailsLink())]);w=o.createElement('span',{className:"_5rdx"},w);break;case n.REQUEST_EXPIRED:if(z){w=t._("Your request for {payment request amount} expired so it was cancelled. {details}",[t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else if(aa){w=t._("{sender's name}'s request for {payment request amount} expired so it was cancelled. {details}",[t.param('sender\'s name',this.props.sender.name),t.param('payment request amount',x),t.param('details',this.renderPaymentRequestDetailsLink())]);}else w=t._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was cancelled. {details}",[t.param('sender\'s name',this.props.sender.name),t.param('receiver\'s name',this.props.receiver.name),t.param('payment request amount',x),t.param('details',this.renderGroupPaymentRequestDetailsLink())]);w=o.createElement('span',{className:"_5rdx"},w);break;}return (o.createElement('div',{className:h.messengerdotcom?"_5rdy":''},w));}});f.exports=v;},null);
__d('MessengerLogMessageBody.react',['immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=o.createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[n,p(k)],propTypes:{message:r.instanceOf(i).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case l.SUBSCRIBE:u=w.added_participants;break;case l.UNSUBSCRIBE:u=w.removed_participants;break;case l.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=h.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,k.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=j.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==l.ORION)return null;switch(t){case l.SUBSCRIBE:return (o.createElement('span',null,this._renderSubscribeMessage(this.props.message)));case l.UNSUBSCRIBE:return (o.createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case l.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (o.createElement('span',null,q._("You removed the group name.")));return (o.createElement('span',null,q._("You named the group {the new name of the group}.",[q.param('the new name of the group',u.name)])));case l.THREAD_IMAGE:return (o.createElement('span',null,q._("You changed the group photo.")));case l.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (o.createElement(m,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return q._("You added {subscriber1}.",[q.param('subscriber1',v.get(u[0]).name)]);case 2:return q._("You added {subscriber1} and {subscriber2}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name)]);case 3:return q._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name),q.param('subscriber3',v.get(u[2]).name)]);default:var w=u.map(function(x){return v.get(x);});return q._("You added {subscriber1}, {subscriber2} and {num} other people.",[q.param('subscriber1',w[0].name),q.param('subscriber2',w[1].name),q.param('num',w.slice(2).length)]);}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return q._("You left the conversation.");}else return q._("You removed {name} from the conversation.",[q.param('name',w.name)]);},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});f.exports=s;},null);
__d('MessengerLogMessage.react',['Image.react','ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageInfo','MessagingGenericAdminTextType','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','MercuryParticipants','ReactComponentWithPureRenderMixin','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=p.PropTypes,x=u('/images/mercury/clients/messenger/message/messageStateFailed.png'),y=p.createClass({displayName:'MessengerLogMessage',mixins:[r],propTypes:{message:w.instanceOf(i).isRequired,viewer:w.string.isRequired},render:function(){return (p.createElement('div',{className:this._computeClass()},this._renderErrorState(),p.createElement('i',{className:"_uwa"}),p.createElement('span',{className:"_3oh-"},this._renderLogMessageBody())));},_renderLogMessageBody:function(){var z;if(this.props.message.log_message_type!==k.ORION){z=this.props.message.log_message_body;if(this.props.message.log_message_data.message_type===m.TURN_ON_PUSH&&z&&z.length>0)z=t._("{admin-text-message} for Messenger on mobile.",[t.param('admin-text-message',z.substring(0,z.length-1))]);}switch(this.props.message.log_message_data.message_type){case m.JOURNEY_PROMPT_COLOR:z=t._("You need to be on the latest version of Messenger on a mobile device to pick a colour for this conversation.");break;case m.JOURNEY_PROMPT_NICKNAME:var aa=null;if(this.props.message.other_user_fbid&&this.props.viewer!==this.props.message.other_user_fbid){var ba=j.getParticipantIDFromUserID(this.props.message.other_user_fbid);aa=q.getOrFetch(ba);}if(aa&&aa.short_name){z=t._("You need to be on the latest version of Messenger on a mobile device to set a nickname for {admin-text-message}.",[t.param('admin-text-message',aa.short_name)]);}else z=t._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case m.JOURNEY_PROMPT_LIKE:z=t._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case m.JOURNEY_PROMPT_BOT:z=t._("You need to be on the latest version of Messenger on a mobile device to add a subscription to this conversation.");break;default:break;}return (this._renderMNCommerceManage()||z||p.createElement(n,{message:this.props.message,viewer:this.props.viewer}));},_renderMNCommerceManage:function(){var z=this.props.message;if(o.isCommercePageAdminMessage(z))return o.getCommercePageManage(z,true);},_renderErrorState:function(){if(!l.hasError(this.props.message))return null;return (p.createElement(h,{className:"_41-9",src:x}));},_computeClass:function(){var z,aa=this.props.message,ba=aa.log_message_type===k.UNSUBSCRIBE&&aa.log_message_data.removed_participants.indexOf(aa.author)!==-1,ca=this.props.viewer;switch(aa.log_message_type){case k.SUBSCRIBE:z="_uwb";break;case k.UNSUBSCRIBE:z=ba?"_uwc":"_uwe";break;case k.PHONE_CALL:z=aa.log_message_data.caller.indexOf(ca)!==-1?"_uwf":"_uwg";break;case k.VIDEO_CALL:z=aa.log_message_data.caller.indexOf(ca)!==-1?"_uwh":"_uwi";break;case k.THREAD_NAME:z="_uwj";break;case k.THREAD_IMAGE:z="_uwk";break;case k.SERVER_ERROR:z="_uwl";break;case k.LIVE_LISTEN:z="_uwm";break;case k.WALLPAPER:z="_uwn";break;case k.ORION:z="_uwo";break;case k.SWITCH_TO_WORK:z="_uwp";break;case k.PAGE_REPLY:z="_uwq";break;}return v("_497p"+((aa.log_message_type===k.PHONE_CALL||aa.log_message_type===k.VIDEO_CALL)&&!aa.log_message_data.answered?' '+"_3no3":''),z);}});f.exports=y;},null);
__d('MessengerContextualActions.react',['ContextualLayerUpdateOnScroll','LayerHideOnBlur','Link.react','React','ReactAbstractContextualDialog','ReactLayer','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=m.createClass(l.createSpec({displayName:'MessengerContextualActionsDialog',theme:{wrapperClassName:"_hw2",arrowDimensions:{offset:12,length:12}}})),q=k.createClass({displayName:'MessengerContextualActions',propTypes:{onToggle:o.func},render:function(){var s=this.props,t=s.children,u=babelHelpers.objectWithoutProperties(s,['children']);return (k.createElement(p,babelHelpers._extends({},u,{alignment:'center',behaviors:{ContextualLayerUpdateOnScroll:h,LayerHideOnBlur:i},onToggle:this.props.onToggle}),k.createElement('ul',{className:"_hw3"},t)));}}),r=k.createClass({displayName:'MessengerContextualActionsItem',propTypes:{onClick:o.func},render:function(){return (k.createElement('li',{className:"_hw4"},k.createElement(j,{className:"_hw5",onClick:this.props.onClick},this.props.children)));}});q.Item=r;f.exports=q;},null);
__d('MessengerMessageActionsWrapper.react',['DOMQuery','ImmutableObject','ReactLayeredComponentMixin','MercuryConfig','MercuryMessageActions','MercuryMessageInfo','MessengerActions','MessengerContextualActions.react','MessengerDeleteMessageDialog.react','Parent','React','ReactDOM','csx','cx','fbt','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y=o.Item,z=r.PropTypes,aa="_ui9",ba="._ui9",ca=r.createClass({displayName:'MessengerMessageActionsWrapper',mixins:[j],propTypes:{isActive:z.bool,isDeletable:z.bool,isFromViewer:z.bool,message:z.instanceOf(i).isRequired,onDeselect:z.func.isRequired,onSelect:z.func.isRequired},getDefaultProps:function(){return {isDeletable:true};},render:function(){return (r.createElement('div',babelHelpers._extends({onContextMenu:this._handleContextMenu},this.props),this.props.children));},renderLayers:function(){if(!this.props.isDeletable||!this.props.isActive)return {};var da=s.findDOMNode(this),ea=da&&h.scry(da,ba)[0];if(!ea)return {};return {contextualDialog:r.createElement(o,{context:ea,onToggle:this._handleActionsToggle,shown:this.props.isActive},this._renderRetry(),r.createElement(y,{onClick:this._handleDelete},this._renderActionItemMsg()))};},_renderActionItemMsg:function(){if(!this.props.isFromViewer&&k.MessengerGlobalDeleteGK)return v._("Hide");return v._("Delete");},_renderRetry:function(){if(!m.hasError(this.props.message))return null;return (r.createElement(y,{onClick:this._handleRetry},v._("Try again")));},_handleActionsToggle:function(da){!da&&this._handleDeselect();},_handleDeselect:function(){this.props.onDeselect(this.props.message.message_id);},_handleDelete:function(){var da=this.props.message;n.showDialog(p,{onDelete:function(){l.get()['delete'](da.thread_id,[da.message_id]);},onToggle:this._handleDialogToggle,onCancel:this._handleDeselect,isFromViewer:this.props.isFromViewer});},_handleDialogToggle:function(da){if(!da)n.hideDialog();},_handleRetry:function(){this._handleDeselect();l.get().resend(this.props.message);},_handleContextMenu:function(da){if(!this._shouldAllowNativeContextMenu(da))da.preventDefault();x((function(){this.props.onSelect(this.props.message.message_id);}).bind(this));},_shouldAllowNativeContextMenu:function(da){!(da.target instanceof HTMLElement)?w(0):undefined;return (da.target.nodeName.toLowerCase()==='a'||window.getSelection().toString()!==''||!q.byClass(da.target,aa));}});f.exports=ca;},null);
__d('MessengerMessageSeenHeads.react',['Image.react','immutable','ImmutableObject','MercuryMessageInfo','MessengerConfig','ReactComponentWithPureRenderMixin','React','cssVar','cx','fbt','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=n.PropTypes,u=l.MaxSeenHeadCount||8,v=n.createClass({displayName:'MessengerMessageSeenHeads',mixins:[m],propTypes:{isFromViewer:t.bool,message:t.instanceOf(j).isRequired,nextTimestamp:t.number.isRequired,participants:t.instanceOf(i.Map).isRequired,readReceipts:t.instanceOf(i.OrderedMap).isRequired},render:function(){var x=this.props,y=x.message,z=x.nextTimestamp,aa=x.participants,ba=x.readReceipts;if(k.isSending(y)||ba.isEmpty())return null;var ca=i.Seq(ba).filter(function(ka,la){return (ka>=y.timestamp&&ka<z);});if(ca.isEmpty())return null;var da=this.props.isFromViewer?u:w(),ea=ca.count()>da+1,fa=ea?ca.slice(0,da):ca,ga=fa.map(function(ka,la){var ma=aa.get(la);if(!ma)return null;var na=q._("Seen by {full name}",[q.param('full name',ma.name)]);return (n.createElement(h,{alt:na,className:"_jf2",key:la,src:ma.image_src,title:na}));}).toArray(),ha=ga.length;if(!ha)return null;var ia=ea?ca.slice(da).count():0;if(ia>0){var ja=ca.slice(da).map(function(ka,la){var ma=aa.get(la);return ma?ma.name:null;}).filter(function(ka){return !!ka;}).join('\n')+' ';ga.unshift(n.createElement('span',{className:"_jf3",key:'overflow',title:ja},'+'+ia));}return (n.createElement('span',{className:s(this.props.className,"_jf4"+(ha+ia===1?' '+"_jf5":''))},ga));}});function w(){var x=r().width;if(x<parseInt("920px".replace('px',''),10))return Math.min(u,8);if(x<parseInt("1211px".replace('px',''),10))return Math.min(u,3);return u;}f.exports=v;},null);
__d('messengerRTLClasses',['cx','isRTL'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=i(k||'');return l?m?"_4pv0":'':(!m?"direction_ltr":'')+(m?' '+"direction_rtl":'')+(!m?' '+"text_align_ltr":'')+(m?' '+"text_align_rtl":'')+(m?' '+"_4pv0":'');}f.exports=j;},null);
__d('MessengerMessage.react',['EmojiLikeConstants','MercuryDisplayTimeFilterMessageRenderer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageInfo','MercuryTagHelper','MercuryTimestamp','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerMessageActionsWrapper.react','MessengerMessageSeenHeads.react','React','cssVar','cx','fbt','getViewportDimensions','joinClasses','messengerRTLClasses','messengerCustomColorUtils'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';if(c.__markCompiled)c.__markCompiled();var ia=aa.PropTypes;function ja(ma){switch(ma){case n.SENDING:return da._("Sending");case n.SENT:return da._("Sent");case n.DELIVERED:return da._("Delivered");case n.ERROR:return da._("Error");}return null;}var ka=aa.createClass({displayName:'MessengerMessage',propTypes:{customColor:ia.string,deliveryTimestamp:ia.number.isRequired,isActive:ia.bool,isFromViewer:ia.bool,isPageMessage:ia.bool,message:ia.instanceOf(k).isRequired,nextTimestamp:ia.number.isRequired,onDeselect:ia.func.isRequired,onSelect:ia.func.isRequired,participants:ia.instanceOf(j.Map).isRequired,readReceipts:ia.instanceOf(j.OrderedMap).isRequired,showDeliveryState:ia.bool},shouldComponentUpdate:function(ma){return (ma.isActive!==this.props.isActive||ma.isFromViewer!==this.props.isFromViewer||ma.message!==this.props.message||ma.nextTimestamp!==this.props.nextTimestamp||ma.showDeliveryState!==this.props.showDeliveryState||ma.deliveryTimestamp!==this.props.deliveryTimestamp||!j.is(ma.readReceipts,this.props.readReceipts)||!j.is(ma.participants,this.props.participants)||ma.customColor!==this.props.customColor);},render:function(){var ma=this.props,na=ma.isActive,oa=ma.isFromViewer,pa=ma.message,qa=x.SentTimestampEnabled&&oa?{'data-hover':'tooltip','data-tooltip-alignh':na?'right':'center','data-tooltip-position':la(),'aria-label':da._("{time}",[da.param('time',q.getPreciseTimestamp(pa.timestamp))])}:null;return (aa.createElement(y,{className:fa("_o46"+(' '+"_3erg")+(na?' '+"_-5k":'')+(oa?' '+"_3i_m":'')+(oa?' '+"_nd_":'')+(!oa?' '+"_29_7":''),ga(pa.body)),isActive:na,isDeletable:!this._isP2PAttachment()&&!this.props.isPageMessage,isFromViewer:oa,message:pa,onDeselect:this.props.onDeselect,onSelect:this.props.onSelect},aa.createElement('div',{className:'clearfix'},this._renderBubble(qa),this._renderAttachmentsOutsideBubble(qa)),this._renderErrorState(),this._renderDeliveryState(),aa.createElement(z,{className:"_4jzq",isFromViewer:oa,message:pa,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})));},_attachmentsCanHaveTooltipWrap:function(ma){return ma.every(function(na){var oa=na&&(na.type.displayName||na.type.name);return oa!=='MercuryShareAttachment'&&oa!=='MessengerPhotosGroup';});},_renderAttachmentsOutsideBubble:function(ma){var na=s.getAttachmentsOutsideBubble(this.props.message,this.props.customColor);if(!na||!na.length)return null;if(ma)na=this._attachmentsCanHaveTooltipWrap(na)?aa.createElement('div',babelHelpers._extends({},ma,{className:"_3zvs"}),na):na.map(function(pa){return (pa&&aa.cloneElement(pa,ma));});var oa=aa.createElement('div',{className:"_3058 _15gf"},na);if(this.props.message.attachments.length===1&&l.hasAttribution(this.props.message.attachments[0]))return (aa.createElement(u,null,oa,aa.createElement(r,{attachment:new k(this.props.message.attachments[0])})));return oa;},_isP2PAttachment:function(){return (s.isP2PAttachment(this.props.message));},_renderBubble:function(ma){var na=this.props.message,oa=j.List(s.getAttachmentsInsideBubble(na)),pa=!!(na.tags&&p.get(na.tags,h.TAG_PREFIX));if(m.MessengerCodePaste&&w.containsCodeBlock(na.body))return (aa.createElement(v,{attachments:oa,body:na.body,className:"_3058 _ui9",ranges:na.ranges||[],threadID:na.thread_id||''}));if(na.is_filtered_content)return (aa.createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},i.renderFilteredContent(na)));if(na.body&&!pa||!oa.isEmpty())return (aa.createElement(t,babelHelpers._extends({attachments:oa,body:na.body,className:"_3058 _ui9",customColor:this.props.customColor,customLike:na.customLike,isP2PAttachment:this._isP2PAttachment(),ranges:na.ranges,threadID:na.thread_id},ma||{})));return null;},_renderDeliveryState:function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var ma=o.getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(ma===n.UNKNOWN)return null;var na={};if(this.props.customColor&&(ma===n.SENT||ma===n.SENDING||ma===n.DELIVERED))na=ha.customHueStyle(this.props.customColor,na);return (aa.createElement('span',{className:"_2her"+(ma===n.SENDING?' '+"_4jzp":'')+(ma===n.SENT?' '+"_3zzf":'')+(ma===n.DELIVERED?' '+"_9ah":'')+(ma===n.ERROR?' '+"_5ei9":''),onClick:ma===n.ERROR?this._handleSelect:null,style:na,title:ja(ma)}));},_renderErrorState:function(){var ma=this.props.message;if(!o.hasError(ma))return null;return (aa.createElement('span',{className:"_3058 _2ygi",onClick:this._handleSelect},da._("Message couldn't be sent.")));},_handleSelect:function(ma){ma.stopPropagation();this.props.onSelect(this.props.message.message_id);}});function la(){if(ea().width<=parseInt("640px".replace('px',''),10))return 'above';return 'right';}f.exports=ka;},null);
__d('MessengerPageAdminNoteList.react',['LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','cx','fbt','immutable','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t;'use strict';var u=l.PropTypes;s=babelHelpers.inherits(v,n(l.Component,r(k)));t=s&&s.prototype;v.prototype.render=function(){var w=[],x=this.calculateGroups(this.props.notes);x.forEach((function(y,z){w.push(l.createElement('li',{className:"_4kd2",key:'group:'+z},this.$MessengerPageAdminNoteList1(y)));}).bind(this));return (l.createElement('ul',{className:"_4kd3"},w));};v.prototype.$MessengerPageAdminNoteList1=function(w){var x=[];w.forEach((function(y,z){x.push(l.createElement('div',{className:"_4kd4",key:'note:'+z},this.$MessengerPageAdminNoteList2(y,w)));}).bind(this));return x;};v.prototype.$MessengerPageAdminNoteList2=function(w,x){var y=q.List([l.createElement(h,{className:"_561k"},l.createElement('div',{className:"_561l"},p._("Private note")),l.createElement(j,{key:'creator_info',creator_info:x[0].creator_info,isNote:true}))]);return (l.createElement('div',{className:"_o46 _3i_m _nd_"},l.createElement('div',{className:'clearfix'},l.createElement(i,{body:w.body.text,attachments:y,className:"_3058 _4kd5"}))));};v.prototype.calculateGroups=function(w){var x=[],y=null,z=null,aa=m(w),ba;while(!(ba=aa.next()).done){var ca=z&&z.value.creator_info.creatorID===ba.value.creator_info.creatorID;if(!ca){y=[];x.push(y);}if(y)y.push(ba.value);z=ba;}return x;};function v(){s.apply(this,arguments);}v.propTypes={notes:u.arrayOf(u.shape({id:u.string,body:u.object.isRequired,creator_info:u.shape({creatorID:u.string.isRequired,creatorName:u.string.isRequired,creatorType:u.string.isRequired,labelType:u.string.isRequired,pageID:u.string.isRequired,profileURI:u.string}),timestamp:u.number.isRequired})).isRequired};f.exports=v;},null);
__d('MessengerURIUtils',['MercuryIDs','MessengerStateStore','MessengerURISerializer','MessengerView'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={getURIForThreadID:function(m){return j.serialize(babelHelpers._extends({},i.getState(),{activeThreadID:m,detailView:k.DETAIL.THREAD}));},getURIForUserID:function(m){return l.getURIForThreadID(h.getThreadIDFromUserID(m));}};f.exports=l;},null);
__d('MessengerMessageGroup.react',['immutable','ImmutableObject','Image.react','Link.react','MercuryIDs','MercuryParticipants','MercuryTimestamp','MessengerActions','MessengerConfig','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','MessengerURIUtils','PagesMessengerCreatorInfo.react','React','ReactDOM','StoreAndPropBasedStateMixin','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=h.List,da=h.OrderedMap,ea=x.PropTypes,fa=32,ga=new i({image_src:'',is_messenger_user:true,name:''}),ha=x.createClass({displayName:'MessengerMessageGroup',mixins:[z(m)],propTypes:{activeMessageID:ea.string,deliveryTimestamp:ea.number.isRequired,hasDateBreak:ea.bool,isCanonical:ea.bool,isFromViewer:ea.bool,isPageMessage:ea.bool,lastReadTimestamp:ea.number.isRequired,messages:ea.instanceOf(h.List).isRequired,nextTimestamp:ea.number.isRequired,onMessageDeselect:ea.func.isRequired,onMessageSelect:ea.func.isRequired,readReceipts:ea.instanceOf(da).isRequired,thread:ea.object},statics:{calculateState:function(ka){return {participants:ia(ka)};}},shouldComponentUpdate:function(ka,la){return (this.props.activeMessageID!==ka.activeMessageID||this.props.isFromViewer!==ka.isFromViewer||this.props.deliveryTimestamp!==ka.deliveryTimestamp||this.props.lastReadTimestamp!==ka.lastReadTimestamp||!h.is(this.props.messages,ka.messages)||!h.is(this.props.readReceipts,ka.readReceipts)||!h.is(this.state.participants,la.participants)||ka.thread&&this.props.thread&&this.props.thread!==ka.thread);},render:function(){return (x.createElement('div',null,x.createElement('div',{className:"_1t_p"+(' '+"clearfix")+(u.isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),this._renderName(),x.createElement('div',{className:"_1t_s"},this._renderMessages())),this.props.isPageMessage?this._renderNotes():null));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var ka=this.props.messages.last(),la=this.state.participants.get(ka.author)||ga,ma=ba._("{name} {time}",[ba.param('name',la.name),ba.param('time',n.getPreciseTimestamp(ka.timestamp))]),na=x.createElement(t,{className:"_1t_r",isMessengerUser:la.is_messenger_user,size:fa,showBadge:true,tooltipContent:ma},x.createElement(j,{alt:'',src:la.image_src,height:fa,width:fa}));if(!this.props.isCanonical&&la.fbid){var oa=v.getURIForUserID(la.fbid);na=x.createElement(k,{className:"_5f0v",href:oa.toString(),onClick:this._handleContactSelect.bind(this,la),tabIndex:-1},na);}return (x.createElement('div',{className:"_1t_q"},na));},_renderMessages:function(){var ka=this.props.messages.size,la=[];this.props.messages.forEach((function(ma,na,oa){var pa=ma.message_id===this.props.activeMessageID;if(pa&&!(na===0&&this.props.hasDateBreak)&&!p.SentTimestampEnabled)la.push(x.createElement(q,{className:"_5r8z",date:new Date(ma.timestamp),key:'db:'+ma.message_id}));la.push(x.createElement(r,{customColor:this.props.thread&&this.props.isFromViewer?this.props.thread.custom_color:'',deliveryTimestamp:this.props.deliveryTimestamp,isActive:pa,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:ma.message_id,message:ma,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(oa,ka,na),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:ma.timestamp>this.props.lastReadTimestamp,ref:ma.message_id}));if(ja(this.props.isPageMessage,oa,na,ma))la.push(x.createElement(w,{key:'creator_info:'+na,creator_info:ma.creator_info}));}).bind(this));return la;},_renderNotes:function(){var ka=[];this.props.messages.forEach((function(la,ma,na){if(this.props.isPageMessage&&la.page_admin_notes)ka.push(x.createElement(s,{key:'notes:'+la.message_id,notes:la.page_admin_notes}));}).bind(this));return ka;},_renderName:function(){var ka=this.state.participants.get(this.props.messages.first().author);if(!ka)return null;var la=ka.short_name;if(this.props.thread){var ma=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,na=l.getUserIDFromParticipantID(ka.id);if(ma&&na&&ma[na])la=ma[na];}return (x.createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},x.createElement('span',{className:"_3oh-"},la)));},getMessageElement:function(ka){return y.findDOMNode(this.refs[ka]);},_hasSeenHeadsAtBottom:function(){var ka=this.props,la=ka.messages,ma=ka.nextTimestamp,na=ka.readReceipts,oa=la.last().timestamp,pa=0;na.forEach(function(qa){if(qa>=oa&&qa<ma)if(++pa===2)return false;});return pa===2;},_getNextTimestamp:function(ka,la,ma){return ma<la-1?ka.get(ma+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function(ka){var la=l.getThreadIDFromParticipantID(ka.id);la&&o.selectThread(la);}});function ia(ka){var la=ka.messages.first().author;return h.Map().withMutations(function(ma){ka.readReceipts.forEach(function(na,oa){ma.set(oa,m.getOrFetch(oa));});ma.set(la,m.getOrFetch(la));});}function ja(ka,la,ma,na){if(!ka||!na.creator_info)return false;if(ma===la.size-1)return true;var oa=la.get(ma+1).creator_info;if(!oa)return true;return na.creator_info.creatorID!==oa.creatorID;}f.exports=ha;},null);
__d('MessengerTypingIndicator.react',['Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=32,t=o.createClass({displayName:'MessengerTypingIndicator',mixins:[n,p(j)],propTypes:{userID:r.string,showName:r.bool},statics:{calculateState:function(u){return {author:j.getOrFetch(u.userID)};}},render:function(){if(!this.state.author)return null;var u=this.state.author;return (o.createElement('div',{className:"_1t_p _1hbw"},o.createElement('div',{className:"_1t_q"},o.createElement(l,{className:"_1t_r",isMessengerUser:u.is_messenger_user,size:s,showBadge:true},o.createElement(h,{alt:'',src:u.image_src,height:s,width:s}))),o.createElement('div',{className:"_1t_s"},o.createElement('div',{className:"_o46 _3erg _29_7"},o.createElement('div',{className:'clearfix'},o.createElement(m,{attachments:i.List([o.createElement(k,{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))))));},getBubble:function(){return this.refs.bubble;}});f.exports=t;},null);
__d('MercurySeenIndicator.react',['MercuryDelayedRoger','MercuryIDs','React','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'MercurySeenIndicator',propTypes:{thread:m.object.isRequired,viewer:m.string.isRequired},componentDidMount:function(){this._subscriptions=new k();this._subscriptions.addSubscriptions(h.subscribe('state-changed',(function(o,p){p[this.props.thread.thread_id]&&this.forceUpdate();}).bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this._separateParticipants(),p=o.viewer,q=o.others,r=this._viewerLastToReply(p),s=this._seenByAll(q);return (j.createElement('span',{className:"_3jy5"+(r?' '+"repliedLast":'')+(r&&s?' '+"seenByAll":'')}));},_separateParticipants:function(){var o=i.getParticipantIDFromUserID(this.props.viewer),p=this.props.thread.participants.filter(function(q){return q!==o;});return {viewer:o,others:p};},_viewerLastToReply:function(o){return o===this.props.thread.snippet_sender;},_seenByAll:function(o){var p=this.props.thread.thread_id;return h.getSeenBy(p).length===o.length;}});f.exports=n;},null);
__d('MercuryThreadTimestamp.react',['ReactComponentWithPureRenderMixin','React','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MercuryThreadTimestamp',mixins:[h],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return i.createElement('abbr',null);return (i.createElement('abbr',{className:k(this.props.className,'timestamp'),title:this.props.title||new Date(n).toLocaleDateString(),'data-utime':n/1000},this.props.text||j(new Date(n),'g:ia')));}});f.exports=m;},null);
__d('MercuryDragDropPrompt.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'MercuryDragDropPrompt',render:function(){return (h.createElement('div',{className:"_4g6x"},h.createElement('div',{className:"_4g6y"},h.createElement('div',{className:"_4g6z _4g71"},j._("Drag Links\/Files Here")),h.createElement('div',{className:"_4g6z _4g6- _4g6_"},j._("Drop Files Here")),h.createElement('div',{className:"_4g6z _4g6- _4g70"},j._("Drop Link Here")))));}});f.exports=k;},null);
__d('PagesMessengerOmnipicker.react',['React','Link.react','Omnipicker.react','ComputerPanel.react','OmnipickerComputerSelector.react','OmnipickerDialog.react','OmnipickerDialogRenderer','OmnipickerPagePostedPhotosPanel.react','OmnipickerPagePostedPhotosSelector.react','OmnipickerPanelList.react','OmnipickerSelectorList.react','OmnipickerWaterfallLogger','PUWApplications','PUWSteps','WaterfallIDGenerator','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=h.PropTypes,aa=h.createClass({displayName:'PagesMessengerOmnipicker',_waterfallLogger:s,_dialogRenderer:null,propTypes:{uploadURI:z.string.isRequired,onPhotosSelected:z.func.isRequired,pageID:z.string.isRequired},componentDidMount:function(){this._waterfallLogger=new s(t.WEB_PAGES_MESSENGER,v.generate());var ba={fileUploadURI:this.props.uploadURI};this._dialogRenderer=new n(h.createElement(m,{onCancel:this._onPickerCancel,title:x._("Select Photo")},h.createElement(j,{logger:this._waterfallLogger,onDoneSelecting:this._onDoneSelecting},h.createElement(r,null,h.createElement(l,null),h.createElement(p,null)),h.createElement(q,null,h.createElement(k,{config:ba}),h.createElement(o,{pageID:this.props.pageID})))));},render:function(){return (h.createElement('div',{className:"_k6_"},h.createElement(i,{className:"_k70",onClick:this._onPickerLaunch},h.createElement('i',{alt:x._("Camera"),className:"_k72"}))));},_onPickerLaunch:function(){this._waterfallLogger.logStep(u.CLIENT_FLOW_BEGIN);!this._dialogRenderer?y(0):undefined;this._dialogRenderer.show();},_onPickerCancel:function(){!this._dialogRenderer?y(0):undefined;this._dialogRenderer.hide();this._waterfallLogger.logStep(u.CLIENT_FLOW_CANCEL);},_onDoneSelecting:function(ba){!this._dialogRenderer?y(0):undefined;this._dialogRenderer.hide();this.props.onPhotosSelected(ba);}});f.exports=aa;},null);
__d("SavedResponsesConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={editPanelViewMode:{LIST:"LIST",CREATE:"CREATE",EDIT:"EDIT",PERSONALIZE:"PERSONALIZE"},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};f.exports=h;},null);
__d('MacroInput.react',['DraftEditor.react','EditorState','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'MacroInput',propTypes:{autoflip:m.bool,editorState:m.instanceOf(i).isRequired,onChange:m.func.isRequired,placeholder:m.string,spellCheck:m.bool},getDefaultProps:function(){return h.defaultProps;},blur:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.focus();},render:function(){var o=l(this.props.className,"_38bx");return (j.createElement('div',{className:o,onClick:this.focus,onFocus:this.focus},j.createElement('div',{className:"_18_r"},j.createElement(h,babelHelpers._extends({},this.props,{ref:'abstractTextEditor'})))));}});f.exports=n;},null);
__d('SavedResponsesActionButton.react',['React','Image.react','XUIGrayText.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';var o=h.PropTypes;m=babelHelpers.inherits(p,h.Component);n=m&&m.prototype;function p(q,r){n.constructor.call(this,q,r);}p.prototype.render=function(){var q=l("_uvx",this.props.className);return (h.createElement('div',{className:q,onClick:this.props.onClick},h.createElement(i,{src:this.props.image,className:"_uvy"}),h.createElement(j,{shade:'medium',className:"_uvz"},this.props.label)));};p.propTypes={image:o.object.isRequired,label:o.string.isRequired,onClick:o.func.isRequired};f.exports=p;},null);
__d("XPagesSavedResponseImagePreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/image\/preview\/",{});},null);
__d('SavedResponsesImage.react',['ActorURI','AsyncRequest','LoadingIndicator.react','React','Image.react','XPagesSavedResponseImagePreviewController','XUICloseButton.react','cx','isEmpty','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=k.PropTypes;r=babelHelpers.inherits(u,k.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);this.$SavedResponsesImage1=null;this.state={currentThumbnailImageId:'',imageUrl:null,isFetchingThumbnail:false};}u.prototype.componentWillReceiveProps=function(v){if(v.imageID!==this.props.imageID)this.$SavedResponsesImage2(v.imageID);};u.prototype.componentDidMount=function(){if(this.props.imageID)this.$SavedResponsesImage2(this.props.imageID);};u.prototype.componentWillUnmount=function(){if(this.$SavedResponsesImage1&&this.$SavedResponsesImage1.abort){this.$SavedResponsesImage1.abort();this.$SavedResponsesImage1=null;}};u.prototype.render=function(){if(!this.$SavedResponsesImage3()&&!this.state.imageUrl)return null;var v="_3mgf";if(this.$SavedResponsesImage3()){v=q(v,this.props.loadingClassName);}else v=q(v,this.props.displayClassName);return (k.createElement('div',{className:this.props.className},k.createElement('div',{className:v},this.$SavedResponsesImage4())));};u.prototype.$SavedResponsesImage2=function(v){if(p(v)){this.setState({imageUrl:null});return;}this.setState({isFetchingThumbnail:true});var w=m.getURIBuilder().getURI();w=h.create(w,this.props.pageID);this.$SavedResponsesImage1=new i();this.$SavedResponsesImage1.setURI(w).setHandler((function(x){return this.$SavedResponsesImage5(x);}).bind(this)).setMethod('POST').setData({image_id:v,target_width:this.props.width,target_height:this.props.height}).send();};u.prototype.$SavedResponsesImage3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading;};u.prototype.$SavedResponsesImage4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail){return (k.createElement(j,{size:'medium',color:'white',className:"_3mgg"}));}else if(this.state.imageUrl){return (k.createElement('div',null,k.createElement(n,{className:"_3mgn"+(!this.props.shouldShowCloseButton?' '+"hidden_elem":''),size:'medium',onClick:this.props.onClose}),k.createElement(l,{src:this.state.imageUrl})));}else return null;};u.prototype.$SavedResponsesImage5=function(v){this.setState({imageUrl:v.payload.url,isFetchingThumbnail:false});};u.propTypes={displayClassName:t.string.isRequired,height:t.number.isRequired,imageID:t.string,isUploading:t.bool,loadingClassName:t.string.isRequired,onClose:t.func,pageID:t.string.isRequired,shouldShowCloseButton:t.bool.isRequired,width:t.number.isRequired};f.exports=u;},null);
__d("SavedResponsesImageUploadHelper",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){"use strict";this.$SavedResponsesImageUploadHelper1=i;this.$SavedResponsesImageUploadHelper2=j;}h.prototype.onUploaderMounted=function(i){"use strict";this.$SavedResponsesImageUploadHelper3=i;};h.prototype.onUploadFinished=function(){"use strict";if(!this.$SavedResponsesImageUploadHelper3)return;var i=this.$SavedResponsesImageUploadHelper3.getImageFiles().pop().toString();this.$SavedResponsesImageUploadHelper2(i);};h.prototype.onUploadStarted=function(){"use strict";this.$SavedResponsesImageUploadHelper1();};f.exports=h;},null);
__d("XPagesSavedResponsesAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/",{page_id:{type:"Int",required:true},other_user_id:{type:"Int",required:true}});},null);
__d('SavedResponsesUtils',['ActorURI','AsyncRequest','XPagesSavedResponsesAsyncController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={generateImageMetadata:function(l){return {filename:'Photo.jpg',image_id:l,filetype:'image/jpeg'};},fetchSavedResponses:function(l,m,n){var o=j.getURIBuilder().setInt('other_user_id',m).setInt('page_id',l).getURI();o=h.create(o,l);new i().setURI(o).setHandler(function(p){return n(p.payload.responses,p.payload.tokens);}).send();}};f.exports=k;},null);
__d('SavedResponsesImageUploader.react',['ChatFileUploaderMixin','Image.react','MercuryConfig','MercuryFileUploader','SavedResponsesUtils','URI','XUIGrayText.react','React','ReactDOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=o.PropTypes,t=o.createClass({displayName:'SavedResponsesImageUploader',mixins:[h],propTypes:{image:s.object.isRequired,label:s.string.isRequired,pageID:s.string},componentDidMount:function(){this._fileUploader=new k(this.props.attachmentsShelf,p.findDOMNode(this.refs.form),p.findDOMNode(this.refs.input),p.findDOMNode(this.refs.attachID));if(this.props.imageID)this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);this.setUpSubscriptionsHandler(this._fileUploader);},getActionURI:function(){return this.props.pageID?new m(j.upload_url).addQueryData('request_user_id',this.props.pageID).toString():j.upload_url;},getDefaultProps:function(){return {pageID:null};},componentDidUpdate:function(u,v){if(this.props.imageID){this._fileUploader.removeAttachments();this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);}},render:function(){var u=r("_uvx",this.props.className);return (o.createElement('form',{action:this.getActionURI(),className:u,method:'post',ref:'form'},o.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),o.createElement('div',{className:"_4q60"},o.createElement('div',{className:"_4q61 _2d_p"},o.createElement(i,{src:this.props.image,className:"_uvy"}),o.createElement(n,{shade:'medium',className:"_uvz"},this.props.label)),o.createElement('input',{type:'file',className:"_2d_q",name:'attachment[]',accept:this.props.imagesOnly?'image/*':'*',ref:'input'}))));}});f.exports=t;},null);
__d('SavedResponsesEditResponseContentView.react',['AbstractTextArea.react','React','SavedResponsesActionButton.react','SavedResponsesImage.react','SavedResponsesImageUploader.react','SavedResponsesImageUploadHelper','ScrollableArea.react','MacroInput.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=i.PropTypes;s=babelHelpers.inherits(v,i.Component);t=s&&s.prototype;v.prototype.render=function(){'use strict';var w="_38bx"+(' '+"_38by")+(this.props.editorState.getSelection().getHasFocus()?' '+"_38bz":''),x=q._("Enter reply title here"),y=q._("Enter your message here");return (i.createElement('div',{className:this.props.className},i.createElement(h,{className:"_4451 _1vw8",onChange:(function(z){return this.props.onTitleChange(z.target.value);}).bind(this),placeholder:x,value:this.props.responseTitle}),i.createElement('div',{className:"_38bw _57hg"},i.createElement(n,{fade:true,shadow:true},i.createElement(o,{className:w,editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:y,ref:'macroInput'}),i.createElement(k,{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:true,width:250}))),this.$SavedResponsesEditResponseContentView1()));};v.prototype.$SavedResponsesEditResponseContentView1=function(){'use strict';return (i.createElement('div',{className:"_57ho"},i.createElement(l,{className:"_3-8v",image:r('/images/mobile/glyph/photos_dark-grey_l.png'),label:q._("Add Image"),onFileUploaderMounted:(function(w){return this.props.uploadHandler.onUploaderMounted(w);}).bind(this),onSubmit:(function(){return this.props.uploadHandler.onUploadStarted();}).bind(this),onUploadFinished:(function(){return this.props.uploadHandler.onUploadFinished();}).bind(this),pageID:this.props.pageID}),i.createElement(j,{image:r('/images/mobile/glyph/love_dark-grey_l.png'),className:"_3-8v",label:q._("Personalise"),onClick:this.props.onPersonalize})));};function v(){'use strict';s.apply(this,arguments);}v.propTypes={editorState:u.object.isRequired,isUploadingImage:u.bool.isRequired,pageID:u.string.isRequired,responseImageID:u.string,responseTitle:u.string,onContentChange:u.func.isRequired,onDeleteImage:u.func.isRequired,onPersonalize:u.func.isRequired,onTitleChange:u.func.isRequired,uploadHandler:u.instanceOf(m).isRequired};f.exports=v;},null);
__d('SavedResponsesFooterButton.react',['React','Image.react','XUIButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){return (h.createElement(j,babelHelpers._extends({},this.props,{className:"_3-8i"+(this.props.isHidden?' '+"hidden_elem":''),size:'large',label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?h.createElement(i,{src:this.props.image}):null})));};o.propTypes={image:n.object,isHidden:n.bool,label:n.string.isRequired,onClick:n.func.isRequired,use:n.oneOf(['default','special','confirm'])};o.defaultProps={use:'default',isHidden:false};f.exports=o;},null);
__d('SavedResponsesMacroDetailView.react',['React','ScrollableArea.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){var p=this.props.macro;if(!p)return null;return (h.createElement(i,{fade:true,shadow:true},h.createElement('div',null,h.createElement('div',{className:"_tpd"},p.key),h.createElement('div',{className:"_tpe"},p.description),h.createElement('div',{className:"_tpf"},k._("Example")),h.createElement('div',{className:"_tpg"},p.example))));};o.propTypes={macro:n.shape({description:n.string.isRequired,example:n.string.isRequired,key:n.string.isRequired,name:n.string.isRequired,value:n.string.isRequired})};f.exports=o;},null);
__d('SavedResponsesMacroListItem.react',['React','Image.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);this.state={isHover:false};}o.prototype.render=function(){return (h.createElement('div',{className:"_5y_z",'data-id':this.props.macro.key,onClick:(function(){return this.$SavedResponsesMacroListItem1();}).bind(this),onMouseOut:(function(){return this.$SavedResponsesMacroListItem2();}).bind(this),onMouseOver:(function(){return this.$SavedResponsesMacroListItem3();}).bind(this)},h.createElement('div',{className:"_5y__"},this.props.macro.key),h.createElement('div',{className:"_5z00"+(!this.state.isHover?' '+"hidden_elem":'')},h.createElement(i,{src:k('/images/pages/macro_listitem_triangle.png')}))));};o.prototype.$SavedResponsesMacroListItem3=function(){this.props.onHover(this.props.macro);this.setState({isHover:true});};o.prototype.$SavedResponsesMacroListItem2=function(){this.setState({isHover:false});};o.prototype.$SavedResponsesMacroListItem1=function(){this.props.onSelect(this.props.macro);};o.propTypes={macro:n.shape({key:n.string.isRequired,value:n.string.isRequired}).isRequired,onHover:n.func.isRequired,onSelect:n.func.isRequired};f.exports=o;},null);
__d('SavedResponsesMacroListView.react',['React','SavedResponsesMacroListItem.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);}m.prototype.render=function(){return (h.createElement('ul',null,this.$SavedResponsesMacroListView1()));};m.prototype.$SavedResponsesMacroListView1=function(){var n=[];for(var o in this.props.macros){var p=this.props.macros[o];n.push(h.createElement(i,{macro:p,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}));}return n;};m.propTypes={macros:l.object.isRequired,onMacroHover:l.func.isRequired,onMacroSelected:l.func.isRequired};f.exports=m;},null);
__d('SavedResponsesMacroBrowseView.react',['Grid.react','React','SavedResponsesFooterButton.react','SavedResponsesMacroDetailView.react','SavedResponsesMacroListView.react','ScrollableArea.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.GridItem,t=i.PropTypes;q=babelHelpers.inherits(u,i.Component);r=q&&q.prototype;function u(v,w){'use strict';r.constructor.call(this,v,w);this.state={activeMacro:null};}u.prototype.render=function(){'use strict';return (i.createElement('div',null,this.renderBodyPart(),i.createElement('div',{className:"_3ohz"},this.renderFooterPart())));};u.prototype.renderBodyPart=function(){'use strict';var v=p("_552a",this.props.className);return (i.createElement('div',{className:v},i.createElement(h,{cols:2,spacing:'none',className:"_552b"},i.createElement(s,{className:"_552c"},i.createElement('div',{className:"_552d"}),i.createElement(m,{fade:true,shadow:true},i.createElement('div',{className:"_2t-k"},i.createElement(l,{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:(function(w){return this.$SavedResponsesMacroBrowseView1(w);}).bind(this)})))),i.createElement(s,{className:"_552e"},i.createElement(k,{macro:this.state.activeMacro})))));};u.prototype.renderFooterPart=function(){'use strict';var v=o._("Cancel");return (i.createElement('div',null,i.createElement('div',{className:"_552g"},i.createElement(j,{label:v,onClick:this.props.onCancel}))));};u.prototype.$SavedResponsesMacroBrowseView1=function(v){'use strict';this.setState({activeMacro:v});};u.propTypes={macros:t.object.isRequired,onCancel:t.func.isRequired,onMacroSelected:t.func.isRequired};f.exports=u;},null);
__d('SavedResponsesPanel.react',['React','Image.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','cx','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=h.PropTypes;r=babelHelpers.inherits(u,h.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);}u.prototype.render=function(){return (h.createElement('div',{className:this.props.className},h.createElement(l,{className:"_3alh",showCloseButton:false},h.createElement('div',{className:"_2rp7"},h.createElement('div',{className:"_2rp8"+(!this.props.shouldShowBackButton?' '+"hidden_elem":''),onClick:this.props.onBackButtonClicked},h.createElement(i,{src:q("/images/help/rooms/back.png"),className:"_2rp9"}),h.createElement(m,{shade:'light',className:"_2rpa"},this.props.backButtonLabel),h.createElement('div',{className:"_2rpb"})),h.createElement('span',{className:"_5hp9"},this.props.title)),this.$SavedResponsesPanel1()),h.createElement(k,{className:"_2rpc"},this.props.children)));};u.prototype.$SavedResponsesPanel1=function(){var v=p._("Close");return (h.createElement(j,{className:"_2rpe",label:v,onClick:this.props.onClose,shade:'dark',size:'medium',title:v,type:'button'}));};u.propTypes={backButtonLabel:t.string,onBackButtonClicked:t.func,onClose:t.func.isRequired,shouldShowBackButton:t.bool,title:t.string.isRequired};u.defaultProps={backButtonLabel:null,onBackButtonClicked:o,shouldShowBackButton:false};f.exports=u;},null);
__d('MacroSpan.react',['DraftEntity','React','XUICloseButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MacroSpan',propTypes:{entityKey:l.string.isRequired,offsetKey:l.string.isRequired,onRemoveToken:l.func.isRequired,tokens:l.object.isRequired},getInitialState:function(){return {isMouseOver:false};},render:function(){var n=this._getEntityData();return (i.createElement('span',{className:"_vxd",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement('span',{className:"_vxe",contentEditable:false,'data-offset-key':this.props.offsetKey,spellCheck:false},this._getContent(n),i.createElement(j,{size:'small',className:"_vxf",onClick:this._removeToken}))));},_getContent:function(n){var o=n.key in this.props.tokens?this.props.tokens[n.key].value:n.key,p=n.key in this.props.tokens?this.props.tokens[n.key].key:n.key;return this.state.isMouseOver?p:o;},_onMouseEnter:function(){this.setState({isMouseOver:true});},_onMouseLeave:function(){this.setState({isMouseOver:false});},_removeToken:function(){this.props.onRemoveToken(this.props.offsetKey);},_getEntityData:function(){return h.get(this.props.entityKey).getData();}});f.exports=m;},null);
__d('getMacrosInputDecorator',['CompositeDraftDecorator','DraftDecorator','MacroSpan.react','getEntityMatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){return new h([new i(k(function(o){return o.getType()==='TOKEN';}),j,{onRemoveToken:n,tokens:m})]);}f.exports=l;},null);
__d('SavedResponsesTokensUtils',['DraftEntity','createEditorStateWithEntities','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new RegExp('{{(.*?)}}','ig'),l={_parseTemplateFieldTokens:function(m){var n=m,o=[],p;while(p=k.exec(n)){var q={text:p[0],offset:p.index,length:p[0].length,entity:{token:p[0],key:p[1]}};o.push(q);n=n.replace(p[0],q.text);k.lastIndex=q.offset+q.length;}if(o.length>0){if(o[0].offset===0){n=" "+n;o.forEach(function(s){s.offset++;});}var r=o[o.length-1];if(r.length+r.offset===n.length)n=n+" ";}return {ranges:o,text:n};},createTemplateFieldsEditorStateWithText:function(m,n,o){var p=l._parseTemplateFieldTokens(m),q=p.ranges,r=p.text;return i({text:r,ranges:q,decorator:j(o,n),entityCreationFn:function(s){return h.create('TOKEN','IMMUTABLE',s);}});},prepareforSend:function(m,n){var o=m.match(/\{{(.*?)\}}/g);if(o)o.forEach(function(p){var q=p.replace('{{','').replace('}}',''),r=q in n?n[q].value:q;m=m.replace(p,r);});return m;}};f.exports=l;},null);
__d("XPagesSavedResponsesAddController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/add\/",{owner_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},user_message:{type:"String"}});},null);
__d("XPagesSavedResponsesDeleteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/delete\/",{response_id:{type:"Int",required:true}});},null);
__d("XPagesSavedResponsesEditController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/edit\/",{response_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},remove_photo_id:{type:"Int"}});},null);
__d('SavedResponsesEditResponseView.react',['ActorURI','AsyncRequest','DraftEntity','DraftModifier','DraftOffsetKey','EditorState','PagesEventObserver','PagesEventType','React','SavedResponsesEditResponseContentView.react','SavedResponsesFooterButton.react','SavedResponsesImageUploadHelper','SavedResponsesMacroBrowseView.react','SavedResponsesPanel.react','SavedResponsesTokensUtils','SelectionState','XPagesSavedResponsesAddController','XPagesSavedResponsesDeleteController','XPagesSavedResponsesEditController','XUISpinner.react','cx','fbt','invariant','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa,ga,ha=p.PropTypes;fa=babelHelpers.inherits(ia,p.Component);ga=fa&&fa.prototype;function ia(ja,ka){'use strict';ga.constructor.call(this,ja,ka);var la=!!this.props.initialResponse||false,ma=!!this.props.initialResponse&&!!this.props.initialResponse.image?this.props.initialResponse.image.id:'',na=this.$SavedResponsesEditResponseView1(la);this.state={anyContent:na.getCurrentContent().hasText(),editorState:na,imageID:ma,isEditing:la,isModified:false,isPersonalizing:false,isProcessing:false,isUploadingImage:false,message:na.getCurrentContent().getPlainText(),shouldShowDeleteWarning:false,shouldShowDiscardWarning:false,title:!!this.props.initialResponse?this.props.initialResponse.title:'',uploadHandler:new s((function(){return this.$SavedResponsesEditResponseView2();}).bind(this),(function(oa){return this.$SavedResponsesEditResponseView3(oa);}).bind(this))};}ia.prototype.render=function(){'use strict';return (p.createElement(u,{backButtonLabel:this.$SavedResponsesEditResponseView4(),className:"_15ht",onBackButtonClicked:(function(){return this.$SavedResponsesEditResponseView5();}).bind(this),onClose:this.props.onClose,shouldShowBackButton:true,title:this.$SavedResponsesEditResponseView6()},this.$SavedResponsesEditResponseView7(),p.createElement('div',{className:"_3ohz"},this.$SavedResponsesEditResponseView8())));};ia.prototype.$SavedResponsesEditResponseView9=function(){'use strict';return ca._("Cancel");};ia.prototype.$SavedResponsesEditResponseView10=function(){'use strict';return ca._("Delete");};ia.prototype.$SavedResponsesEditResponseView11=function(){'use strict';return ca._("Save Reply");};ia.prototype.$SavedResponsesEditResponseView7=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(t,{className:"_1wxh",macros:this.props.supportedMacros,onCancel:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this),onMacroSelected:(function(ja){return this.$SavedResponsesEditResponseView13(ja);}).bind(this)}));}else return (p.createElement(q,{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:(function(ja){return this.$SavedResponsesEditResponseView14(ja);}).bind(this),onDeleteImage:(function(){return this.$SavedResponsesEditResponseView15();}).bind(this),onPersonalize:(function(){return this.$SavedResponsesEditResponseView16();}).bind(this),onTitleChange:(function(ja){this.setState({title:ja,isModified:true});}).bind(this),pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler}));};ia.prototype.$SavedResponsesEditResponseView8=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this)}));}else return this.$SavedResponsesEditResponseView17();};ia.prototype.$SavedResponsesEditResponseView18=function(){'use strict';var ja=ca._("Continue Editing"),ka=ca._("Discard");return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("Are you sure you want to discard your edit?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:ka,onClick:(function(){return this.$SavedResponsesEditResponseView19();}).bind(this)}),p.createElement(r,{label:ja,onClick:(function(){return this.$SavedResponsesEditResponseView20();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView21=function(){'use strict';return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("Are you sure you want to delete this saved reply?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView22();}).bind(this)}),p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView23();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView24=function(){'use strict';return (p.createElement('div',null,p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView25();}).bind(this),isHidden:!this.state.isEditing}),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.props.onEditDone(false);}).bind(this)}),p.createElement(r,{disabled:!this.state.anyContent,label:this.$SavedResponsesEditResponseView11(),onClick:(function(){return this.$SavedResponsesEditResponseView26();}).bind(this),use:'confirm'}),p.createElement(aa,{size:'small',className:(!this.state.isProcessing?"hidden_elem":'')+(' '+"_3-91")+(' '+"_3-99")}))));};ia.prototype.$SavedResponsesEditResponseView17=function(){'use strict';if(this.state.shouldShowDeleteWarning){return this.$SavedResponsesEditResponseView21();}else if(this.state.shouldShowDiscardWarning){return this.$SavedResponsesEditResponseView18();}else return this.$SavedResponsesEditResponseView24();};ia.prototype.$SavedResponsesEditResponseView4=function(){'use strict';if(!this.state.isPersonalizing){return ca._("List");}else return ca._("Edit");};ia.prototype.$SavedResponsesEditResponseView6=function(){'use strict';if(this.state.isPersonalizing){return ca._("Add personalisation");}else if(this.state.isEditing){return ca._("Edit reply");}else return ca._("Create reply");};ia.prototype.$SavedResponsesEditResponseView27=function(ja){'use strict';var ka={text:'{{'+ja.name+'}}',key:ja.name},la=this.state.editorState,ma=la.getSelection(),na=la.getCurrentContent(),oa=ma.getStartKey(),pa=ma.getStartOffset(),qa=na.getBlockForKey(oa),ra;if(qa.getText().substr(pa-1,1).trim().length>0){var sa=k.replaceText(na,ma,' ');ma=sa.getSelectionAfter();ra=k.insertText(sa,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));}else ra=k.replaceText(na,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));ra=k.insertText(ra,ra.getSelectionAfter(),' ');la=m.push(la,ra,'insert-fragment');la=m.forceSelection(la,la.getSelection());this.$SavedResponsesEditResponseView14(la);};ia.prototype.$SavedResponsesEditResponseView28=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.props.initialResponse;!!!ka?da(0):undefined;var la=this.state.imageID?this.state.imageID.toString():'',ma=z.getURIBuilder().setInt('response_id',ka.id).setString('message',ja).setString('title',this.state.title);if(!la&&ka.image&&ka.image.id){ma.setInt('remove_photo_id',ka.image.id);}else ma.setInt('photo_id',la);ma=h.create(ma.getURI(),this.props.pageID);new i().setURI(ma).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView29=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.state.imageID?this.state.imageID.toString():'',la=x.getURIBuilder().setInt('owner_id',this.props.pageID).setString('message',ja).setString('title',this.state.title).setInt('photo_id',ka).getURI();la=h.create(la,this.props.pageID);new i().setURI(la).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView1=function(ja){'use strict';if(ja&&this.props.initialResponse){var ka=this.props.initialResponse.message||'';return v.createTemplateFieldsEditorStateWithText(ka,(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this),this.props.supportedMacros);}else return m.createEmpty(ea(this.props.supportedMacros||{},(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this)));};ia.prototype.$SavedResponsesEditResponseView15=function(){'use strict';this.setState({imageID:null});};ia.prototype.$SavedResponsesEditResponseView5=function(){'use strict';if(this.state.isPersonalizing){this.setState({isPersonalizing:false});}else if(this.state.isModified){this.setState({shouldShowDiscardWarning:true});}else this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView12=function(){'use strict';this.setState({isPersonalizing:false});};ia.prototype.$SavedResponsesEditResponseView13=function(ja){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null);this.setState({isPersonalizing:false});this.$SavedResponsesEditResponseView27(ja);};ia.prototype.$SavedResponsesEditResponseView16=function(){'use strict';this.setState({isPersonalizing:true});this.props.onEnterPersonalizeView();};ia.prototype.$SavedResponsesEditResponseView14=function(ja){'use strict';this.setState({anyContent:ja.getCurrentContent().hasText(),editorState:ja,isModified:true});};ia.prototype.$SavedResponsesEditResponseView2=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null);this.setState({imageID:null,isUploadingImage:true});};ia.prototype.$SavedResponsesEditResponseView3=function(ja){'use strict';this.setState({imageID:ja,isUploadingImage:false});};ia.prototype.$SavedResponsesEditResponseView30=function(ja){'use strict';var ka=this.state.editorState,la=l.decode(ja),ma=la.blockKey,na=la.decoratorKey,oa=ka.getBlockTree(ma).getIn([na]),pa=new w({anchorKey:ma,anchorOffset:oa.get('start'),focusKey:ma,focusOffset:oa.get('end'),isBackward:false,hasFocus:true}),qa=k.removeRange(ka.getCurrentContent(),pa,'forward'),ra=m.push(ka,qa,'remove-range');this.$SavedResponsesEditResponseView14(ra);};ia.prototype.$SavedResponsesEditResponseView25=function(){'use strict';this.setState({shouldShowDeleteWarning:true});};ia.prototype.$SavedResponsesEditResponseView26=function(){'use strict';this.setState({isProcessing:true});this.state.isEditing?this.$SavedResponsesEditResponseView28():this.$SavedResponsesEditResponseView29();};ia.prototype.$SavedResponsesEditResponseView23=function(){'use strict';this.setState({shouldShowDeleteWarning:false});};ia.prototype.$SavedResponsesEditResponseView22=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:false,isProcessing:true});!!!this.props.initialResponse?da(0):undefined;var ja=y.getURIBuilder().setInt('response_id',this.props.initialResponse.id).getURI();new i().setURI(ja).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView19=function(){'use strict';this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView20=function(){'use strict';this.setState({shouldShowDiscardWarning:false});};ia.propTypes={initialResponse:ha.shape({id:ha.string.isRequired,title:ha.string,message:ha.string,image:ha.object}),onBackButtonClicked:ha.func.isRequired,onClose:ha.func.isRequired,onEditDone:ha.func.isRequired,onEnterPersonalizeView:ha.func.isRequired,pageID:ha.string.isRequired,supportedMacros:ha.object};f.exports=ia;},null);
__d('SavedResponsesListItem.react',['ClientIDs','Link.react','React','ReactDOM','SavedResponsesImage.react','SavedResponsesConstants','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=j.PropTypes,q=j.createClass({displayName:'SavedResponsesListItem',propTypes:{onResponseHover:p.func,onResponseSelected:p.func.isRequired,onResponseUnhover:p.func,pageID:p.string.isRequired,response:p.shape({id:p.string.isRequired,title:p.string,message:p.string.isRequired,image:p.object}),tokens:p.object.isRequired},getInitialState:function(){return {shouldShowSeeMoreLink:false,shouldLimitHeight:true};},componentDidMount:function(){this._refreshSeeMoreLink();},componentDidUpdate:function(){this._refreshSeeMoreLink();},render:function(){var r=this.props.response.image&&true;return (j.createElement('div',{className:"_33w3"+(r?' '+"_33w4":''),'data-id':this.props.response.id,onClick:this._onResponseSelected,onMouseEnter:this._onResponseHover,onMouseLeave:this.props.onResponseUnhover},j.createElement('div',{className:"_33w5"+(r?' '+"_33w6":'')+(' '+"fwb")},this.props.response.title),j.createElement('div',{className:"_33w7"+(this.state.shouldLimitHeight?' '+"_4en5":'')+(!this.props.response.title&&this.props.response.image?' '+"_2pid":''),ref:'message'},this.props.response.image?j.createElement(l,{className:"_33w8",displayClassName:"_33w9",height:m.listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:false,width:m.listItemImageWidth}):null,this._processTokens(this.props.response.message)),j.createElement(i,{className:"_4en6"+(!this.state.shouldShowSeeMoreLink?' '+"hidden_elem":''),onClick:this._onShowMoreClicked},o._("See more"))));},_refreshSeeMoreLink:function(){if(this.state.shouldLimitHeight===false||this.state.shouldShowSeeMoreLink)return;var r=k.findDOMNode(this.refs.message);if(r.scrollHeight>r.clientHeight)this.setState({shouldShowSeeMoreLink:true});},_processTokens:function(r){var s=0,t=0,u=/\{{(.*?)\}}/g,v=u.exec(r),w=[];while(v!=null){t=v.index;w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,t)));s=t+v[0].length;var x=v[1] in this.props.tokens?this.props.tokens[v[1]].value:v[1];w.push(j.createElement('span',{key:h.getNewClientID(),className:"_-8"},x));v=u.exec(r);}w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,r.length)));return w;},_onResponseSelected:function(){this.props.onResponseSelected(this.props.response,this.props.tokens);},_onResponseHover:function(){this.props.onResponseHover&&this.props.onResponseHover(this.props.response,this.props.tokens);},_onShowMoreClicked:function(r){this.setState({shouldShowSeeMoreLink:false,shouldLimitHeight:false});r.stopPropagation();}});f.exports=q;},null);
__d('SavedResponsesListView.react',['React','SavedResponsesListItem.react','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){if(this.props.isLoadingResponses)return (h.createElement('div',{className:"_e19"},h.createElement(j,{size:'large'})));var p=this.props.searchQuery.trim().toLowerCase(),q=function(r){return (r.message.toLowerCase().indexOf(p)!==-1||(r.title||'').toLowerCase().indexOf(p)!==-1);};return (h.createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},this.props.responses.filter(q).map((function(r){return (h.createElement(i,{key:r.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:r,tokens:this.props.supportedMacros}));}).bind(this))));};o.propTypes={isLoadingResponses:n.bool.isRequired,onResponseHover:n.func,onResponseSelected:n.func.isRequired,onResponseUnhover:n.func,pageID:n.string.isRequired,responses:n.array.isRequired,searchQuery:n.string.isRequired,shouldAdjustRightMargin:n.bool};f.exports=o;},null);
__d('SavedResponsesListViewContainer.react',['React','XUICloseButton.react','XUITextInput.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(r,s){o.constructor.call(this,r,s);}q.prototype.render=function(){var r=m("_3ohy",this.props.className);return (h.createElement('div',{className:r},this.renderSearchField(),this.props.children,h.createElement('div',{className:"_3ohz"},this.props.footerPart)));};q.prototype.renderSearchField=function(){return (h.createElement('div',{className:"_1x3h"},h.createElement('span',{className:"_1x3i"}),h.createElement(j,{onChange:this.props.onSearchQueryChanged,ref:'inputField',placeholder:l._("Search replies"),value:this.props.searchQuery}),h.createElement(i,{size:'small',onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":''})));};q.propTypes={footerPart:p.object.isRequired,onSearchQueryChanged:p.func.isRequired,onSearchQueryCleared:p.func.isRequired,searchQuery:p.string.isRequired};f.exports=q;},null);
__d('SavedResponsesManageListView.react',['React','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesPanel.react','ScrollableArea.react','cx','ix','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.PropTypes;q=babelHelpers.inherits(t,h.Component);r=q&&q.prototype;function t(u,v){'use strict';r.constructor.call(this,u,v);this.state={searchQuery:""};}t.prototype.render=function(){'use strict';return (h.createElement(l,{className:"_15ht",shouldShowBackButton:false,onClose:this.props.onClose,title:p._("Saved Replies")},h.createElement(k,{footerPart:this.$SavedResponsesManageListView1(),onSearchQueryChanged:(function(u){return this.$SavedResponsesManageListView2(u);}).bind(this),onSearchQueryCleared:(function(){return this.$SavedResponsesManageListView3();}).bind(this),searchQuery:this.state.searchQuery},this.$SavedResponsesManageListView4())));};t.prototype.$SavedResponsesManageListView4=function(){'use strict';return (h.createElement('div',{className:"_4pno"},h.createElement(m,{fade:true,shadow:true},h.createElement(j,{isLoadingResponses:false,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros}),this.$SavedResponsesManageListView5())));};t.prototype.$SavedResponsesManageListView1=function(){'use strict';var u=p._("Create Reply"),v=p._("Done");return (h.createElement('div',{className:"_4pnp"},h.createElement(i,{label:u,onClick:this.props.onCreateNewReplyClicked,image:o('/images/mobile/glyph/compose_dark-grey_m.png')}),h.createElement(i,{label:v,onClick:this.props.onDoneClicked})));};t.prototype.$SavedResponsesManageListView5=function(){'use strict';return (h.createElement('div',{className:"_4pnq"},h.createElement('div',{className:"_50f8"+(' '+"_4pnr")},p._("End of saved replies"))));};t.prototype.$SavedResponsesManageListView2=function(u){'use strict';this.setState({searchQuery:u.target.value});};t.prototype.$SavedResponsesManageListView3=function(){'use strict';this.setState({searchQuery:""});};t.propTypes={onClose:s.func.isRequired,onCreateNewReplyClicked:s.func.isRequired,onDoneClicked:s.func.isRequired,onResponseSelected:s.func.isRequired,otherUserID:s.string.isRequired,pageID:s.string.isRequired,responses:s.array.isRequired,supportedMacros:s.object.isRequired};f.exports=t;},null);
__d('SavedResponsesManagePanel.react',['React','SavedResponsesConstants','SavedResponsesEditResponseView.react','SavedResponsesManageListView.react','SavedResponsesUtils','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=h.PropTypes;o=babelHelpers.inherits(r,h.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={isLoadingResponses:true,responseToEdit:null,responses:[],supportedMacros:null,viewType:this.props.initialViewType};}r.prototype.componentWillMount=function(){this.$SavedResponsesManagePanel1();};r.prototype.render=function(){if(this.state.isLoadingResponses)return (h.createElement('div',{className:"_15ht"},h.createElement('div',{className:"_15hu"},h.createElement(m,{size:'large'}))));switch(this.state.viewType){case i.editPanelViewMode.LIST:return (h.createElement(k,{onCreateNewReplyClicked:(function(){return this.$SavedResponsesManagePanel2();}).bind(this),onDoneClicked:(function(){return this.$SavedResponsesManagePanel3();}).bind(this),otherUserID:this.props.otherUserID,onResponseSelected:(function(s,t){return (this.$SavedResponsesManagePanel4(s,t));}).bind(this),onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros}));case i.editPanelViewMode.EDIT:case i.editPanelViewMode.CREATE:case i.editPanelViewMode.PERSONALIZE:return (h.createElement(j,{initialResponse:this.state.responseToEdit,onBackButtonClicked:(function(){return this.$SavedResponsesManagePanel5(false);}).bind(this),onClose:this.props.onClose,onEditDone:(function(s){return this.$SavedResponsesManagePanel5(s);}).bind(this),onEnterPersonalizeView:(function(){return this.$SavedResponsesManagePanel6();}).bind(this),pageID:this.props.pageID,supportedMacros:this.state.supportedMacros}));}};r.prototype.$SavedResponsesManagePanel1=function(){this.setState({isLoadingResponses:true});l.fetchSavedResponses(this.props.pageID,this.props.otherUserID,(function(s,t){return (this.setState({responses:s,supportedMacros:t,isLoadingResponses:false}));}).bind(this));};r.prototype.$SavedResponsesManagePanel5=function(s){if(this.props.initialViewType===i.editPanelViewMode.CREATE){this.props.onClose();return;}if(s)this.$SavedResponsesManagePanel1();this.setState({responseToEdit:null,viewType:i.editPanelViewMode.LIST});};r.prototype.$SavedResponsesManagePanel2=function(){this.setState({responseToEdit:null,viewType:i.editPanelViewMode.CREATE});};r.prototype.$SavedResponsesManagePanel3=function(){this.props.onClose();};r.prototype.$SavedResponsesManagePanel6=function(){this.setState({viewType:i.editPanelViewMode.PERSONALIZE});};r.prototype.$SavedResponsesManagePanel4=function(s){this.setState({responseToEdit:s,viewType:i.editPanelViewMode.EDIT});};r.propTypes={initialViewType:q.string,onClose:q.func.isRequired,otherUserID:q.string.isRequired,pageID:q.string.isRequired};r.defaultProps={initialViewType:i.editPanelViewMode.LIST};f.exports=r;},null);
__d('PagesManagerCountDownTimer.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l,m=1000;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(o,p){'use strict';l.constructor.call(this,o,p);this.state={timeRemaining:this.$PagesManagerCountDownTimer1(this.props.expireTimestamp),isCountingDown:false};}n.prototype.componentDidMount=function(){'use strict';if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};n.prototype.componentWillReceiveProps=function(o){'use strict';this.setState({timeRemaining:this.$PagesManagerCountDownTimer1(o.expireTimestamp)});if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};n.prototype.render=function(){'use strict';return (h.createElement('div',{className:"_3uo9"+(this.props.isHidden?' '+"hidden_elem":'')},this.$PagesManagerCountDownTimer3()));};n.prototype.$PagesManagerCountDownTimer3=function(){'use strict';var o=Math.floor(this.state.timeRemaining/1000/60),p=this.$PagesManagerCountDownTimer4(Math.floor(o/60)),q=this.$PagesManagerCountDownTimer4(o%60);if(this.props.isNewInbox)return j._("Returning in {hours}:{minutes}",[j.param('hours',p),j.param('minutes',q)]);return j._("{hours}:{minutes} left",[j.param('hours',p),j.param('minutes',q)]);};n.prototype.$PagesManagerCountDownTimer1=function(o){'use strict';return o?o-Date.now():0;};n.prototype.$PagesManagerCountDownTimer2=function(){'use strict';this.setState({isCountingDown:true});var o=(function(){var p=this.$PagesManagerCountDownTimer1(this.props.expireTimestamp);if(p>0){this.setState({timeRemaining:p});this.$PagesManagerCountDownTimer2();return;}this.setState({isCountingDown:false});this.props.onTimeup();}).bind(this);setTimeout(o,m);};n.prototype.$PagesManagerCountDownTimer4=function(o){'use strict';return ("0"+o).slice(-2);};n.defaultProps={isNewInbox:false};f.exports=n;},null);
__d('PagesManagerPerfLogger',['PagesManagerPerfTypedLogger','Set'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=1000;function k(){this.$PagesManagerPerfLogger1=new i();}k.prototype.log=function(l,m){var n=m.perfID+':'+l;if(this.$PagesManagerPerfLogger1.has(n))return;this.$PagesManagerPerfLogger1.add(n);var o=Date.now()/j-m.baseTime;new h().setPageID(m.pageID).setEventName(l).setEventSeriesID(m.perfID).setPerfTime(Math.round(o)).logVital();};f.exports=new k();},null);
__d('PagesManagerActionType',['ImmutableObject','keyMirrorRecursive'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=new h(i({LIST:{FETCH:'',FETCHED:'',UPDATED:'',LOAD_MORE:'',LOADING:'',PREVENT_SCROLL:'',SELECT:'',DESELECT_ALL:'',VIEW:'',INITIAL_VIEW:'',CLEAR_INITIAL_VIEW:''},NAVIGATION_UNIT:{CHANGE:'',NOTIFICATION_COUNT_CHANGE:''},LAYOUT:{HEIGHT_CHANGE:''},SEARCH:{TOGGLE_SEARCH:'',CHANGE_SEARCH_TERM:'',IS_SEARCHING_CHANGED:'',ADD_SEARCH_CUSTOM_TAG:'',REMOVE_SEARCH_CUSTOM_TAG:''}}));f.exports=j;},null);
__d('PagesManagerDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerStore',['PagesManagerActionType','FluxStore','Map','PagesManagerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,k);this.$PagesManagerStore1=null;this.$PagesManagerStore2=0;this.$PagesManagerStore3=0;this.$PagesManagerStore4=[];this.$PagesManagerStore5=new j();}n.prototype.__onDispatch=function(o){'use strict';switch(o.type){case h.LIST.VIEW:this.$PagesManagerStore1=o.listItem;this.__emitChange();break;case h.LIST.SELECT:this.$PagesManagerStore6(o);this.__emitChange();break;case h.LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore2=o.heights.navigationHeight;this.$PagesManagerStore3=o.heights.layoutHeight;this.__emitChange();break;case h.LIST.DESELECT_ALL:this.$PagesManagerStore6({rowsAdded:[],rowsRemoved:this.$PagesManagerStore4,selectedRows:[]});this.__emitChange();break;case h.LIST.INITIAL_VIEW:this.$PagesManagerStore7(o.item);break;case h.LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore8=null;break;default:return;}};n.prototype.$PagesManagerStore7=function(o){'use strict';this.$PagesManagerStore8=o;this.$PagesManagerStore1=o;};n.prototype.$PagesManagerStore6=function(o){'use strict';this.$PagesManagerStore4=o.selectedRows;o.rowsAdded.forEach((function(p){this.$PagesManagerStore5.set(p,true);}).bind(this));o.rowsRemoved.forEach((function(p){this.$PagesManagerStore5.set(p,false);}).bind(this));};n.prototype.getViewingListItem=function(){'use strict';return this.$PagesManagerStore1;};n.prototype.getInitialViewingItem=function(){'use strict';return this.$PagesManagerStore8;};n.prototype.getLayoutHeight=function(){'use strict';return this.$PagesManagerStore3;};n.prototype.getNavigationHeight=function(){'use strict';return this.$PagesManagerStore2;};n.prototype.getIsRowSelected=function(o){'use strict';return this.$PagesManagerStore5.has(o)?this.$PagesManagerStore5.get(o):false;};n.prototype.getSelectedRows=function(){'use strict';return this.$PagesManagerStore4;};f.exports=new n(k);},null);
__d('PagesManagerListBatchActionContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;m.getStores=function(){'use strict';return [i];};m.calculateState=function(n){'use strict';var o=i.getSelectedRows(),p=o.length>0;return {showBatchAction:p,selectedRows:o};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildClass,p=babelHelpers.objectWithoutProperties(n,['ChildClass']);return (j.createElement(o,babelHelpers._extends({},p,{selectedRows:this.state.selectedRows,showBatchAction:this.state.showBatchAction})));};function m(){'use strict';k.apply(this,arguments);}f.exports=h.create(m);},null);
__d('PagesManagerAction',['PagesManagerActionType','PagesManagerDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={viewListItem:function(k){i.dispatch({type:h.LIST.VIEW,listItem:k});},setInitialViewItem:function(k){i.dispatch({type:h.LIST.INITIAL_VIEW,item:k});},clearInitialViewItem:function(){i.dispatch({type:h.LIST.CLEAR_INITIAL_VIEW});},setHeight:function(k){i.dispatch({type:h.LAYOUT.HEIGHT_CHANGE,heights:k});},handleSelectionChange:function(k,l,m){i.dispatch({type:h.LIST.SELECT,rowsAdded:k,rowsRemoved:l,selectedRows:m});},deselectAll:function(){i.dispatch({type:h.LIST.DESELECT_ALL});}};f.exports=j;},null);
__d('PagesManagerResizeListener',['EventEmitter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerListDetailLayout.react',['PagesManagerAction','PagesManagerResizeListener','React','ReactDOM','ResizeListener','SubscriptionsHandler','Vector','XUICard.react','Grid.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=p.GridItem,v=200;s=babelHelpers.inherits(w,j.Component);t=s&&s.prototype;w.getTopOffsetRelativeToView=function(x){'use strict';var y=0;do{if(!isNaN(x.offsetTop))y+=x.offsetTop;}while(x=x.offsetParent);return y;};function w(x,y){'use strict';t.constructor.call(this,x,y);this.state={top:0,height:v};}w.prototype.recalculateHeight=function(){'use strict';var x=Math.max(v,n.getViewportDimensions().y-w.getTopOffsetRelativeToView(k.findDOMNode(this))-2-30);this.setState({height:x});var y=n.getElementDimensions(k.findDOMNode(this.refs.navigationSection)).y;h.setHeight({layoutHeight:x,navigationHeight:y});this.setState({top:y+8});};w.prototype.componentDidMount=function(){'use strict';this.recalculateHeight();this.$PagesManagerListDetailLayout1=new m();this.$PagesManagerListDetailLayout1.addSubscriptions(l.add((function(){return this.recalculateHeight();}).bind(this)),i.addListener('change',(function(){return this.recalculateHeight();}).bind(this)));};w.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerListDetailLayout1&&this.$PagesManagerListDetailLayout1.release();};w.prototype.render=function(){'use strict';var x=this.state.height+'px',y=this.state.top+'px',z=this.props.navigationSection===null?null:j.createElement('div',{className:"_2-97",ref:'navigationSection'},this.props.navigationSection);return (j.createElement(o,{style:{height:x}},z,j.createElement('div',{className:"_10ua",style:{top:y}},j.createElement(p,{alignv:'top',className:"_10ue",cols:2},j.createElement(u,{className:r("_10uf",this.props.listClassName)},this.props.listSection),j.createElement(u,{className:"_10ug"},this.props.detailSection)))));};f.exports=w;},null);
__d('PagesManagerListRowContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;m.getStores=function(){'use strict';return [i];};m.calculateState=function(n,o){'use strict';var p=false,q=false;if(o&&o.listItem){p=i.getIsRowSelected(o.listItem);q=i.getViewingListItem()===o.listItem;}return {selected:p,isViewing:q};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildClass,p=babelHelpers.objectWithoutProperties(n,['ChildClass']);return (j.createElement(o,babelHelpers._extends({ref:'childClass',selected:this.state.selected,isViewing:this.state.isViewing},p)));};function m(){'use strict';k.apply(this,arguments);}f.exports=h.create(m,{withProps:true});},null);
__d('PagesManagerListView.react',['PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;n.prototype.$PagesManagerListView1=function(o){'use strict';i.viewListItem(o);};n.prototype.componentWillUpdate=function(o){'use strict';if(o.navigationKey!==this.props.navigationKey){i.deselectAll();this.refs.selectableList.clearSelection();}};function n(o){'use strict';m.constructor.call(this,o);this.state={scrollableHeight:0};}n.prototype.render=function(){'use strict';var o;if(!this.props.list.length){if(!this.props.initLoading){o=this.props.emptyView;}else o=this.$PagesManagerListView2();}else o=this.$PagesManagerListView3();return (k.createElement(j,{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',enableOnVisible:this.props.hasMoreItem,forceRequestMoreRows:true,height:this.props.height,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.props.onScroll,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false},o));};n.prototype.$PagesManagerListView3=function(){'use strict';return this.props.list.map((function(o){return (k.createElement(h,{ChildClass:this.props.listRowContainer,listItem:o,pageID:this.props.pageID,ref:this.props.getKey(o),key:this.props.getKey(o),onViewingListItem:this.$PagesManagerListView1,type:'li'}));}).bind(this));};n.prototype.clearSelection=function(){'use strict';this.refs.selectableList.clearSelection();};n.prototype.$PagesManagerListView2=function(){'use strict';return k.createElement('div',{key:'loading'});};f.exports=n;},null);
__d('PagesManagerStaticStore',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_pageID:'',setPageID:function(i){this._pageID=i;},getPageID:function(){return this._pageID;}};f.exports=h;},null);
__d('PagesManagerDetailContainer.react',['FluxContainer','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j.Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);this.state={height:0,viewingListItem:null};}m.getStores=function(){'use strict';return [i];};m.calculateState=function(n){'use strict';var o=i.getLayoutHeight()-i.getNavigationHeight();return {height:o,viewingListItem:i.getViewingListItem()};};m.prototype.render=function(){'use strict';var n=this.props,o=n.ChildContainerClass,p=babelHelpers.objectWithoutProperties(n,['ChildContainerClass']);return (j.createElement(o,babelHelpers._extends({height:this.state.height,viewingListItem:this.state.viewingListItem,listItemKey:this.props.getListItemKey(this.state.viewingListItem)},p)));};f.exports=h.create(m);},null);
__d('PagesManagerListContainer.react',['FluxContainer','PagesManagerAction','PagesManagerStore','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);this.state={height:0};}n.getStores=function(){'use strict';return [j];};n.calculateState=function(o){'use strict';var p=j.getLayoutHeight()-j.getNavigationHeight();return {height:p};};n.prototype.render=function(){'use strict';var o=this.props,p=o.ChildContainerClass,q=babelHelpers.objectWithoutProperties(o,['ChildContainerClass']);return (k.createElement(p,babelHelpers._extends({height:this.state.height,onSelectionChange:this.$PagesManagerListContainer1},q)));};n.prototype.$PagesManagerListContainer1=function(o){'use strict';var p=o.rowsAdded,q=o.rowsRemoved,r=o.selectedRows;i.handleSelectionChange(p,q,r);};f.exports=h.create(n);},null);
__d('AbstractPagesManagerListStore',['PagesManagerActionType','FluxStore','Map','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,i);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);this.__hasMoreItem=new j();this.__isLoading=false;}n.prototype.__onDispatch=function(o){'use strict';switch(o.type){case h.LIST.FETCH:this.__handleListFetch(o);break;case h.LIST.FETCHED:case h.LIST.UPDATED:this.__emitChange();break;case h.LIST.LOADING:this.__isLoading=true;this.__emitChange();break;case h.NAVIGATION_UNIT.CHANGE:this.__handleNavigationUnitChange(o);break;default:return;}};n.prototype.__handleListFetch=function(o){'use strict';k(0);};n.prototype.__handleNavigationUnitChange=function(o){'use strict';k(0);};n.prototype.hasMoreItem=function(o){'use strict';return this.__hasMoreItem.get(o);};n.prototype.getItemList=function(o,p){'use strict';k(0);};n.prototype.isLoading=function(){'use strict';return this.__isLoading;};f.exports=n;},null);
__d('PagesManagerMessagingActionType',['PagesManagerActionType','keyMirrorRecursive'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i({THREAD_LEVEL:{READ_STATUS:'',ARCHIVE_STATUS:'',SPAM_STATUS:'',UPDATE_THREAD:''},MESSAGE_LEVEL:{READ_RECEIPTS:''},SET_SCROLL_HEIGHT:null,AWAY_STATE:{UPDATE:null,FETCH:null,SET:null},SET_IS_CONTEXT_CARD_HIDDEN:null,MESSAGE_SEARCH:{NAME_SEARCH_UPDATE:null,SNIPPET_SEARCH_UPDATE:null,LOAD_MORE_NAME_RESULT:null,LOAD_MORE_SNIPPET_RESULT:null},HOT_LIKE:{END:null,START:null},CUSTOM_TAGS:{FETCH:null,UPDATE:null},BAN:{RESET:null,UPDATE:null}});Object.assign(j,h);f.exports=j;},null);
__d('PagesManagerMessagingAwayStatusDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerAwayToggleAction',['PagesManagerMessagingActionType','PagesManagerMessagingAwayStatusDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={fetchStatus:function(k){i.dispatch({pageID:k,type:h.AWAY_STATE.FETCH});},setToggleStatus:function(k,l){i.dispatch({pageID:k,toggle:l,type:h.AWAY_STATE.SET});}};f.exports=j;},null);
__d('PagesManagerAwayBanner.react',['PagesManagerAwayToggleAction','Image.react','LeftRight.react','Link.react','PagesManagerResizeListener','PagesManagerCountDownTimer.react','React','XUIText.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u='/help/800788243369168';s=babelHelpers.inherits(v,n.Component);t=s&&s.prototype;v.prototype.$PagesManagerAwayBanner1=function(){'use strict';h.setToggleStatus(this.props.pageID,false);};v.prototype.componentDidUpdate=function(w){'use strict';if(w.isAway!==this.props.isAway)l.emit('change');};v.prototype.renderLeftChild=function(){'use strict';var w=this.props.expirationTimestamp*1000;return (n.createElement('div',null,n.createElement(i,{className:"_2fei",src:r('images/pages/pages_manager/messages/clock.png')}),n.createElement(o,{className:"_2fek",size:'small',display:'inline'},q._("Currently Away"),n.createElement('div',{className:"_2fel"},n.createElement(m,{expireTimestamp:w,isHidden:!this.props.isAway,isNewInbox:true,onTimeup:(function(){return this.$PagesManagerAwayBanner1();}).bind(this)})))));};v.prototype.renderRightChild=function(){'use strict';return (n.createElement('div',null,n.createElement(k,{className:"_2fem",href:u,target:'_blank'},q._("Learn more")),n.createElement(o,{className:"_2fen",onClick:(function(){h.setToggleStatus(this.props.pageID,false);}).bind(this)},q._("Turn Off"))));};v.prototype.render=function(){'use strict';if(!this.props.isInitialized)return n.createElement('div',null);return (n.createElement(j,{className:"_2feo"+(!this.props.isAway?' '+"hidden_elem":'')},this.renderLeftChild(),this.renderRightChild()));};function v(){'use strict';s.apply(this,arguments);}f.exports=v;},null);
__d("XPagesAwayToggleController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/",{});},null);
__d("XPagesAwayToggleStatusController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/status\/",{});},null);
__d('PagesManagerMessagingAwayStatusStore',['ActorURI','AsyncRequest','PagesManagerMessagingActionType','FluxStore','PagesManagerMessagingAwayStatusDispatcher','XPagesAwayToggleController','XPagesAwayToggleStatusController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';o=babelHelpers.inherits(q,k);p=o&&o.prototype;function q(r){p.constructor.call(this,r);this.$PagesManagerMessagingAwayStatusStore1=false;this.$PagesManagerMessagingAwayStatusStore2=false;this.$PagesManagerMessagingAwayStatusStore3=0;}q.prototype.$PagesManagerMessagingAwayStatusStore4=function(r){var s=n.getURIBuilder().getURI();s=h.create(s,r);new i().setURI(s).setHandler((function(t){this.$PagesManagerMessagingAwayStatusStore1=t.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=t.payload.expiration;this.$PagesManagerMessagingAwayStatusStore2=true;this.__dispatcher.dispatch({type:j.AWAY_STATE.UPDATE});}).bind(this)).send();};q.prototype.$PagesManagerMessagingAwayStatusStore5=function(r,s){var t=m.getURIBuilder().getURI();t=h.create(t,r);new i().setURI(t).setMethod('POST').setData({is_away:s}).setHandler((function(u){this.$PagesManagerMessagingAwayStatusStore1=u.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=u.payload.expiration;this.__dispatcher.dispatch({type:j.AWAY_STATE.UPDATE});}).bind(this)).send();};q.prototype.__onDispatch=function(r){switch(r.type){case j.AWAY_STATE.SET:this.$PagesManagerMessagingAwayStatusStore5(r.pageID,r.toggle);break;case j.AWAY_STATE.FETCH:this.$PagesManagerMessagingAwayStatusStore4(r.pageID);break;case j.AWAY_STATE.UPDATE:this.__emitChange();break;default:break;}};q.prototype.isAway=function(){return this.$PagesManagerMessagingAwayStatusStore1;};q.prototype.isInitialized=function(){return this.$PagesManagerMessagingAwayStatusStore2;};q.prototype.getExpirationTimestamp=function(){return this.$PagesManagerMessagingAwayStatusStore3;};f.exports=new q(l);},null);
__d('PagesManagerAwayContainer.react',['PagesManagerMessagingAwayStatusStore','PagesManagerAwayToggleAction','FluxContainer','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k.Component);m=l&&l.prototype;n.getStores=function(){'use strict';return [h];};n.calculateState=function(o,p){'use strict';return {isAway:h.isAway(),isInitialized:h.isInitialized(),expirationTimestamp:h.getExpirationTimestamp()};};n.prototype.componentWillMount=function(){'use strict';i.fetchStatus(this.props.pageID);};n.prototype.render=function(){'use strict';var o=this.props,p=o.RenderClass,q=babelHelpers.objectWithoutProperties(o,['RenderClass']);return (k.createElement(p,babelHelpers._extends({},q,this.state)));};function n(){'use strict';l.apply(this,arguments);}f.exports=j.create(n,{withProps:true});},null);
__d('PagesManagerMessagingComposerActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({ATTACHMENT:{ALL_COMPLETE:'attachment/attach/complete/all',ATTACH_CACHED:'attachment/attach/cached',ATTACH_COMPLETE:'attachment/attach/complete',ATTACH_START:'attachment/attach/start',CANCEL:'attachment/cancel',DETACH:'attachment/detach',DETACH_ALL:'attachment/detach/all'},MESSAGE:{CLEAR:'message/clear',SET:'message/set'},PARTICIPANT:{SET:'participant/set'},SAVED_REPLIES:{LOADING:'saved-replies/loading',SET:'saved-replies/set'},SHARE_UPLOADER:{READY:'share-uploader/ready',CLEAR:'share-uploader/clear'},UPLOADER:{READY:'uploader/ready'}});f.exports=i;},null);
__d('PagesManagerMessagingComposerDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingComposerActions',['PagesManagerMessagingComposerActionTypes','PagesManagerMessagingComposerDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={clearMessage:function(){i.dispatch({actionType:h.MESSAGE.CLEAR});},clearShareLinkUploader:function(){i.dispatch({actionType:h.SHARE_UPLOADER.CLEAR});},completeAllAttachments:function(){i.dispatch({actionType:h.ATTACHMENT.ALL_COMPLETE});},completeAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.ATTACH_COMPLETE,attachment:k});},detachAllAttachments:function(){i.dispatch({actionType:h.ATTACHMENT.DETACH_ALL});},detachAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.DETACH,uploadID:k});},fileUploaderReady:function(k){i.dispatch({actionType:h.UPLOADER.READY,uploader:k});},setIsSavedRepliesLoading:function(k){i.dispatch({actionType:h.SAVED_REPLIES.LOADING,isLoading:k});},setMessage:function(k){i.dispatch({actionType:h.MESSAGE.SET,message:k});},setParticipant:function(k){i.dispatch({actionType:h.PARTICIPANT.SET,participant:k});},setSavedReplies:function(k,l){i.dispatch({actionType:h.SAVED_REPLIES.SET,replies:k,tokens:l});},setShareLinkUploader:function(k){i.dispatch({actionType:h.SHARE_UPLOADER.READY,uploader:k});},startAttachment:function(k){i.dispatch({actionType:h.ATTACHMENT.ATTACH_START,files:k});}};f.exports=j;},null);
__d('PagesManagerMessagingComposerStore',['PagesManagerMessagingComposerActionTypes','FluxStore','Map','MercuryConfig','PagesManagerMessagingComposerDispatcher','PagesMessagingConfig','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';o=babelHelpers.inherits(q,i);p=o&&o.prototype;function q(r){p.constructor.call(this,r);this.$PagesManagerMessagingComposerStore1=new j();this.$PagesManagerMessagingComposerStore2=null;this.$PagesManagerMessagingComposerStore3=false;this.$PagesManagerMessagingComposerStore4='';this.$PagesManagerMessagingComposerStore5=null;this.$PagesManagerMessagingComposerStore6={replies:[],tokens:{}};this.$PagesManagerMessagingComposerStore7=null;}q.prototype.getAllAttachmentsMeta=function(){var r=this.$PagesManagerMessagingComposerStore8(),s=[];for(var t=this.$PagesManagerMessagingComposerStore1.values(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var w;if(u){if(v>=t.length)break;w=t[v++];}else{v=t.next();if(v.done)break;w=v.value;}var x=w;if(x.id&&r.indexOf(x.id)!==-1||x.isUploading)s.push(x);}return s;};q.prototype.getAttachedAttachmentIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAttachments();return [];};q.prototype.getAttachedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getImageFiles();return [];};q.prototype.getAttachedAnimatedImageIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAnimatedImageFiles();return [];};q.prototype.getAttachedVideoIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getVideoFiles();return [];};q.prototype.getAttachedAudioFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getAudioFiles();return [];};q.prototype.getAttachedFilesIds=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.getFiles();return [];};q.prototype.getFileUploader=function(){return this.$PagesManagerMessagingComposerStore2;};q.prototype.getIsAttachmentUploading=function(){if(this.$PagesManagerMessagingComposerStore2)return this.$PagesManagerMessagingComposerStore2.isUploading();return false;};q.prototype.getIsSavedRepliesLoading=function(){return this.$PagesManagerMessagingComposerStore3;};q.prototype.getMessage=function(){return this.$PagesManagerMessagingComposerStore4;};q.prototype.getQuickReplyMode=function(){return m.sendOnEnter;};q.prototype.getParticipant=function(){return this.$PagesManagerMessagingComposerStore5;};q.prototype.getSavedReplies=function(){return this.$PagesManagerMessagingComposerStore6;};q.prototype.getShareLink=function(){if(this.$PagesManagerMessagingComposerStore7)return this.$PagesManagerMessagingComposerStore7.getAttachData();};q.prototype.getUploadActionFromUserID=function(r){if(!r)return null;return new n(k.upload_url).addQueryData('request_user_id',r).toString();};q.prototype.$PagesManagerMessagingComposerStore9=function(r,s){this.$PagesManagerMessagingComposerStore1.set(s.upload_id,{id:'',isUploading:true,name:s.metadata.filename,type:s.metadata.filetype,uploadID:s.upload_id});};q.prototype.$PagesManagerMessagingComposerStore10=function(r){r.map((function(s){this.$PagesManagerMessagingComposerStore1.set(s.upload_id,{id:'',isUploading:true,name:s.metadata.name,type:s.metadata.type,uploadID:s.upload_id});}).bind(this));};q.prototype.$PagesManagerMessagingComposerStore11=function(){this.$PagesManagerMessagingComposerStore4='';};q.prototype.$PagesManagerMessagingComposerStore12=function(r){if(this.$PagesManagerMessagingComposerStore1.has(r))this.$PagesManagerMessagingComposerStore1['delete'](r);};q.prototype.$PagesManagerMessagingComposerStore13=function(){if(this.$PagesManagerMessagingComposerStore7)this.$PagesManagerMessagingComposerStore7.clear();};q.prototype.$PagesManagerMessagingComposerStore14=function(r){var s;if(this.$PagesManagerMessagingComposerStore1.has(r.upload_id)){s=this.$PagesManagerMessagingComposerStore1.get(r.upload_id);s.id=this.$PagesManagerMessagingComposerStore15(r);s.isUploading=false;this.$PagesManagerMessagingComposerStore1.set(r.upload_id,s);}};q.prototype.$PagesManagerMessagingComposerStore8=function(){if(!this.$PagesManagerMessagingComposerStore2)return [];var r=this.$PagesManagerMessagingComposerStore2;return [].concat(r.getAttachments(),r.getImageFiles(),r.getAnimatedImageFiles(),r.getVideoFiles(),r.getAudioFiles(),r.getFiles());};q.prototype.$PagesManagerMessagingComposerStore15=function(r){return r.metadata.image_id||r.metadata.gif_id||r.metadata.video_id||r.metadata.audio_id||r.metadata.file_id;};q.prototype.__onDispatch=function(r){switch(r.actionType){case h.ATTACHMENT.ALL_COMPLETE:this.$PagesManagerMessagingComposerStore16();this.__emitChange();break;case h.ATTACHMENT.ATTACH_COMPLETE:this.$PagesManagerMessagingComposerStore14(r.attachment);this.__emitChange();break;case h.ATTACHMENT.ATTACH_START:this.$PagesManagerMessagingComposerStore10(r.files);this.__emitChange();break;case h.ATTACHMENT.DETACH:this.$PagesManagerMessagingComposerStore17(r.uploadID);this.__emitChange();break;case h.ATTACHMENT.DETACH_ALL:this.$PagesManagerMessagingComposerStore18();this.__emitChange();break;case h.MESSAGE.CLEAR:this.$PagesManagerMessagingComposerStore11();break;case h.MESSAGE.SET:this.$PagesManagerMessagingComposerStore19(r.message);this.__emitChange();break;case h.PARTICIPANT.SET:this.$PagesManagerMessagingComposerStore20(r.participant);this.__emitChange();break;case h.SAVED_REPLIES.LOADING:this.$PagesManagerMessagingComposerStore21(r.isLoading);this.__emitChange();break;case h.SAVED_REPLIES.SET:this.$PagesManagerMessagingComposerStore22(r.replies,r.tokens);this.__emitChange();break;case h.SHARE_UPLOADER.READY:this.$PagesManagerMessagingComposerStore23(r.uploader);break;case h.SHARE_UPLOADER.CLEAR:this.$PagesManagerMessagingComposerStore13();break;case h.UPLOADER.READY:this.$PagesManagerMessagingComposerStore24(r.uploader);this.$PagesManagerMessagingComposerStore25();break;}};q.prototype.$PagesManagerMessagingComposerStore18=function(){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeAttachments();this.$PagesManagerMessagingComposerStore1.clear();}};q.prototype.$PagesManagerMessagingComposerStore17=function(r){if(this.$PagesManagerMessagingComposerStore2){this.$PagesManagerMessagingComposerStore2.removeOneAttachment(r);this.$PagesManagerMessagingComposerStore12(r);}};q.prototype.$PagesManagerMessagingComposerStore16=function(){this.$PagesManagerMessagingComposerStore1.forEach((function(r,s){if(r.isUploading)this.$PagesManagerMessagingComposerStore1['delete'](r.uploadID);}).bind(this));};q.prototype.$PagesManagerMessagingComposerStore24=function(r){this.$PagesManagerMessagingComposerStore2=r;};q.prototype.$PagesManagerMessagingComposerStore21=function(r){this.$PagesManagerMessagingComposerStore3=r;};q.prototype.$PagesManagerMessagingComposerStore19=function(r){this.$PagesManagerMessagingComposerStore4=r;};q.prototype.$PagesManagerMessagingComposerStore20=function(r){this.$PagesManagerMessagingComposerStore5=r;};q.prototype.$PagesManagerMessagingComposerStore22=function(r,s){this.$PagesManagerMessagingComposerStore6={replies:r,tokens:s};};q.prototype.$PagesManagerMessagingComposerStore23=function(r){this.$PagesManagerMessagingComposerStore7=r;};q.prototype.$PagesManagerMessagingComposerStore25=function(){var r=this.$PagesManagerMessagingComposerStore2;if(r)r.subscribe('cached-file-added',this.$PagesManagerMessagingComposerStore9.bind(this));};f.exports=new q(l);},null);
__d('PagesManagerMessagingComposerAttachmentListItem.react',['Image.react','React','XUICloseButton.react','XUISpinner.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=i.PropTypes;n=babelHelpers.inherits(q,i.Component);o=n&&n.prototype;function q(r){o.constructor.call(this,r);this.$PagesManagerMessagingComposerAttachmentListItem1=(function(){return this.props.onDetach(this.props.uploadID);}).bind(this);}q.prototype.$PagesManagerMessagingComposerAttachmentListItem2=function(){if(this.props.type.startsWith('image')){return m('/images/pages/pages_manager/messages/photo-attachment.png');}else if(this.props.type.startsWith('video')){return m('/images/pages/pages_manager/messages/video-attachment.png');}else if(this.props.type.startsWith('audio')){return m('/images/pages/pages_manager/messages/audio-attachment.png');}else if(this.props.type.startsWith('text'))return m('/images/pages/pages_manager/messages/text-attachment.png');return m('/images/pages/pages_manager/messages/general-attachment.png');};q.prototype.$PagesManagerMessagingComposerAttachmentListItem3=function(){return (i.createElement(j,{className:"_2uia",onClick:this.$PagesManagerMessagingComposerAttachmentListItem1}));};q.prototype.$PagesManagerMessagingComposerAttachmentListItem4=function(){return (i.createElement('span',{className:"_2uib"},this.props.isUploading?i.createElement(k,{size:'large'}):i.createElement(h,{src:this.$PagesManagerMessagingComposerAttachmentListItem2(),alt:this.props.type})));};q.prototype.$PagesManagerMessagingComposerAttachmentListItem5=function(){return (i.createElement('span',{className:"_2uic"},this.props.name));};q.prototype.render=function(){return (i.createElement('li',{className:"clearfix _2uid"},i.createElement('span',{className:"_kqe _kqf"},this.$PagesManagerMessagingComposerAttachmentListItem4()),i.createElement('span',{className:"_kqe _kqh"},this.$PagesManagerMessagingComposerAttachmentListItem5()),i.createElement('span',{className:"_kqe _kqi"},this.$PagesManagerMessagingComposerAttachmentListItem3())));};q.propTypes={attachmentID:p.string,isUploading:p.bool,key:p.string,name:p.string,onDetach:p.func,type:p.string,uploadID:p.string};f.exports=q;},null);
__d('PagesManagerMessagingComposerAttachmentList.react',['PagesManagerMessagingComposerAttachmentListItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';var m=i.PropTypes;k=babelHelpers.inherits(n,i.Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);}n.prototype.$PagesManagerMessagingComposerAttachmentList1=function(o){return (i.createElement(h,{isUploading:o.isUploading,key:o.uploadID,name:o.name,onDetach:this.props.onDetach,type:o.type,uploadID:o.uploadID}));};n.prototype.render=function(){if(this.props.attachments.length>0)return (i.createElement('ul',{className:"_27ru"},this.props.attachments.map(this.$PagesManagerMessagingComposerAttachmentList1,this)));return null;};n.propTypes={attachments:m.array.isRequired,onDetach:m.func.isRequired};n.defaultProps={attachments:[]};f.exports=n;},null);
__d("XPagesSavedResponsesImageDuplicationController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/image\/duplication\/",{});},null);
__d('PagesManagerMessagingSavedRepliesList.react',['Link.react','React','PagesManagerMessagingSavedRepliesListItem.react','ScrollableArea.react','XUISpinner.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=i.PropTypes;o=babelHelpers.inherits(r,i.Component);p=o&&o.prototype;r.prototype.$PagesManagerMessagingSavedRepliesList1=function(s){return (s.message.toLowerCase().indexOf(this.props.filter)!==-1||(s.title||'').toLowerCase().indexOf(this.props.filter)!==-1);};r.prototype.render=function(){return (i.createElement('div',{className:"_1_25"+(this.props.isLoading?' '+"_1_26":'')+(!this.props.isLoading&&this.props.replies.length===0?' '+"_1_27":'')},this.props.isLoading?this.$PagesManagerMessagingSavedRepliesList2():null,this.$PagesManagerMessagingSavedRepliesList3()));};r.prototype.$PagesManagerMessagingSavedRepliesList4=function(){return (i.createElement(h,{onClick:(function(){return this.props.onCreateNewReply();}).bind(this),className:"_1_2a"},n._("Create new reply")));};r.prototype.$PagesManagerMessagingSavedRepliesList5=function(){return (i.createElement('div',{className:"_2ph_ _1_28"},i.createElement('p',null,this.$PagesManagerMessagingSavedRepliesList6()),i.createElement('p',null,this.$PagesManagerMessagingSavedRepliesList4())));};r.prototype.$PagesManagerMessagingSavedRepliesList2=function(){return (i.createElement('div',null,i.createElement('div',{className:"_2ph_ _1_29"},i.createElement(l,{size:'large'}))));};r.prototype.$PagesManagerMessagingSavedRepliesList6=function(){return n._("End of saved replies");};r.prototype.$PagesManagerMessagingSavedRepliesList3=function(){return (i.createElement(k,{fade:true,shadow:false,height:300},i.createElement('ul',{className:"_1_2b"},this.props.replies.map(this.$PagesManagerMessagingSavedRepliesList7,this),i.createElement('li',{className:"_2ph_ _1_2c"},this.$PagesManagerMessagingSavedRepliesList5()))));};r.prototype.$PagesManagerMessagingSavedRepliesList7=function(s,t){return (i.createElement(j,{className:!this.$PagesManagerMessagingSavedRepliesList1(s)?"hidden_elem":'',key:t,onClick:this.props.onReplySelected,onMouseEnter:this.props.onReplyMouseEnter,onMouseLeave:this.props.onReplyMouseLeave,pageID:this.props.pageID,reply:s,tokens:this.props.tokens}));};function r(){o.apply(this,arguments);}r.defaultProps={filter:''};r.propTypes={filter:q.string,isLoading:q.bool.isRequired,onCreateNewReply:q.func.isRequired,onReplyMouseEnter:q.func.isRequired,onReplyMouseLeave:q.func.isRequired,onReplySelected:q.func.isRequired,pageID:q.string.isRequired,replies:q.array.isRequired,tokens:q.object.isRequired};f.exports=r;},null);
__d('PagesManagerMessagingSavedRepliesFlyout.react',['Image.react','LeftRight.react','Link.react','PagesManagerMessagingSavedRepliesList.react','React','XUICloseButton.react','XUITextInput.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=l.PropTypes;r=babelHelpers.inherits(u,l.Component);s=r&&r.prototype;function u(v){s.constructor.call(this,v);this.state={searchQuery:''};}u.prototype.$PagesManagerMessagingSavedRepliesFlyout1=function(v){var w=v.target.value;this.setState({searchQuery:w});};u.prototype.$PagesManagerMessagingSavedRepliesFlyout2=function(){this.setState({searchQuery:''});};u.prototype.render=function(){return (l.createElement('div',{className:"_201v"},this.$PagesManagerMessagingSavedRepliesFlyout3(),this.$PagesManagerMessagingSavedRepliesFlyout4(),this.$PagesManagerMessagingSavedRepliesFlyout5()));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout3=function(){return (l.createElement('div',{className:"_2ph_ _201w"},l.createElement(i,null,l.createElement('h3',{className:"_201x"},p._("Saved Save Replies")),l.createElement(j,{className:'PagesManagerMessagingSavedRepliesFlyout/manageLink',onClick:this.props.onManageReplies},p._("Manage Replies")))));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout5=function(){return (l.createElement(k,{filter:this.state.searchQuery,isLoading:this.props.isLoading,onCreateNewReply:this.props.onCreateNewReply,onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens}));};u.prototype.$PagesManagerMessagingSavedRepliesFlyout4=function(){return (l.createElement('div',{className:"_2ph_ _201y"},l.createElement(h,{className:"_201z",src:q('/images/browse/search/search-gray.png')}),l.createElement(n,{className:"_201-",onChange:this.$PagesManagerMessagingSavedRepliesFlyout1.bind(this),ref:'inputField',placeholder:p._("Search Saved Replies"),value:this.state.searchQuery}),l.createElement(m,{size:'small',onClick:this.$PagesManagerMessagingSavedRepliesFlyout2.bind(this),className:this.state.searchQuery.length===0?"hidden_elem":''})));};u.propTypes={isLoading:t.bool.isRequired,onCreateNewReply:t.func.isRequired,onManageReplies:t.func.isRequired,onReplyMouseEnter:t.func.isRequired,onReplyMouseLeave:t.func.isRequired,onReplySelected:t.func.isRequired,pageID:t.string.isRequired,replies:t.array.isRequired,tokens:t.object.isRequired};f.exports=u;},null);
__d('PagesManagerMessagingSavedRepliesButton.react',['Image.react','Link.react','PagesEventObserver','PagesEventType','PagesManagerMessagingSavedRepliesFlyout.react','React','SavedResponsesConstants','SavedResponsesManagePanel.react','XUIContextualDialog.react','XUIDialog.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;'use strict';var w=m.PropTypes,x=600,y=405;u=babelHelpers.inherits(z,m.Component);v=u&&u.prototype;function z(aa){v.constructor.call(this,aa);this.state={initialSavedResponsesManageViewType:n.editPanelViewMode.LIST,isFlyoutShown:false,isManageDialogVisible:false};}z.prototype.$PagesManagerMessagingSavedRepliesButton1=function(){this.props.onFetchReplies();j.notify(k.SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:!this.state.isFlyoutShown});this.setState({isFlyoutShown:!this.state.isFlyoutShown});};z.prototype.$PagesManagerMessagingSavedRepliesButton2=function(){this.props.onFetchReplies();this.setState({isManageDialogVisible:false});};z.prototype.$PagesManagerMessagingSavedRepliesButton3=function(){setTimeout((function(){j.notify(k.SAVED_REPLIES_TOGGLE_BROWSE_VIEW,this.props.pageID,{toggle_on:false});this.setState({isFlyoutShown:false});}).bind(this),0);};z.prototype.render=function(){var aa=s._("Choose a Saved Reply");return (m.createElement('div',null,m.createElement(i,{'aria-label':this.props.showTooltip?aa:null,className:"_3xmz",'data-hover':'tooltip','data-tooltip-align':'right',onClick:this.$PagesManagerMessagingSavedRepliesButton1.bind(this)},m.createElement(h,{alt:'',className:"_3xm-",ref:'icon',src:t('/images/pages/pages_manager/messages/composer-saved-replies.png'),tabIndex:0})),this.$PagesManagerMessagingSavedRepliesButton4(),this.$PagesManagerMessagingSavedRepliesButton5()));};z.prototype.$PagesManagerMessagingSavedRepliesButton4=function(){if(this.state.isFlyoutShown)return (m.createElement(p,{alignment:'right',className:"_3xm_",contextRef:(function(){return this.refs.icon;}).bind(this),hasActionableContext:true,hideOnEscape:false,onBlur:this.$PagesManagerMessagingSavedRepliesButton3.bind(this),position:'above',ref:'flyoutDialog',shown:this.state.isFlyoutShown,width:y},m.createElement(l,{isLoading:this.props.isSavedRepliesLoading,onCreateNewReply:(function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:n.editPanelViewMode.CREATE});}).bind(this),onManageReplies:(function(){return this.setState({isManageDialogVisible:true,initialSavedResponsesManageViewType:n.editPanelViewMode.LIST});}).bind(this),onReplyMouseEnter:this.props.onReplyMouseEnter,onReplyMouseLeave:this.props.onReplyMouseLeave,onReplySelected:this.props.onReplySelected,pageID:this.props.pageID,replies:this.props.replies,tokens:this.props.tokens})));};z.prototype.$PagesManagerMessagingSavedRepliesButton5=function(){if(this.state.isManageDialogVisible)return (m.createElement(q,{layerHideOnBlur:false,ref:'managementDialog',shown:this.state.isManageDialogVisible,width:x},m.createElement(o,{initialViewType:this.state.initialSavedResponsesManageViewType,onClose:this.$PagesManagerMessagingSavedRepliesButton2.bind(this),otherUserID:this.props.recipientID,pageID:this.props.pageID})));};z.propTypes={isSavedRepliesLoading:w.bool.isRequired,onFetchReplies:w.func.isRequired,onReplyMouseEnter:w.func.isRequired,onReplyMouseLeave:w.func.isRequired,onReplySelected:w.func.isRequired,pageID:w.string.isRequired,recipientID:w.string.isRequired,replies:w.array.isRequired,showTooltip:w.bool,tokens:w.object.isRequired};z.defaultProps={showTooltip:true};f.exports=z;},null);
__d('PagesManagerMessagingComposerView.react',['PagesManagerMessagingComposerAttachmentList.react','Image.react','MercuryDragDropPrompt.react','MessengerHotLikeButton.react','PagesEventObserver','PagesEventType','PagesManagerMessagingSavedRepliesButton.react','PagesMessageSuggestedResponseHandler','PagesMessengerFileUploader.react','PagesMessengerOmnipicker.react','PagesMessengerSuggestedResponseView.react','PagesMessengerTextInput.react','React','UFIStickerButton.react','XUIButton.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa;'use strict';var ba=t.PropTypes,ca=function(){};z=babelHelpers.inherits(da,t.Component);aa=z&&z.prototype;function da(ea){aa.constructor.call(this,ea);this.state={isAttachmentsButtonVisible:true,isSavedRepliesButtonVisible:true,isStickerButtonVisible:true,placeholder:''};}da.prototype.componentDidUpdate=function(ea,fa){if(this.props.onInitialRender&&!ea.participant&&this.props.participant)this.props.onInitialRender();if(ea&&ea.message!==this.props.message)this.refs.textInput.updateHeight();};da.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerView1(this.props);};da.prototype.componentWillReceiveProps=function(ea){this.$PagesManagerMessagingComposerView1(ea,this.state);};da.prototype.$PagesManagerMessagingComposerView1=function(ea){var fa=ea.attachments.length,ga=ea.message.length;this.setState({isSavedRepliesButtonVisible:ga<1&&fa<1,isStickerButtonVisible:ga<1&&fa<1});};da.prototype.$PagesManagerMessagingComposerView2=function(){return (this.props.canAttachFiles&&this.state.isAttachmentsButtonVisible);};da.prototype.$PagesManagerMessagingComposerView3=function(){return (this.props.canUseSavedReplies&&this.state.isSavedRepliesButtonVisible);};da.prototype.$PagesManagerMessagingComposerView4=function(){return (this.props.canUseStickers&&this.state.isStickerButtonVisible);};da.prototype.$PagesManagerMessagingComposerView5=function(ea){this.props.onEmoticonSelected(ea,this.refs.textInput.getTextFieldDOM());};da.prototype.$PagesManagerMessagingComposerView6=function(ea){ea.preventDefault();this.props.onSend();};da.prototype.$PagesManagerMessagingComposerView7=function(){if(this.$PagesManagerMessagingComposerView2()){if(this.props.canUseOmnipicker)return (t.createElement('div',{className:"_4dvy"},t.createElement(q,{onPhotosSelected:this.props.onOmnipickerPhotosSelected,uploadURI:this.props.uploaderActionURI,pageID:this.props.userID})));return (t.createElement('div',{className:"_4dvy"},t.createElement(p,{actionURI:this.props.uploaderActionURI,iconSize:'large',onFileUploaderMounted:this.props.onFileUploaderMounted,onSubmit:this.props.onFileUploaderSubmit,onUpdateAttachmentsShelf:this.props.onFileUploadUpdateUI,onUploadFinished:this.props.onFileUploadFinished,ref:'fileUploader'})));}};da.prototype.$PagesManagerMessagingComposerView8=function(){if(this.props.canAttachFiles)return (t.createElement(h,{attachments:this.props.attachments,attachmentsUploading:this.props.attachmentsUploading,onDetach:this.props.onAttachmentDetach,ref:'attachmentList'}));};da.prototype.$PagesManagerMessagingComposerView9=function(){if(this.props.canUseHotlike&&this.props.threadID)return (t.createElement('span',{className:"_1z9h"},t.createElement(k,{disabled:!this.props.threadID,sendSticker:this.props.onStickerSelected,threadID:this.props.threadID})));};da.prototype.$PagesManagerMessagingComposerView10=function(){var ea=this.state.placeholder||x._("Write a reply...");return (t.createElement('div',{className:"_4dv-"},t.createElement(s,{className:"_1p7p _5id1 _4dv_",onNoShiftEnter:this.props.isQuickReplyMode?(function(fa){return this.$PagesManagerMessagingComposerView6(fa);}).bind(this):null,onFocus:this.props.onFocus,placeholder:ea,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};da.prototype.$PagesManagerMessagingComposerView11=function(){return (t.createElement('div',{className:"_6fk",ref:'linkPreview'}));};da.prototype.$PagesManagerMessagingComposerView12=function(){return (t.createElement('div',{className:"_4dw0"},t.createElement(i,{className:"_1cjc",src:this.props.participant.image_src})));};da.prototype.$PagesManagerMessagingComposerView13=function(){if(this.$PagesManagerMessagingComposerView3()&&this.props.recipientID)return (t.createElement('span',{className:"_4dw1"},t.createElement(n,{recipientID:this.props.recipientID,isSavedRepliesLoading:this.props.isSavedRepliesLoading,onFetchReplies:this.props.onFetchReplies,onReplyMouseEnter:this.$PagesManagerMessagingComposerView14.bind(this),onReplyMouseLeave:this.$PagesManagerMessagingComposerView15.bind(this),onReplySelected:this.$PagesManagerMessagingComposerView16.bind(this),pageID:this.props.userID,replies:this.props.savedReplies.replies,showTooltip:true,tokens:this.props.savedReplies.tokens})));};da.prototype.$PagesManagerMessagingComposerView17=function(){var ea=x._("Send");return (t.createElement('div',{className:"_4dw3"},t.createElement(v,{disabled:this.props.isSendBlocked,label:ea,onClick:(function(fa){return this.$PagesManagerMessagingComposerView6(fa);}).bind(this),use:'confirm'})));};da.prototype.$PagesManagerMessagingComposerView18=function(){var ea=x._("Post a Sticker");if(this.$PagesManagerMessagingComposerView4())return (t.createElement('span',{className:"_4dw4"},t.createElement(u,{onStickerSelected:this.props.onStickerSelected,onEmoticonSelected:(function(fa){return this.$PagesManagerMessagingComposerView5(fa);}).bind(this)},t.createElement(i,{alt:ea,className:"_3fhi",src:y('/images/pages/pages_manager/messages/composer-stickers.png')}))));};da.prototype.$PagesManagerMessagingComposerView19=function(){return (t.createElement(r,{suggestedResponseHandler:this.props.suggestedResponseHandler,onAccepted:this.props.onSuggestedResponseAccept,onDeclined:this.props.onSuggestedResponseDecline}));};da.prototype.render=function(){if(!this.props.participant)return t.createElement('div',{className:"_26ue"});return (t.createElement('div',{className:"__1d"},t.createElement(j,null),t.createElement('div',{className:"_4dw9"},this.$PagesManagerMessagingComposerView12(),this.$PagesManagerMessagingComposerView10(),t.createElement('div',{className:"_3-8o _4dwa"},this.$PagesManagerMessagingComposerView7(),this.$PagesManagerMessagingComposerView18(),this.$PagesManagerMessagingComposerView13(),this.$PagesManagerMessagingComposerView9(),this.$PagesManagerMessagingComposerView17())),t.createElement('div',{className:"_6fl"},this.$PagesManagerMessagingComposerView19(),this.$PagesManagerMessagingComposerView11()),this.$PagesManagerMessagingComposerView8()));};da.prototype.$PagesManagerMessagingComposerView14=function(ea){this.setState({placeholder:ea});};da.prototype.$PagesManagerMessagingComposerView15=function(){this.setState({placeholder:''});};da.prototype.$PagesManagerMessagingComposerView16=function(ea,fa){this.setState({placeholder:''});this.props.onReplySelected(ea,fa);l.notify(m.SAVED_REPLIES_APPLY_REPLY,this.props.userID);};da.propTypes={attachments:ba.array,canAttachFiles:ba.bool,canUseSavedReplies:ba.bool,canUseStickers:ba.bool,isQuickReplyMode:ba.bool,isSavedRepliesLoading:ba.bool,isSendBlocked:ba.bool,message:ba.string.isRequired,onAttachmentDetach:ba.func,onEmoticonSelected:ba.func,onFetchReplies:ba.func.isRequired,onFileUploaderSubmit:ba.func,onFileUploaderMounted:ba.func,onFileUploadFinished:ba.func,onFocus:ba.func,onInitialRender:ba.func,onInputChange:ba.func,onSend:ba.func,onStickerSelected:ba.func,onSuggestedResponseAccept:ba.func,onSuggestedResponseDecline:ba.func,participant:ba.object,recipientID:ba.string,savedReplies:ba.object,suggestedResponseHandler:ba.instanceOf(o),uploaderActionURI:ba.string,userID:ba.string};da.defaultProps={attachments:[],canAttachFiles:true,canUseOmnipicker:false,canUseSavedReplies:true,canUseStickers:true,isSendBlocked:false,onAttachmentDetach:ca,onEmoticonSelected:ca,onFileUploaderMounted:ca,onFileUploaderSubmit:ca,onFileUploadFinished:ca,onInputChange:ca,onSend:ca,onStickerSelected:ca,onSuggestedResponseAccept:ca};f.exports=da;},null);
__d('PagesManagerMessagingMessagelistDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingNUXActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({RESET_STEP:'',SET_IS_VISIBLE:'',SET_ROOT_ELEMENT:'',SET_STEP:'',SET_SHOULD_SHOW_BANNER:'',SET_SHOULD_SHOW_CONTEXT_CARD_STEP:'',SET_DEPENDENCY_READY:{COMPOSER:'',CONTEXT_CARD:'',THREADLIST:''}});f.exports=i;},null);
__d('PagesManagerMessagingNUXDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('PagesManagerMessagingNUXActions',['PagesManagerMessagingNUXActionTypes','PagesManagerMessagingNUXDispatcher','PagesManagerMessagingMessagelistDispatcher','PagesManagerMessagingActionType'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={resetStep:function(){i.dispatch({actionType:h.RESET_STEP});},setComposerReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.COMPOSER});},setContextCardReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.CONTEXT_CARD});},setThreadlistReady:function(){i.dispatch({actionType:h.SET_DEPENDENCY_READY.THREADLIST});},setIsVisible:function(m){i.dispatch({actionType:h.SET_IS_VISIBLE,isVisible:m});},setRootElement:function(m){i.dispatch({actionType:h.SET_ROOT_ELEMENT,rootElement:m});},setStep:function(m){i.dispatch({actionType:h.SET_STEP,step:m});},setShouldShowBanner:function(m){i.dispatch({actionType:h.SET_SHOULD_SHOW_BANNER,shouldShow:m});},setShouldShowContextCardStep:function(m){i.dispatch({actionType:h.SET_SHOULD_SHOW_CONTEXT_CARD_STEP,shouldShow:m});},showContextCard:function(){j.dispatch({type:k.SET_IS_CONTEXT_CARD_HIDDEN,isHidden:false});}};f.exports=l;},null);
__d('PagesManagerMessagingComposerContainer.react',['DragDropTarget','EmoticonsList','EmoticonUtils','FluxContainer','MercuryIDs','MercuryMessageActions','MercuryMessageObject','MercuryParticipants','MercurySourceType','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerActions','PagesManagerMessagingComposerStore','PagesManagerMessagingComposerView.react','PagesManagerMessagingNUXActions','PagesMessagingConfig','PagesMessengerShareLinkUploader','React','ReactDOM','SavedResponsesUtils','SelectionPosition','SubscriptionsHandler','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea,fa;'use strict';var ga=y.PropTypes;ea=babelHelpers.inherits(ha,y.Component);fa=ea&&ea.prototype;ha.getStores=function(){return [t];};ha.calculateState=function(ia,ja){var ka=ia?ia.isShareLinkUploading:false;return {attachments:t.getAllAttachmentsMeta(),isAttachmentUploading:t.getIsAttachmentUploading(),isSavedRepliesLoading:t.getIsSavedRepliesLoading(),isQuickReplyMode:t.getQuickReplyMode(),isShareLinkUploading:ka,message:t.getMessage(),participant:t.getParticipant(),savedReplies:t.getSavedReplies(),uploaderActionURI:t.getUploadActionFromUserID(ja.userID)};};ha.prototype.$PagesManagerMessagingComposerContainer1=function(ia){this.$PagesManagerMessagingComposerContainer2.addSubscriptions(ia.subscribe('one-upload-completed',this.$PagesManagerMessagingComposerContainer3.bind(this)));};ha.prototype.componentDidUpdate=function(ia){if(this.props.recipientID&&this.props.threadID&&(!ia.recipientID||!ia.threadID)){v.setComposerReady();if(this.props.onInitialRender)this.props.onInitialRender();}};ha.prototype.componentWillMount=function(){this.$PagesManagerMessagingComposerContainer4(this.props);this.$PagesManagerMessagingComposerContainer5(this.props.userID);this.$PagesManagerMessagingComposerContainer2=new ca();};ha.prototype.componentWillReceiveProps=function(ia){this.$PagesManagerMessagingComposerContainer4(ia);if(ia.threadID!==this.props.threadID){s.clearMessage();s.detachAllAttachments();}if(ia.userID!==this.props.userID)this.$PagesManagerMessagingComposerContainer5(ia.userID);};ha.prototype.componentWillUpdate=function(ia,ja){if(this.props.onMessageOrAttachmentUpdate&&(ja.attachments.length!==this.state.attachments.length||ja.message!==this.state.message))this.props.onMessageOrAttachmentUpdate();};ha.prototype.componentWillUnmount=function(){this.$PagesManagerMessagingComposerContainer2&&this.$PagesManagerMessagingComposerContainer2.release();};ha.prototype.$PagesManagerMessagingComposerContainer6=function(){var ia=new x(z.findDOMNode(this.refs.composer.refs.linkPreview),this.refs.composer.refs.textInput.getTextFieldDOM(),da,da);this.$PagesManagerMessagingComposerContainer2.addSubscriptions(ia.subscribe('link-detected',(function(){this.setState({isShareLinkUploading:true});this.props.onMessageOrAttachmentUpdate();}).bind(this)),ia.subscribe('share-loaded',(function(){this.setState({isShareLinkUploading:false});}).bind(this)),ia.subscribe('closed',(function(){this.props.onMessageOrAttachmentUpdate();}).bind(this)));if(w.dragdropEnabled){this.$PagesManagerMessagingComposerContainer7=this.$PagesManagerMessagingComposerContainer7||new h(z.findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer7.setOnURLDropCallback(function(ja){return (ia.loadShare(ja));});}s.setShareLinkUploader(ia);};ha.prototype.$PagesManagerMessagingComposerContainer8=function(){if(this.state.isSavedRepliesLoading||!this.props.userID||!this.props.recipientID)return;s.setIsSavedRepliesLoading(true);aa.fetchSavedResponses(this.props.userID,this.props.recipientID,function(ia,ja){s.setIsSavedRepliesLoading(false);s.setSavedReplies(ia,ja);});};ha.prototype.$PagesManagerMessagingComposerContainer4=function(ia){this.$PagesManagerMessagingComposerContainer9=n.getForFBID(ia.userID);this.$PagesManagerMessagingComposerContainer10=m.getForFBID(ia.userID);};ha.prototype.$PagesManagerMessagingComposerContainer5=function(ia){var ja=l.getParticipantIDFromUserID(ia);o.get(ja,function(ka){s.setParticipant(ka);});};ha.prototype.isSendBlocked=function(){if(this.state.isAttachmentUploading||this.state.isShareLinkUploading||this.state.message===''&&this.state.attachments.length<1)return true;return false;};ha.prototype.$PagesManagerMessagingComposerContainer11=function(ia){s.detachAttachment(ia);};ha.prototype.$PagesManagerMessagingComposerContainer12=function(ia,ja){var ka=i.symbols[ia];if(!ka)return;this.$PagesManagerMessagingComposerContainer13=this.$PagesManagerMessagingComposerContainer13||new ba(ja);var la=j.insertEmoticon(ka,this.state.message,this.$PagesManagerMessagingComposerContainer13.getPos());this.$PagesManagerMessagingComposerContainer13.setPos(la.start,la.end);s.setMessage(la.result);};ha.prototype.$PagesManagerMessagingComposerContainer14=function(ia){this.$PagesManagerMessagingComposerContainer1(ia);if(w.dragdropEnabled){this.$PagesManagerMessagingComposerContainer7=this.$PagesManagerMessagingComposerContainer7||new h(z.findDOMNode(this)).enable();this.$PagesManagerMessagingComposerContainer7.setOnFilesDropCallback(this.$PagesManagerMessagingComposerContainer15.bind(this));}s.fileUploaderReady(ia);};ha.prototype.$PagesManagerMessagingComposerContainer3=function(ia,ja){s.completeAttachment(ja);};ha.prototype.$PagesManagerMessagingComposerContainer16=function(ia,ja){s.startAttachment(ja.files);};ha.prototype.$PagesManagerMessagingComposerContainer17=function(ia){if(ia==='all-uploads-completed'){s.completeAllAttachments();}else ia==='upload-canceled';};ha.prototype.$PagesManagerMessagingComposerContainer18=function(ia){s.setMessage(ia.target.value);};ha.prototype.$PagesManagerMessagingComposerContainer19=function(ia,ja){var ka=t.getFileUploader();s.detachAllAttachments();s.setMessage(ia);if(ja&&ka)ka.addCachedAttachments([ja]);if(this.refs.composer&&this.refs.composer.refs.textInput)this.refs.composer.refs.textInput.getTextFieldDOM().focus();};ha.prototype.$PagesManagerMessagingComposerContainer20=function(ia){var ja=t.getFileUploader();if(ja)ja.addCachedAttachments(ia.map(function(ka){return {filename:'Photo.jpg',image_id:ka.fbid,filetype:'image/jpeg'};}));};ha.prototype.$PagesManagerMessagingComposerContainer21=function(){var ia=this.state.message,ja=t.getAttachedAttachmentIds(),ka=t.getAttachedImageIds(),la=t.getAttachedAnimatedImageIds(),ma=t.getAttachedVideoIds(),na=t.getAttachedAudioFilesIds(),oa=t.getAttachedFilesIds(),pa=t.getShareLink(),qa=this.$PagesManagerMessagingComposerContainer9.constructUserGeneratedMessageObject(ia,p.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);if(this.isSendBlocked()||!ia&&!ja.length&&!na.length&&!ka.length&&!oa.length&&!la.length&&!ma.length&&!pa)return;if(pa){qa.has_attachment=true;qa.content_attachment=pa;}if(ja.length>0){qa.has_attachment=true;qa.raw_attachments=ja;}if(ka.length>0){qa.image_ids=ka;qa.has_attachment=true;}if(la.length>0){qa.gif_ids=la;qa.has_attachment=true;}if(ma.length>0){qa.video_ids=ma;qa.has_attachment=true;}if(na.length>0){qa.audio_ids=na;qa.has_attachment=true;}if(oa.length>0){qa.file_ids=oa;qa.has_attachment;}q.logData_DEPRECATED({page_id:this.props.user,event_name:r.MESSAGES_DIALOG_SEND,thread_id:this.props.threadElementID},null);this.$PagesManagerMessagingComposerContainer10.send(qa);s.detachAllAttachments();s.clearMessage();s.clearShareLinkUploader();};ha.prototype.$PagesManagerMessagingComposerContainer22=function(ia){var ja=this.$PagesManagerMessagingComposerContainer9.constructUserGeneratedMessageObject('',p.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);ja.has_attachment=true;ja.sticker_id=ia;this.$PagesManagerMessagingComposerContainer10.send(ja);s.clearMessage();};ha.prototype.$PagesManagerMessagingComposerContainer15=function(ia){if(this.refs.composer&&this.refs.composer.refs.fileUploader)this.refs.composer.refs.fileUploader.addFiles(ia);};ha.prototype.render=function(){if(!this.props.recipientID||!this.props.threadID)return y.createElement('div',null);return (y.createElement(u,babelHelpers._extends({},this.props,this.state,{isSendBlocked:this.isSendBlocked(),onAttachmentDetach:this.$PagesManagerMessagingComposerContainer11.bind(this),onEmoticonSelected:this.$PagesManagerMessagingComposerContainer12.bind(this),onFetchReplies:this.$PagesManagerMessagingComposerContainer8.bind(this),onFileUploaderMounted:this.$PagesManagerMessagingComposerContainer14.bind(this),onFileUploaderSubmit:this.$PagesManagerMessagingComposerContainer16.bind(this),onFileUploadFinished:this.$PagesManagerMessagingComposerContainer17.bind(this),onInitialRender:(function(){return this.$PagesManagerMessagingComposerContainer6();}).bind(this),onInputChange:(function(ia){return this.$PagesManagerMessagingComposerContainer18(ia);}).bind(this),onOmnipickerPhotosSelected:this.$PagesManagerMessagingComposerContainer20.bind(this),onReplySelected:this.$PagesManagerMessagingComposerContainer19.bind(this),onSend:(function(){return this.$PagesManagerMessagingComposerContainer21();}).bind(this),onStickerSelected:this.$PagesManagerMessagingComposerContainer22.bind(this),ref:'composer'})));};function ha(){ea.apply(this,arguments);}ha.propTypes={canUseHotlike:ga.bool,creatorInfo:ga.object,onInitialRender:ga.func,onMessageOrAttachmentUpdate:ga.func,threadElementID:ga.string,threadID:ga.string,userID:ga.string};f.exports=k.create(ha,{withProps:true});},null);
__d('PagesManagerMessagingNavigationUnitKey',['MercuryFilters','MessagingTag','PageMessageEnumTag'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={FILTERS:{ALL:h.ALL,UNREAD:h.UNREAD,FLAGGED:j.FLAG},FOLDERS:{INBOX:i.INBOX,ARCHIVED:i.ACTION_ARCHIVED,SPAM:i.SPAM}};f.exports=k;},null);
__d('PagesManagerNavigationUnit',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.$PagesManagerNavigationUnit1=j;}i.prototype.getDisplayTitle=function(){h(0);};i.prototype.getKey=function(){return this.$PagesManagerNavigationUnit1;};i.prototype.getNotificationCount=function(j,k){return 0;};f.exports=i;},null);
__d('PagesManagerMessagingAllNavigationUnit',['PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(){l.constructor.call(this,h.FILTERS.ALL);}m.prototype.getDisplayTitle=function(){return j._("All");};f.exports=m;},null);
__d('PagesManagerMessagingFolderNavigationUnit',['immutable','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.List;l=babelHelpers.inherits(o,j);m=l&&l.prototype;o.prototype.getSupportedFilterKeys=function(){return n([i.FILTERS.ALL]);};o.prototype.assertSupportsFilter=function(p){!(this.getSupportedFilterKeys().indexOf(p.getKey())>=0)?k(0):undefined;};function o(){l.apply(this,arguments);}f.exports=o;},null);
__d('PagesManagerMessagingArchiveNavigationUnit',['PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FOLDERS.ARCHIVED);}m.prototype.getDisplayTitle=function(){return j._("Archived");};f.exports=m;},null);
__d('PagesManagerMessagingFlaggedNavigationUnit',['PagesManagerNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FILTERS.FLAGGED);}m.prototype.getDisplayTitle=function(){return j._("Flagged");};f.exports=m;},null);
__d('PagesManagerMessagingUnreadCountHelper',['MercuryThreadlistConstants','MercuryUnreadState'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getUnreadCount:function(k,l){var m=i.getForFBID(k),n=m.exceedsMaxCount(l);return n?h.MAX_UNREAD_COUNT:m.getUnreadCount(l);}};f.exports=j;},null);
__d('PagesManagerMessagingInboxNavigationUnit',['immutable','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';var o=h.List;m=babelHelpers.inherits(p,i);n=m&&m.prototype;function p(){n.constructor.call(this,j.FOLDERS.INBOX);}p.prototype.getDisplayTitle=function(){return l._("Inbox");};p.prototype.getSupportedFilterKeys=function(){return o([j.FILTERS.ALL,j.FILTERS.UNREAD,j.FILTERS.FLAGGED]);};p.prototype.getNotificationCount=function(q,r){return k.getUnreadCount(q,this.getKey());};f.exports=p;},null);
__d('PagesManagerMessagingLogger',['MessagingTag','PagesEventObserver','PagesEventType','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='messages',m='inbox',n=':',o={logMessagesSectionViewEvent:function(p,q){var r=q||m,s=[];if(r.indexOf(':')){s=r.split(n);r=s[s.length-1];}i.notify(j.VIEW_MESSAGES,p,{section:l,subsection:r});},logPageViewFolderEvent:function(p,q,r){var event='';switch(q.getKey()){case h.INBOX:event=j.MESSAGES_VIEW_INBOX;break;case h.ACTION_ARCHIVED:event=j.MESSAGES_VIEW_ARCHIVED;break;case h.SPAM:event=j.MESSAGES_VIEW_SPAM;break;default:k(0);}i.notify(event,p,{source:r});}};f.exports=o;},null);
__d('PagesManagerMessagingThreadlistDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(){j.constructor.call(this);this.dispatch=this.dispatch.bind(this);}f.exports=new k();},null);
__d('PagesMessagingSearchMode',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({ALL:'',NAME_SEARCH:'',KEYWORD_SEARCH:'',MESSAGE_SEARCH:'',NONE:''});f.exports=i;},null);
__d('PagesManagerMessagingThreadlistAction',['PagesManagerMessagingActionType','PagesManagerMessagingThreadlistDispatcher','MercuryThreadlistConstants','PageCustomTagSearchableEntry','PagesMessagingSearchMode'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={initThreadlist:function(n){this.fetchThreadlist(n,0,j.WEBMESSENGER_THREAD_COUNT);},fetchThreadlist:function(n,o,p){i.dispatch({offset:o,limit:p,pageID:n,type:h.LIST.FETCH});},updateThreadlist:function(n){i.dispatch({pageID:n,type:h.LIST.UPDATED});},changeSearchTerm:function(n,o,p,q){i.dispatch({type:h.SEARCH.CHANGE_SEARCH_TERM,searchTerm:o,pageID:n,activeFolder:p,searchMode:q});},changeIsSearchingNameStatus:function(n){i.dispatch({type:h.MESSAGE_SEARCH.NAME_SEARCH_UPDATE,isSearching:n});},changeIsSearchingSnippetStatus:function(n){i.dispatch({type:h.MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE,isSearching:n});},loadMoreNameResult:function(n,o,p){i.dispatch({type:h.MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT,searchTerm:o,pageID:n,activeFolder:p});},loadMoreSnippetResult:function(n,o,p){i.dispatch({type:h.MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT,searchTerm:o,pageID:n,activeFolder:p});},resetSearch:function(n){m.changeSearchTerm(n,'','',l.NONE);},fetchCustomTags:function(n){i.dispatch({pageID:n,type:h.CUSTOM_TAGS.FETCH});},addSearchCustomTag:function(n,o){i.dispatch({type:h.SEARCH.ADD_SEARCH_CUSTOM_TAG,pageID:n,customTagEntry:o});},removeSearchCustomTag:function(n,o){i.dispatch({type:h.SEARCH.REMOVE_SEARCH_CUSTOM_TAG,pageID:n,customTagEntry:o});},searchNameResult:function(n,o,p){i.dispatch({type:h.MESSAGE_SEARCH.CHANGE_NAME_SEARCH_TERM,searchTerm:o,pageID:n,activeFolder:p});},searchMessageResult:function(n,o,p){i.dispatch({type:h.MESSAGE_SEARCH.CHANGE_MESSAGE_SEARCH_TERM,searchTerm:o,pageID:n,activeFolder:p});}};f.exports=m;},null);
__d('PagesManagerMessagingSearchStore',['PagesManagerMessagingActionType','PagesManagerMessagingThreadlistDispatcher','FluxStore','immutable','MercurySearchSnippetResults','MercurySearchThreadResults','MercurySearchThreadResultOrderer','MercurySearchThreadsStrategy','PageCustomTagSearchableEntry','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','emptyFunction','guid'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;'use strict';u=babelHelpers.inherits(w,j);v=u&&u.prototype;function w(){v.constructor.call(this,i);this.$PagesManagerMessagingSearchStore1='';this.$PagesManagerMessagingSearchStore2=false;this.$PagesManagerMessagingSearchStore3=false;this.$PagesManagerMessagingSearchStore4=false;this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore6=false;this.$PagesManagerMessagingSearchStore7='';this.$PagesManagerMessagingSearchStore8=[];this.$PagesManagerMessagingSearchStore9={};this.$PagesManagerMessagingSearchStore10=[];this.$PagesManagerMessagingSearchStore11=q.NONE;}w.prototype.getCurrentSearchTerm=function(){return this.$PagesManagerMessagingSearchStore1;};w.prototype.getIsInSearchMode=function(){return this.$PagesManagerMessagingSearchStore4;};w.prototype.getSearchMode=function(){return this.$PagesManagerMessagingSearchStore11;};w.prototype.getThreadNameSearchResults=function(){return this.$PagesManagerMessagingSearchStore8;};w.prototype.getThreadSnippetSearchResults=function(){return this.$PagesManagerMessagingSearchStore9;};w.prototype.getIsSearchingName=function(){return this.$PagesManagerMessagingSearchStore5;};w.prototype.getIsSearchingSnippet=function(){return this.$PagesManagerMessagingSearchStore6;};w.prototype.hasMoreNameSearchResult=function(){return this.$PagesManagerMessagingSearchStore2;};w.prototype.hasMoreSnippetSearchResult=function(){return this.$PagesManagerMessagingSearchStore3;};w.prototype.getCurrentSearchCustomTagEntries=function(){return k.List(this.$PagesManagerMessagingSearchStore10);};w.prototype.__onDispatch=function(x){switch(x.type){case h.SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerMessagingSearchStore1=x.searchTerm;if(this.$PagesManagerMessagingSearchStore1===''){this.$PagesManagerMessagingSearchStore8=[];this.$PagesManagerMessagingSearchStore4=false;this.$PagesManagerMessagingSearchStore11=q.NONE;}else{this.$PagesManagerMessagingSearchStore4=true;this.$PagesManagerMessagingSearchStore11=x.searchMode;this.$PagesManagerMessagingSearchStore12(x.pageID,x.searchTerm,x.activeFolder,x.searchMode);}this.__emitChange();break;case h.MESSAGE_SEARCH.NAME_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore5=x.isSearching;this.__emitChange();break;case h.MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore6=x.isSearching;this.__emitChange();break;case h.MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT:this.$PagesManagerMessagingSearchStore13(x.pageID,x.searchTerm,x.activeFolder);this.__emitChange();break;case h.MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT:this.$PagesManagerMessagingSearchStore14(x.pageID,x.searchTerm,x.activeFolder);this.__emitChange();break;case h.SEARCH.ADD_SEARCH_CUSTOM_TAG:this.$PagesManagerMessagingSearchStore1='';this.$PagesManagerMessagingSearchStore10.push(x.customTagEntry);this.__emitChange();break;case h.SEARCH.REMOVE_SEARCH_CUSTOM_TAG:var y=x.customTagEntry.getUniqueID(),z=this.$PagesManagerMessagingSearchStore10,aa=z.some(function(ba){if(ba.getUniqueID()===y)return true;});if(aa)z.splice(z.indexOf(x.customTagEntry),1);this.__emitChange();break;}};w.prototype.$PagesManagerMessagingSearchStore12=function(x,y,z,aa){var ba=t();this.$PagesManagerMessagingSearchStore7=ba;var ca=o.getForFBID(x),da=l.getForFBID(x),ea=n.getForFBID(x);if(aa===q.ALL||aa===q.NAME_SEARCH){this.$PagesManagerMessagingSearchStore5=true;ca.search(y,(function(fa){this.$PagesManagerMessagingSearchStore8=ea.filterThreadsInFolder(fa,z);this.__emitChange();}).bind(this),(function(fa,ga){if(ba!==this.$PagesManagerMessagingSearchStore7)return;var ha=ea.filterThreadsInFolder(fa,z);this.$PagesManagerMessagingSearchStore8=ea.orderResults(this.$PagesManagerMessagingSearchStore8,[],ha,z);this.$PagesManagerMessagingSearchStore2=!ga;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore5=false;this.__emitChange();}else r.changeIsSearchingNameStatus(false);}).bind(this),s);}if(aa===q.ALL||aa===q.MESSAGE_SEARCH){this.$PagesManagerMessagingSearchStore6=true;da.getAllThreadSearchResults(y,(function(fa,ga,ha){this.$PagesManagerMessagingSearchStore9=this.$PagesManagerMessagingSearchStore15(ga,fa,z);this.$PagesManagerMessagingSearchStore3=!ha;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else r.changeIsSearchingSnippetStatus(false);}).bind(this,ea));}this.__emitChange();};w.prototype.$PagesManagerMessagingSearchStore15=function(x,y,z){var aa=Object.keys(x),ba=y.filterThreadsInFolder(aa,z),ca={};ba.forEach(function(da){ca[da]=x[da];});return ca;};w.prototype.$PagesManagerMessagingSearchStore13=function(x,y,z){var aa=m.getForFBID(x),ba=n.getForFBID(x);this.$PagesManagerMessagingSearchStore5=true;aa.getMoreThreadlist(y,(function(ca,da){var ea=ba.filterThreadsInFolder(ca,z);this.$PagesManagerMessagingSearchStore8=ea;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore5=false;this.__emitChange();}else r.changeIsSearchingNameStatus(false);}).bind(this));};w.prototype.$PagesManagerMessagingSearchStore14=function(x,y,z){var aa=l.getForFBID(x),ba=n.getForFBID(x);aa.getAllThreadSearchMoreResults(y,(function(ca,da,ea){this.$PagesManagerMessagingSearchStore3=!ea;this.$PagesManagerMessagingSearchStore9=this.$PagesManagerMessagingSearchStore15(da,ca,z);if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange();}else r.changeIsSearchingSnippetStatus(false);}).bind(this,ba));};f.exports=new w();},null);
__d('PagesManagerMessagingSpamNavigationUnit',['PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i.FOLDERS.SPAM);}m.prototype.getDisplayTitle=function(){return j._("Spam");};f.exports=m;},null);
__d('PagesManagerMessagingUnreadNavigationUnit',['PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','PagesManagerNavigationUnit','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,j);m=l&&l.prototype;function n(){m.constructor.call(this,h.FILTERS.UNREAD);}n.prototype.getDisplayTitle=function(){return k._("Unread");};n.prototype.getNotificationCount=function(o,p){if(p.activeFolder.getKey()!==h.FOLDERS.INBOX)return 0;return i.getUnreadCount(o,p.activeFolder.getKey());};f.exports=n;},null);
__d('PagesManagerMessagingFilterStore',['FluxStore','immutable','Map','MessageThreadViewSource','PagesManagerActionType','PagesManagerMessagingAllNavigationUnit','PagesManagerMessagingArchiveNavigationUnit','PagesManagerMessagingFlaggedNavigationUnit','PagesManagerMessagingInboxNavigationUnit','PagesManagerMessagingLogger','PagesManagerMessagingSpamNavigationUnit','PagesManagerMessagingSearchStore','PagesManagerMessagingThreadlistDispatcher','PagesManagerMessagingUnreadNavigationUnit','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;'use strict';w=babelHelpers.inherits(y,h);x=w&&w.prototype;function y(){x.constructor.call(this,t);this.$PagesManagerMessagingFilterStore1=i.List([new p(),new n(),new r()]);this.$PagesManagerMessagingFilterStore2=new m();this.$PagesManagerMessagingFilterStore3=i.List([this.$PagesManagerMessagingFilterStore2,new u(),new o()]);this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore1.first();this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(this.$PagesManagerMessagingFilterStore4.getSupportedFilterKeys().first());this.$PagesManagerMessagingFilterStore6=false;}y.prototype.$PagesManagerMessagingFilterStore7=function(z,aa){var ba=z.filter(function(ca){return ca.getKey()===aa;});!(ba.size>0)?v(0):undefined;return ba.first();};y.prototype.$PagesManagerMessagingFilterStore8=function(z,aa){q.logMessagesSectionViewEvent(z,aa.getKey());q.logPageViewFolderEvent(z,aa,k.NEW_MESSAGETAB);this.$PagesManagerMessagingFilterStore4=aa;this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(aa.getSupportedFilterKeys().first());this.__emitChange();};y.prototype.$PagesManagerMessagingFilterStore9=function(z,aa){this.$PagesManagerMessagingFilterStore4.assertSupportsFilter(aa);this.$PagesManagerMessagingFilterStore5=aa;this.__emitChange();};y.prototype.getFilterByKey=function(z){return this.$PagesManagerMessagingFilterStore7(this.$PagesManagerMessagingFilterStore3,z);};y.prototype.getAvailableFolders=function(){return this.$PagesManagerMessagingFilterStore1;};y.prototype.getAvailableFilters=function(){return i.List(this.$PagesManagerMessagingFilterStore3.filter((function(z){return this.getActiveFolder().getSupportedFilterKeys().indexOf(z.getKey())>=0;}).bind(this)));};y.prototype.getActiveFolder=function(){return this.$PagesManagerMessagingFilterStore4;};y.prototype.getActiveFilter=function(){return this.$PagesManagerMessagingFilterStore6?this.$PagesManagerMessagingFilterStore2:this.$PagesManagerMessagingFilterStore5;};y.prototype.getActiveFolderName=function(){return this.getActiveFolder().getKey();};y.prototype.getActiveFilterName=function(){return this.getActiveFilter().getKey();};y.prototype.getUnitNotificationCountMap=function(z){var aa=new j(),ba=(function(ca){return aa.set(ca,ca.getNotificationCount(z,{activeFolder:this.getActiveFolder(),activeFilter:this.getActiveFilter()}));}).bind(this);this.getAvailableFolders().map(ba);this.getAvailableFilters().map(ba);return aa;};y.prototype.getNavigationKey=function(){return this.getActiveFolderName()+'|'+this.getActiveFilterName();};y.prototype.__onDispatch=function(z){switch(z.type){case l.NAVIGATION_UNIT.CHANGE:if(this.getAvailableFolders().indexOf(z.unit)>=0){this.$PagesManagerMessagingFilterStore8(z.pageID,z.unit);}else this.$PagesManagerMessagingFilterStore9(z.pageID,z.unit);break;case l.NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE:this.__emitChange();break;case l.SEARCH.CHANGE_SEARCH_TERM:t.waitFor([s.getDispatchToken()]);var aa=z.searchTerm!=='';if(this.$PagesManagerMessagingFilterStore6!==aa){this.$PagesManagerMessagingFilterStore6=aa;this.__emitChange();}break;}};f.exports=new y();},null);
__d('PagesManagerMessagingMessageDateBreak.react',['MessengerDateBreak.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,i.Component);l=k&&k.prototype;function m(n){'use strict';l.constructor.call(this,n);}m.prototype.render=function(){'use strict';return (i.createElement(h,{className:"_2hvw",date:this.props.date}));};f.exports=m;},null);
__d('PagesManagerMessagingMessageList.react',['ChatTypingIndicators.react','immutable','MessengerTypingIndicator.react','MessageList.react','MessengerLogMessage.react','MessengerMessageGroup.react','MessengerSpinner.react','PagesEventObserver','PagesEventType','PagesManagerMessagingMessageDateBreak.react','React','MercuryShareAttachmentRenderLocations','ScrollableArea.react','cloneWithProps','cx','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x,y,z='message_tab';x=babelHelpers.inherits(aa,r.Component);y=x&&x.prototype;function aa(ba,ca){'use strict';y.constructor.call(this,ba,ca);this.$PagesManagerMessagingMessageList1=true;this.prevScrollTop=0;this.prevScrollHeight=0;}aa.prototype.componentDidUpdate=function(ba){'use strict';var ca=this.props.messagelist.last()&&this.props.messagelist.last().thread_fbid,da=ba.messagelist.last()&&ba.messagelist.last().thread_fbid;if(ba.messagelist.size===0&&this.props.messagelist.size!==0||ca!=da){this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}else if(this.props.messagelist.size!==ba.messagelist.size)this.$PagesManagerMessagingMessageList2(this.prevScrollHeight,this.prevScrollTop);};aa.prototype.$PagesManagerMessagingMessageList2=function(ba,ca){'use strict';if(!this.refs.scrollableArea)return;var da=this.refs.scrollableArea.getArea(),ea=da.getScrollHeight()-ba+ca;da.setScrollTop(ea,false);};aa.prototype.$PagesManagerMessagingMessageList3=function(){'use strict';if(!this.refs.scrollableArea)return;var ba=this.refs.scrollableArea.getArea(),ca=this.prevScrollTop,da=this.prevScrollHeight;this.$PagesManagerMessagingMessageList4();if(ba.isScrolledToTop()){this.props.fetchEarlierMessages();}else if(ba.isScrolledToBottom()){this.$PagesManagerMessagingMessageList5();}else{if(ba.getScrollTop()===ca&&ba.getScrollHeight()!==da)this.$PagesManagerMessagingMessageList2(da,ca);this.$PagesManagerMessagingMessageList6();}};aa.prototype.$PagesManagerMessagingMessageList5=function(){'use strict';if(!this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=true;};aa.prototype.$PagesManagerMessagingMessageList6=function(){'use strict';if(this.$PagesManagerMessagingMessageList1)this.$PagesManagerMessagingMessageList1=false;};aa.prototype.$PagesManagerMessagingMessageList4=function(){'use strict';var ba=this.refs.scrollableArea;this.prevScrollHeight=ba?ba.getArea().getScrollHeight():0;this.prevScrollTop=ba?ba.getArea().getScrollTop():0;};aa.prototype.$PagesManagerMessagingMessageList7=function(){'use strict';var ba=Math.floor(this.props.scrollHeight/130);return (r.createElement('div',{className:"_31m6",style:{height:this.props.scrollHeight}},r.createElement('div',{className:"_31m7",style:{height:130*ba}},this.$PagesManagerMessagingMessageList8(ba))));};aa.prototype.$PagesManagerMessagingMessageList8=function(ba){'use strict';var ca=r.createElement('div',null,r.createElement('div',{className:"_31m8"}),r.createElement('div',{className:"_31ma"}),r.createElement('div',{className:"_31mb"}),r.createElement('div',{className:"_31mc"}),r.createElement('div',{className:"_31me"}),r.createElement('div',{className:"_31mf"}),r.createElement('div',{className:"_31mg"}),r.createElement('div',{className:"_31mh"}),r.createElement('div',{className:"_31mi"}),r.createElement('div',{className:"_31mj"}),r.createElement('div',{className:"_31mk"}),r.createElement('div',{className:"_31ml"}),r.createElement('div',{className:"_31mm"}),r.createElement('div',{className:"_31mn"}),r.createElement('div',{className:"_31mo"}),r.createElement('div',{className:"_31mp"}),r.createElement('div',{className:"_31mq"})),da=[];for(var ea=0;ea<ba;ea++)da.push(u(ca,{key:'loading'+ea}));return da;};aa.prototype.$PagesManagerMessagingMessageList9=function(){'use strict';if(!this.props.isLoadingMore)return null;return (r.createElement('div',{className:"_2k8v"},r.createElement(n,null)));};aa.prototype.$PagesManagerMessagingMessageList10=function(){'use strict';o.notify(p.MESSAGES_VIEW_THREAD,this.props.pageID,{source:z,thread_id:this.props.threadID});return (r.createElement('div',{className:"clearfix _1ej0 _2mpc"},r.createElement(k,{DateBreak:q,deliveryTimestamp:0,isCanonical:true,isPageMessage:true,location:s.MESSENGER,LogMessage:l,MessageGroup:m,messages:this.props.messagelist,readReceipts:this.props.readReceipts,viewer:this.props.pageID}),r.createElement(h,{indicatorClass:j,indicatorsWillShow:function(){},indicatorsDidShow:(function(){this.$PagesManagerMessagingMessageList1&&this.refs.scrollableArea&&this.refs.scrollableArea.getArea().scrollToBottom();}).bind(this),rootClassName:"clearfix _17pz _4gv2",threadID:this.props.threadID,viewer:this.props.pageID})));};aa.prototype.render=function(){'use strict';if(this.props.initLoading)return this.$PagesManagerMessagingMessageList7();return (r.createElement(t,{className:"_11y7",fade:false,height:this.props.scrollHeight,onScroll:w((function(){return this.$PagesManagerMessagingMessageList3();}).bind(this),500),ref:'scrollableArea',shadow:false},this.$PagesManagerMessagingMessageList9(),r.createElement('div',{className:"_14y3"},this.props.threadID?this.$PagesManagerMessagingMessageList10():r.createElement('div',null))));};f.exports=aa;},null);
__d("XPagesBanUserStatusFetchController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/ban_user\/status\/",{page_id:{type:"FBID",required:true},user_id:{type:"FBID",required:true}});},null);
__d('PagesManagerMessagingMessagelistAction',['AsyncRequest','PagesManagerMessagingActionType','Map','PagesManagerMessagingMessagelistDispatcher','XPagesBanUserStatusFetchController'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.LIST,n=new j(),o={updateMessagelist:function(p,q,r){k.dispatch({type:m.LOADED,pageID:p,threadID:q,data:r});},setHotLikeEnd:function(){k.dispatch({type:i.HOT_LIKE.END});},setHotLikeStart:function(p){k.dispatch({type:i.HOT_LIKE.START,preview:p});},setIsLoading:function(p){k.dispatch({type:m.LOADING,isLoading:p});},setIsLoadingMore:function(p){k.dispatch({type:m.LOAD_MORE,isLoadingMore:p});},setScrollAreaHeight:function(p){k.dispatch({type:i.SET_SCROLL_HEIGHT,height:p});},updateReadReceipts:function(p,q,r){k.dispatch({type:i.MESSAGE_LEVEL.READ_RECEIPTS,pageID:p,threadID:q,readReceipts:r});},updateThread:function(p,q){k.dispatch({type:i.THREAD_LEVEL.UPDATE_THREAD,pageID:p,threadID:q});},setIsContextCardHidden:function(p){k.dispatch({type:i.SET_IS_CONTEXT_CARD_HIDDEN,isHidden:p});},updateIsUserBanned:function(p,q,r){k.dispatch({type:i.BAN.UPDATE,pageID:p,userID:q,isBanned:r});},_getBanningMapKey:function(p,q){return p+'_'+q;},fetchIsUserBanned:function(p,q){var r=this._getBanningMapKey(p,q);if(n.has(r)&&n.get(r))return;var s=l.getURIBuilder().setFBID('page_id',p).setFBID('user_id',q).getURI();new h().setURI(s).setHandler(function(t){o.updateIsUserBanned(p,q,t.payload);}).send();n.set(r,true);},resetIsUserBanned:function(p,q){n.set(this._getBanningMapKey(p,q),false);}};f.exports=o;},null);
__d("XPagesContextCardSetIsHiddenController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/customer\/context_card\/set_is_hidden\/",{});},null);
__d('PagesManagerMessagingMessagelistStore',['PagesManagerMessagingActionType','AsyncRequest','FluxStore','immutable','Map','PagesManagerMessagingMessagelistDispatcher','MercuryMessages','PagesManagerMessagingMessagelistDispatcher','MercuryThreadlistConstants','XPagesContextCardSetIsHiddenController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,j);s=r&&r.prototype;function t(){'use strict';s.constructor.call(this,o);this.$PagesManagerMessagingMessagelistStore1='';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore3=false;this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore5=[];this.$PagesManagerMessagingMessagelistStore6=k.OrderedMap();this.$PagesManagerMessagingMessagelistStore7=0;this.$PagesManagerMessagingMessagelistStore8=new l();}t.prototype.__onDispatch=function(u){'use strict';switch(u.type){case h.LIST.LOADED:this.$PagesManagerMessagingMessagelistStore9(u);this.__emitChange();break;case h.LIST.LOADING:this.$PagesManagerMessagingMessagelistStore2=u.isLoading;this.__emitChange();break;case h.LIST.LOAD_MORE:this.$PagesManagerMessagingMessagelistStore3=u.isLoadingMore;this.__emitChange();break;case h.MESSAGE_LEVEL.READ_RECEIPTS:this.$PagesManagerMessagingMessagelistStore10(u);this.__emitChange();break;case h.SET_SCROLL_HEIGHT:var v=u.height;if(v!==this.$PagesManagerMessagingMessagelistStore7){this.$PagesManagerMessagingMessagelistStore7=v;this.__emitChange();}break;case h.THREAD_LEVEL.UPDATE_THREAD:this.__emitChange();break;case h.SET_IS_CONTEXT_CARD_HIDDEN:this.$PagesManagerMessagingMessagelistStore11(u.isHidden);this.__emitChange();break;case h.HOT_LIKE.END:this.$PagesManagerMessagingMessagelistStore4=false;this.$PagesManagerMessagingMessagelistStore12=null;break;case h.HOT_LIKE.START:this.$PagesManagerMessagingMessagelistStore4=true;this.$PagesManagerMessagingMessagelistStore12=u.preview;this.__emitChange();break;case h.BAN.UPDATE:this.$PagesManagerMessagingMessagelistStore13(u.pageID,u.userID,u.isBanned);this.__emitChange();break;default:return;}};t.prototype.$PagesManagerMessagingMessagelistStore9=function(u){'use strict';this.$PagesManagerMessagingMessagelistStore2=false;this.$PagesManagerMessagingMessagelistStore1=u.threadID;this.$PagesManagerMessagingMessagelistStore5=u.data.messages;};t.prototype.$PagesManagerMessagingMessagelistStore10=function(u){'use strict';if(this.$PagesManagerMessagingMessagelistStore1!==u.threadID)this.$PagesManagerMessagingMessagelistStore5=[];this.$PagesManagerMessagingMessagelistStore1=u.threadID;this.$PagesManagerMessagingMessagelistStore6=u.readReceipts;};t.prototype.isLoading=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore2;};t.prototype.isLoadingMore=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore3;};t.prototype.getMessagelist=function(u,v){'use strict';var w;if(v!=this.$PagesManagerMessagingMessagelistStore1)return n.getForFBID(u).getThreadMessagesRangeNow(v,0,p.RECENT_MESSAGES_LIMIT).reverse();if(this.$PagesManagerMessagingMessagelistStore4&&this.$PagesManagerMessagingMessagelistStore12){w=this.$PagesManagerMessagingMessagelistStore5.slice();if(this.$PagesManagerMessagingMessagelistStore12)w.push(this.$PagesManagerMessagingMessagelistStore12);return w;}return this.$PagesManagerMessagingMessagelistStore5;};t.prototype.getScrollHeight=function(){'use strict';return this.$PagesManagerMessagingMessagelistStore7;};t.prototype.getReadReceipts=function(u){'use strict';if(u!=this.$PagesManagerMessagingMessagelistStore1)return k.OrderedMap();return this.$PagesManagerMessagingMessagelistStore6;};t.prototype.isCardHidden=function(){'use strict';if(this.$PagesManagerMessagingMessagelistStore14===undefined||this.$PagesManagerMessagingMessagelistStore14===null)return null;return this.$PagesManagerMessagingMessagelistStore14;};t.prototype.$PagesManagerMessagingMessagelistStore11=function(u){'use strict';this.$PagesManagerMessagingMessagelistStore14=u;var v=q.getURIBuilder().getURI();new i().setURI(v).setData({is_hidden:u}).send();};t.prototype.$PagesManagerMessagingMessagelistStore15=function(u,v){'use strict';return u+'_'+v;};t.prototype.getIsUserBanned=function(u,v){'use strict';return this.$PagesManagerMessagingMessagelistStore8.get(this.$PagesManagerMessagingMessagelistStore15(u,v));};t.prototype.$PagesManagerMessagingMessagelistStore13=function(u,v,w){'use strict';this.$PagesManagerMessagingMessagelistStore8.set(this.$PagesManagerMessagingMessagelistStore15(u,v),w);};f.exports=new t(m);},null);
__d('PagesManagerMessagingNoteComposerView.react',['Image.react','PagesMessengerTextInput.react','React','XUIButton.react','cx','fbt','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=j.PropTypes;o=babelHelpers.inherits(r,j.Component);p=o&&o.prototype;function r(s){p.constructor.call(this,s);this.state={isQuickReplyMode:true};}r.prototype.$PagesManagerMessagingNoteComposerView1=function(s){s.preventDefault();this.props.onCreateNote();};r.prototype.$PagesManagerMessagingNoteComposerView2=function(){var s=m._("Cancel");return (j.createElement('div',{className:"_1vgy"},j.createElement(k,{label:s,onClick:this.props.onCancelCreateNote})));};r.prototype.$PagesManagerMessagingNoteComposerView3=function(){var s=m._("Add");if(this.props.message.length>0)return (j.createElement('div',{className:"_1vgz"},j.createElement(k,{label:s,onClick:(function(t){return this.$PagesManagerMessagingNoteComposerView1(t);}).bind(this),use:'confirm'})));};r.prototype.$PagesManagerMessagingNoteComposerView4=function(){var s=m._("Add an admin note...");return (j.createElement('div',{className:"_4dv-"},j.createElement(i,{className:"_1p7p"+(' '+"_5id1")+(n(this.props.message)?' '+"_3197":'')+(' '+"_1vg-"),onNoShiftEnter:this.state.isQuickReplyMode?(function(t){return this.$PagesManagerMessagingNoteComposerView1(t);}).bind(this):null,placeholder:s,onChange:this.props.onInputChange,value:this.props.message,ref:'textInput'})));};r.prototype.$PagesManagerMessagingNoteComposerView5=function(){return (j.createElement('div',{className:"_4dw0"},j.createElement(h,{className:"_1cjc",src:this.props.participant.image_src})));};r.prototype.render=function(){if(!this.props.participant)return j.createElement('div',{className:"_1vg_"});return (j.createElement('div',{className:"_1vh0"},j.createElement('div',{className:"_1vh1"},this.$PagesManagerMessagingNoteComposerView5(),this.$PagesManagerMessagingNoteComposerView4(),j.createElement('div',{className:"_4dwa"},this.$PagesManagerMessagingNoteComposerView2(),this.$PagesManagerMessagingNoteComposerView3()))));};r.propTypes={onInputChange:q.func,onCancelCreateNote:q.func,onCreateNote:q.func,participant:q.object};f.exports=r;},null);
__d('PagesManagerMessagingNoteComposerContainer.react',['MercuryIDs','MercuryMessageIDs','MercuryMessages','MercuryPageMessageActions','MercuryParticipants','PagesManagerMessagingNoteComposerView.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=n.PropTypes;o=babelHelpers.inherits(r,n.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={message:'',participant:null};}r.prototype.$PagesManagerMessagingNoteComposerContainer1=function(){this.setState({message:''});};r.prototype.componentWillMount=function(){this.$PagesManagerMessagingNoteComposerContainer2(this.props);};r.prototype.componentWillReceiveProps=function(s){this.$PagesManagerMessagingNoteComposerContainer3(s.userID);this.$PagesManagerMessagingNoteComposerContainer2(s);if(s.threadID!==this.props.threadID)this.$PagesManagerMessagingNoteComposerContainer1();if(s.userID!==this.props.userID)this.$PagesManagerMessagingNoteComposerContainer3(s.userID);};r.prototype.componentDidMount=function(){setTimeout((function(){return this.$PagesManagerMessagingNoteComposerContainer3(this.props.userID);}).bind(this),0);};r.prototype.componentWillUpdate=function(s,t){if(this.props.onMessageOrAttachmentUpdate&&t.message!==this.state.message)this.props.onMessageOrAttachmentUpdate();};r.prototype.$PagesManagerMessagingNoteComposerContainer2=function(s){var t=s.userID;this.$PagesManagerMessagingNoteComposerContainer4=k.getForFBID(t);this.$PagesManagerMessagingNoteComposerContainer5=j.getForFBID(t);};r.prototype.$PagesManagerMessagingNoteComposerContainer6=function(s){var t=s.target;this.setState({message:t.value});};r.prototype.$PagesManagerMessagingNoteComposerContainer7=function(){if(!this.props.threadID)return;var s=this.props.creatorInfo?{creatorID:this.props.creatorInfo.creatorID,creatorType:this.props.creatorInfo.creatorType,creatorName:this.props.creatorInfo.creatorName,labelType:'page_admin_note',pageID:this.props.creatorInfo.pageID,profileURI:this.props.creatorInfo.profileURI}:null,t={id:null,body:{text:this.state.message},creator_info:s,timestamp:Math.floor(Date.now()/1000)};this.$PagesManagerMessagingNoteComposerContainer5.getThreadMessagesRange(this.props.threadID,0,1,(function(u){if(!u.length)return;var v=u[0];if(this.$PagesManagerMessagingNoteComposerContainer5.isLocalMessage(v)){i.getServerIDs([v.message_id],(function(w){if(w.length){var x=w[0];this.$PagesManagerMessagingNoteComposerContainer4.createNote(t,this.props.threadID,x);}}).bind(this));}else this.$PagesManagerMessagingNoteComposerContainer4.createNote(t,this.props.threadID,v.message_id);}).bind(this));this.$PagesManagerMessagingNoteComposerContainer1();this.props.onDisablePageAdminNoteMode();};r.prototype.$PagesManagerMessagingNoteComposerContainer8=function(){this.$PagesManagerMessagingNoteComposerContainer1();this.props.onDisablePageAdminNoteMode();};r.prototype.$PagesManagerMessagingNoteComposerContainer3=function(s){var t=h.getParticipantIDFromUserID(s);l.get(t,(function(u){this.setState({participant:u});}).bind(this));};r.prototype.render=function(){return (n.createElement(m,babelHelpers._extends({},this.props,this.state,{onInputChange:(function(s){return this.$PagesManagerMessagingNoteComposerContainer6(s);}).bind(this),onCreateNote:(function(){return this.$PagesManagerMessagingNoteComposerContainer7();}).bind(this),onCancelCreateNote:(function(){return this.$PagesManagerMessagingNoteComposerContainer8();}).bind(this)})));};r.propTypes={creatorInfo:q.object,onDisablePageAdminNoteMode:q.func.isRequired,onMessageOrAttachmentUpdate:q.func,threadID:q.string,userID:q.string.isRequired};f.exports=r;},null);
__d('PagesManagerMessagingFilterActions',['PagesManagerActionType','PagesManagerMessagingThreadlistDispatcher','PagesManagerMessagingThreadlistAction','PagesManagerNavigationUnit'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={changeFilter:function(m,n){i.dispatch({unit:n,pageID:m,type:h.NAVIGATION_UNIT.CHANGE});j.resetSearch(m);},notifyNotificationCountChanged:function(m){i.dispatch({pageID:m,type:h.NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE});}};f.exports=l;},null);
__d('PagesManagerMessagingThreadlistStore',['AbstractPagesManagerListStore','PagesManagerActionType','MercuryOrderedThreadlist','MercuryThreadlistConstants','PagesManagerDispatcher','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadlistDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,h);p=o&&o.prototype;function q(){'use strict';p.constructor.call(this,n);}q.prototype.$PagesManagerMessagingThreadlistStore1=function(r,s){'use strict';var t=j.getForFBID(r);return t.hasLoadedThreadlist(m.getActiveFolderName(),m.getActiveFilterName())||t.getThreadCount(m.getActiveFolderName(),m.getActiveFilterName())>=s;};q.prototype.$PagesManagerMessagingThreadlistStore2=function(r,s,t){'use strict';var u=j.getForFBID(r);u.getFilteredThreadlist(s,t+1,m.getActiveFolderName(),m.getActiveFilterName(),(function(v){var w=v.length>t;this.$PagesManagerMessagingThreadlistStore3(w);}).bind(this));};q.prototype.$PagesManagerMessagingThreadlistStore4=function(r){'use strict';var s=j.getForFBID(r);return s.getAvailableThreadlistNow(m.getActiveFolderName(),m.getActiveFilterName());};q.prototype.__handleListFetch=function(r){'use strict';var s=r.pageID,t=r.offset,u=r.limit;this.__isLoading=true;var v=this.$PagesManagerMessagingThreadlistStore1(s,t+u);if(v){this.$PagesManagerMessagingThreadlistStore3(this.__hasMoreItem.get(m.getNavigationKey()));}else this.$PagesManagerMessagingThreadlistStore2(s,t,u);this.__emitChange();};q.prototype.__handleNavigationUnitChange=function(r){'use strict';n.waitFor([m.getDispatchToken()]);this.__handleListFetch({pageID:r.pageID,offset:0,limit:k.WEBMESSENGER_THREAD_COUNT});};q.prototype.$PagesManagerMessagingThreadlistStore3=function(r){'use strict';this.__isLoading=false;this.__hasMoreItem.set(m.getNavigationKey(),r);if(!this.__dispatcher.isDispatching())this.__dispatcher.dispatch({type:i.LIST.FETCHED});};q.prototype.getItemList=function(r){'use strict';var s=this.$PagesManagerMessagingThreadlistStore4(r),t=m.getNavigationKey();return this.hasMoreItem(t)&&s.length>0?s.slice(0,s.length-1):s;};f.exports=new q(l);},null);
__d('PagesManagerMessagingThreadInteractionHelper',['MercuryPageThreadActions','MercuryThreadIDMap','MercuryThreads','MessagingTag','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterStore','PagesManagerMessagingMessagelistStore','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingThreadlistStore','PagesManagerStore','PagesMessagingActionPlacement','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t={_getPermalinkURI:function(u,v){var w=i.getForFBID(v).getServerIDFromClientIDNow(u),x=s.getRequestURI(),y=j.getForFBID(v).getThreadMetaNow(u);x.addQueryData({threadid:w,mercurythreadid:u,timestamp:y?y.timestamp:null});return x;},_clearURLParam:function(){var u=s.getRequestURI();u.removeQueryData('mercurythreadid');u.removeQueryData('threadid');u.removeQueryData('timestamp');window.history.replaceState({},null,u);},handlePermalinkUpdate:function(u,v){if(!u){this._clearURLParam();return;}var w=t._getPermalinkURI(u,v);window.history.replaceState({},null,w);},handleUnreadStateUpdate:function(u,v,w){var x=q.getViewingListItem();if(!x)return;var y=j.getForFBID(v).getThreadMetaNow(x.toString()),z=n.getMessagelist(v,x.toString()),aa=p.getItemList(v,w).length,ba=h.getForFBID(v);if(y&&y.unread_count>0||z.length>0)if(w===k.UNREAD&&aa>1&&u!==x){ba.markRead(x,r.MESSAGE_DIALOG_SHOWN);}else if(w===k.UNREAD&&aa===1){ba.markRead(u,r.MESSAGE_DIALOG_SHOWN);l.changeFilter(v,m.getFilterByKey(o.FILTERS.ALL));}else if(w!==k.UNREAD)ba.markRead(u,r.MESSAGE_DIALOG_SHOWN);}};f.exports=t;},null);
__d("XPagesBanUserDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/ban_user\/",{page_id:{type:"Int",required:true},user_id:{type:"Int",required:true},post_id:{type:"Int"}});},null);
__d('PagesManagerMessagingBatchActionMenu.react',['AsyncRequest','MercuryPageThreadActions','InsightsInfoTip.react','PagesManagerAction','PagesManagerMessagingMessagelistAction','PagesMessengerActions','PagesMessagingActionPlacement','PopoverMenu.react','React','SimpleXUIDialog','XPagesBanUserDataController','ReactXUIMenu','XUIDialogButton.react','XUIDialogCancelButton.react','XUIText.react','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa,ba=s.Item;z=babelHelpers.inherits(ca,p.Component);aa=z&&z.prototype;function ca(da){'use strict';aa.constructor.call(this,da);this.$PagesManagerMessagingBatchActionMenu1=i.getForFBID(da.pageID);}ca.prototype.$PagesManagerMessagingBatchActionMenu2=function(event,da){'use strict';var ea=da.item.getValue(),fa=null;switch(ea){case m.FLAG:fa=this.$PagesManagerMessagingBatchActionMenu1.batchAddFlag;break;case m.UNFLAG:fa=this.$PagesManagerMessagingBatchActionMenu1.batchRemoveFlag;break;case m.MARK_AS_SPAM:fa=this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam;break;case m.MARK_AS_UNSPAM:fa=this.$PagesManagerMessagingBatchActionMenu1.batchUnmarkSpam;break;case m.MARK_AS_READ:fa=this.$PagesManagerMessagingBatchActionMenu1.batchMarkRead;break;case m.MARK_AS_UNREAD:fa=this.$PagesManagerMessagingBatchActionMenu1.batchMarkUnread;break;case m.ARCHIVE:fa=this.$PagesManagerMessagingBatchActionMenu1.batchArchive;break;case m.UNARCHIVE:fa=this.$PagesManagerMessagingBatchActionMenu1.batchUnarchive;break;case m.DELETE_THREAD:this.$PagesManagerMessagingBatchActionMenu3();return;case m.HIDE_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu4();return;case m.SHOW_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu5();return;case m.SHOW_BAN_FROM_PAGE:this.$PagesManagerMessagingBatchActionMenu6();return;default:y(0);}if(fa)fa.call(this.$PagesManagerMessagingBatchActionMenu1,this.props.selectedRows,this.props.placement);k.deselectAll();this.props.onSelectionClear&&this.props.onSelectionClear();};ca.prototype.$PagesManagerMessagingBatchActionMenu3=function(){'use strict';var da=this.props.selectedRows.length,ea=x._("Delete Messages"),fa=x._("Are you sure you want to delete {number of messages}?",[x.param('number of messages',p.createElement('span',{className:"_50f7"},x._({"*":{"message":"{number of messages} message","messages":"{number of messages} messages"}},[x.param('number of messages',da,[0]),x['enum'](da>1?'messages':'message',{message:'message',messages:'messages'})])))]),ga=x._("Delete Messages"),ha=[p.createElement(u,null),p.createElement(t,{action:'cancel',label:ga,onClick:(function(){this.$PagesManagerMessagingBatchActionMenu1.batchDelete(this.props.selectedRows,n.THREAD_LIST_BATCH_ACTION);}).bind(this),use:'confirm'})];q.showEx(fa,ea,ha);};ca.prototype.$PagesManagerMessagingBatchActionMenu4=function(){'use strict';l.setIsContextCardHidden(true);};ca.prototype.$PagesManagerMessagingBatchActionMenu5=function(){'use strict';l.setIsContextCardHidden(false);};ca.prototype.$PagesManagerMessagingBatchActionMenu6=function(){'use strict';!this.props.pageID?y(0):undefined;!this.props.userID?y(0):undefined;var da=r.getURIBuilder().setInt('page_id',this.props.pageID).setInt('user_id',this.props.userID).getURI(),ea=x._("Ban person from Page"),fa=x._("A person who's banned can't post, comment, like or take other actions on the Page. They won't be notified."),ga=this.props.userName?x._("Would you like to ban {user name}?",[x.param('user name',p.createElement(v,{weight:'bold'},this.props.userName))]):x._("Would you like to ban this user?"),ha=p.createElement('div',null,ga,p.createElement(j,{alignH:'center',position:'above',tip:fa}));q.showConfirm(ha,ea,(function(ia){if(!ia)return;new h().setURI(da).setHandler((function(ja){if(!ja.payload.success)return;l.resetIsUserBanned(this.props.pageID,this.props.userID);this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam(this.props.selectedRows,n.THREAD_LIST_BATCH_ACTION);}).bind(this)).send();}).bind(this));};ca.prototype.renderMenu=function(){'use strict';return (p.createElement(s,{onItemClick:(function(event,da){return this.$PagesManagerMessagingBatchActionMenu2(event,da);}).bind(this)},this.props.inlineActionParam.showFlag?p.createElement(ba,{value:m.FLAG},x._("Flag")):null,this.props.inlineActionParam.showUnflag?p.createElement(ba,{value:m.UNFLAG},x._("Unflag")):null,this.props.inlineActionParam.showSpam?p.createElement(ba,{value:m.MARK_AS_SPAM},x._("Report as Spam")):null,this.props.inlineActionParam.showUnspam?p.createElement(ba,{value:m.MARK_AS_UNSPAM},x._("Move to Inbox")):null,this.props.inlineActionParam.showMarkRead?p.createElement(ba,{value:m.MARK_AS_READ},x._("Mark as Read")):null,this.props.inlineActionParam.showMarkUnread?p.createElement(ba,{value:m.MARK_AS_UNREAD},x._(["Mark as Unread","d40d50f73da3233202117a2dc422f97d"])):null,this.props.inlineActionParam.showArchive?p.createElement(ba,{value:m.ARCHIVE},x._("Archive")):null,this.props.inlineActionParam.showUnarchive?p.createElement(ba,{value:m.UNARCHIVE},x._("Move to Inbox")):null,this.props.inlineActionParam.showDelete?p.createElement(ba,{value:m.DELETE_THREAD},x._("Delete")):null,this.props.inlineActionParam.showHideContextCard?p.createElement(ba,{value:m.HIDE_CONTEXT_CARD},x._("Hide sender info")):null,this.props.inlineActionParam.showShowContextCard?p.createElement(ba,{value:m.SHOW_CONTEXT_CARD},x._("Show sender info")):null,this.props.showBanFromPage&&this.props.pageID&&this.props.userID?p.createElement(ba,{value:m.SHOW_BAN_FROM_PAGE},x._("Ban from Page")):null));};ca.prototype.render=function(){'use strict';return (p.createElement(o,{alignh:this.props.alignh,className:!this.props.showBatchAction?"hidden_elem":'',layerBehaviors:this.props.layerBehaviors,menu:this.renderMenu(),onHide:this.props.onHide,onShow:this.props.onShow,ref:'menu'},this.props.children));};ca.defaultProps={alignh:'left'};f.exports=ca;},null);
__d('PagesManagerMessagingThreadTitle.react',['ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','LeftRight.react','MercuryIDs','MercuryParticipants','MercuryThreadTitle.react','PagesManagerMessagingBatchActionMenu.react','PagesMessengerThreadUtils','PagesMessagingActionPlacement','MercuryParticipantListRenderer','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w;v=babelHelpers.inherits(x,s.Component);w=v&&v.prototype;x.prototype.$PagesManagerMessagingThreadTitle1=function(y){'use strict';if(y&&y.other_user_fbid){var z=l.getParticipantIDFromUserID(y.other_user_fbid);m.get(z,(function(aa){var ba=new r().renderParticipantList([aa]);this.setState({userName:ba});}).bind(this));}};x.prototype.componentWillReceiveProps=function(y){'use strict';this.$PagesManagerMessagingThreadTitle1(y.thread);};x.prototype.render=function(){'use strict';if(this.props.thread===null||this.props.thread===undefined)return s.createElement('div',{className:"_174o"});var y=p.getBatchActionMenuParam(this.props.thread);y.showMarkRead=false;y.showMarkUnread=false;y.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;y.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;return (s.createElement(k,{className:"_174o"},s.createElement(n,{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}),s.createElement(o,{alignh:'right',layerBehaviors:[h,i],onHide:(function(){this.setState({menuShown:false});}).bind(this),onShow:(function(){this.setState({menuShown:true});}).bind(this),pageID:this.props.pageID,inlineActionParam:y,placement:q.THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBanFromPage:this.props.isBanFromPageEnabled,showBatchAction:true,userID:this.props.thread?this.props.thread.other_user_fbid:null,userName:this.state?this.state.userName:null},s.createElement(j,{className:"_3lq_",onClick:function(event){return event.stopPropagation();},src:u('/images/mobile/chrome/ui/divebar/settings_gear.png')}))));};function x(){'use strict';v.apply(this,arguments);}f.exports=x;},null);
__d('PagesManagerMessagingDetailContainer.react',['BootloadedComponent.react','FBID','FluxContainer','Grid.react','immutable','JSResource','MercuryMessageStore','MercuryRoger','MercuryThreadInformer','MercuryThreads','MessagingTag','MessengerConfig','MessengerHotLikePreviewEvents','PagesEventObserver','PagesEventType','PagesManagerMessagingComposerContainer.react','PagesManagerMessagingFilterStore','PagesManagerMessagingMessageList.react','PagesManagerMessagingMessagelistAction','PagesManagerMessagingMessagelistStore','PagesManagerMessagingNoteComposerContainer.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadTitle.react','PagesManagerPerfLogger','React','ReactDOM','Set','SubscriptionsHandler','Vector','XUIButton.react','cx','debounce','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){if(c.__markCompiled)c.__markCompiled();var pa,qa,ra=k.GridItem;pa=babelHelpers.inherits(sa,ga.Component);qa=pa&&pa.prototype;function sa(ta,ua){'use strict';qa.constructor.call(this,ta,ua);this.$PagesManagerMessagingDetailContainer1=o.getForFBID(ta.pageID);this.$PagesManagerMessagingDetailContainer2=p.getForFBID(ta.pageID);this.$PagesManagerMessagingDetailContainer3=null;this.$PagesManagerMessagingDetailContainer4=false;this.state={isContextCardEnabled:false,isLoading:false,isLoadingMore:false,isPageAdminNoteMode:false,messaginglist:[],preventScroll:false,hideContextCard:ta.config.hideContextCard,threadID:'',thread:{}};this.$PagesManagerMessagingDetailContainer5=na((function(){if(this.props.height)this.$PagesManagerMessagingDetailContainer6(this.props.height);}).bind(this),50);}sa.getStores=function(){'use strict';return [aa];};sa.calculateState=function(ta,ua){'use strict';var va=[],wa={},xa=null;if(ua.listItemKey){va=aa.getMessagelist(ua.pageID,ua.listItemKey);wa=aa.getReadReceipts(ua.listItemKey);xa=q.getForFBID(ua.pageID).getThreadMetaNow(ua.listItemKey);if(xa&&xa.other_user_fbid&&ua.config&&ua.config.enableBanFromPage&&ua.pageID)z.fetchIsUserBanned(ua.pageID,xa.other_user_fbid);}var ya=aa.isCardHidden();if(ya===null)ya=ua.config.hideContextCard;var za=ua.config.enableContextCard&&xa&&xa.other_user_fbid&&i.isUser(xa.other_user_fbid),ab=ua.pageID&&xa&&xa.other_user_fbid?aa.getIsUserBanned(ua.pageID,xa.other_user_fbid):false;return {isContextCardEnabled:za,hideContextCard:ya,isLoading:aa.isLoading(),isLoadingMore:aa.isLoadingMore(),isPageAdminNoteMode:ta?ta.isPageAdminNoteMode:false,isUserBanned:ab,scrollHeight:aa.getScrollHeight(),messagelist:va,readReceipts:wa,threadID:ua.listItemKey,thread:xa};};sa.prototype.$PagesManagerMessagingDetailContainer6=function(ta){'use strict';var ua=ka.getElementDimensions(ha.findDOMNode(this.refs.threadTitle)).y,va=ka.getElementDimensions(this.state.isPageAdminNoteMode?ha.findDOMNode(this.refs.noteComposer):ha.findDOMNode(this.refs.composer)).y,wa=ta-ua-va;if(wa<0)wa=0;z.setScrollAreaHeight(wa);};sa.prototype.$PagesManagerMessagingDetailContainer7=function(ta,ua){'use strict';var va=this.$PagesManagerMessagingDetailContainer1.getSeenTimestamps(ta),wa=new ia(va.keys());return va.withMutations(function(xa){l.Seq(ua).reverse().forEach(function(ya){if(wa.size===0)return false;if(!wa.has(ya.author))return true;xa.update(ya.author,function(za){return Math.max(za,ya.timestamp);});wa['delete'](ya.author);});});};sa.prototype.componentDidMount=function(){'use strict';fa.log(ca.MESSAGE_TAB_DETAIL_VIEW_DID_RENDER,this.props.perfParams);if(this.props.listItemKey)this.$PagesManagerMessagingDetailContainer8(this.props.listItemKey);};sa.prototype.componentWillReceiveProps=function(ta){'use strict';if(this.props.listItemKey!==ta.listItemKey)this.$PagesManagerMessagingDetailContainer8(ta.listItemKey);};sa.prototype.componentWillUpdate=function(ta){'use strict';if(ta.height!==this.props.height)this.$PagesManagerMessagingDetailContainer6(ta.height);};sa.prototype.getMessageStore=function(){'use strict';return this.$PagesManagerMessagingDetailContainer9;};sa.prototype.logMessageLoadingStart=function(){'use strict';var ta=Date.now();this.$PagesManagerMessagingDetailContainer10=this.props.pageID+String(Math.random()).slice(2)+'/'+ta;this.$PagesManagerMessagingDetailContainer11=true;u.notify(v.MESSAGES_MESSAGELIST_LOAD_START,this.props.pageID,{flowID:this.$PagesManagerMessagingDetailContainer10,page_id:this.props.pageID,loading_event_time:Date.now()});};sa.prototype.logMessageLoadingEnd=function(){'use strict';if(this.$PagesManagerMessagingDetailContainer11){this.$PagesManagerMessagingDetailContainer11=false;u.notify(v.MESSAGES_MESSAGELIST_LOAD_END,this.props.pageID,{flowID:this.$PagesManagerMessagingDetailContainer10,page_id:this.props.pageID,loading_event_time:Date.now()});}};sa.prototype.$PagesManagerMessagingDetailContainer8=function(ta){'use strict';this.$PagesManagerMessagingDetailContainer12&&this.$PagesManagerMessagingDetailContainer12.destroy();this.$PagesManagerMessagingDetailContainer13&&this.$PagesManagerMessagingDetailContainer13.release();this.$PagesManagerMessagingDetailContainer9=new n(ta,s.MessageLoadCount,this.props.pageID);var ua=aa.getMessagelist(this.props.pageID,ta);if(ua.length===0){z.setIsLoadingMore(false);z.setIsLoading(true);this.logMessageLoadingStart();}var va=this.$PagesManagerMessagingDetailContainer7(ta,ua);z.updateReadReceipts(this.props.pageID,ta,va);this.$PagesManagerMessagingDetailContainer13=new ja();this.$PagesManagerMessagingDetailContainer13.addSubscriptions(this.$PagesManagerMessagingDetailContainer9.subscribe((function(wa){this.logMessageLoadingEnd();z.setIsLoading(false);z.setIsLoadingMore(false);z.updateMessagelist(this.props.pageID,ta,wa);}).bind(this)),this.$PagesManagerMessagingDetailContainer2.subscribe('threads-updated',(function(wa,xa){if(xa[this.props.listItemKey])z.updateThread(this.props.pageID,this.props.listItemKey);}).bind(this)),this.$PagesManagerMessagingDetailContainer1.subscribe('change',(function(wa,xa){if(xa[this.props.listItemKey]){var ya=aa.getMessagelist(this.props.pageID,this.props.listItemKey),za=this.$PagesManagerMessagingDetailContainer7(this.props.listItemKey,ya);z.updateReadReceipts(this.props.pageID,this.props.listItemKey,za);}}).bind(this)),t.addListener(t.START,function(wa){z.setHotLikeStart(wa);}),t.addListener(t.STOP,function(){z.setHotLikeEnd();}));};sa.prototype.$PagesManagerMessagingDetailContainer14=function(){'use strict';var ta=x.getActiveFilterName();if(!this.props.listItemKey||ta===r.UNREAD)return;da.handleUnreadStateUpdate(this.props.listItemKey,this.props.pageID,ta);da.handlePermalinkUpdate(this.props.listItemKey,this.props.pageID);};sa.prototype.$PagesManagerMessagingDetailContainer15=function(){'use strict';if(!this.state.isLoadingMore)if(this.getMessageStore().fetchMoreMessages()){z.setIsLoading(false);z.setIsLoadingMore(true);}};sa.prototype.$PagesManagerMessagingDetailContainer16=function(){'use strict';return (ga.createElement(y,babelHelpers._extends({},this.props,{initLoading:this.state.isLoading,isLoadingMore:this.state.isLoadingMore,messagelist:l.List(this.state.messagelist),fetchEarlierMessages:(function(){return this.$PagesManagerMessagingDetailContainer15();}).bind(this),readReceipts:this.state.readReceipts,scrollHeight:this.state.scrollHeight,threadID:this.state.threadID,thread:this.state.thread})));};sa.prototype.$PagesManagerMessagingDetailContainer17=function(){'use strict';if(!this.state.isContextCardEnabled)return null;return (ga.createElement(ra,{alignv:'middle',className:"_2utd"+(this.state.hideContextCard?' '+"hidden_elem":'')},ga.createElement(h,{bootloadPlaceholder:ga.createElement('div',{className:"hidden_elem"}),bootloadLoader:m('PagesMessengerContextCardContainer.react'),pageID:this.props.pageID,userID:this.state.thread&&this.state.thread.other_user_fbid,scrollHeight:this.state.scrollHeight})));};sa.prototype.$PagesManagerMessagingDetailContainer18=function(){'use strict';if(!this.props.config.enableNotes)return null;var ta=oa._("Add Note");return (ga.createElement('div',{className:"_iif"},ga.createElement(la,{label:ta,onClick:(function(ua){return this.setState({isPageAdminNoteMode:true});}).bind(this)})));};sa.prototype.$PagesManagerMessagingDetailContainer19=function(){'use strict';this.setState({isPageAdminNoteMode:false});};sa.prototype.$PagesManagerMessagingDetailContainer20=function(){'use strict';return (this.props.config.enableComposer&&!this.state.isPageAdminNoteMode);};sa.prototype.$PagesManagerMessagingDetailContainer21=function(){'use strict';return (this.props.config.enableComposer&&this.state.isPageAdminNoteMode);};sa.prototype.render=function(){'use strict';return (ga.createElement('div',null,ga.createElement(ea,{pageID:this.props.pageID,isContextCardEnabled:this.state.isContextCardEnabled,isContextCardHidden:this.state.hideContextCard,isBanFromPageEnabled:this.props.config.enableBanFromPage&&!this.state.isUserBanned,onIconClick:(function(){return this.$PagesManagerMessagingDetailContainer22();}).bind(this),ref:'threadTitle',thread:this.state.thread}),ga.createElement(k,{alignv:'top',className:"_2utb",cols:this.state.isContextCardEnabled?2:1},ga.createElement(ra,{className:"_2utc"},this.$PagesManagerMessagingDetailContainer16(),this.$PagesManagerMessagingDetailContainer18()),this.$PagesManagerMessagingDetailContainer17()),ga.createElement('div',{className:!this.$PagesManagerMessagingDetailContainer20()?"hidden_elem":''},ga.createElement(w,{canUseHotlike:this.props.config.enableHotLike,canUseOmnipicker:this.props.config.enableOmnipicker,creatorInfo:this.props.config.creatorInfo,onInitialRender:(function(){return this.$PagesManagerMessagingDetailContainer5();}).bind(this),onMessageOrAttachmentUpdate:(function(){return this.$PagesManagerMessagingDetailContainer5();}).bind(this),onFocus:(function(){return this.$PagesManagerMessagingDetailContainer14();}).bind(this),recipientID:this.state.thread?this.state.thread.other_user_fbid.toString():null,ref:'composer',threadElementID:this.state.threadID,threadID:this.state.threadID,userID:this.props.pageID})),ga.createElement('div',{className:!this.$PagesManagerMessagingDetailContainer21()?"hidden_elem":''},ga.createElement(ba,{creatorInfo:this.props.config.creatorInfo,key:'notecomposer',onDisablePageAdminNoteMode:(function(){return (this.$PagesManagerMessagingDetailContainer19());}).bind(this),onMessageOrAttachmentUpdate:(function(){return this.$PagesManagerMessagingDetailContainer5();}).bind(this),ref:'noteComposer',threadID:this.state.threadID,userID:this.props.pageID}))));};f.exports=j.create(sa,{withProps:true});},null);
__d('PagesManagerMessagingNotificationCountSubscriber',['Map','MercuryThreadInformer','PagesManagerMessagingFilterActions'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={_pageIDTokenMap:new h(),enableRealtimeNotificationCountUpdates:function(l){var m=k._pageIDTokenMap;if(m.has(l))return;var n=i.getForFBID(l),o=n.subscribe('unread-updated',function(p,q){j.notifyNotificationCountChanged(l);});m.set(l,o);},disableRealtimeNotificationCountUpdates:function(l){var m=k._pageIDTokenMap;if(!m.has(l))return;var n=m.get(l);i.getForFBID(l).unsubscribe(n);m['delete'](n);}};f.exports=k;},null);
__d('PagesManagerNavigationView.react',['ContextualDialogArrow','ContextualLayerAutoFlip','Map','PagesManagerNavigationUnit','PopoverMenu.react','React','ReactXUIMenu','cx','invariant','immutable'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=n.Item,t=c('immutable').List;q=babelHelpers.inherits(u,m.Component);r=q&&q.prototype;function u(v,w){'use strict';r.constructor.call(this,v,w);this.$PagesManagerNavigationView1=this.$PagesManagerNavigationView1.bind(this);this.$PagesManagerNavigationView2=this.$PagesManagerNavigationView2.bind(this);}u.prototype.$PagesManagerNavigationView3=function(v){'use strict';var w=this.$PagesManagerNavigationView4(v,this.props.tabbarUnits);if(w)return w;w=this.$PagesManagerNavigationView4(v,this.props.dropdownUnits);if(w)return w;p(0);};u.prototype.$PagesManagerNavigationView4=function(v,w){'use strict';var x=w.filter(function(y){return y.getKey()===v;});if(x.count()>0)return x.get(0);};u.prototype.$PagesManagerNavigationView1=function(v,w){'use strict';this.props.onUnitSelected(this.$PagesManagerNavigationView3(w.item.getValue()));};u.prototype.render=function(){'use strict';return (m.createElement('div',{className:"_-7a"},this.$PagesManagerNavigationView5(),this.$PagesManagerNavigationView6()));};u.prototype.$PagesManagerNavigationView2=function(v){'use strict';return (m.createElement(s,{key:v.getKey(),value:v.getKey()},m.createElement('div',{className:"_-7b"},v.getDisplayTitle())));};u.prototype.$PagesManagerNavigationView5=function(){'use strict';if(this.props.dropdownUnits.size===0||!this.props.activeDropdownUnit)return null;var v=m.createElement(n,{onItemClick:this.$PagesManagerNavigationView1},this.props.dropdownUnits.map(this.$PagesManagerNavigationView2));return (m.createElement(l,{layerBehaviors:[h,i],menu:v},m.createElement('div',{className:"_-7c"},this.props.activeDropdownUnit.getDisplayTitle())));};u.prototype.$PagesManagerNavigationView7=function(v){'use strict';var w=this.props.unitNotificationCountMap.get(v);return (m.createElement('div',babelHelpers._extends({},this.props,{className:"_-7d"+(' '+"_-7e")+(v===this.props.activeTabbarUnit?' '+"_-7f":''),onClick:(function(){return this.props.onUnitSelected(v);}).bind(this),key:v.getKey()}),m.createElement('div',{className:"_-7g _-7e"},v.getDisplayTitle().toString().toUpperCase()),m.createElement('div',{className:"_-7h"+(' '+"_-7e")+(w===0?' '+"hidden_elem":'')},w)));};u.prototype.$PagesManagerNavigationView6=function(){'use strict';return this.props.tabbarUnits.map((function(v){return this.$PagesManagerNavigationView7(v);}).bind(this));};f.exports=u;},null);
__d('PagesManagerMessagingFilterContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','Map','PagesManagerMessagingFilterActions','PagesManagerMessagingNotificationCountSubscriber','PagesManagerNavigationUnit','PagesManagerNavigationView.react','React','immutable'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r=c('immutable').List;p=babelHelpers.inherits(s,o.Component);q=p&&p.prototype;function s(t){q.constructor.call(this,t);this.$PagesManagerMessagingFilterContainer1=(function(u){k.changeFilter(this.props.pageID,u);}).bind(this);}s.getStores=function(){return [h];};s.calculateState=function(t,u){return {activeFolder:h.getActiveFolder(),activeFilter:h.getActiveFilter(),folders:h.getAvailableFolders(),filters:h.getAvailableFilters(),unitNotificationCountMap:h.getUnitNotificationCountMap(u.pageID)};};s.prototype.componentWillMount=function(){l.enableRealtimeNotificationCountUpdates(this.props.pageID);};s.prototype.componentWillUnmount=function(){l.disableRealtimeNotificationCountUpdates(this.props.pageID);};s.prototype.render=function(){return (o.createElement(n,{activeDropdownUnit:this.state.activeFolder,activeTabbarUnit:this.state.activeFilter,tabbarUnits:this.state.filters,dropdownUnits:this.state.folders,unitNotificationCountMap:this.state.unitNotificationCountMap,onUnitSelected:this.$PagesManagerMessagingFilterContainer1}));};f.exports=i.create(s,{withProps:true});},null);
__d('PagesManagerAwayToggle.react',['PagesManagerAwayToggleAction','BUISwitch.react','React','Tooltip','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,j.Component);o=n&&n.prototype;p.prototype.$PagesManagerAwayToggle1=function(q){'use strict';h.setToggleStatus(this.props.pageID,q);};p.prototype.render=function(){'use strict';var q=m._("Going out? Set your status to Away for 12 hours. Change it if you get back sooner."),r=m._(["Away","8e0d60b5f4f0e61653bc5fce6cfff526"]);return (j.createElement('div',{className:"_4cdp"},j.createElement('div',{className:"_ast"},j.createElement(i,babelHelpers._extends({onToggle:(function(s){return this.$PagesManagerAwayToggle1(s);}).bind(this),value:this.props.isAway},k.propsFor(q)))),j.createElement('div',{className:"_asu"},r.toUpperCase())));};function p(){'use strict';n.apply(this,arguments);}f.exports=p;},null);
__d('PagesManagerMessagingBatchActionHeader.react',['PagesManagerMessagingBatchActionMenu.react','PagesMessagingActionPlacement','React','XUIPopoverButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,j.Component);o=n&&n.prototype;p.prototype.render=function(){return (j.createElement(h,babelHelpers._extends({layerBehaviors:[],placement:i.THREAD_LIST_BATCH_ACTION},this.props),j.createElement(k,{className:"_3640",label:m._("Actions")})));};function p(){n.apply(this,arguments);}f.exports=p;},null);
__d('PagesManagerMessagingBatchActionHeaderContainer.react',['FluxContainer','MercuryPageThreadActions','MercuryThreads','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingBatchActionHeader.react','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,o.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);this.$PagesManagerMessagingBatchActionHeaderContainer1=i.getForFBID(s.pageID);}r.getStores=function(){return [m];};r.calculateState=function(s,t){var u=m.getActiveFolderName(),v=m.getActiveFilterName(),w=j.getForFBID(t.pageID),x=false,y=false,z=false,aa=false,ba=false,ca=false,da=false,ea=false,fa=false,ga=0,ha=0;t.selectedRows.forEach(function(ja){var ka=w.getThreadMetaNow(ja);if(n.isFlagThread(ka))ga++;if(ka&&ka.unread_count===0)ha++;});var ia=t.selectedRows.length;if(u===k.FOLDERS.INBOX&&v===k.FILTERS.ALL){x=true;aa=true;ca=ia-ga>0;da=ga>0;ea=ha<ia;fa=ha>0;}else if(u===k.FOLDERS.ARCHIVED&&v===k.FILTERS.ALL){y=true;z=true;}else if(u===k.FOLDERS.SPAM&&v===k.FILTERS.ALL){ba=true;}else if(v===k.FILTERS.FLAGGED&&u===k.FOLDERS.INBOX){da=true;}else if(v===k.FILTERS.UNREAD&&u===k.FOLDERS.INBOX)ea=true;return {inlineActionParam:{showArchive:x,showDelete:y,showUnarchive:z,showSpam:aa,showUnspam:ba,showFlag:ca,showUnflag:da,showMarkRead:ea,showMarkUnread:fa}};};r.prototype.$PagesManagerMessagingBatchActionHeaderContainer2=function(){this.props.onSelectionClear();};r.prototype.render=function(){return (o.createElement(l,babelHelpers._extends({onSelectionClear:(function(){return this.$PagesManagerMessagingBatchActionHeaderContainer2();}).bind(this),pageID:this.props.pageID,showBatchAction:this.props.showBatchAction,selectedRows:this.props.selectedRows},this.state)));};f.exports=h.create(r,{withProps:true});},null);
__d('MercuryPageSeenIndicator.react',['MercuryIDs','MercurySeenIndicator.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';l=babelHelpers.inherits(n,j.Component);m=l&&l.prototype;n.prototype.render=function(){if(this.props.snippetSearchResult){var o=this.props.snippetSearchResult.num_total_snippets;if(o===1){var p=this.props.snippetSearchResult.snippets[0].author,q=h.getParticipantIDFromUserID(this.props.viewer);if(p===q)return (j.createElement('span',{className:"_3jy5 repliedLast"}));}return (j.createElement('span',null));}else return (j.createElement(i,{thread:this.props.thread,viewer:this.props.viewer}));};function n(){l.apply(this,arguments);}f.exports=n;},null);
__d('MercuryPageThreadTitle.react',['DOM','MercuryMessageRenderer','MercuryThreadTitle.react','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';m=babelHelpers.inherits(o,j);n=m&&m.prototype;o.prototype.render=function(){return (k.createElement('div',{className:this.props.className},k.createElement('span',{ref:'title'})));};o.prototype.componentDidUpdate=function(){var p=this.props.thread.name?this.$MercuryPageThreadTitle1():this.state.participantNames;if(this.props.useHighlightTitle){var q=p.toLowerCase().search(this.props.highlightText.toLowerCase()),r={};r[q]=this.props.highlightText;p=i.formatMessageBody(p,r);}h.setContent(l.findDOMNode(this.refs.title),p);};function o(){m.apply(this,arguments);}o.defaultProps={isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};f.exports=o;},null);
__d('PagesManagerMessagingListRow.react',['ContextualDialogArrow','ContextualLayerAutoFlip','CSS','Layout.react','MercuryPageSeenIndicator.react','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryPageThreadTitle.react','PagesMessagingActionPlacement','PagesSelectableListRow.react','PagesManagerMessagingBatchActionMenu.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w,x=k.Column,y=k.FillColumn;v=babelHelpers.inherits(z,s.Component);w=v&&v.prototype;function z(aa){'use strict';w.constructor.call(this,aa);this.state={menuShown:false};}z.prototype.renderSnippetSearchResult=function(){'use strict';var aa=this.props.snippetSearchResult.num_total_snippets;if(aa===1){return (s.createElement('div',null,this.props.snippetSearchResult.snippets[0].body));}else return (s.createElement('div',null,u._("Found {number of messages found} results",[u.param('number of messages found',aa)])));};z.prototype.render=function(){'use strict';return (s.createElement(q,{disabled:this.props.disableCheckBox,onSelected:this.props.onSelected,onClick:(function(event){if(j.hasClass(event.target.parentElement,"_4vbb"))return;this.props.onViewingListItem(this.props.listItem);}).bind(this),selected:this.props.selected,className:"_1a_0"+(this.props.isUnread?' '+"_1a_1":'')+(this.props.isViewing&&!this.props.selected?' '+"_3wxb":'')+(this.state.menuShown?' '+"_1hgw":'')+(' '+"_o3f")},s.createElement('div',{className:"_5x5y"+(!this.props.isFlagged?' '+"hidden_elem":'')}),s.createElement(k,null,s.createElement(x,null,s.createElement(o,{className:"_1a_3",highlightText:this.props.highlightText,showUnreadCount:false,thread:this.props.thread,useShortName:false,useHighlightTitle:this.props.useHighlightTitle,viewer:this.props.pageID})),s.createElement(y,null),s.createElement(x,{className:"_55hu"+(this.props.isFlagged?' '+"_1hog":'')},s.createElement(n,{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative}))),s.createElement(k,{className:"_1a_6"},s.createElement(x,{className:"_1hgx"},s.createElement(l,{snippetSearchResult:this.props.snippetSearchResult,thread:this.props.thread,viewer:this.props.pageID})),s.createElement(y,{className:"_1a_7"},this.props.snippetSearchResult?this.renderSnippetSearchResult():s.createElement(m,{participants:this.props.participants,shouldRenderYou:false,thread:this.props.thread,viewer:this.props.pageID})),s.createElement(x,null,s.createElement(r,{alignh:'right',layerBehaviors:[h,i],onHide:(function(){this.setState({menuShown:false});}).bind(this),onShow:(function(){this.setState({menuShown:true});}).bind(this),pageID:this.props.pageID,inlineActionParam:this.props.inlineActionParam,placement:p.THREAD_ROW_ACTION_ICON,selectedRows:[this.props.thread.thread_id],showBatchAction:true},s.createElement('span',{className:"_4hq1",onClick:function(event){return event.stopPropagation();}}))))));};z.defaultProps={disableCheckBox:false,useHighlightTitle:false};f.exports=z;},null);
__d('PagesManagerMessagingListRowContainer.react',['immutable','PagesManagerMessagingListRow.react','MercuryParticipants','MercuryThreads','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadInteractionHelper','PagesMessengerThreadUtils','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q,r=h.Map;p=babelHelpers.inherits(s,o.Component);q=p&&p.prototype;function s(t){'use strict';q.constructor.call(this,t);this.$PagesManagerMessagingListRowContainer1=this.$PagesManagerMessagingListRowContainer1.bind(this);}s.prototype.componentWillMount=function(){'use strict';var t=k.getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);this.setState({inlineActionParam:n.getBatchActionMenuParam(t),thread:t,participants:r(h.Seq(t.participants).map(function(u){return [u,j.getOrFetch(u)];}))});};s.prototype.render=function(){'use strict';var t=this.state.thread.unread_count&&this.state.thread.unread_count>0,u=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.flagged,v=this.props,w=v.onViewingListItem,x=babelHelpers.objectWithoutProperties(v,['onViewingListItem']);return (o.createElement(i,babelHelpers._extends({isFlagged:u,isUnread:t,onViewingListItem:this.$PagesManagerMessagingListRowContainer1,thread:this.state.thread},x,this.state)));};s.prototype.updateThread=function(){'use strict';var t=k.getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);this.setState({thread:t,inlineActionParam:n.getBatchActionMenuParam(t)});};s.prototype.$PagesManagerMessagingListRowContainer1=function(t){'use strict';m.handleUnreadStateUpdate(t,this.props.pageID,l.getActiveFilterName());m.handlePermalinkUpdate(t,this.props.pageID);this.props.onViewingListItem(t);};s.defaultProps={useHighlightTitle:false};f.exports=s;},null);
__d('PagesManagerMessagingSearchListResult.react',['Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','React','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,l.Component);q=p&&p.prototype;r.prototype.$PagesManagerMessagingSearchListResult1=function(s){'use strict';j.viewListItem(s);};r.prototype.getNameResultKey=function(s){'use strict';return 'NameResult:'+s;};r.prototype.getSnippetResultKey=function(s){'use strict';return 'SnippetResult:'+s;};r.prototype.$PagesManagerMessagingSearchListResult2=function(){'use strict';var s=l.createElement('li',{className:"_16-z",key:'nameSearchTitle'},o._("Names that contain \"{message search term}\"",[o.param('message search term',this.props.searchTerm)])),t=this.props.nameSearchResult.map((function(y){return (l.createElement(i,{ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:y,pageID:this.props.pageID,ref:this.getNameResultKey(y),key:this.getNameResultKey(y),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'}));}).bind(this)),u=this.props.hasMoreNameSearchResult&&!this.props.isSearchingName?l.createElement('li',{className:"_16--",key:'loadMoreNameResult'},l.createElement(h,{onClick:this.props.loadMoreNameResult},o._("See More Results"))):l.createElement('li',{className:"_3o39"}),v=l.createElement('li',{className:"_16-z",key:'snippetSearchTitle'},o._("Messages that contain \"{message search term}\"",[o.param('message search term',this.props.searchTerm)])),w=[];Object.keys(this.props.snippetSearchResult).forEach((function(y){w.push(l.createElement(i,{ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:y,pageID:this.props.pageID,ref:this.getSnippetResultKey(y),key:this.getSnippetResultKey(y),onViewingListItem:this.$PagesManagerMessagingSearchListResult1,snippetSearchResult:this.props.snippetSearchResult[y],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'}));}).bind(this));var x=this.props.hasMoreSnippetSearchResult&&!this.props.isSearchingSnippet?l.createElement('li',{className:"_16--",key:'loadMoreSnippetResult'},l.createElement(h,{onClick:this.props.loadMoreSnippetResult},o._("See More Results"))):l.createElement('li',{className:"_3o39"});return [s].concat(t,[u,v],w,[x]);};r.prototype.render=function(){'use strict';var s=this.$PagesManagerMessagingSearchListResult2();return (l.createElement(k,{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',hideBatchAction:true,enableOnVisible:false,forceRequestMoreRows:false,height:this.props.height,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:n,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false},s));};function r(){'use strict';p.apply(this,arguments);}f.exports=r;},null);
__d('PagesManagerMessagingSeparateSearchResultView.react',['Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesSelectableList.react','PagesMessagingSearchMode','React','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;q=babelHelpers.inherits(s,m.Component);r=q&&q.prototype;s.prototype.$PagesManagerMessagingSeparateSearchResultView1=function(t){'use strict';j.viewListItem(t);};s.prototype.$PagesManagerMessagingSeparateSearchResultView2=function(){'use strict';var t=null,u=[];switch(this.props.searchMode){case l.MESSAGE_SEARCH:t=p._("Messages that contain \"{message search term}\"",[p.param('message search term',this.props.searchTerm)]);Object.keys(this.props.snippetSearchResult).forEach((function(w){u.push(m.createElement(i,{ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:w,pageID:this.props.pageID,ref:w,key:w,onViewingListItem:this.$PagesManagerMessagingSeparateSearchResultView1,snippetSearchResult:this.props.snippetSearchResult[w],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'}));}).bind(this));break;case l.NAME_SEARCH:t=p._("Names that contain \"{message search term}\"",[p.param('message search term',this.props.searchTerm)]);u=this.props.searchResult.map((function(w){return (m.createElement(i,{ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:w,pageID:this.props.pageID,ref:w,key:w,onViewingListItem:this.$PagesManagerMessagingSeparateSearchResultView1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'}));}).bind(this));break;}t=m.createElement('li',{className:"_16-z",key:'searchTitle'},t);var v=this.props.hasMoreResult?m.createElement('li',{className:"_2b19",key:'loadMoreResult'},m.createElement(h,{onClick:this.props.loadMore.bind(null,this.props.searchMode,this.props.searchTerm)},p._("See More Results"))):m.createElement('li',{className:"_3o39"});return [t].concat(u,[v]);};s.prototype.render=function(){'use strict';var t=this.$PagesManagerMessagingSeparateSearchResultView2();return (m.createElement(k,{actionBarRightComponent:this.props.actionBarRightContainer,deselectAllLabel:'',hideBatchAction:true,enableOnVisible:false,forceRequestMoreRows:false,height:this.props.height,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:o,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false},t));};function s(){'use strict';q.apply(this,arguments);}f.exports=s;},null);
__d('PagesManagerMessagingListContainer.react',['PagesManagerMessagingBatchActionHeaderContainer.react','FluxContainer','PagesManagerListBatchActionContainer.react','MercuryThreadlistConstants','MessageThreadViewSource','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayContainer.react','PagesManagerAwayToggle.react','PagesManagerListView.react','PagesManagerMessagingFilterStore','PagesManagerMessagingListRowContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingNUXActions','PagesManagerMessagingSearchListResult.react','PagesMessagingSearchMode','PagesManagerMessagingSearchStore','PagesManagerMessagingSeparateSearchResultView.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadlistAction','PagesManagerMessagingThreadlistStore','PagesManagerPerfLogger','PagesManagerStore','React','SubscriptionsHandler','MercuryThreadInformer'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){if(c.__markCompiled)c.__markCompiled();var ja,ka;ja=babelHelpers.inherits(la,ga.Component);ka=ja&&ja.prototype;function la(ma){'use strict';ka.constructor.call(this,ma);this.$PagesManagerMessagingListContainer1=false;this.$PagesManagerMessagingListContainer2=(function(){this.refs.listView.clearSelection();}).bind(this);this.$PagesManagerMessagingListContainer3=this.$PagesManagerMessagingListContainer3.bind(this);this.$PagesManagerMessagingListContainer4=this.$PagesManagerMessagingListContainer4.bind(this);}la.getStores=function(){'use strict';return [da,s,y];};la.calculateSearchState=function(ma,na){'use strict';var oa=y.getThreadNameSearchResults(),pa=y.getIsSearchingName(),qa=y.hasMoreNameSearchResult(),ra=y.hasMoreSnippetSearchResult(),sa=y.getThreadSnippetSearchResults(),ta=y.getIsSearchingSnippet();if(na.config.enableSeparateSearch){var ua=[],va={},wa=false,xa=false;switch(y.getSearchMode()){case x.MESSAGE_SEARCH:va=sa;wa=ra;xa=ta;break;case x.NAME_SEARCH:ua=oa;wa=qa;xa=pa;break;}return {hasMoreResult:wa,isInSearchMode:true,isSearching:xa,searchTerm:y.getCurrentSearchTerm(),searchMode:y.getSearchMode(),searchResult:ua,snippetSearchResult:va};}else if(na.config.enableFullSearch){return {hasMoreNameSearchResult:qa,hasMoreSnippetSearchResult:ra,isInSearchMode:true,isSearchingName:pa,isSearchingSnippet:ta,nameSearchResult:oa,threadSnippetResult:sa,searchTerm:y.getCurrentSearchTerm(),searchMode:y.getSearchMode()};}else return {hasMoreItem:false,initLoading:false,isInSearchMode:true,threadIDList:oa,emptyView:ga.createElement('div',{key:'emptyView'})};};la.calsulateListState=function(ma,na){'use strict';var oa=da.getItemList(na.pageID),pa=da.hasMoreItem(s.getNavigationKey()),qa=oa.findIndex(function(za){return (za===fa.getViewingListItem());})>=0,ra=fa.getInitialViewingItem(),sa=fa.getViewingListItem(),ta=oa.length>0,ua=ra&&ra===sa,va=!ua&&(!sa&&ta||sa&&ta&&!qa);if(va){var wa=oa[0];o.viewListItem(wa);ba.handlePermalinkUpdate(wa,na.pageID);}var xa=da.isLoading(),ya=false;if(oa.length===0)ya=xa;return {hasMoreItem:pa,initLoading:ya,isInSearchMode:false,threadIDList:oa,emptyView:ga.createElement('div',{key:'emptyView'})};};la.calculateState=function(ma,na){'use strict';var oa=null;if(y.getIsInSearchMode()&&y.getCurrentSearchTerm().length>0){oa=la.calculateSearchState(ma,na);}else oa=la.calsulateListState(ma,na);if(ma&&ma.initLoading&&!oa.initLoading)v.setThreadlistReady();return oa;};la.prototype.componentDidUpdate=function(){'use strict';if(this.$PagesManagerMessagingListContainer1&&!this.state.initLoading){this.$PagesManagerMessagingListContainer1=false;m.notify(n.MESSAGES_INBOX_LOAD_END,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});}};la.prototype.componentDidMount=function(){'use strict';ea.log(aa.MESSAGE_TAB_THREAD_LIST_DID_RENDER,this.props.perfParams);ca.initThreadlist(this.props.pageID);m.notify(n.MESSAGES_THREADLIST_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});u.logPageViewFolderEvent(this.props.pageID,s.getActiveFolder(),l.NEW_MESSAGETAB);this.$PagesManagerMessagingListContainer1=true;this.$PagesManagerMessagingListContainer5=ia.getForFBID(this.props.pageID);this.$PagesManagerMessagingListContainer6=new ha();this.$PagesManagerMessagingListContainer6.addSubscriptions(this.$PagesManagerMessagingListContainer5.subscribe('threadlist-updated',(function(ma,na){return this.$PagesManagerMessagingListContainer7();}).bind(this)),this.$PagesManagerMessagingListContainer5.subscribe('threads-updated',(function(ma,na){return this.$PagesManagerMessagingListContainer8(Object.keys(na));}).bind(this)));};la.prototype.componentWillUnmount=function(){'use strict';this.$PagesManagerMessagingListContainer6&&this.$PagesManagerMessagingListContainer6.release();};la.prototype.$PagesManagerMessagingListContainer9=function(ma){'use strict';return ma;};la.prototype.$PagesManagerMessagingListContainer3=function(){'use strict';ca.loadMoreNameResult(this.props.pageID,this.state.searchTerm,s.getActiveFolderName());};la.prototype.$PagesManagerMessagingListContainer4=function(){'use strict';ca.loadMoreSnippetResult(this.props.pageID,this.state.searchTerm,s.getActiveFolderName());};la.prototype.$PagesManagerMessagingListContainer10=function(ma,na){'use strict';switch(ma){case x.NAME_SEARCH:ca.loadMoreNameResult(this.props.pageID,na,s.getActiveFolderName());break;case x.MESSAGE_SEARCH:ca.loadMoreSnippetResult(this.props.pageID,na,s.getActiveFolderName());break;}};la.prototype.$PagesManagerMessagingListContainer11=function(){'use strict';var ma=s.getNavigationKey();if(da.hasMoreItem(ma)&&!da.isLoading()&&!this.state.isInSearchMode)ca.fetchThreadlist(this.props.pageID,this.state.threadIDList.length,k.WEBMESSENGER_MORE_COUNT);};la.prototype.$PagesManagerMessagingListContainer7=function(){'use strict';ca.updateThreadlist(this.props.pageID);};la.prototype.$PagesManagerMessagingListContainer8=function(ma){'use strict';ma.forEach((function(na){if(this.refs.searchResult&&!this.props.config.enableSeparateSearch){var oa=this.refs.searchResult.refs[this.refs.searchResult.getNameResultKey(na)];if(oa)oa.refs.childClass.updateThread();var pa=this.refs.searchResult.refs[this.refs.searchResult.getSnippetResultKey(na)];if(pa)pa.refs.childClass.updateThread();return;}else if(this.refs.searchResult&&this.props.config.enableSeparateSearch){var qa=this.refs.searchResult.refs[na];if(qa)qa.refs.childClass.updateThread();}else if(this.refs.listView){var ra=this.refs.listView.refs[na];if(ra)ra.refs.childClass.updateThread();}}).bind(this));};la.prototype.$PagesManagerMessagingListContainer12=function(){'use strict';var ma=null;if(this.props.config.enableAwayToggle)ma=ga.createElement(p,{pageID:this.props.pageID,RenderClass:q});return (ga.createElement('div',null,ga.createElement(j,{ChildClass:h,pageID:this.props.pageID,onSelectionClear:this.$PagesManagerMessagingListContainer2}),ma));};la.prototype.render=function(){'use strict';if(this.state.isInSearchMode&&this.props.config.enableSeparateSearch)return (ga.createElement(z,babelHelpers._extends({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer12(),hasMoreResult:this.state.hasMoreResult,isSearching:this.state.isSearching,listRowContainer:t,loadMore:this.$PagesManagerMessagingListContainer10.bind(this),onSelectionChange:this.props.onSelectionChange,ref:'searchResult',searchTerm:this.state.searchTerm,searchMode:this.state.searchMode,searchResult:this.state.searchResult,snippetSearchResult:this.state.snippetSearchResult})));if(this.state.isInSearchMode&&this.props.config.enableFullSearch)return (ga.createElement(w,babelHelpers._extends({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer12(),getKey:this.$PagesManagerMessagingListContainer9,hasMoreNameSearchResult:this.state.hasMoreNameSearchResult,hasMoreSnippetSearchResult:this.state.hasMoreSnippetSearchResult,isSearchingName:this.state.isSearchingName,isSearchingSnippet:this.state.isSearchingSnippet,listRowContainer:t,loadMoreNameResult:this.$PagesManagerMessagingListContainer3,loadMoreSnippetResult:this.$PagesManagerMessagingListContainer4,nameSearchResult:this.state.nameSearchResult,onSelectionChange:this.props.onSelectionChange,ref:'searchResult',searchTerm:this.state.searchTerm,snippetSearchResult:this.state.threadSnippetResult})));return (ga.createElement(r,babelHelpers._extends({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer12(),emptyView:this.state.emptyView,getKey:this.$PagesManagerMessagingListContainer9,hasMoreItem:this.state.hasMoreItem,initLoading:this.state.initLoading,isInSearchMode:this.state.isInSearchMode,list:this.state.threadIDList,listRowContainer:t,navigationKey:s.getNavigationKey(),onScroll:this.$PagesManagerMessagingListContainer11.bind(this),onSelectionChange:this.props.onSelectionChange,ref:'listView'})));};f.exports=i.create(la,{withProps:true});},null);
__d('PagesManagerMessagingNUXStore',['PagesManagerMessagingNUXActionTypes','FluxStore','PagesManagerMessagingNUXDispatcher'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';var m=1;k=babelHelpers.inherits(n,i);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$PagesManagerMessagingNUXStore1={composer:false,contextcard:false,threadlist:false};this.$PagesManagerMessagingNUXStore2=false;this.$PagesManagerMessagingNUXStore3=false;this.$PagesManagerMessagingNUXStore4=false;this.$PagesManagerMessagingNUXStore5=m;}n.prototype.getAreDependenciesReady=function(){return (this.$PagesManagerMessagingNUXStore1.composer&&(!this.$PagesManagerMessagingNUXStore4||this.$PagesManagerMessagingNUXStore4&&this.$PagesManagerMessagingNUXStore1.contextcard)&&this.$PagesManagerMessagingNUXStore1.threadlist);};n.prototype.getIsVisible=function(){return this.$PagesManagerMessagingNUXStore2;};n.prototype.getTourStep=function(){return this.$PagesManagerMessagingNUXStore5;};n.prototype.getShouldShowBanner=function(){return this.$PagesManagerMessagingNUXStore3;};n.prototype.__onDispatch=function(o){switch(o.actionType){case h.RESET_STEP:this.$PagesManagerMessagingNUXStore6();this.__emitChange();break;case h.SET_STEP:this.$PagesManagerMessagingNUXStore7(o.step);break;case h.SET_IS_VISIBLE:this.$PagesManagerMessagingNUXStore8(o.isVisible);this.__emitChange();break;case h.SET_SHOULD_SHOW_BANNER:this.$PagesManagerMessagingNUXStore9(o.shouldShow);this.__emitChange();break;case h.SET_SHOULD_SHOW_CONTEXT_CARD_STEP:this.$PagesManagerMessagingNUXStore10(o.shouldShow);this.__emitChange();break;case h.SET_DEPENDENCY_READY.COMPOSER:if(!this.$PagesManagerMessagingNUXStore1.composer){this.$PagesManagerMessagingNUXStore11();this.__emitChange();}break;case h.SET_DEPENDENCY_READY.CONTEXT_CARD:if(!this.$PagesManagerMessagingNUXStore1.contextcard){this.$PagesManagerMessagingNUXStore12();this.__emitChange();}break;case h.SET_DEPENDENCY_READY.THREADLIST:if(!this.$PagesManagerMessagingNUXStore1.threadlist){this.$PagesManagerMessagingNUXStore13();this.__emitChange();}break;}};n.prototype.$PagesManagerMessagingNUXStore6=function(){this.$PagesManagerMessagingNUXStore5=m;};n.prototype.$PagesManagerMessagingNUXStore11=function(){this.$PagesManagerMessagingNUXStore1.composer=true;};n.prototype.$PagesManagerMessagingNUXStore12=function(){this.$PagesManagerMessagingNUXStore1.contextcard=true;};n.prototype.$PagesManagerMessagingNUXStore13=function(){this.$PagesManagerMessagingNUXStore1.threadlist=true;};n.prototype.$PagesManagerMessagingNUXStore7=function(o){this.$PagesManagerMessagingNUXStore5=o;};n.prototype.$PagesManagerMessagingNUXStore8=function(o){this.$PagesManagerMessagingNUXStore2=o;};n.prototype.$PagesManagerMessagingNUXStore9=function(o){this.$PagesManagerMessagingNUXStore3=o;};n.prototype.$PagesManagerMessagingNUXStore10=function(o){this.$PagesManagerMessagingNUXStore4=o;};f.exports=new n(j);},null);
__d("XPagesManagerMessagingTutorialController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/manager\/messaging\/tutorial\/",{});},null);
__d('PagesManagerMessagingNuxBanner.react',['ActorURI','AsyncRequest','LeftRight.react','PagesManagerMessagingNUXActions','React','XPagesManagerMessagingTutorialController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,l.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);this.$PagesManagerMessagingNuxBanner1=(function(){k.setShouldShowBanner(false);this.$PagesManagerMessagingNuxBanner2('REMIND_LATER');}).bind(this);this.$PagesManagerMessagingNuxBanner3=(function(){k.setIsVisible(true);this.$PagesManagerMessagingNuxBanner2('SHOW_TUTORIAL');}).bind(this);}r.prototype.render=function(){return (l.createElement(j,{className:"_3az9"},l.createElement('div',{className:"_3aze"},o._("{=meet your new inbox} We've made it easier to connect with the people who like your Page.",[o.param('=meet your new inbox',l.createElement('span',{className:"_3azg"},o._("Meet your new inbox.")))])),l.createElement('div',{className:"_3azh"},l.createElement('div',{className:"_3aze _3azi",onClick:this.$PagesManagerMessagingNuxBanner1},o._("Remind Me Later")),l.createElement('div',{className:"_3aze _3azg _3azi",onClick:this.$PagesManagerMessagingNuxBanner3},o._("Start Tour")))));};r.prototype.$PagesManagerMessagingNuxBanner2=function(s){var t=h.create(m.getURIBuilder().getURI(),this.props.pageID);new i().setURI(t).setMethod('POST').setData({action:s}).send();};f.exports=r;},null);
__d('PagesManagerMessagingNUXInboxTourContainer.react',['FluxContainer','PagesManagerMessagingNUXActions','PagesManagerMessagingNuxBanner.react','PagesManagerMessagingNUXInboxTour.react','PagesManagerMessagingNUXStore','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';n=babelHelpers.inherits(p,m.Component);o=n&&n.prototype;function p(q){o.constructor.call(this,q);this.$PagesManagerMessagingNUXInboxTourContainer1=this.$PagesManagerMessagingNUXInboxTourContainer1.bind(this);this.$PagesManagerMessagingNUXInboxTourContainer2=this.$PagesManagerMessagingNUXInboxTourContainer2.bind(this);}p.getStores=function(){return [l];};p.calculateState=function(q,r){var s=l.getIsVisible();if(s&&q&&q.isTourVisible===false)i.showContextCard();return {areDependenciesReady:l.getAreDependenciesReady(),currentStep:l.getTourStep(),isTourVisible:s,shouldShowBanner:l.getShouldShowBanner()};};p.prototype.componentWillMount=function(){i.setShouldShowContextCardStep(this.props.shouldShowContextCardStep);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer3=function(){i.setIsVisible(false);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer2=function(){i.setIsVisible(false);i.setShouldShowBanner(false);};p.prototype.$PagesManagerMessagingNUXInboxTourContainer1=function(){i.setIsVisible(!this.state.isTourVisible);i.resetStep();};p.prototype.$PagesManagerMessagingNUXInboxTourContainer4=function(q){i.setStep(q);};p.prototype.render=function(){return (m.createElement('div',null,this.state.shouldShowBanner&&this.state.areDependenciesReady?m.createElement(j,null):null,this.state.isTourVisible?m.createElement(k,{onHide:this.$PagesManagerMessagingNUXInboxTourContainer2,rootElement:this.props.rootElement,shouldShowContextCardStep:this.props.shouldShowContextCardStep,step:this.state.currentStep}):null));};p.propTypes={};f.exports=h.create(p,{withProps:true});},null);
__d("XPagesCustomTagsDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/custom_tags\/data\/",{});},null);
__d('PagesManagerMessagingCustomTagsStore',['ActorURI','AsyncRequest','PagesManagerMessagingActionType','PagesManagerMessagingThreadlistDispatcher','FluxStore','immutable','Map','XPagesCustomTagsDataController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,l);q=p&&p.prototype;function r(s){q.constructor.call(this,s);this.$PagesManagerMessagingCustomTagsStore1=new n();}r.prototype.hasCustomTags=function(s){return this.$PagesManagerMessagingCustomTagsStore1.has(s);};r.prototype.getCustomTags=function(s){return m.List(this.$PagesManagerMessagingCustomTagsStore1.get(s)||[]);};r.prototype.__onDispatch=function(s){switch(s.type){case j.CUSTOM_TAGS.FETCH:new i().setURI(h.create(o.getURIBuilder().getURI(),s.pageID)).setHandler((function(t){this.__dispatcher.dispatch({type:j.CUSTOM_TAGS.UPDATE,pageID:s.pageID,customTags:t.payload});}).bind(this)).send();break;case j.CUSTOM_TAGS.UPDATE:this.$PagesManagerMessagingCustomTagsStore1.set(s.pageID,s.customTags);this.__emitChange();break;default:break;}};f.exports=new r(k);},null);
__d('PagesManagerMessagingSearchView.react',['AbstractTextInput.react','AbstractTokenizer.react','LayerHideOnBlur','ContextualLayer.react','PagesManagerMessagingFilterStore','Image.react','immutable','PageCustomTagSearchableEntry','PageCustomTagSearchSource','PageCustomTagTypeaheadPresenter.react','React','SearchableTextInput.react','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','XUICloseButton.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa;'use strict';z=babelHelpers.inherits(ba,r.Component);aa=z&&z.prototype;function ba(ca,da){aa.constructor.call(this,ca,da);this.$PagesManagerMessagingSearchView1=(function(ea){u.changeSearchTerm(this.props.pageID,ea.target.value,l.getActiveFolderName(),t.ALL);}).bind(this);this.$PagesManagerMessagingSearchView2=(function(){u.resetSearch(this.props.pageID);}).bind(this);this.$PagesManagerMessagingSearchView3=(function(ea){if(ea.key==='Escape')u.resetSearch(this.props.pageID);}).bind(this);this.$PagesManagerMessagingSearchView4=(function(ea){u.addSearchCustomTag(this.props.pageID,ea);}).bind(this);this.$PagesManagerMessagingSearchView5=(function(ea){u.removeSearchCustomTag(this.props.pageID,ea);}).bind(this);this.$PagesManagerMessagingSearchView6=this.$PagesManagerMessagingSearchView6.bind(this);this.$PagesManagerMessagingSearchView7=(function(ea){u.changeSearchTerm(this.props.pageID,this.state.query,l.getActiveFolderName(),t.NAME_SEARCH);this.setState({showLayer:false});}).bind(this);this.$PagesManagerMessagingSearchView8=(function(ea){u.changeSearchTerm(this.props.pageID,this.state.query,l.getActiveFolderName(),t.MESSAGE_SEARCH);this.setState({showLayer:false});}).bind(this);this.$PagesManagerMessagingSearchView9=(function(ea){if(this.state.query!=='')this.setState({showLayer:true});}).bind(this);this.state={query:'',showLayer:false};}ba.prototype.$PagesManagerMessagingSearchView10=function(){};ba.prototype.$PagesManagerMessagingSearchView6=function(ca){var da=ca.target.value,ea=true;if(da==='')ea=false;this.setState({query:da,showLayer:ea});};ba.prototype.$PagesManagerMessagingSearchView11=function(){return (r.createElement('div',{className:"_4j2v"},r.createElement('li',{className:"_4j2w",onClick:this.$PagesManagerMessagingSearchView8},x._("Messages that contain \"{message search term}\"",[x.param('message search term',this.state.query)])),r.createElement('li',{className:"_4j2x",onClick:this.$PagesManagerMessagingSearchView7},x._("Names that contain \"{message search term}\"",[x.param('message search term',this.state.query)]))));};ba.prototype.$PagesManagerMessagingSearchView12=function(){var ca=x._("Search Messages...");if(this.props.enableSeparateSearch)ca=x._("Search people, messages and keyworks");if(!this.props.enableTagSearch||this.props.customTagSearchSource.count()===0){return (r.createElement('span',null,r.createElement(h,{className:"_5ptj",onChange:this.$PagesManagerMessagingSearchView1,onKeyDown:this.$PagesManagerMessagingSearchView3,placeholder:ca,value:this.props.initSearchTerm}),r.createElement(v,{className:"_3i2o",onClick:this.$PagesManagerMessagingSearchView2,size:'medium'})));}else if(this.props.enableSeparateSearch){return (r.createElement('span',null,r.createElement(s,{className:"_5ptj",onChange:this.$PagesManagerMessagingSearchView6,onClick:this.$PagesManagerMessagingSearchView9,onEntriesFound:this.$PagesManagerMessagingSearchView10,placeholder:ca,queryString:this.state.query}),r.createElement(k,{behaviors:{LayerHideOnBlur:j},containerWidthMatchContext:true,contextRef:(function(){return this.refs.input;}).bind(this),shown:this.state.showLayer,position:'below'},this.$PagesManagerMessagingSearchView11())));}else return (r.createElement(i,{className:"_5ptj",autoHighlight:false,entries:this.props.currentSearchCustomTagEntries.toArray(),onAddEntryAttempt:this.$PagesManagerMessagingSearchView4,onChange:this.$PagesManagerMessagingSearchView1,onRemoveEntryAttempt:this.$PagesManagerMessagingSearchView5,placeholder:ca,presenter:q,value:this.props.initSearchTerm,searchSource:p.getInstance(this.props.customTagSearchSource.toArray(),false),showEntriesOnFocus:true}));};ba.prototype.render=function(){return (r.createElement('div',{className:"_3i2n",ref:'input'},r.createElement(m,{className:"_5pti",src:y('/images/browse/search/search-gray.png')}),this.$PagesManagerMessagingSearchView12()));};f.exports=ba;},null);
__d('PagesManagerMessagingSearchContainer.react',['FluxContainer','immutable','PageCustomTagSearchableEntry','PagesManagerMessagingCustomTagsStore','PagesManagerMessagingSearchStore','PagesManagerMessagingSearchView.react','PagesManagerMessagingThreadlistAction','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,o.Component);q=p&&p.prototype;function r(s,t){q.constructor.call(this,s,t);}r.getStores=function(){return [k,l];};r.prototype.componentWillMount=function(){if(this.props.enableTagSearch&&!k.hasCustomTags(this.props.pageID))n.fetchCustomTags(this.props.pageID);};r.calculateState=function(s,t){return {currentSearchCustomTagEntries:l.getCurrentSearchCustomTagEntries(),currentSearchTerm:l.getCurrentSearchTerm(),isSearchActive:l.getIsInSearchMode(),customTagSearchSource:k.getCustomTags(t.pageID)};};r.prototype.render=function(){return (o.createElement(m,{enableSeparateSearch:this.props.enableSeparateSearch,enableTagSearch:this.props.enableTagSearch,initSearchTerm:this.state.currentSearchTerm,isSearchActive:this.state.isSearchActive,pageID:this.props.pageID,customTagSearchSource:this.state.customTagSearchSource,currentSearchCustomTagEntries:this.state.currentSearchCustomTagEntries}));};f.exports=h.create(r,{withProps:true});},null);
__d('PagesManagerMessagingApp.react',['PagesManagerAction','LeftRight.react','MercuryPagesChannelHandler','MercuryServerPayloadPreprocessor','PagesEventObserver','PagesEventType','PagesManagerAwayBanner.react','PagesManagerAwayContainer.react','PagesManagerDetailContainer.react','PagesManagerListContainer.react','PagesManagerListDetailLayout.react','PagesManagerMessagingDetailContainer.react','PagesManagerMessagingFilterContainer.react','PagesManagerMessagingListContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingNUXActions','PagesManagerMessagingNUXInboxTourContainer.react','PagesManagerMessagingSearchContainer.react','PagesManagerMessagingTabPerfEvents','PagesManagerPerfLogger','PagesManagerStaticStore','PagesMessengerMessagePageButton.react','React','ReactDOM','ResponsiveBlock.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha,ia;ha=babelHelpers.inherits(ja,da.Component);ia=ha&&ha.prototype;function ja(ka,la){'use strict';ia.constructor.call(this,ka,la);ba.setPageID(this.props.pageID);this.state={rootElement:null};this.$PagesManagerMessagingApp1=(function(){this.refs.body&&this.refs.body.recalculateHeight();}).bind(this);}ja.prototype.componentWillMount=function(){'use strict';j.getForFBID(this.props.pageID).turnOn();v.logMessagesSectionViewEvent(this.props.pageID);l.notify(m.MESSAGES_THREADLIST_LAYOUT_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});if(this.props.initialThreadID)h.setInitialViewItem(this.props.initialThreadID);};ja.prototype.componentDidMount=function(){'use strict';aa.log(z.MESSAGE_TAB_APP_DID_RENDER,this.props.perfParams);var ka=k.getForFBID(this.props.pageID);ka.handleUpdate(this.props.config.jewelInitData);w.setShouldShowBanner(this.props.config.enableTutorialBanner);this.setState({rootElement:ea.findDOMNode(this)});};ja.prototype.componentWillUnmount=function(){'use strict';j.getForFBID(this.props.pageID).turnOff();};ja.prototype.$PagesManagerMessagingApp2=function(ka){'use strict';if(ka)return ka;return null;};ja.prototype.$PagesManagerMessagingApp3=function(){'use strict';if(this.props.config.enabledPageToPageMessaging)return (da.createElement(ca,{flowID:this.props.flowID,pageID:this.props.pageID,pagesCommNewMessagesTab:true,size:'large'}));return null;};ja.prototype.$PagesManagerMessagingApp4=function(){'use strict';return (da.createElement('div',{className:"_n4_"},da.createElement(i,{className:"_n50"},da.createElement(t,{config:this.props.config,pageID:this.props.pageID}),da.createElement(i,null,this.$PagesManagerMessagingApp3(),da.createElement(y,{pageID:this.props.pageID,enableSeparateSearch:this.props.config.enableSeparateSearch,enableTagSearch:this.props.config.enableTagSearch}))),this.$PagesManagerMessagingApp5()));};ja.prototype.$PagesManagerMessagingApp6=function(){'use strict';return (da.createElement('div',{className:"_14vf"},da.createElement(q,{config:this.props.config,ChildContainerClass:u,flowID:this.props.flowID,pageID:this.props.pageID,perfParams:this.props.perfParams})));};ja.prototype.$PagesManagerMessagingApp7=function(){'use strict';return (da.createElement('div',null,da.createElement(p,{config:this.props.config,pageID:this.props.pageID,ChildContainerClass:s,getListItemKey:this.$PagesManagerMessagingApp2,perfParams:this.props.perfParams})));};ja.prototype.$PagesManagerMessagingApp5=function(){'use strict';if(!this.props.config.enableAwayToggle)return null;return (da.createElement('div',null,da.createElement(o,{pageID:this.props.pageID,RenderClass:n})));};ja.prototype.$PagesManagerMessagingApp8=function(){'use strict';return (da.createElement(fa,{onResize:this.$PagesManagerMessagingApp1},da.createElement(x,{rootElement:this.state.rootElement,shouldShowContextCardStep:this.props.config.enableContextCard})));};ja.prototype.render=function(){'use strict';return (da.createElement('div',null,this.$PagesManagerMessagingApp8(),da.createElement('div',{className:"_15i2"},da.createElement(r,{ref:'body',detailSection:this.$PagesManagerMessagingApp7(),listClassName:"_1-9p",listSection:this.$PagesManagerMessagingApp6(),navigationSection:this.$PagesManagerMessagingApp4()}))));};f.exports=ja;},null);