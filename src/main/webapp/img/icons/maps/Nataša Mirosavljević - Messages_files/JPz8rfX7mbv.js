/*!CK:1224039623!*//*1451977669,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["+Ien4"]); }

__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l=1,m=2,n=0,o=l,p=l|m,q=h.PayloadSourceType.INITIAL_LOAD,r={UNSEEN_AND_UNREAD:n,SEEN_BUT_UNREAD:o,SEEN_AND_READ:p};function s(v){var w=[],x=[];Object.keys(v).forEach(function(y){var z=v[y],aa=k[y];k[y]=z;if(aa===undefined){w.push(y);x.push(y);return;}var ba=aa^z;if(ba&l)w.push(y);if(ba&m)x.push(y);});w.length&&i.didUpdateSeenState(w);x.length&&i.didUpdateReadState(x);}i.subscribe('update-notifications',function(v,w){var x=w.nodes;if(!x||!x.length)return;var y=w.payloadsource,z=h.PayloadSourceType,aa=y==z.ENDPOINT,ba={};w.nodes.forEach(function(ca){var da=ca.alert_id;if(!aa||k[da]===undefined)ba[da]=r[ca.seen_state];});s(ba);});i.subscribe('update-seen',function(v,w){if(!w.seenState)return;var x=[],y={};Object.keys(w.seenState).forEach(function(aa){if(!w.seenState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined)y[aa]=ba|l;});var z=babelHelpers._extends({},j(x,n),y);s(z);});i.subscribe('update-read',function(v,w){if(!w.readState)return;var x=[],y={};Object.keys(w.readState).forEach(function(aa){if(w.readState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined){y[aa]=ba&~m;}else if(w.payloadsource==q)y[aa]=o;});var z=babelHelpers._extends({},j(x,p),y);s(z);});function t(v){var w=k[v];return w;}var u={isRead:function(v){return t(v)===p;},isSeen:function(v){return t(v)!==n;},getUnseenCount:function(){return u.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(k).filter(function(v){return k[v]===n;});},getUnreadCount:function(){return u.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(k).filter(function(v){return k[v]!==p;});}};f.exports=u;},null);
__d('NotificaionJewelControllerModuleLoader',['JSResource','NotificationSeenState','NotificationStore','NotificationUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('NotificationSeenState');c('NotificationStore');c('NotificationUpdates');f.exports=h('NotificationJewelController');},null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o){'use strict';i.listen(n,'click',function(){var p=j.getUnreadIDs();if(p.length)k.markNotificationsAsRead(p);});l.subscribe('read-state-updated',function(){if(o)h.setContent(o,j.getUnreadCount());});}f.exports=m;},null);
__d('NotificationJewelListController',['Bootloader','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=null,l=null;function m(n,o){'use strict';this.$NotificationJewelListController1=n;this.$NotificationJewelListController2=o;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4=false;}m.prototype.open=function(){'use strict';this.$NotificationJewelListController3=true;this.$NotificationJewelListController5();};m.prototype.pause=function(){'use strict';this.$NotificationJewelListController4=true;this.$NotificationJewelListController5();};m.prototype.unpause=function(){'use strict';this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();};m.prototype.$NotificationJewelListController5=function(){'use strict';if(!k||!l){h.loadModules(["NotificationList.react","NotificationJewelList.react"],(function(n,o){k=n;l=o;this.$NotificationJewelListController6();}).bind(this));}else this.$NotificationJewelListController6();};m.prototype.$NotificationJewelListController6=function(){'use strict';j.render(i.createElement(k,{hasEverBeenOpened:this.$NotificationJewelListController3,paused:this.$NotificationJewelListController4,tracking:this.$NotificationJewelListController2.tracking,negativeTracking:this.$NotificationJewelListController2.negativeTracking,shortenTimestamp:this.$NotificationJewelListController2.shortenTimestamp,businessID:this.$NotificationJewelListController2.businessID,maxHeight:this.$NotificationJewelListController2.maxHeight,useChevron:this.$NotificationJewelListController2.useChevron,chevronType:this.$NotificationJewelListController2.chevronType,numPerPage:5,listRenderer:l,upsell:this.$NotificationJewelListController2.upsell||null,endpoint:this.$NotificationJewelListController2.endpoint}),this.$NotificationJewelListController1);};f.exports=m;},null);
__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=100,k=30,l=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function m(ea){var fa=z(ea),ga=0,ha=0;return o(ea).map(function(ia){while(ga<fa.length){var ja=fa[ga],ka=ja.offset-ha;if(ka<ia.offset){ha+=ja.token.length-ja.name.length;ga++;}else break;}return {marker:ia.marker,tag:ia.hashtag,rawOffset:ia.offset+ha,offset:ia.offset};});}function n(ea){return p(ea,u(ea));}function o(ea){var fa=ba(ea);return p(fa,q(ea,fa));}function p(ea,fa){return s(ea).slice(0,k).filter(function(ga){var ha=w(ga.offset,ga.hashtag.length,fa);return !ha&&ga.hashtag.length<=j;});}function q(ea,fa){return v(t(ea),u(fa));}var r=i();function s(ea){var fa=[];ea.replace(r,function(ga,ha,ia,ja,ka){fa.push({marker:ia,hashtag:ja,offset:ka+ha.length});});return fa;}function t(ea){return ca(ea).map(function(fa){return [fa.offset,fa.name.length];});}function u(ea){var fa=[],ga,ha=0;while(ga=h.permissiveMatch(ea)){var ia=ea.indexOf(ga);fa.push([ha+ia,ga.length]);ea=ea.substring(ia+ga.length);ha+=ia+ga.length;}return fa;}function v(ea,fa){var ga=[],ha=0,ia=0,ja=0;while(ha<ea.length&&ia<fa.length)if(ea[ha][0]>fa[ia][0]){ga[ja++]=fa[ia++];}else ga[ja++]=ea[ha++];return ga.concat(ea.slice(ha),fa.slice(ia));}function w(ea,fa,ga){if(!ga)return false;var ha=y(ga,ea);return x(ea,fa,ga,ha)||x(ea,fa,ga,ha+1);}function x(ea,fa,ga,ha){if(!ga[ha])return false;var ia=ga[ha][0],ja=ga[ha][1];return !(ea+fa-1<ia||ea>ia+ja-1);}function y(ea,fa){var ga=0,ha=ea.length-1;while(ga<=ha){var ia=Math.floor((ga+ha)/2),ja=ea[ia][0];if(ja==fa){return ia;}else if(ja<fa){ga=ia+1;}else ha=ia-1;}return ha;}function z(ea){var fa=[];ea.replace(l,function(ga,ha,ia,ja,ka){fa.push({token:ga,id:ha,type:ia,name:ja,offset:ka});});return fa;}function aa(ea){return ea?ea.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function ba(ea){return ea.replace(l,function(fa,ga,ha,ia,ja){return aa(ia);});}function ca(ea){var fa=0,ga=0;return z(ea).map(function(ha){var ia=ea.indexOf(ha.token,ga);ga=ia+1;ia-=fa;var ja=aa(ha.name);fa+=ha.token.length-ja.length;if(ia>=0)return {id:ha.id,name:ja,type:ha.type,offset:ia};});}var da={};da.parse=m;da.parseWithoutMentions=n;f.exports=da;},null);
__d('FacebarResultStoreUtils',['FacebarGlobalOptions','FacebarJSConstants'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getQueryFeatures:function(k){var l={};if(h.enableBootstrapRanking){if(k.raw_text)l.FEATURE_QUERY_LENGTH=k.raw_text.length;if(k.tokens){l.FEATURE_QUERY_TOKENS=k.tokens.length;l.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var m=0;m<k.tokens.length;m++)l.FEATURE_QUERY_TOKEN_LENGTH_SUM+=k.tokens[m].length;}}return l;},addFeatures:function(k,l,m,n,o,p){if(!k.features)return;k.features={FEATURE_QUERY_LENGTH:n.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:n.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:n.FEATURE_QUERY_TOKEN_LENGTH_SUM};k.features.FEATURE_IS_EXACT_NAME_MATCH=o;k.features.FEATURE_IS_STOP_WORD_MATCH=p;if(l&&l.length>0){var q=l.split(' ').length,r=0;for(var s=0;s<k.termMatches.length;++s)if(l.search(k.termMatches[s])>=0)r++;k.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=r/q;}if(m.tokens&&m.tokens.length>0){var t=l.search(m.tokens[0]);k.features.FEATURE_FIRST_TERM_MATCH_POSITION=t;k.features.FEATURE_FIRST_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[0].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[0])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});k.features.FEATURE_IN_ORDER_MATCH=1;if(m.tokens.length>1){t=l.search(m.tokens[1]);k.features.FEATURE_SECOND_TERM_MATCH_POSITION=t;k.features.FEATURE_SECOND_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[1].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[1])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});if(k.features.FEATURE_SECOND_TERM_MATCH_TOKEN<k.features.FEATURE_FIRST_TERM_MATCH_POSITION)k.features.FEATURE_IN_ORDER_MATCH=0;}}return k;},processEntityResult:function(k,l,m,n,o,p,q,r,s){var t={semantic:l.toString(),structure:[{type:k===i.keywordType?k:'ent:'+k,text:m,uid:l}],type:k,cost:n,cache_id_length:0,features:[]};t.tuid=JSON.stringify({semantic:t.semantic,structure:t.structure});if(h.enableBootstrapRanking){t.termMatches=q[l.toString()];t=this.addFeatures(t,m.toLowerCase(),o,p,r,s);}return t;},getRawTextFromStructured:function(k){var l=k.map(function(m){return m.getText();});return l.join('');},getTextFromResult:function(k){var l=k.structure,m='';l.forEach(function(n){m+=n.text;});return m;}};f.exports=j;},null);
__d('HashtagSearchResultUtils',['FacebarResultStoreUtils','HashtagParser','HashtagSearchResultConfig','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={getHashtagFromQuery:function(n){var o=i.parse(n);if(o&&o.length===1&&o[0].offset===0)return o[0].tag;return false;},makeTypeaheadResult:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,rankType:null,replace_results:j.boost_result?true:false,scaled_score:1,score:0,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarEntry:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,replace_results:j.boost_result?true:false,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarResult:function(n){var o=h.processEntityResult('hashtag_exact','hashtag:'+n,'#'+n,j.hashtag_cost);o.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+n}],remTokens:[],suffix:''};o.tags={hashtag:'hashtag'};return o;}};f.exports=m;},null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=400;function o(p,q,r,s,t,u){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;if(p===undefined)return;this.init(p,q,r,s,t,u);}Object.assign(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=h.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=h.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)l.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';m.reset(this.search_box);l.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}k.addClass(this.clear_button,'hidden_elem');},update:function(){var p=m.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new i('/help/ajax/search/').setData(q).setHandler((function(r){this._update(r);}).bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;j.setContent(this.results_area,q);this.show(this.results_area);if(m.getValue(this.search_box)===''){this.clearResults();}else k.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)k.addClass(q[r],'hidden_elem');k.removeClass(p,'hidden_elem');}});f.exports=o;},null);
__d('RequestsJewelLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('RequestsJewel');},null);
__d('JewelPlaceholder',['CSS','Toggler'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(l,m,n){'use strict';this.jewelNode=l;this.jewelParent=n;this.$JewelPlaceholder1=m;this.$JewelPlaceholder2=false;this.$JewelPlaceholder3=i.getInstance(l).setSticky(false);i.listen('show',l,(function(){this.$JewelPlaceholder2=true;h.addClass(this.jewelParent,'openToggler');}).bind(this));i.listen('hide',l,(function(){this.$JewelPlaceholder2=false;h.removeClass(this.jewelParent,'openToggler');}).bind(this));}k.prototype.isOpened=function(){'use strict';return this.$JewelPlaceholder2;};k.registerJewel=function(l,m,n){'use strict';var o=new this(l,m,n);j[m]=o;return o;};k.switchOutJewel=function(l,m){'use strict';if(j[l]){var n=j[l].isOpened();delete j[l];return n;}return false;};f.exports=k;},null);
__d('JewelBase',['Promise','Event','Arbiter','ArbiterMixin','CSS','DOM','HTML','JewelPlaceholder','Keys','TabIsolation','Toggler','TooltipData','Run','csx','emptyFunction','reportData'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=function(y,z){y&&z&&this.init(y,z);};Object.assign(x,{_instancesByName:{}});Object.assign(x.prototype,k,{init:function(y,z){this.name=z.name;this.label=z.label;this.root=y;this.badge=z.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=z.bootload_module;this.bootload_args=z.bootload_args;this.bootloading=null;this.togglerInstance=r.getInstance(y).setSticky(false);t.onAfterLoad((function(){return this._setupBootload();}).bind(this));if(z.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));x._instancesByName[this.name]=this;var aa=this.getFlyout(),ba=new q(aa);r.createInstance(aa).setSticky(false);this._addTooltip();r.listen('show',this.root,(function(ca){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();j.inform('layer_shown',{type:'Jewel'});ba.enable();this.setupEvents();this._removeTooltip();return this._setupBootload().then((function(){this.inform('opened');}).bind(this));}).bind(this));r.listen('hide',this.root,(function(ca,da){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');j.inform('layer_hidden',{type:'Jewel'});ba.disable();this.removeEvents();this._addTooltip();}).bind(this));j.subscribe('jewel/count-updated',(function(ca,da){da.jewel==this.name&&this.update(da);}).bind(this));j.subscribe('jewel/focus',(function(ca,da){if(this.isOpen())r.hide(this.root);}).bind(this));if(o.switchOutJewel(this.name))r.show(this.root);},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=m.find(this.root,".__tw");return this._flyout;},hasNew:function(){return l.hasClass(this.root,'hasNew');},isOpen:function(){return l.hasClass(this.root,'openToggler');},reset:function(){l.removeClass(this.root,'hasNew');},setContent:function(y){var z=m.find(this.root,'ul.jewelItemList');m.setContent(z,n(y));},update:function(y){this.countNew=y.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var z=isNaN(this.countNew)||this.countNew>0;l.conditionClass(this.root,'hasNew',z);this.inform('updated',y);},setupEvents:function(){this.escHandler=i.listen(document.documentElement,'keydown',(function(y){if(y.keyCode===p.ESC&&this.isOpen())r.hide(this.root);}).bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){j.inform('jewel/count-updated',{jewel:this.name,count:0},j.BEHAVIOR_STATE);this.inform('marked-seen');},_getButton:function(){if(typeof this._button==='undefined')this._button=m.find(this.root,"a.jewelButton");return this._button;},_addTooltip:function(){var y=this._getButton();s.set(y,this.label);y.setAttribute('data-tooltip-delay','500');},_removeTooltip:function(){s.remove(this._getButton());},_onPrePageTransition:function(y,z){if(!this._isSnowliftURI(z.from)&&!this._isSnowliftURI(z.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(y){return y&&y.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=v;w('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(!this.bootload_module)return h.resolve();if(!this.bootloading)this.bootloading=new h((function(y,z){this.bootload_module.load().then((function(aa){new aa(this,this.bootload_args);y();}).bind(this))['catch'](z);}).bind(this));return this.bootloading;}});f.exports=x;},null);
__d('ModalMask',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null,j=0,k={show:function(){j++;if(!i){i=h.create('div',{id:'modalMaskOverlay'});h.appendContent(document.body,i);}},hide:function(){if(j){j--;if(!j&&i){h.remove(i);i=null;}}},getNode:function(){return i;}};f.exports=k;},null);
__d('LitestandChromeHomeCount',['Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','NavigationMessage','Style','UserAgent','WildWildWestJSGating','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s={},t,u,v=0;function w(){u&&clearTimeout(u);if(t)return;var aa=q.badge_update_time;u=setTimeout(x,aa);}function x(){if(t)return;new i().setURI('/ajax/litestand/newsfeed_count').setHandler(function(aa){if(t)return;z.setCount(aa.getPayload());w();}).setAllowCrossPageTransition(true).send();}function y(aa){o.set(s.wrapNode,'max-width',aa===0?'0':null);j.conditionClass(s.wrapNode,"_461d",aa>0);var ba=aa>s.max?s.max+'+':aa;k.setContent(s.countNode,ba);}var z={init:function(aa){s=aa;l.listen(s.homeNode,'click',function(event){var ba=event.getModifiers(),ca=ba.shift,da=ba.meta,ea=ba.control;if(ca||p.isPlatform('Mac OS X')&&da||p.isPlatform('Windows')&&ea)y(0);});h.subscribe(m.NEWSFEED_LOAD,(function(){t=true;this.setCount(0);}).bind(this));h.subscribe(m.LEAVE_HOME,function(){t=false;w();});w();},setCount:function(aa){y(t?0:aa);if(q.show_badge_bk){h.inform(n.NAVIGATION_COUNT_UPDATE,{key:'nf',count:t?0:aa-v});v=aa;}}};f.exports=z;},null);
__d('MercuryJewelModuleLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('MercuryJewel');},null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p){var q=i.listen(o,'click',function(r){r.preventDefault();var s=k(p);if(s){j.set(s);h.logSRKey();}else m(s,'Failed to set focus on element with ID: %s',p);});l(o,function(){return q.remove();});}};f.exports=n;},null);
__d("isEmail",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function i(j){return h.test(j);}f.exports=i;},null);
__d('PagesVoiceBar',['$','Arbiter','AsyncRequest','BlueBar','ChannelConstants','DOM','URI','ViewportBounds'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='PagesVoiceBar/initialized',q='PagesVoiceBar/switchVoice',r='page_transition',s='pages_voice_bar_sync',t=null,u=null,v=false,w=false,x=o.addTop(0);function y(ea,fa){new j('/ajax/pages/switch_voice.php').setData(fa).setHandler(function(ga){ca();}).send();}function z(){t=null;}function aa(ea,fa){if(fa.obj.profile_id&&fa.obj.profile_id===t)ca();}function ba(ea){i.subscribe(p,ea);}function ca(){n.getNextURI().go();}var da={initVoiceBar:function(){if(w)return;u=h('pagesVoiceBarContent');i.subscribe(q,y);i.subscribe(r,z);i.subscribe(l.getArbiterType(s),aa);w=true;v=m.contains(k.getBar(),u);i.inform(p,null,i.BEHAVIOR_STATE);},update:function(ea,fa){ba(function(){t=fa;m.setContent(u,ea);var ga=u.offsetHeight;if(!v&&x.getSize()!==ga){x.remove();x=o.addTop(o.getTop()+ga);}});}};f.exports=da;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d('PrivacyLiteFlyout',['Animation','Arbiter','ArbiterMixin','AsyncDialog','AsyncRequest','Banzai','CSS','DOM','Ease','Event','PrivacyConst','Style','SubscriptionsHandler','Toggler','XPrivacyCheckupSpawnDialogController','XPrivacyRemindersDismissController','csx','cx','ge','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(ja,ka,la){var ma=ka?0:ja.offsetHeight;s.set(ja,'height',ma+'px');s.set(ja,'overflow','hidden');n.show(ja);var na=ka?ja.scrollHeight:0,oa=aa(ja);ca[oa]&&ca[oa].stop();ca[oa]=new h(ja).to('height',na).ondone(function(){ca[oa]=null;s.set(ja,'height','');s.set(ja,'overflow','');na||n.hide(ja);la();}).duration(Math.abs(na-ma)*1.5).ease(p.sineOut).go();}function fa(ja){var event='other_section';switch(ja){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ja;break;}return event;}var ga=null,ha=false,ia=babelHelpers._extends({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ja){if(!ha&&z('fbPrivacyLiteFlyoutLoading')){ha=true;new l('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ja}).send();}},_addListener:function(ja,event,ka){return q.listen(ja,'click',function(){m.post('privacy_lite',{event:event,exit_point:ka});});},addLoggingElem:function(ja,event,ka){this._loggingElements=this._loggingElements||[];var la=this._loggingElements.length,ma={elem:ja,event:event,exit:ka};this._loggingElements[la]=ma;},registerSettingsAndBasicsLinkLogging:function(ja,event,ka,la){var ma=o.scry(ja,"._5cw0")[0],na=o.scry(ja,"._3djx")[0];if(ma){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(ma,event,ka);}if(na){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(na,event,la);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ja){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ja.elem,ja.event,ja.exit));},this);},renderBody:function(ja,ka){var la=z('fbPrivacyLiteFlyoutLoading');if(la){o.replace(la,ja);ia.registerCallback(function(){ia.inform('load',null,i.BEHAVIOR_STATE);},ka);}},hideCleanup:function(ja){i.inform(ba);o.scry(ja,"._2va0").forEach(function(ka){n.removeClass(ka,"_2va0");});},registerFlyoutToggler:function(ja,ka,la){ga=ka;var ma=u.createInstance(ja);ma.setSticky(false);u.listen(['show','hide'],ka,(function(na){ia.inform(na);var oa=na==='show';if(!oa){ia.hideCleanup(ja);ma.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;i.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{i.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(la){la.start(this);la=null;}i.subscribeOnce(ba,(function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}).bind(this));m.post('privacy_lite',{event:'show_flyout',exit_point:null});}}).bind(this));},isFlyoutVisible:function(){return ga&&u.getActive()===ga;},exists:function(){return !!o.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ja){ja?u.show(ga):u.hide(ga);},showSection:function(ja){var ka=da[ja];if(!ka)return;if(!ka.sublist_container){ia.inform('expanded',ja,i.BEHAVIOR_STATE);return;}var la=ka.chevron,ma=ka.sublist_container;i.inform(ba,la);if(ia.inform('expand',ja)!==false){n.removeClass(la,"_9or");n.addClass(la,"_9os");ea(ma,true,function(){ia.inform('expanded',ja);});}},hideSection:function(ja,ka,la){var ma=da[ja],na=ma.chevron,oa=ma.sublist_container;if(la===na)return;if(ia.inform('collapse',ja)!==false){n.addClass(na,"_9or");n.removeClass(na,"_9os");ea(oa,false,function(){ia.inform('collapsed',ja);});}},toggleSection:function(ja){var ka=da[ja].chevron;u.getInstance(ka).hide();if(n.hasClass(ka,"_9or")){ia.showSection(ja);m.post('privacy_lite',{event:fa(ja)+'_expand',exit_point:null});new l('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ja}).send();}else{ia.hideSection(ja);m.post('privacy_lite',{event:fa(ja)+'_collapse',exit_point:null});}},registerSection:function(ja,ka){da[ja]=ka;if(ka.sublist_container){i.subscribe(ba,ia.hideSection.bind(null,ja));q.listen(ka.section_block,'click',ia.toggleSection.bind(null,ja));}ia.inform(ja);},registerInlineHelpOnAudienceChangeNewSelector:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('changed',(function(na){this._registerInlineHelpOnAudienceChange(ka,la,ma,ja.getSelectedBaseValue());}).bind(this));},registerSelectorLogging:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('open',function(){m.post('privacy_lite',{event:ka,exit_point:null});});ja.subscribe('close',function(){m.post('privacy_lite',{event:la,exit_point:null});});ja.subscribe('changed',function(){m.post('privacy_lite',{event:ma,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ja,ka,la,ma){var na=o.find(ja,"._9o_"),oa=o.find(ja,"._2v9_");if(la){var pa=o.find(ja,"._5n9w"),qa=ma==r.BaseValue.EVERYONE;n.conditionShow(pa,qa);n.conditionShow(na,!qa);if(pa&&qa){var ra=w.getURIBuilder().setString('type','delta_everyone').setBool('log_plite',true).getURI();new l(ra).send();}}else n.show(na);n.hide(oa);if(ka)new l('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ja,ka,la){q.listen(ja,'click',function(){n.addClass(ka,"_9p0");});},registerBlockUnhideOnFocus:function(ja,ka){q.listen(ja,'focus',(function(la){n.show(la);m.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}).bind(this,ka));},registerMessageFilterSettingOnClick:function(ja,ka){var la=o.find(ja,"._fv0");q.listen(ja,'click',function(){if(la.checked){new l('/ajax/mercury/change_filtering_type.php').setData({filtering_type:ka,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(ka==='strict')event='strict_filtering';m.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ja){q.listen(ja,'click',(function(){this.setFlyoutVisible(false);k.send(new l(v.getURIBuilder().setEnum('source','plite').getURI()));m.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}).bind(this));},displayPrivacyCheckup:function(ja){ja.show();}},j);f.exports=ia;},null);
__d('PrivacyLiteFlyoutHelp',['Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Event','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=o.bySelector(v,"._8-a");n.listen(y,'click',(function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}).bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&n.listen(aa,'click',(function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler((function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}).bind(this)).send();}).bind(this));}Object.assign(t.prototype,new k(),k.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});f.exports=t;},null);
__d('ViewasChromeBar',['Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='ViewasChromeBar/initialized',t=null,u=false;function v(y){h.subscribe(s,y);}function w(y){j.addClass(y,"_7g7");var z=k.find(y,"._7g0");m.set(k.find(z,'.textInput'));}var x={initChromeBar:function(y){if(u)return;t=y;u=true;h.inform(s,null,h.BEHAVIOR_STATE);},update:function(y,z){v(function(){k.setContent(t,y);if(z)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(y){l.listen(y,'click',w.bind(null,p.bySelector(y,"._7f-")));},registerFlyoutModalMask:function(){n.show();o.registerHandler(n.hide,10);}};f.exports=x;},null);
__d('SearchSingleState',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m,n){return {classNames:'grammar',groupIndex:0,indexInGroup:k,path:l,text:m,type:'grammar',uid:n};}var j={getSuggestions:function(k,l,m){if(m==='ent:user'){return this.getSuggestionsForUser(k,l);}else if(m==='ent:page'){return this.getSuggestionsForPage(k,l);}else if(m==='ent:app'){return this.getSuggestionsForApp(k,l);}else if(m==='ent:group')return this.getSuggestionsForGroup(k,l);},getSuggestionsForUser:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {full name}",[h.param('full name',l)]),'photos_of_user'),i(1,'/search/'+k+'/friends',h._("friends of {full name}",[h.param('full name',l)]),'friends_of_user'),i(2,'/search/'+k+'/pages-liked',h._("favourite Pages of {full name}",[h.param('full name',l)]),'pages_liked_user'),i(3,'/search/str/'+l+'/users-named',h._("find all people named \"{full name}\"",[h.param('full name',l)]),'people_named_text')];},getSuggestionsForPage:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {name of page}",[h.param('name of page',l)]),'photos_of_page'),i(1,'/search/'+k+'/likers',h._("people who like {name of page}",[h.param('name of page',l)]),'page_likers'),i(2,'/search/str/'+l+'/pages-named',h._("find all Pages named \"{name of page}\"",[h.param('name of page',l)]),'pages_named_text')];},getSuggestionsForGroup:function(k,l){return [i(0,'/search/'+k+'/members',h._("{name of group} members",[h.param('name of group',l)]),'members_of_group'),i(1,'/search/'+k+'/photos-in',h._("photos in {name of groups}",[h.param('name of groups',l)]),'photos_in_group'),i(2,'/search/'+k+'/creators',h._("{name of group} creators",[h.param('name of group',l)]),'creators_of_group'),i(3,'/search/'+k+'/admins',h._("{name of group} administrators",[h.param('name of group',l)]),'admins_of_group')];},getSuggestionsForApp:function(k,l){return [i(0,'/search/'+k+'/apps-similar-to',h._("apps similar to {name of app}",[h.param('name of app',l)]),'similar_apps'),i(1,'/search/'+k+'/app-users',h._("people who use {name of app}",[h.param('name of app',l)]),'app_users'),i(2,'/search/str/'+l+'/pages-named',h._("find all apps named \"{name of page}\"",[h.param('name of page',l)]),'apps_named_text')];}};f.exports=j;},null);
__d('SearchDataSource',['Event','Arbiter','AsyncResponse','DataSource','HashtagSearchResultUtils','createArrayFromMixed','PageTransitionsRegistrar','SearchSingleState','UnicodeCJK','FacebarJSConstants','Map','SearchRegion','debounce','errorCode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w,x=100,y='/typeahead/search/facebar/nullstate/';v=babelHelpers.inherits(z,k);w=v&&v.prototype;function z(aa){'use strict';aa.headerflags=new r();if(s.sgp_routing)aa.headerflags['X-FB-Replay-Search-Region']='SGP';w.constructor.call(this,aa);this._token=aa.token||'';this._lazyonload=aa.lazyonload===false?false:true;this._extraTypes=aa.extraTypes;this._buckets=aa.buckets;this._noMultiFetch=aa.noMultiFetch||false;this._nullStateConfig=aa.nullStateConfig||{};var ba=aa.maxResults||8;this._numResults={min:3,max:ba};this.recordingRoute=aa.recordingRoute||'non_banzai';this._enabledHashtag=aa.enabledHashtag||false;this.logBackendQueriesWindow=aa.logBackendQueriesWindow||25;this._genTime=aa.genTime;this._bootstrapError=false;this._hasKeywordBootstrap=aa.hasKeywordBootstrap||false;this._addJoinedTermsMatching=aa.addJoinedTermsMatching||false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:aa.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:aa.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:aa.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:aa.cjkDropLatinInCjTokens});}z.prototype.init=function(){'use strict';w.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var aa=t(this._updateMaxResults,x,this,true);h.listen(window,'resize',aa);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)i.subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)i.subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)i.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};z.prototype.refreshRecentSearches=function(){'use strict';this.nullStateData=null;};z.prototype.handlePageTransition=function(){'use strict';this.nullStateParams={};};z.prototype.updateNullState=function(event,aa){'use strict';this.nullStateParams=aa;this.fetchNullState();};z.prototype.markResultsAsNullState=function(aa){'use strict';if(aa)for(var ba=aa,ca=Array.isArray(ba),da=0,ba=ca?ba:ba[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ea;if(ca){if(da>=ba.length)break;ea=ba[da++];}else{da=ba.next();if(da.done)break;ea=da.value;}var fa=ea;fa.isNullState=true;}};z.prototype.markResultsAsSingleState=function(aa){'use strict';if(aa)for(var ba=aa,ca=Array.isArray(ba),da=0,ba=ca?ba:ba[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ea;if(ca){if(da>=ba.length)break;ea=ba[da++];}else{da=ba.next();if(da.done)break;ea=da.value;}var fa=ea;fa.isSingleState=true;}};z.prototype.fetchNullState=function(aa){'use strict';this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var ba=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=aa||'';ba=this._fetchDataForSingleState();this.markResultsAsNullState(ba);}else{ba=this._fetchDataForNullState();this.markResultsAsSingleState(ba);}if(ba)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:ba,isAsync:false,nullState:true});};z.prototype._fetchDataForSingleState=function(){'use strict';if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(y,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var aa=o.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!aa)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:aa,profileID:this.nullStateParams.uid};return aa;};z.prototype._shouldRefreshNullState=function(){'use strict';if(!this._nullStateConfig.recent)return false;var aa=window.location.href;if(!aa)return false;if(aa.contains('allactivity')&&aa.contains('log_filter=search'))return true;return false;};z.prototype._fetchDataForNullState=function(){'use strict';if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout((function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}).bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(y,{value:""},{nullState:true,value:''});}return null;};z.prototype.dirty=function(){'use strict';w.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};z.prototype.asyncErrorHandler=function(aa,ba){'use strict';if(ba.nullState)this.fetchingNullState=false;if(ba.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:aa,fetch_context:ba});if(window.Dialog&&window.Dialog.getCurrent()==null&&aa.getError()==1400003)j.verboseErrorHandler(aa);};z.prototype.fetch=function(aa,ba,ca){'use strict';ca=ca||{};ca.fetch_start=Date.now();var da=n.getMostRecentURI().path;ba=babelHelpers._extends({},ba,{path:da});w.fetch.call(this,aa,ba,ca);};z.prototype.fetchHandler=function(aa,ba){'use strict';if(ba.nullState){this.fetchingNullState=false;this.nullStateData=aa.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(ba.singleState){this.nullStateDataWithProfile.data=aa.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var ca=aa.getPayload(),da=babelHelpers._extends({fetch_end:Date.now()},ba),ea=da.value?i.BEHAVIOR_EVENT:i.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:aa});if(ba.bootstrap)this._bootstrapError=false;if(ba.type=='lean'){this._leanPayload=ca;this._processLean();}else{if(ca.coeff2_ts)da.coeff2_ts=ca.coeff2_ts;w.fetchHandler.call(this,aa,ba);if(ba.bootstrap&&!aa.getRequest().getData().no_cache)da.browserCacheHit=ca.timestamp<this._genTime;if(ba.bootstrap&&!ca.no_data&&this._bootstrapRequestsPending>0){ba.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(ca.no_data||ca.stale||ca.token!==this._token){var fa=babelHelpers._extends({},aa.getRequest().getData());if(fa.lazy){delete fa.lazy;fa.token=this._token;this._fetchOnUse(fa,ba);}}}this.inform('endpointStats',{info:da,response:aa},ea);if(ba&&!!ba.value)this.inform('completeFetch',{response:aa,stats:da});};z.prototype.respond=function(aa,ba,ca){'use strict';this.inform('respondValidUids',ba);this.inform('reorderResults',ba);var da=this.buildData(ba,aa);da.forEach(function(ea,fa){ea.origIndex=fa;ea.fromCache=!ca;});this.inform('respond',{value:aa,results:da,isAsync:!!ca});return da;};z.prototype.buildData=function(aa,ba){'use strict';if(!aa||aa.length===0)return [];var ca=aa.map(this.getEntry,this);ca.length=Math.min(ca.length,this._maxResults);return ca;};z.prototype.fetchLean=function(){'use strict';this._fetchLean();};z.prototype._isQueryTooShort=function(aa){'use strict';return aa.length<this._minQueryLength&&!this._performShortQuery&&!p.hasIdeoOrSyll(aa);};z.prototype.shouldFetchMoreResults=function(aa){'use strict';return aa.length<this._maxResults;};z.prototype._bootstrapRenderCostsToIndex=function(aa,ba){'use strict';aa.index=1;for(var ca in ba)if(aa.index>ba[ca])aa.index=ba[ca];};z.prototype._bootstrapPostProcess=function(){'use strict';var aa=0;for(var ba in this._data)if(this._data.hasOwnProperty(ba)){aa++;if(this._data[ba].hasOwnProperty('grammar_costs'))this._bootstrapRenderCostsToIndex(this._data[ba],this._data[ba].grammar_costs);}this.inform('bootstrapped',{time:Date.now(),size:aa},i.BEHAVIOR_PERSISTENT);this._processLean();};z.prototype._processLean=function(){'use strict';if(this._leanPayload){var aa,ba=this._leanPayload.entries;for(var ca in ba){aa=this.getEntry(ca);if(aa)if(typeof ba[ca]==='object'){this._bootstrapRenderCostsToIndex(aa,ba[ca]);}else aa.index=ba[ca];}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};z.prototype._updateMaxResults=function(){'use strict';var aa=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(aa-370)/56))));};z.prototype._bootstrapFetch=function(aa,ba){'use strict';var ca=babelHelpers._extends({},ba,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)ca.lazy=1;this.fetch(this.bootstrapEndpoint,ca,{bootstrap:true,type:aa});++this._bootstrapRequestsPending;};z.prototype._fetchOnUse=function(aa,ba){'use strict';for(var ca in this.bootstrapData)!aa.hasOwnProperty(ca)&&(aa[ca]=this.bootstrapData[ca]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:aa,ctx:ba});}else this.fetch(this.bootstrapEndpoint,aa,ba);};z.prototype._fetchLean=function(){'use strict';var aa={no_cache:1};aa.options=m(aa.options);aa.options.push('lean');this._fetchOnUse(aa,{type:'lean'});};z.prototype.bootstrap=function(aa){'use strict';if(!aa){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var ba={filter:['event'],no_cache:1};this._fetchOnUse(ba,{type:'event'});var ca=['app','page','group','friendlist'];ca=ca.concat(this._extraTypes||[]);var da=[];if(this._hasKeywordBootstrap)da.push(q.keywordType);if(this._noMultiFetch){ca.push('user');ca=ca.concat(da);this._bootstrapFetch('user',{filter:ca});}else{this._bootstrapFetch('other',{filter:ca});if(this._buckets){for(var ea=0;ea<this._buckets.length;++ea){var fa={filter:['user'],buckets:this._buckets[ea]};this._bootstrapFetch('user',fa);}}else this._bootstrapFetch('user',{filter:['user']});if(da.length>0)this._bootstrapFetch('keyword',{filter:da});}this._fetchLean();this._bootstrapped=true;};z.prototype.getBootstrapError=function(){'use strict';return this._bootstrapError;};z.prototype._flushFetchOnUseRequests=function(){'use strict';var aa=this._fetchOnUseRequests.length;for(var ba=0;ba<aa;++ba){var ca=this._fetchOnUseRequests[ba];this.fetch(this.bootstrapEndpoint,ca.args,ca.ctx);}if(aa>0)this.inform('extra_bootstrap',{time:Date.now()},i.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};z.prototype.onLoad=function(aa,ba){'use strict';this.inform('onload',{time:Date.now()},i.BEHAVIOR_PERSISTENT);if(aa)setTimeout(this.bootstrap.bind(this,ba),0);};z.prototype.mergeUids=function(aa,ba,ca,da){'use strict';var ea=this.getDynamicHashtagResult(da);if(da&&ea&&ba.indexOf(ea)<=0)ba.unshift(ea);var fa=ca[0]?this.getEntry(ca[0]):null,ga=ba[0]?this.getEntry(ba[0]):null,ha=fa&&fa.replace_results?fa:null;ha=!ha&&ga&&ga.replace_results?ga:ha;var ia=w.mergeUids.call(this,aa,ba,ca,da);if(ha){this.inform('backend_topreplace',{});return this.deduplicateByKey([ha.uid].concat(ia));}return ia;};z.prototype.getTextToIndexFromFields=function(aa,ba){'use strict';var ca=[],da=aa.tokenVersion==="v2";for(var ea=0;ea<ba.length;++ea){if(da&&(ba[ea]==="text"||ba[ea]==="alias"))continue;var fa=aa[ba[ea]];if(fa){fa=fa.join?fa.join(' '):fa;ca.push(fa);if(ba[ea]=='text'&&this._addJoinedTermsMatching){fa=fa.toLowerCase();fa=fa.replace(/ /g,'');ca.push(fa);}}}return ca.join(' ');};z.prototype.getDynamicHashtagResult=function(aa){'use strict';if(!aa||!this._enabledHashtag)return;var ba=l.getHashtagFromQuery(aa);if(!ba)return;var ca='hashtag:'+ba,da=this.getEntry(ca);if(!da)this.processEntries([l.makeTypeaheadResult(ba)],aa);return ca;};f.exports=z;},null);
__d('legacy:SearchDataSource',['SearchDataSource'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchDataSource=c('SearchDataSource');},3);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,o);q=p&&p.prototype;function r(s){'use strict';q.constructor.call(this,s);}r.prototype.init=function(s,t,u){'use strict';q.init.call(this,s,t,u);var v=m.byTag(u,'form'),w=this.reset.bind(this);h.subscribe('pre_page_transition',function(event,y){var z=/^\/search/,aa=z.test(y.from.path),ba=z.test(y.to.path);if(aa&&!ba)setTimeout(w,0);});if(v){var x=i.find(v,'input.search_sid_input');j.listen(v,'submit',(function(){if(this.data&&this.data.queryData)x.value=this.data.queryData.sid;setTimeout(w,0);}).bind(this),j.Priority.URGENT);}};r.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);n.setClickPointInfo({click:'Search'});};r.prototype.handleTab=function(event){'use strict';var s=this.view.getQuerySuggestion(this.value);if(s){k.setValue(this.element,s);this.checkValue();event.kill();}else q.handleTab.call(this,event);};r.prototype.getSearchType=function(){'use strict';return 'regular';};r.prototype.focus=function(){'use strict';q.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};r.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&j.getKeyCode(event)===l.ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=r;},null);
__d('legacy:SearchTypeaheadCore',['SearchTypeaheadCore'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadCore=c('SearchTypeaheadCore');},3);
__d('SearchPeopleFriendsOf',['TokenizeUtil','URI','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.friendsOfUri=l;this.placementStrategy=m.placement_strategy;this.placementParams=m.placement_params;this.triggerStrategy=m.trigger_strategy;this.triggerParams=m.trigger_params;}k.prototype.injectInto=function(l,m){'use strict';if(!l||l.length===0||!this.$SearchPeopleFriendsOf1(l,m))return;if(l[0].type!=="user")return;var n=this.createFindAllFriendsOf(l[0].text,l[0].uid);this.$SearchPeopleFriendsOf2(n,l);};k.prototype.$SearchPeopleFriendsOf2=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf3(m);if(n==='last'){var o=m.filter(function(p){return p.type==='user';}).length;n=o;}m.splice(n,0,l);};k.prototype.$SearchPeopleFriendsOf1=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return n(l,this.triggerParams,m);};k.prototype.$SearchPeopleFriendsOf3=function(l){'use strict';var m=this.$SearchPeopleFriendsOf4(this.placementStrategy);return m(l,this.placementParams);};k.prototype.$SearchPeopleFriendsOf4=function(l){'use strict';return this["$SearchPeopleFriendsOf_"+l];};k.prototype.$SearchPeopleFriendsOf5=function(l,m,n){'use strict';return false;};k.prototype.$SearchPeopleFriendsOf6=function(l,m,n){'use strict';return true;};k.prototype.$SearchPeopleFriendsOf7=function(l,m,n){'use strict';var o=parseInt(m,10),p=0;for(var q=0;q<l.length;q++){var r=l[q];if(r.type==='user'&&r.index_rank==-1)p++;if(p>o)return false;}return true;};k.prototype.$SearchPeopleFriendsOf8=function(l,m,n){'use strict';var o=parseInt(m,10),p=h.tokenize(n);p=p.map(function(x){return x.toLowerCase();});var q=0;for(var r=0;r<l.length;r++){var s=l[r];if(s.type!=='user'||s.index_rank!=-1)continue;var t=h.tokenize(s.text);t=t.map(function(x){return x.toLowerCase();});if(t.length<p.length)continue;var u=true;for(var v=0;v<p.length-1;v++)if(p[v]!==t[v]){u=false;break;}var w=p.length-1;if(u&&t[w].startsWith(p[w])){q++;if(q>=o)return false;}}return true;};k.prototype.$SearchPeopleFriendsOf9=function(l,m){'use strict';return "last";};k.prototype.$SearchPeopleFriendsOf10=function(l,m){'use strict';return 1;};k.prototype.createFindAllFriendsOf=function(l,m){'use strict';var n=j._("{name}'s Friends",[j.param('name',l)]),o=new i(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:m}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:o};};f.exports=k;},null);
__d('SearchPeopleSeeMore',['TokenizeUtil','URI','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){'use strict';var o=n.placement,p=n.strategy,q=n.min_users,r=n.query_to_show;this.seeMoreUri=m;this.placement=o;this.strategy=p;this.min_users=q;this.query_to_show=r;}l.prototype.injectInto=function(m,n){'use strict';if(!m||m.length===0)return;var o=this.$SearchPeopleSeeMore1(m,n);if(!o)return;var p=this.createFindAllPeopleResult(o);this.$SearchPeopleSeeMore2(p,m);};l.prototype.$SearchPeopleSeeMore1=function(m,n){'use strict';if(this.strategy==='disabled')return null;if(m[0].type!=='user')return null;var o=m.filter(function(s){return s.type==='user';});if(o.length<this.min_users){return null;}else if(o.length>this.min_users)o=o.slice(0,this.min_users);var p,q=o[0];switch(this.strategy){case 'all_identical':var r=o.every((function(s){return this.$SearchPeopleSeeMore3(q.text,s.text);}).bind(this));p=r?q.text:null;break;case 'top_results_prefix':p=o.reduce((function(s,t){return this.$SearchPeopleSeeMore4(s,t.text);}).bind(this),q.text);break;default:k(0);}if(!p)return null;return this.query_to_show==='common'?p:n;};l.prototype.$SearchPeopleSeeMore2=function(m,n){'use strict';if(this.placement==='last'){var o=n.filter(function(q){return q.type==='user';}).length;n.splice(o,0,m);}else{var p=parseInt(this.placement,10);n.splice(p,0,m);}};l.prototype.createFindAllPeopleResult=function(m){'use strict';var n=j._("Find all people named \"{query}\"",[j.param('query',m.toLowerCase())]),o=new i(this.seeMoreUri).addQueryData({q:m,init:'psm'}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:o};};l.prototype.$SearchPeopleSeeMore3=function(m,n){'use strict';if(m===n)return true;var o=h.tokenize(m),p=h.tokenize(n);if(o.length!==p.length)return false;return o.every(function(q,r){return q===p[r];});};l.prototype.$SearchPeopleSeeMore4=function(m,n){'use strict';if(!m||!n)return;if(m===n)return m;var o=h.tokenize(m),p=h.tokenize(n),q=[];for(var r=0;r<o.length&&r<p.length;r++)if(o[r]===p[r]){q.push(o[r]);}else break;if(q.length===0)return null;return q.join(' ');};f.exports=l;},null);
__d('SearchTypeaheadView',['Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','cx','fbt','goURI','isEmail'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;u=babelHelpers.inherits(w,j);v=u&&u.prototype;function w(y,z){'use strict';v.constructor.call(this,y,z);this._peopleSeeMore=new n(this.getSeeMoreEndpoint('',true),o);this._peopleFriendsOf=new l(this.getSeeMoreEndpoint('',true),m);}w.prototype.initializeLayer=function(){'use strict';v.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(i);};w.prototype.ignoreClick=function(event){'use strict';event.prevent();};w.prototype.render=function(y,z,aa){'use strict';if(!z)return;if(this._bucketize)z=x(z);if(this.showPeopleSeeMore&&y)this._peopleSeeMore.injectInto(z,y);if(this.showPeopleFriendsOf&&y)this._peopleFriendsOf.injectInto(z,y);var ba={results:z,value:y};this.inform('finalResultsReordering',ba);return v.render.call(this,y,ba.results,aa);};w.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};w.prototype.buildBuckets=function(y,z){'use strict';var aa=z.length,ba=0,ca;for(ca=0;ca<aa;++ca)if(z[ca].type=='user')ba++;this._redirectToUsersResultsPage=this.showFilterResults&&ba===aa;this.setWebSuggLoggingParams(y,z);if(!y&&this.showFindPeople)z.unshift(this.buildFindPeople());if(this._bucketize)z=v.buildBuckets.call(this,y,z);if(y&&this._shouldShowSeeMore){z.push(this.buildSeeMore(y,aa));if(t(y)&&ba<1)z.push(this.buildInvite(y));}return z;};w.prototype.buildFindPeople=function(){'use strict';var y=r._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:y,type:'no_header'};};w.prototype.buildSeeMore=function(y,z){'use strict';var aa=this.getSeeMoreText(y,z),ba=this.getSeeMoreSubtext(z),ca,da,ea,fa='',ga='',ha='';if(this.showseemorev2){da='seeMoreV2';ea='calltoactionV2';ha=k.create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'});}else{da='seeMore';ea='calltoaction';fa=k.create('span',{className:'arrow'});ga=k.create('span',{className:'subtext'},[ba]);}ca=k.create('li',{className:ea},[ha,k.create('a',{href:this.getSeeMoreEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:da},aa),fa,ga])])]);ca.setAttribute('aria-label',aa);return {uid:'search',node:ca,search:true};};w.prototype.getSeeMoreText=function(y,z){'use strict';if(this.showKeywordResultsPage)return r._("Search for {query}",[r.param('query',y)]);if(z<=0)return r._("See results for {query}",[r.param('query',y)]);if(this._redirectToUsersResultsPage)return r._("Filter results for {query}",[r.param('query',y)]);if(this.showseemorev2){var aa=k.create('b',{},y);return r._("Find more results for {query}",[r.param('query',aa)]);}else return r._(["See more results for {query}","44e6d113d67af68d7209174cf9420c3d"],[r.param('query',y)]);};w.prototype.getSeeMoreSubtext=function(y){'use strict';if(y===0)return r._("No results to display");if(y===1)return r._("Displaying top result");return r._({"*":"Displaying top {number} results"},[r.param('number',y,[0])]);};w.prototype.buildInvite=function(y){'use strict';var z=r._("Invite {query} to Facebook",[r.param('query',y)]),aa=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[z])])])]);aa.setAttribute('aria-label',z);return {uid:'invite',node:aa,search:true};};w.prototype.searchPageQueryData=function(y){'use strict';return babelHelpers._extends({q:y},this.queryData||{});};w.prototype.searchPageTypeData=function(y){'use strict';return this._redirectToUsersResultsPage||y?{type:"users"}:{};};w.prototype.select=function(y){'use strict';var z=this.index,aa=this.results[z];if(!aa||aa.type=='header')return;var ba=this.items[z],ca=k.scry(ba,'a')[0];v.select.call(this,y);if(ca&&ca.href)if(ca.target=='_blank'){window.open(ca.href);}else s(ca.href);};w.prototype.setSid=function(y){'use strict';this.queryData.tas=y;};w.prototype.getSeeMoreEndpoint=function(y,z){'use strict';return new p(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(y)).addQueryData(this.searchPageTypeData(z)).toString();};w.prototype.getInviteEndpoint=function(y){'use strict';return new p('/invite.php').addQueryData({email_list:y});};w.prototype.show=function(){'use strict';if(!this.isVisible()){h.inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");v.show.call(this);}};w.prototype.hide=function(){'use strict';if(this.isVisible()){h.inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.hasClass(this.searchBtns[0],"btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");v.hide.call(this);}};w.prototype.getQuerySuggestion=function(y){'use strict';var z=this.results[this.index],aa=z&&z.type!='header'?z.text.toLowerCase():'';return aa==y.toLowerCase()?'':aa;};w.prototype.setWebSuggLoggingParams=function(y,z){'use strict';var aa=0,ba=0;for(var ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion'){if(ba===0)ba=ca+1;var da='FR'+(ca-aa)+'AS'+aa,ea=ca+1;z[ca].path+='&wssk='+da+'&wssp='+ea+'&wspq='+encodeURIComponent(y);z[ca].path+='&wssrc='+z[ca].websuggestion_source;aa++;}var fa='&wssc='+z.length+'-'+y.length+'&wsbp='+aa+'-'+ba;for(ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion')z[ca].path+=fa;};function x(y){var z,aa,ba,ca,da=[],ea={};aa=y.length;for(z=0;z<aa;z++){ba=y[z];ca=ba.render_type||ba.type;if(!ea.hasOwnProperty(ca)){ea[ca]=da.length;da.push([]);}da[ea[ca]].push(ba);}var fa=[];aa=da.length;for(z=0;z<aa;++z){ba=da[z][0];ca=ba.render_type||ba.type;fa=fa.concat(da[z]);}return fa;}Object.assign(w.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=w;},null);
__d('legacy:SearchTypeaheadView',['SearchTypeaheadView'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadView=c('SearchTypeaheadView');},3);
__d('SearchTypeaheadRecorder',['AsyncRequest','Banzai','BanzaiNectar','BanzaiScuba','CurrentUser','Event','FacebarGlobalOptions','Keys','TokenizeUtil','Vector','clickRefAction','mapObject','ge','throttle','whitelistObjectKeys'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function x(z){'use strict';this.init(z);this.initEvents(z);}x.prototype.init=function(z){'use strict';this.core=z.getCore();this.data=z.getData();this.view=z.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=false;this.allFromNullState=false;var aa=t('search_first_focus');this.initStartTime=aa&&aa.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};x.prototype._reset=function(){'use strict';this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var z=Math.random().toString();this.data.setQueryData({sid:z});this.view.setSid(z);this.recordStat('sid',z);this.recordStat('keypressed',0);};x.prototype.initEvents=function(){'use strict';this.core.subscribe('focus',(function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var z=new Date(),aa=z.getTimezoneOffset(),ba=Date.now()-aa*60*1000;this.recordStat('session_start_time_user_timezone',ba);}}).bind(this));this.core.subscribe('blur',(function(event){var z=Date.now();for(var aa in this._inflightRequests){var ba=this._inflightRequests[aa],ca=z-ba;this.recordAvgStat('search_endpoint_ms_from_js',ca);}this.recordStat('session_end_time',z);this.submit();}).bind(this));this.view.subscribe('select',(function(z,aa){this.recordSelectInfo(aa);}).bind(this));this.view.subscribe('render',(function(z,aa){this.recordRender(aa);}).bind(this));this.data.subscribe('logPerformanceTiming',(function(z,aa){this.performanceTimings[aa.field]=aa.value;}).bind(this));this.data.subscribe('activity',(function(z,aa){this.recordStat('pending_request',aa.activity);}).bind(this));this.data.subscribe('respondValidUids',(function(z,aa){this.validUids=aa.slice(0);}).bind(this));this.data.subscribe('beforeQuery',(function(z,aa){if(!aa.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=aa.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}).bind(this));this.data.subscribe('queryEndpoint',(function(z,aa){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',aa.value.length);this._inflightRequests[aa.value]=Date.now();}).bind(this));this.data.subscribe('onload',(function(z,aa){this._onloadTime=aa.time;}).bind(this));this.data.subscribe('bootstrapped',(function(z,aa){this.bootstrapStats.endTime=aa.time;this.bootstrapStats.bootstrapped=1;}).bind(this));this.core.subscribe('recordFunction',(function(z,aa){this._extraRecorder.push(aa);}).bind(this));this.data.subscribe('endpointStats',(function(z,aa){var ba=aa.info,ca=ba.fetch_end-ba.fetch_start;if(ba.value){this.recordAvgStat('search_endpoint_ms_from_js',ca);}else this.bootstrapStats[ba.type]=ca;if(ba.coeff2_ts)this.bootstrapStats.coeff2_ts=ba.coeff2_ts;if(typeof ba.browserCacheHit!='undefined')this.recordCountStat(ba.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[ba.value])delete this._inflightRequests[ba.value];}).bind(this));this.data.subscribe('fetchComplete',(function(z,aa){var ba=aa.entries,ca=aa.value;if(ca&&this.backendQueriesStatus[ca]){this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);this.backendQueriesStatus[ca].status=ba&&ba.length>0?w.SUCCESS:w.NO_RESULTS;}}).bind(this));this.data.subscribe('fetchError',(function(z,aa){var ba=aa.fetch_context,ca=ba.value;if(ba.bootstrap||!ca)return;if(this.backendQueriesStatus[ca]){this.backendQueriesStatus[ca].status=w.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);}}).bind(this));this.data.subscribe('query',(function(z,aa){this.recordAvgStat('num_results_from_cache',aa.results.length);}).bind(this));this.data.subscribe('backend_topreplace',(function(z,aa){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}).bind(this));this.data.subscribe('completeFetch',(function(z,aa){if(this.core.scubaInfo){var ba=aa.response,ca={recv:aa.stats.fetch_end-aa.stats.fetch_start,render:Date.now()-aa.stats.fetch_start,payload_size:JSON.stringify(ba).length};if(!ba.payload.entities)ba.payload.entities=this.buildResults();this.logToScuba(ba,ca,this.core.scubaInfo,this.query,this.type);}}).bind(this));this.data.subscribe('completeCacheFetch',u((function(z,aa){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}).bind(this),500));m.listen(this.element,'keydown',(function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(m.getKeyCode(event)==o.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}).bind(this));this.data.subscribe('beforeFetch',(function(z,aa){var ba=aa.request.data.value;if(!ba)return;this.backendQueries.push(ba);this.backendQueriesStatus[ba]={status:w.WAITING,start_time:Date.now()};}).bind(this));};x.prototype.recordStat=function(z,aa){'use strict';this.stats[z]=aa;};x.prototype.recordCountStat=function(z){'use strict';var aa=this.stats[z];this.stats[z]=aa?aa+1:1;};x.prototype.recordAvgStat=function(z,aa){'use strict';if(this.avgStats[z]){this.avgStats[z][0]+=aa;++this.avgStats[z][1];}else this.avgStats[z]=[aa,1];};x.prototype.recordAppendStat=function(z,aa){'use strict';if(!this.appendStats.hasOwnProperty(z))this.appendStats[z]=[];this.appendStats[z].push(aa);};x.prototype.recordRender=function(z){'use strict';this.results=z.filter(function(ja){return ja.uid!='search'&&ja.type!='disabled_result'&&ja.type!='header';}).map(function(ja){return babelHelpers._extends({},ja);});var aa=null;if(this.queryStartTime)aa=this.queryStartTime[this.query];var ba=this.results.every(function(ja){return ja.fromCache;}),ca=this.results.every(function(ja){return ja.isFromGSEF||ja.fromCache;}),da=this.results.every(function(ja){return ja.isNullState;}),ea=this.results.every(function(ja){return ja.isSingleState;}),fa=this.results.every(function(ja){return ja.exactMatchKeyword;});this.allFromSingleState=ea;this.allFromNullState=da;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&da){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&ea){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);}else if(aa){var ga=Date.now()-aa;if(fa){this.recordAppendStat('times_render_gs_echo',ga);}else this.recordAppendStat(ba?'times_render_local':'times_render_remote',ga);if(!ba&&ca)this.recordAppendStat('time_render_gs_early_fetch',ga);}this.data.lastNullOrSingleStateFetchStartTime=null;var ha=q.getViewportDimensions();this.recordStat('window_size_width',ha.x);this.recordStat('window_size_height',ha.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());var ia='typed';if(this.allFromNullState){ia='nullstate';}else if(this.allFromSingleState)ia='singlestate';this.recordStat('last_state',ia);};x.prototype.recordSelectInfo=function(z){'use strict';var aa=z.selected,ba=z.index;if(aa.groupIndex!==undefined)ba=z.index-aa.groupIndex-1;var ca={href:aa.path},da=aa.dataGT?{gt:JSON.parse(aa.dataGT)}:{};r('click',ca,null,null,da);if(aa.uid=='search'||aa.uid=='people_search'){this.recordStat('selected_search',1);}else if(aa.uid=='invite'){this.recordStat('selected_invite',1);}else{var ea=aa.log_type||aa.rankType||aa.render_type||aa.type,fa=ea=='friend'?'user':ea;this.recordStat('selected_'+fa,1);this.recordStat('selected_position',ba);this.recordStat('selected_type',ea);this.recordStat('selected_name_length',aa.text.length);this.recordStat('selected_id',aa.uid);this.recordStat('selected_degree',aa.bootstrapped?1:2);this.recordStat('selected_recent_search',aa.recent_search);var ga=p.parse(this.data.getTextToIndex(aa)).tokens,ha=y(ga,this.query);if(ha)this.recordStat('matched_terms',ha);}var ia={};this._extraRecorder.forEach((function(ja){ja(z,this.results,ia);}).bind(this));this.recordStat('extra_select_info',JSON.stringify(ia));this.recordStat('selected_with_mouse',z.clicked?1:0);};x.prototype._addDurationForBackendQuery=function(z){'use strict';if(z.start_time){z.duration=Date.now()-z.start_time;delete z.start_time;}};x.prototype._dataToSubmit=function(){'use strict';this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var z=this.data.getBootstrapError();if(z)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var aa=v(this.backendQueriesStatus,this.backendQueries);s(aa,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',aa);}if(n.taSessionLoggingSample){var ba=[];this.results.forEach(function(ga){ba.push([ga.text||'',ga.category||'',ga.subtext||'']);});this.recordStat('raw_suggestions_text',ba);}var ca=this.stats;for(var da in this.avgStats){var ea=this.avgStats[da];ca[da]=ea[0]/ea[1];}for(var fa in this.appendStats)ca[fa]=JSON.stringify(this.appendStats[fa]);return ca;};x.prototype.buildResults=function(){'use strict';var z=(this.results||[]).map((function(aa,ba){var ca=p.parse(this.data.getTextToIndex(aa)).tokens,da=aa.rankType||aa.render_type||aa.type,ea=aa.bootstrapped?1:0,fa=aa.s_token||'',ga=typeof aa.index=='undefined'?100:aa.index,ha=y(ca,this.query)||this.query,ia=aa.index_rank,ja=aa.match_type,ka=aa.l_type,la=aa.vertical_type,ma=aa.prefix_match,na=aa.prefix_length,oa=aa.text,pa=aa.category,qa=aa.subtext,ra=aa.fromCache,sa=aa.isNullState,ta=aa.isSingleState;if(typeof aa.groupIndex=='number')return [aa.groupIndex,aa.indexInGroup,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];return [0,ba,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];}).bind(this));return JSON.stringify(z);};x.prototype.submit=function(){'use strict';var z=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':i.post(this._banzaiRoute,z,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(z);}this._reset();};x.prototype.addLatencyToSample=function(z,aa,ba,ca){'use strict';z.addInteger(ca+'query_start',ba.queryStart);z.addInteger(ca+'query_end',ba.queryEnd);z.addInteger(ca+'keypress_query_end',ba.keyPressToQueryEnd);z.addInteger(ca+'render',ba.render);z.addInteger(ca+'keypress_render',ba.keyPressToRender);aa[ca+'query_start']=ba.queryStart;aa[ca+'query_end']=ba.queryEnd;aa[ca+'keypress_query_end']=ba.keyPressToQueryEnd;aa[ca+'render']=ba.render;aa[ca+'keypress_render']=ba.keyPressToRender;};x.prototype.logToScuba=function(z,aa,ba,ca,da){'use strict';var ea={},fa=new k('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});fa.addInteger('sample_rate',ba.sample_rate);ea.sample_rate=ba.sample_rate;fa.addNormal('site',ba.site);ea.site=ba.site;fa.addDenorm('query',ca);ea.query=ca;var ga=z.payload||{};if(ga.entities){fa.addInteger('num_entities',ga.entities.length);ea.num_entities=ga.entities.length;}Object.keys(this.performanceTimings).forEach((function(ia){fa.addInteger(ia,this.performanceTimings[ia]);ea[ia]=this.performanceTimings[ia];}).bind(this),this);if(ga.results||ga.entries){var ha=(ga.results||ga.entries).length;fa.addInteger('num_results',ha);ea.num_results=ha;}if(ga.gzipped_payload_size!==undefined){fa.addInteger('gzipped_payload_size',ga.gzipped_payload_size);ea.gzipped_payload_size=ga.gzipped_payload_size;}if(aa.recv&&aa.render>aa.recv){fa.addInteger('time_render',aa.render-aa.recv);ea.time_render=aa.render-aa.recv;fa.addInteger('time_js_async',aa.recv);ea.time_js_async=aa.recv;}if(aa.payload_size){fa.addInteger('payload_size',aa.payload_size);ea.payload_size=aa.payload_size;}if(this.stats.time_render_null_state&&(!ca||ca.length===0)){fa.addInteger('time_render_null_state',this.stats.time_render_null_state);ea.time_render_null_state=this.stats.time_render_null_state;}fa.addInteger('query_id',z.queryId);ea.query_id=z.queryId;fa.addDenorm('user_id',l.getID());ea.user_id=l.getID();fa.addDenorm('session_id',this.stats.sid);ea.session_id=this.stats.sid;fa.addNormal('typeahead_type',da);ea.typeahead_type=da;if(aa.remoteQueryLatencies){this.addLatencyToSample(fa,ea,aa.remoteQueryLatencies,'remote_');fa.addInteger('remote_keypress_query_dispatch',aa.remoteQueryLatencies.keyPressToQueryDispatch);ea.remote_keypress_query_dispatch=aa.remoteQueryLatencies.keyPressToQueryDispatch;fa.addInteger('remote_keypress_query_start',aa.remoteQueryLatencies.keyPressToQueryStart);ea.remote_keypress_query_start=aa.remoteQueryLatencies.keyPressToQueryStart;fa.addNormal('inflight_requests',aa.remoteQueryLatencies.inflightRequests);fa.addInteger('inflight_requests',aa.remoteQueryLatencies.inflightRequests);ea.inflight_requests=aa.remoteQueryLatencies.inflightRequests;fa.addNormal('waiting_queries',aa.remoteQueryLatencies.waitingQueries);fa.addInteger('waiting_queries',aa.remoteQueryLatencies.waitingQueries);ea.waiting_queries=aa.remoteQueryLatencies.waitingQueries;}if(aa.cacheQueryLatencies)this.addLatencyToSample(fa,ea,aa.cacheQueryLatencies,'cache_');fa.post();j.log('search_facebar_js','typeahead',ea);};x.prototype.submitThroughAsyncRequest=function(z){'use strict';if(Object.keys(z).length>0)new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('handleErrorAfterUnload',true).setErrorHandler((function(aa){z.retry=true;new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('asynchronous_DEPRECATED',false).send();}).bind(this)).send();};var y=function(z,aa){if(!z||!aa)return;var ba=p.parse(aa);if(ba.flatValue[ba.flatValue.length-1]===' ')return ba.flatValue;var ca=ba.tokens[ba.tokens.length-1],da={};z.forEach(function(ia){da[ia]=(da[ia]||0)+1;});var ea={},fa=ba.tokens.slice(0,ba.tokens.length-1);fa.forEach(function(ia){ea[ia]=(ea[ia]||0)+1;});for(var ga=0;ga<z.length;++ga){var ha=z[ga];if(ha.indexOf(ca)===0&&da[ha]-(ea[ha]||0)>0){fa.push(ha);return fa.join(' ');}}return undefined;};Object.assign(x.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});f.exports=x;},null);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._typeahead=k;}j.prototype.enable=function(){'use strict';new h(this._typeahead);};Object.assign(j.prototype,{disable:i});f.exports=j;},null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(i){i.enableBehavior(h);};},3);
__d('SearchTypeaheadRenderer',['BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=' \u00B7 ',r=false;function s(t,u){var v=[],w=t.photos||t.photo;if(w){if(w instanceof Array){w=l.render(w);}else w=i.create('img',{alt:'',src:w});v.push(w);}var x;if(t.text){var y=t.alias,z=this.value,aa=t.text,ba=n.isDirectionRTL(aa.toString()),ca=j.isRTL(),da=ba&&!ca?'rtl':!ba&&ca?'ltr':'';x=[aa];if(y&&k.isQueryMatch(z,y)&&!k.isQueryMatch(z,aa))x.push(i.create('span',{className:'alias'},[' \xB7 '+y]));if(t.is_verified){x.push(h.renderBadge('xsmall','verified'));}else if(t.is_work_user)x.push(h.renderBadge('xsmall','work'));if(t.badge){x.push(i.create('span',{className:''},' \xB7 '));var ea=[t.badge];x.push(i.create('span',{className:'unSeenPosts'},ea));}v.push(i.create('span',{className:'text',dir:da},x));}if(t.category){var fa=[t.category];if(t.is_external)fa.push(i.create('span',{className:'arrow'}));var ga=t.message?'preCategory':'category';v.push(i.create('span',{className:ga},fa));}if(t.message)v.push(i.create('span',{className:'category'},[t.message]));var ha=t.subtextOverride||t.subtext;if(ha){var ia=[ha];if(t.saved_context){var ja=i.create('span',{className:'saved'},[t.saved_context]);ia.unshift(ja,q);}v.push(i.create('span',{className:'subtext'},ia));}var ka=t.classNames||t.type||'',la=t.is_external?'_blank':'',ma=!t.song&&t.path||'';if(ma){if(!/^https?\:\/\//.test(ma))ma=o.uri+ma.substr(1);ma+=(ma.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var na=i.create('a',{href:ma,rel:'ignore',target:la},v),oa=null;if(t.type==='header'){var pa=null,qa=null;if(t.uid==='recent'){qa=new m('/profile.php');qa.setQueryData({sk:'allactivity',log_filter:'search'});pa=p._("EDIT");}else if(t.uid==='pymk'){qa=new m('/find-friends/browser/');pa=p._("SEE ALL");}if(qa){oa=i.create('a',{href:qa,className:'typeaheadHeaderRightLink'},pa);na.setAttribute('class','typeaheadHeaderLeftLink');ka+=' typeaheadHeader';}}var ra=i.create('li',{className:ka},[na,oa]);if(t.text){ra.setAttribute('title',t.text);ra.setAttribute('aria-label',t.text);}if(this.showupadatedsuggestions&&!r){s.className+=' updatedSuggestionRows';r=true;}return ra;}s.className='search';f.exports=s;},null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');},3);
__d('legacy:Typeahead',['Typeahead'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.Typeahead=c('Typeahead');},3);
void 0;
__d("XSearchFacebarSurveyController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true},on_session_start:{type:"Exists",defaultValue:false},result_selected:{type:"Exists",defaultValue:false}});},null);
__d('AbandonedSessionSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this.core=m.getCore();this.data=m.getData();this.view=m.getView();this.tryToSubmitSurvey=this.tryToSubmitSurvey.bind(this);this.subscriptionsHandler=new i();}l.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',(function(){this.searchBoxFocused=true;this.resultSelected=false;}).bind(this)),this.data.subscribe('beforeQuery',(function(m,n){this.query=n.value||'';}).bind(this)),this.view.subscribe('select',(function(){this.resultSelected=true;this.tryToSubmitSurvey();}).bind(this)),this.core.subscribe('blur',this.tryToSubmitSurvey));};l.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};l.prototype.tryToSubmitSurvey=function(){'use strict';if(this.searchBoxFocused){this.openSurvey();this.resultSelected=false;this.searchBoxFocused=false;}};l.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var m=this.core.element;if(m==null)m=this.core.getElement();var n=this.normalizeValue(this.query),o=j.getURIBuilder().setString('id',k(m)).setString('query',n!=null?n:'').setString('session_id',this.data.queryData.sid).setExists('result_selected',this.resultSelected);this.request=new h().setMethod('post').setAllowCrossPageTransition(true).setURI(o.getURI());this.request.send();};l.prototype.normalizeValue=function(m){'use strict';return String(m).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'').toLowerCase();};f.exports=l;},null);
__d('TypeaheadSearchFilter',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[h.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),h.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),h.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},h.SUBSCRIBE_NEW)];};i.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(i){i.enableBehavior(h);};},3);
__d('SessionStartSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this.core=m.getCore();this.data=m.getData();this.subscriptionsHandler=new i();}l.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.data.subscribe('query',(function(){this.openSurvey();}).bind(this)));};l.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};l.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var m=j.getURIBuilder().setString('id',k(this.core.element)).setExists('on_session_start',true).setString('session_id',this.data.queryData.sid);this.request=new h().setMethod('post').setURI(m.getURI());this.request.send();};f.exports=l;},null);
__d('TypeaheadDetectQueryLocale',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',(function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}).bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;},null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',(function(){this._buildingQueryCache=true;}).bind(this));this._mergeUids=this._data.subscribe('mergeUids',(function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}).bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',(function(){this._buildingQueryCache=false;}).bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;},null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.view=j.getView();}i.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){h.inform('search/refreshRecentSearchesNullstate',{},h.BEHAVIOR_STATE);});};i.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=i;},null);
__d('TypeaheadRegulateMemorializedUsers',['TokenizeUtil'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype._filter=function(j,k){'use strict';if(j.type!=='user'||!j.memorialized)return true;var l=h.parse(j.text).tokens;if(l.length===1&&h.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=h.parse(k).tokens;return n.length>1&&h.isQueryMatch(k,m);};i.prototype.enable=function(){'use strict';this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){'use strict';this._filterRegistry.remove();this._filterRegistry=null;};Object.assign(i.prototype,{_filterRegistry:null});f.exports=i;},null);
__d('legacy:RegulateMemorializedUsersTypeaheadBehavior',['TypeaheadRegulateMemorializedUsers'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.regulateMemorializedUsers=function(i){i.enableBehavior(h);};},3);