/*!CK:2066195499!*//*1451950748,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["KUjbx"]); }

__d("SearchAwarenessEventTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLICK:"click",IMPRESSION:"impression",DISMISSAL:"dismissal",WEAK_DISMISSAL:"weak_dismissal",SYSTEM_FORCED_DISMISSAL:"system_forced_dismissal"};},null);
__d("SearchAwarenessUserAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE:"like",COMMENT:"comment",ARTICLE_CLICK:"article_click",COMPOSE_PUBLISH:"compose_publish",PAGE_LIKE:"page_like"};},null);
__d("SearchPivotType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PHOTO:"photo",PHOTO_EXPERIMENTAL:"photo_experimental",VIDEO:"video",FEED_SEARCH_KEYWORDS:"feed_search_keywords",SEARCH_AWARENESS_KEYWORDS:"search_awareness_keywords",ARTICLE_CLICK_ACTION:"ARTICLE_CLICK_ACTION",STORY_CLICK_ACTION:"STORY_CLICK_ACTION",STORY_LIKE_ACTION:"STORY_LIKE_ACTION",COMPOSER_PUBLISH_ACTION:"COMPOSER_PUBLISH_ACTION",FAN_PAGE_ACTION:"FAN_PAGE_ACTION",TRENDING_SERP_LOAD:"TRENDING_SERP_LOAD",PHOTOS_SERP_LOAD:"PHOTOS_SERP_LOAD",STORY_COMMENT_ACTION:"STORY_COMMENT_ACTION",SCROLL_ACTION:"SCROLL_ACTION",NEWS_FEED:"NEWS_FEED",PAGE:"PAGE",GROUP:"GROUP",TRENDING_SERP_LOAD_NON_INTEGRATION:"TRENDING_SERP_LOAD_NON_INTEGRATION",NEWS_FEED_SECONDARY:"NEWS_FEED_SECONDARY",POST_SEARCH_SERP:"POST_SEARCH_SERP",LEARNING_NUX:"LEARNING_NUX",LEARNING_NUX_SECOND_STEP:"LEARNING_NUX_SECOND_STEP",MOBILE_STORY_LIKE_ACTION:"MOBILE_STORY_LIKE_ACTION",MOBILE_STORY_COMMENT_ACTION:"MOBILE_STORY_COMMENT_ACTION",MOBILE_COMMENT_LIKE_ACTION:"MOBILE_COMMENT_LIKE_ACTION",TIMELINE:"TIMELINE",NEXT_TRENDING:"NEXT_TRENDING"};},null);
__d("TimelineFilterOptions",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALL:"all",REVIEW:"review",TAG_REVIEW:"tagreview",FACE_ALERTS:"facealertsreview",POSTSANDAPPS:"postsandapps",LOCATION:"location",PHOTOS:"photos",TAGGED_PHOTOS:"taggedphotos",OWN_PHOTOS:"ownphotos",LIKES:"likes",LIKED_INTERESTS:"likedinterests",LIKED_POSTS:"likedposts",GROUPS:"groups",GROUP_MEMBERSHIP:"groupmembership",GROUP_POSTS:"groupposts",HIDDEN:"hidden",SPAM:"spam",ALL_APPS:"apps",SEARCH:"search",ADS:"ads",CLUSTER:"cluster",APP:"app",STORIES:"stories",COLLECTION_ITEM:"citem",FITNESS:"fitness",OG_VIDEO:"ogvideo",SAVED_FOR_LATER:"saved",PRIVATE_NOTES:"private_notes",NOW:"now"};},null);
__d("WorkInviteSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={RHC_MODULE:"rhc_module",NEWSFEED_NUX:"newsfeed_nux",IOS_APP:"ios_app",ANDROID_APP:"android_app",BULK_UPLOAD:"bulk_upload",GROUP_INVITE_DIALOG:"group_invite_dialog",GROUP_INVITE_TYPEAHEAD:"group_invite_typeahead",SEARCH_RESULT:"search_result",SEARCH_RHC:"search_rhc",SEARCH_TYPEAHEAD:"search_typeahead",SELF_INVITE:"self_invite",SELF_INVITE_VIA_INVITE_LINK:"self_invite_via_invite_link"};},null);
__d('BrowseFacebarHighlighter',['CSS','csx','NodeHighlighter'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};Object.assign(k,j,{getHighlightCandidates:function(){return ["._53ad"];},isDiscardNode:function(l){return h.hasClass(l,'DefaultText');},createSegmentedRegex:function(l){l=this.escapeAndAddBidirectionalCharsToTokens(l);return '(^|\\s|\\b)('+l.join('|')+')';}});f.exports=k;},null);
__d('getElementChildren',['isElementNode'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){return Array.from(j.children||j.childNodes).filter(h);}f.exports=i;},null);
__d('StaticContainer.react',['React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h.Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){'use strict';return !!l.shouldUpdate;};k.prototype.render=function(){'use strict';var l=this.props.children;if(l===null||l===false)return null;return h.Children.only(l);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('TypeaheadFacepileX.react',['React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'TypeaheadFacepile',renderPic:function(k,l){var m='url('+this.props.photos[k]+')';return (h.createElement('span',{className:i('splitpic',l),key:k,style:{backgroundImage:m}}));},renderPics:function(){var k=this.props.size;if(k>=3){return [this.renderPic(0,'leftpic'),this.renderPic(1,'toppic'),this.renderPic(2,'bottompic')];}else return [this.renderPic(0,'leftpic'),this.renderPic(1)];},render:function(){return (h.createElement('span',babelHelpers._extends({},this.props,{className:i(this.props.className,"splitpics clearfix")}),this.renderPics()));}});f.exports=j;},null);
__d("XSearchAwarenessController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/awareness\/",{origin:{type:"String"},story_id:{type:"String"},actor_id:{type:"String"},global_share_id:{type:"String"},query:{type:"String"},dismiss:{type:"Exists",defaultValue:false},source_object_id:{type:"String"},user_action:{type:"String"}});},null);
__d('SearchAwarenessDismissButton',['Arbiter','AsyncRequest','DOM','EventListener','XSearchAwarenessController'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={init:function(n,o,p,q){var r=k.listen(o,'click',function(){j.remove(n);r.remove();h.inform('SearchAwareness.dismissUnit');m.dismiss(p,q);});},dismiss:function(n,o){var p=l.getURIBuilder().setString('origin',n).setString('source_object_id',o).setExists('dismiss',true);new i().setURI(p.getURI()).send();}};f.exports=m;},null);
__d('SearchAwarenessDispatcher',['Arbiter','AsyncRequest','AttachmentRelatedShareConstants','Banzai','CSS','DOM','EventListener','NavigationMessage','PageLikeConstants','Run','SearchAwarenessDismissButton','SearchAwarenessEventTypes','SearchAwarenessUserAction','SearchAwarenessWebConfig','SearchPivotType','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','XSearchAwarenessController','csx','cx','getScrollPosition','joinClasses','setTimeoutAcrossTransitions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){if(c.__markCompiled)c.__markCompiled();var ga=false,ha={},ia={},ja,ka={init:function(){if(!u.master_gk)return;if(ga)return;ja=new w();ja.addSubscriptions(h.subscribe(o.NAVIGATION_BEGIN,ka._cleanup.bind(this)),h.subscribe(p.LIKED,ka._onFan.bind(this)),h.subscribe('composer/publish',ka._onComposerPublish.bind(this)),h.subscribe('LitestandComposer/publish',ka._onComposerPublish.bind(this)),h.subscribe(j.ARTICLE_CLICK,ka._onArticleClick.bind(this)));q.onLeave(ka._cleanup.bind(this));ga=true;},_cleanup:function(){ja&&ja.release();ja=null;ga=false;var la=m.scry(document.body,"._18az")[0];if(la==null)return;l.removeClass(document.body,"_18at");l.removeClass(document.body,"_18au");l.removeClass(document.body,"_18av");l.removeClass(document.body,"_18aw");l.removeClass(la,"_18ax");},_onFan:function(la,ma){if(!u.has_on_fan)return;ka._dispatch(ma.target,{origin:v.FAN_PAGE_ACTION,actor_id:ma.profile_id,user_action:t.PAGE_LIKE});},_onLike:function(la,ma){if(!ma.ft_id)return;x.getFeedbackTarget(ma.ft_id,function(na){var oa=na.entidentifier;if(oa==null||ha[oa]!=null)return;ha[oa]=true;ka._dispatch(ma.target,{actor_id:na.actorid,story_id:na.entidentifier,origin:ma.origin,query:ma.query,user_action:t.LIKE});});},_onPhotoClick:function(la,ma){if(!u.has_on_photo_click)return;ka._dispatch(ma.target,{story_id:ma.storyid,origin:v.STORY_CLICK_ACTION});},_onArticleClick:function(la,ma){if(!u.has_on_article_click)return;var na=ma.global_share_id!=null?String(ma.global_share_id):null;ka._dispatch(null,{global_share_id:na,story_id:ma.share_id,origin:v.ARTICLE_CLICK_ACTION,user_action:t.ARTICLE_CLICK});},initOnComment:function(la,ma){if(!u.master_gk)return;if(!ga)ka.init();if(ja==null)return;ja.addSubscriptions(h.subscribe('UFI/CommentAddedActive',function(na,oa){var pa={origin:la,query:ma,ft_id:oa};ka._onComment(na,pa);}));},_onComment:function(la,ma){if(!ma.ft_id)return;x.getFeedbackTarget(ma.ft_id,function(na){var oa=na.entidentifier;if(oa==null||ia[oa]!=null)return;ia[oa]=true;ka._dispatch(ma.target,{actor_id:na.actorid,story_id:na.entidentifier,origin:ma.origin,query:ma.query,user_action:t.COMMENT});});},_onComposerPublish:function(la,ma){if(!u.has_on_composer_publish)return;ka._dispatch(null,{story_id:ma.content_id,origin:v.COMPOSER_PUBLISH_ACTION,user_action:t.COMPOSE_PUBLISH});},initOnLike:function(la,ma,na){if(!u.master_gk)return;if(!ga)ka.init();if(ja==null)return;ja.addSubscriptions(h.subscribe(y.ActionLinkLike,function(oa,pa){pa.origin=la;pa.query=ma;if(na)pa.target=null;ka._onLike(oa,pa);}));},onPageLoad:function(la,ma,na){if(!u.master_gk)return;if(!ga)ka.init();ka._dispatch(null,{query:ma,origin:la,actor_id:na});},initProfileScopedSearch:function(){if(!u.master_gk)return;if(!ga)ka.init();if(ja==null)return;var la=m.scry(document.body,"._5ibl")[0];if(la!=null){ka._dispatch(la,{origin:v.TIMELINE,specified_target:true});}else ja.addSubscriptions(h.subscribe('profileSearchBoxLoaded',function(){var ma=m.scry(document.body,"._5ibl")[0];if(ma==null)return;ka._dispatch(ma,{origin:v.TIMELINE,specified_target:true});}));},onPhotosSERPLoad:function(la){if(la==null||!u.master_gk)return;ka._dispatch(null,{query:la,origin:v.PHOTOS_SERP_LOAD});},_dispatch:function(la,ma,na){if(!ma.origin)return true;var oa=z.getURIBuilder().setString('origin',ma.origin);if(ma.story_id)oa.setString('story_id',ma.story_id);if(ma.actor_id)oa.setString('actor_id',ma.actor_id);if(ma.global_share_id)oa.setString('global_share_id',ma.global_share_id.toString());if(ma.query)oa.setString('query',ma.query);if(ma.user_action)oa.setString('user_action',ma.user_action);var pa=new i().setURI(oa.getURI()),qa=la;if(la!=null&&!ma.specified_target)qa=this.findStory(la);if(qa==null){var ra=m.scry(document.body,"._585-")[0],sa=m.scry(document.body,"._5ob9")[0];qa=ra!=null?ra:sa;}if(qa)pa.setRelativeTo(qa);if(na)pa.setHandler(na);if(qa||na)pa.send();return true;},showAwarenessExperienceNow:function(la,ma,na){if(!ga)ka.init();if(ma==null||!ga||ja==null)return;var oa=undefined;ja.addSubscriptions(ma.subscribe('cancel',function(){oa=true;r.dismiss(la);}),ma.subscribe('hide',function(){if(!oa&&na){k.post('search_awareness',{origin:la,event_type:s.WEAK_DISMISSAL},{signal:true});}else if(!oa&&!na)k.post('search_awareness',{origin:la,event_type:s.SYSTEM_FORCED_DISMISSAL},{signal:true});}),h.subscribe('SearchAwareness.weakDismissUnit',function(){if(ma!=null){oa=false;ma.hide();}}),h.subscribe('SearchAwareness.dismissUnit',function(){if(ma!=null){oa=true;ma.hide();}}));ma.show();q.onLeave(function(){ma=null;});},findStory:function(la){var ma="^div._4-u2",na=m.scry(la,ma);return na.length===1?na[0]:null;},onTrendingSERPLeave:function(la,ma){if(!ga)ka.init();if(la==null||!ga)return;q.onLeave(function(){ea(function(){q.onAfterLoad(function(){ka._dispatch(null,{query:la,origin:v.TRENDING_SERP_LOAD});});},ma);});},openBelowBluebarUnit:function(la){if(!ga)ka.init();var ma=m.scry(document.body,"._18a-")[0];if(ma==null)return;var na;switch(la){case v.TRENDING_SERP_LOAD:na="_18at";break;case v.GROUP:na="_18au";break;case v.TRENDING_SERP_LOAD_NON_INTEGRATION:na="_18av";break;case v.PAGE:na="_18aw";break;}if(na==null)return;l.addClass(document.body,na);l.addClass(ma,"_18ay");var oa=h.subscribe('SearchAwareness.dismissUnit',function(){l.removeClass(document.body,na);});ja&&ja.addSubscriptions(oa);},trigger:function(la,ma,na,oa,pa){if(!u.master_gk)return;if(!ga)ka.init();ka._dispatch(null,{query:ma,origin:la,actor_id:na,story_id:oa,global_share_id:pa});},triggerLearningNUX:function(la,ma,na,oa,pa){if(!u.master_gk)return;if(!ga)ka.init();ka._dispatch(null,{query:ma,origin:la,actor_id:na,story_id:oa,global_share_id:pa},function(qa){var ra=m.create('div',{className:da("_3lik","hidden_elem"),'data-origin':la});m.appendContent(ra,qa.payload);m.appendContent(document.body,ra);setTimeout(function(){h.inform('SearchAwareness.triggerLearningNUX',{origin:la});},0);});},onTimelineScroll:function(la,ma,na,oa){if(!u.master_gk)return;if(!ga)ka.init();var pa=false,qa=n.listen(document,'scroll',fa(function(event){if(!pa&&ca(window).y>ma){pa=true;ka.onPageLoad(la,na,oa);qa.remove();}},500));}};f.exports=ka;},null);
__d('FacebarSemanticQuery',['CurrentUser','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='str',k=/\*[\w\-]+\(/g;function l(v){var w={me:h.getID()};return Object.assign(w,Array.isArray(v.semantic_map)?{}:v.semantic_map);}function m(v,w){var x=l(v);if(typeof x[w]!=='undefined')return String(x[w]);return w;}function n(v){return new i("/profile.php").addQueryData({id:v});}function o(v,w){var x=[w],y=[],z=v.browse_functions,aa=v.search_path;while(x.length>0){var ba=x.pop();if(!r(ba)){y.push(ba);continue;}var ca=ba.substring(0,ba.indexOf('(')),da=ca,ea=s(ba);if(!z[ca]){y=[];break;}var fa=z[ca].minNumParams,ga=z[ca].maxNumParams;if(x.length>0)if(z[ca].numParamsUnbounded){if(y.length>0)ca+='-'+ea.length;}else if(ea.length!=1&&ea.length>fa||ea.length===0&&fa!=ga)ca+='-'+ea.length;x.push(ca);for(var ha=0;ha<ea.length;ha++){if(ea[ha].length===0)continue;if(z[da].allowsFreeText){x.push(j+'/'+encodeURIComponent(encodeURIComponent(ea[ha])));}else x.push(ea[ha]);}}return new i(aa+y.join('/'));}function p(v){return v.replace(/['"\[\]]/g,'');}function q(v,w){var x=JSON.parse(w),y=[];if(x.length>0)y=[x[0]];var z=[],aa=v.browse_functions,ba=v.search_path;while(y.length>0){var ca=y.pop();if(typeof ca!=='object'){z.push(p(ca));continue;}var da=Object.keys(ca)[0],ea=da,fa=ca[da];if(!aa[da]){z=[];break;}var ga=aa[da].minNumParams,ha=aa[da].maxNumParams;if(y.length>0)if(aa[da].numParamsUnbounded){if(z.length>0)da+='-'+fa.length;}else if(fa.length!=1&&fa.length>ga||fa.length===0&&ga!=ha)da+='-'+fa.length;y.push(da);for(var ia=0;ia<fa.length;ia++){if(fa[ia].length===0)continue;if(aa[ea].allowsFreeText){y.push(j+'/'+encodeURIComponent(fa[ia]));}else y.push(fa[ia]);}}return new i(ba+z.join('/'));}function r(v){return (/^[a-z\-]+\(.*\)$/.test(v));}function s(v){if(!r(v)&&v.indexOf('param_')!==0)return [v];var w=v.substring(v.indexOf('(')+1,v.length-1);if(w.length===0)return [];return t(w);}function t(v){var w=[],x=0,y=0;for(var z=0;z<v.length;++z)if(v[z]==','&&y===0){w.push(v.substring(x,z));x=z+1;}else if(v[z]=='('){y++;}else if(v[z]==')')y--;w.push(v.substring(x,v.length));return w;}function u(v,w,x){'use strict';this.facebarConfig=v;this.unmapped=(w||"").trim();this.mapped=m(v,this.unmapped);this.position=null;this.$FacebarSemanticQuery1=typeof x!=='undefined'?x:false;}u.prototype.isEntity=function(){'use strict';return (/^\d+$/.test(this.mapped));};u.prototype.isShortcut=function(){'use strict';return this.mapped.indexOf('shortcut(')===0;};u.prototype.isImplemented=function(){'use strict';return this.mapped&&!this.mapped.match(k);};u.prototype.isSemanticForest=function(){'use strict';return this.$FacebarSemanticQuery1;};u.prototype.getUnimplemented=function(){'use strict';return (this.mapped.match(k)||[]).map(function(v){return v.substr(1,v.length-2);});};u.prototype.getURI=function(){'use strict';if(this.isEntity()){return n(this.mapped);}else if(this.isShortcut()){return new i(this.mapped.substr(9,this.mapped.length-10));}else if(this.isSemanticForest()){return q(this.facebarConfig,this.unmapped);}else return o(this.facebarConfig,this.unmapped);};f.exports=u;},null);
__d('FacebarURI',['FacebarJSConstants','FacebarSemanticQuery','KeywordsSearchResultConfig','URI','WWWBase'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={event:{ref:h.eventLinkRef},user:{fref:'ts'},page:{fref:'ts'}},n={getSearchRawPrefix:function(){return 'search';},getSearchPath:function(){return '/'+this.getSearchRawPrefix()+'/';},getURI:function(o,p){var q=null,r=!p.song&&!p.isExtendedResult&&p.path;if(r){q=new k(r);if(p.type in m)q.addQueryData(m[p.type]);}else if(j.use_seo_urls&&p.type===j.result_type&&p.semantic.startsWith('str/')){q=new k(j.seo_top_url).addQueryData('q',p.keyword?p.keyword:p.text);}else{var s=new i(o,p.semantic);if(s&&s.isImplemented())q=s.getURI();}return q&&n.getQualifiedURI(q);},getQualifiedURI:function(o){var p=new k(o);if(!p.getDomain()){var q=new k(l.uri);p.setProtocol(q.getProtocol()).setDomain(q.getDomain()).setPort(q.getPort());}return p;}};f.exports=n;},null);
__d('FacebarFindPeopleAndPages',['FacebarGlobalOptions','FacebarJSConstants','FacebarStructuredText','FacebarURI','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={insertInto:function(p,q,r){p=this._cleanQuery(p);var s=this._getInsertionIndex(p,q);if(s>-1){var t=this._createFindPeopleAndPagesResult(p,r);q.splice(s,0,t);}},_getInsertionIndex:function(p,q){if(!p||!h.findPeopleAndPages)return -1;var r=q.some(this._isUserOrPageSuggestion);if(!r)return -1;var s=-1;for(var t=0;t<q.length;t++)if(this._isEntitySuggestion(q[t]))s=t+1;return s;},_isUserOrPageSuggestion:function(p){return p.type==='user'||p.type==='page';},_isEntitySuggestion:function(p){return p.type!==i.keywordType&&p.type!==i.grammarType;},_cleanQuery:function(p){return String(p).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'');},_createFindPeopleAndPagesResult:function(p,q){var r='str/'+p+'/keywords_entities',s=n._("Find all people and pages named \"{query}\"",[n.param('query',p)]);return {type:'grammar',results_set_type:'browse_type_blended',text:p,id:p,uid:p,query_string:p,icon_class:"_207",isSeeMore:true,isPeopleAndPagesSuggestion:true,structure:j.fromString(s),semantic:r,uri:k.getQualifiedURI(new l('/search/'+r)),fromCache:q,tags:{displayedSeeMore:true}};}};f.exports=o;},null);
__d('FacebarKeywordSearchUtils',['FacebarURI','FacebarStructuredText','KeywordsSearchResultConfig','URI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=function(n){var o=0;while(o<n.length)if(n[o].exactMatchKeyword){n.splice(o,1);}else ++o;},m={addExactMatch:function(n,o,p){if(!o.length)return;var q,r;for(var s=0,t=o.length;s<t;s++){r=o[s];if(r.type==='grammar')continue;q=true;break;}if(!q)return;var u=this.getExactMatchKeywordResult(n);if(!u)return;var v=Math.min(o.length,p),w=v;for(s=0;s<v;s++){r=o[s];if(r.exactMatchKeyword)return;if(r.cost>j.default_cost)--w;if(r.type!==j.result_type)continue;u.backendCost=r.cost+j.exact_match_cost_delta_from_best;u.cost=r.backendCost;l(o);o.splice(s,0,u);return;}l(o);o.splice(Math.min(Math.min(v,p-1),w),0,u);},getExactMatchKeywordResult:function(n){if(!n||n.is_empty||!n.raw_text)return;var o=n.raw_text.toLowerCase().replace(/\s{2,}/g,' ').trim(),p=j.query_prefix_blacklist;for(var q=0;q<p.length;q++)if(o.startsWith(p[q]))return;var r=this.makeFacebarEntry(o);return this._makeFacebarResult(r,n.cache_id.length);},makeFacebarEntry:function(n){var o=null,p=null;if(j.gsv2_results_page){p='str/'+encodeURIComponent(n).replace(/%20/g,'+')+'/'+j.gsv2_browse_edge;o=h.getQualifiedURI(new k('/search/'+p));}else{o=h.getQualifiedURI(new k(j.results_page_url).addQueryData('q',n));p=j.shortcut+'('+o.toString()+')';}if(j.use_seo_urls)o=h.getQualifiedURI(new k(j.seo_top_url).addQueryData('q',n));return {semantic:p,text:n,type:j.result_type,resultsSetType:j.result_set_type,uid:j.uid_prefix+n,iconClass:j.icon_class,uri:o,structure:i.fromString(n)};},_makeFacebarResult:function(n,o){var p={semantic:n.semantic,structure:[{type:'grammar',text:n.text,uid:n.semantic}],type:n.type,resultsSetType:n.resultsSetType,cost:j.default_cost,cache_id_length:o,parse:{display:[{type:'grammar',uid:j.uid_prefix+n.text}],remTokens:[],suffix:''},iconClass:n.iconClass,exactMatchKeyword:true};p.tuid=JSON.stringify({semantic:p.semantic,structure:p.structure});return p;}};f.exports=m;},null);
__d('FacebarGSv2Echo',['FacebarGlobalOptions','FacebarJSConstants','FacebarKeywordSearchUtils','FacebarStructuredText','FacebarURI','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={insertInto:function(q,r,s,t){var u=p.normalizeValue(q);if(!this._shouldInsert(q,r))return;var v=r.findIndex((function(z){return z.isSpecialIntent&&this._isKeywordSuggestion(z)&&u===p.normalizeValue(z.text);}).bind(this),this),w=h.showEcho&&(!h.renderKeywordSnippets||v<0);if(!w)return;var x=this._removeExactMatchAndReturnSubtext(q,r),y=this._createEchoResult(q,s,x,t);if(t){if(h.singleStateClientInjections){r.unshift(this._createSingleStateResult(o._("{fullName} videos",[o.param('fullName',u)]),{isVideos:true}));r.unshift(this._createSingleStateResult(o._("{fullName} photos",[o.param('fullName',u)]),{isPhotos:true}));}r.unshift(y);}else r.push(y);},_shouldInsert:function(q,r){q=p.normalizeValue(q);if(!q||!h.graphSearchV2)return false;for(var s=0;s<r.length;s++){var t=r[s];if(t.type===i.keywordType&&q===p.normalizeValue(t.text))return false;}return true;},_isKeywordSuggestion:function(q){return q.type===i.keywordType||q.type===i.grammarType;},_removeExactMatchAndReturnSubtext:function(q,r){var s='';q=p.normalizeValue(q);for(var t=0;t<r.length;t++){var u=r[t];if(this._isKeywordSuggestion(u)&&q===p.normalizeValue(u.text)){if(u.subtext)s=u.subtext;r.splice(t,1);return s;}}return s;},normalizeValue:function(q){return String(q).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'').toLowerCase();},_createEchoResult:function(q,r,s,t){q=p.normalizeValue(q);var u=j.makeFacebarEntry(q),v={};if(h.renderKeywordSnippets)if(t&&h.singleStateClientInjections){v.boldedSubtext=s||o._("Posts");}else v.subtext=s||o._("Search Facebook");return babelHelpers._extends({type:i.keywordType,results_set_type:i.browseTypes.keyword,text:q,id:q,uid:q,query_string:q,icon_class:"_5b1w",isSingleState:t,exactMatchKeyword:true,structure:k.fromString(q),semantic:u.semantic,uri:u.uri,fromCache:r,tags:{}},v);},_createSingleStateResult:function(q,r){q=p.normalizeValue(q);var s=j.makeFacebarEntry(q),t=undefined;if(h.renderKeywordSnippets)if(r.isPhotos){t=o._("Photos");}else if(r.isVideos){t=o._("Videos");}else t=o._("Posts");return babelHelpers._extends({type:i.keywordType,results_set_type:i.browseTypes.keyword,text:q,id:q,uid:q,query_string:q,icon_class:"_5b1w",exactMatchKeyword:r.isPhotos==null&&r.isVideos==null,structure:k.fromString(q),semantic:s.semantic,uri:s.uri,boldedSubtext:t,tags:{},isSingleState:true},r);}};f.exports=p;},null);
__d("XAtWorkInvitesSearchDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/work\/invite\/search_typeahead_dialog\/",{source:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('FacebarInviteCoworkers',['WorkInviteSource','FacebarGlobalOptions','FacebarStructuredText','XAtWorkInvitesSearchDialogController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={insertInto:function(o,p,q){o=this._cleanQuery(o);var r=this._getInsertionIndex(o,p);if(r>-1){var s=this._createInviteCoworkersResult(o,q);p.splice(r,0,s);}},_getInsertionIndex:function(o,p){if(!o||!i.inviteCoworkers)return -1;return p.length;},_cleanQuery:function(o){return String(o).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'');},_createInviteCoworkersResult:function(o,p){var q=m._("Invite \"{query}\" to Facebook at work",[m.param('query',o)]),r=k.getURIBuilder().setString('source',h.SEARCH_TYPEAHEAD).getURI();return {uid:o,icon_class:"_5yiv",isSeeMore:true,isAsync:true,structure:j.fromString(q),asyncURI:r,fromCache:p};}};f.exports=n;},null);
__d('FacebarNoFlickerResults',['FacebarGSv2Echo','FacebarGlobalOptions','FacebarJSConstants','FacebarKeywordSearchUtils','FacebarStructuredText','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=[],p={},q=undefined,r={insertInto:function(s,t,u,v){t.forEach(function(ga){ga.isInvalidated=false;});s=h.normalizeValue(s);var w=s.length===0,x=t.filter(function(ga){return ga.type===j.keywordType&&!ga.exactMatchKeyword;}),y=x.filter(function(ga){return !ga.exactMatchKeyword;}),z=x.length;if(y.length>1)if(w){o=[];}else o=y.slice(0,2);if(p[s]||u===true&&v===false||z>=i.default_num_top_results_to_show){p[s]=true;if(w){o=[];}else o=y.slice(0,2);return;}if(v===false)return;var aa=function(){if(ca){if(da>=ba.length)return 'break';ea=ba[da++];}else{da=ba.next();if(da.done)return 'break';ea=da.value;}var ga=ea;if(!t.some(function(ha){return ha.text===ga.text;})){ga.isInvalidated=true;t.push(ga);}};for(var ba=o,ca=Array.isArray(ba),da=0,ba=ca?ba:ba[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ea,fa=aa();if(fa==='break')break;}if(s.length<2||q==null)q=t.filter(function(ga){return ga.type!=='keyword';})[0];if(q==null)return;t.push(this._createResult(n._("{fullName} photos",[n.param('fullName',q.text.toLowerCase())])));t.push(this._createResult(n._("{fullName} posts",[n.param('fullName',q.text.toLowerCase())])));},_createResult:function(s){s=h.normalizeValue(s);var t=k.makeFacebarEntry(s),u=undefined;if(i.renderKeywordSnippets)u=n._("Search Facebook");return {type:j.keywordType,results_set_type:j.browseTypes.keyword,text:s,id:s,uid:s,query_string:s,icon_class:"_5b1w",exactMatchKeyword:true,structure:l.fromString(String(s)),semantic:t.semantic,uri:t.uri,subtext:u,isInvalidated:true,tags:{}};}};f.exports=r;},null);
__d('FacebarResultStore',['Arbiter','FacebarGlobalOptions','FacebarJSConstants','FacebarKeywordSearchUtils','FacebarResultStoreUtils','FacebarStructuredText','KeywordsSearchResultConfig','TokenizeUtil','SearchI18nMatch','SearchPivotType','concatMap','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=3;function v(w,x,y,z){'use strict';this.facebarConfig=w;this.facebarConfig.grammar_stop_words_penalty=this.facebarConfig.grammar_stop_words_penalty||2;this.facebarConfig.grammar_stop_words=this.facebarConfig.grammar_stop_words||{};this.facebarConfig.options=z;this.injectedSuggestionCount=0;this.tokenize=x;this.getEntry=y;this.typeaheadTypeMap=this.facebarConfig.mapped_types;this.facebarConfig.typeahead_types.forEach(function(aa){this.typeaheadTypeMap[aa]=aa;},this);this.unicodeMatch=new p({prefix_hangul_conjoining_jamo:true});this.resetCaches();}v.prototype.transformStructured=function(w){'use strict';var x=[],y=[],z='',aa='';w.forEach(function(da,ea){if(da.isType('text')){z+=da.getText();aa=aa==null?null:aa+da.getText();}else{var fa=z.match(/\"/g);if(fa&&fa.length%2)z=z.replace(/\s+$/,'')+'"';if(z.length){Array.prototype.push.apply(x,this.tokenize(z));y.push(z);z='';}x.push(da.toStruct());y.push({uid:String(da.getUID()),type:this._getFBObjectType(da.getTypePart(1)),text:da.getText()});aa=null;}},this);if(z.length){if(z[z.length-1]=='\'')z=z.substr(0,z.length-1);Array.prototype.push.apply(x,this.tokenize(z));y.push(z);if(z[z.length-1]==' ')x.push('');}var ba=JSON.stringify(y),ca=ba.replace(/\]$/,'').replace(/\"$/,'');ca=ca.replace(/\s{2,}/g,' ');return {tokens:x,text_form:ba,is_empty:!!ba.match(/^\[(\"\s*\")?\]$/),raw_text:aa,cache_id:ca};};v.prototype.resetCaches=function(){'use strict';this.resetBootstrapCache();this.resetQueryCache();};v.prototype.resetBootstrapCache=function(){'use strict';this.bootstrapCache={};};v.prototype.resetQueryCache=function(){'use strict';this.queryCache={'':{tokens:[],results:[]}};};v.prototype.setNullState=function(w){'use strict';this.facebarConfig.null_state=w.map(this._extractStructure,this);};v.prototype.addEntryToNullState=function(w){'use strict';if(this.facebarConfig.null_state){var x=this.facebarConfig.entity_cost+w.grammar_costs['{'+w.type+'}'],y=l.processEntityResult(w.type,w.uid,w.text,x);this.facebarConfig.null_state.unshift(y);}};v.prototype.addRecentEntryToNullState=function(w){'use strict';if(!this.facebarConfig.null_state)return;this.removeDuplicateInNullstateIfAvailable(w);var x=babelHelpers._extends({},w,{isRecent:true,isNullState:true,type:j.keywordType,structure:m.fromString(w.text),tuid:JSON.stringify({semantic:w.semantic,structure:w.structure})});if(w.icon_class)x.iconClass=w.icon_class;if(w.keywordBootstrapType===j.keywordBootstrapTypes.recent){x.iconClass="_5b1w";delete x.keywordBootstrapType;}if(w.results_set_type)x.resultsSetType=w.results_set_type;x.isInjectedSuggestion=false;this.insertEntryIntoRightPosition(x,true);};v.prototype.addSuggestionEntryToNullState=function(w,x){'use strict';if(!this.facebarConfig.null_state||this.injectedSuggestionCount===u)return;var y=this.removeDuplicateInNullstateIfAvailable(w);switch(x){case q.STORY_LIKE_ACTION:this.category=t._("Based on posts you liked");break;case q.STORY_COMMENT_ACTION:this.category=t._("Based on posts you commented on");break;default:this.category=t._("Based on posts you interacted with");}var z=babelHelpers._extends({},w,{isRecent:false,isSuggestion:true,isTrending:false,isNullState:true,type:j.keywordType,structure:[{text:w.text,type:'keyword'}],tuid:JSON.stringify({semantic:w.semantic,structure:w.text}),isInjectedSuggestion:true,category:this.category});if(!i.hasRecentOnTopNullState)z.null_state_position='top';this.insertEntryIntoRightPosition(z,false);if(!y){h.inform('FacebarTypeahead.injectedSuggestion');++this.injectedSuggestionCount;}};v.prototype.removeDuplicateInNullstateIfAvailable=function(w){'use strict';var x,y=false;if(w.isInjectedSuggestion){x=w.semantic;}else x=decodeURIComponent(w.semantic);for(var z=0;z<this.facebarConfig.null_state.length;z++){var aa=this.facebarConfig.null_state[z];if(aa.semantic===x){this.facebarConfig.null_state.splice(z,1);y=true;break;}}return y;};v.prototype.clearRecentSearches=function(){'use strict';if(!this.facebarConfig.null_state)return;this.facebarConfig.null_state=this.facebarConfig.null_state.filter(function(w){return !w.isRecent;});};v.prototype.insertEntryIntoRightPosition=function(w,x){'use strict';var y=x?this.facebarConfig.null_state.findIndex(function(aa){return aa.isRecent;}):this.facebarConfig.null_state.findIndex(function(aa){return aa.isSuggestion;}),z=x?i.hasRecentOnTopNullState:!i.hasRecentOnTopNullState;if(y<0){if(z){this.facebarConfig.null_state.unshift(w);}else{if(this.facebarConfig.null_state.length>=i.maxResultCount)this.facebarConfig.null_state.shift();this.facebarConfig.null_state.push(w);}return;}this.facebarConfig.null_state.splice(y,0,w);};v.prototype.setSortFunction=function(w){'use strict';this._sortFunction=w;};v.prototype.addBootstrap=function(w){'use strict';var x=this.bootstrapCache;w.forEach(function(y){var z=this.getEntry(y);z.bootstrapped=true;var aa=this.tokenize(z.textToIndex,true);if(z.tokens)Array.prototype.push.apply(aa,z.tokens.split(' '));Array.prototype.push.apply(aa,this.getExtraTokensToIndex(z));aa.forEach(function(ba){if(!x.hasOwnProperty(ba))x[ba]={};x[ba][y]=true;});},this);};v.prototype.getExtraTokensToIndex=function(w){'use strict';var x=[];if(w.alias!=null)x.push(w.alias.toLowerCase());return x;};v.prototype.addNullStateToQueryCache=function(w,x){'use strict';this.saveResults(this.facebarConfig.null_state,w,true);if(i.includeInitialTypeNamedX)this.saveResults(x,w,true);};v.prototype.extendResult=function(w,x){'use strict';var y=w.cache_id.substr(x.cache_id_length);if((y.indexOf("\"")>=0||x.tokens.length===0)&&!x.isTypeNamedXBootstrap)return null;var z;if(!!x.isTypeNamedXBootstrap){if(w.raw_text!==null){z=x.ext_text+y;}else if(w.tokens.length!==0&&w.tokens[0].text){z=w.tokens[0].text;}else return null;}else if(x.tokens[x.tokens.length-1].length!==0){z=x.ext_text+y;}else z=x.ext_text+" "+y;if(z.length===0)return null;x.ext_node.text=z;x.parse.entTokens=[z];x.parse.suffix="";this._extractStructure(x);if(!this._punctRegexp)this._punctRegexp=new RegExp(o.getPunctuation(),'g');x.semantic=x.ext_semantic.replace('(ext_string)','('+z.replace(this._punctRegexp,"")+')');x.isExtendedResult=true;return x;};v.prototype.getResults=function(w,x){'use strict';if(w.tokens.length===0||w.tokens.length==1&&w.tokens[0]==='')return {results:this.facebarConfig.null_state||[],null_state:true};var y=this._getBestQueryCache(w.cache_id),z=y.results.filter(function(ra){return !ra.isRecent;}),aa={},ba=this._getBootstrapMatchByType(w.tokens,aa),ca=this._addMatchingBootstrapResults(w,ba[0]||{},aa);if(i.limitBootstrapResult)ca=ca.slice(0,i.limitBootstrapResultNum);var da=[],ea=[];if(i.hasKeywordBootstrap){da=ca.filter(function(ra){return ra.type===j.keywordType;});var fa=ca.filter(function(ra){return ra.keywordBootstrapType===j.keywordBootstrapTypes.recent;});if(i.onlyPrefixMatching)fa=fa.filter(function(ra){return this.unicodeMatch.prefixMatch(ra.structure[0].text,w.tokens[0]);},this);fa.sort(function(ra,sa){return ra.structure[0].text.length-sa.structure[0].text.length;});var ga=ca.filter((function(ra){return ra.keywordBootstrapType===j.keywordBootstrapTypes.trending&&this.unicodeMatch.prefixMatch(ra.structure[0].text,w.tokens[0]);}).bind(this));ga.sort(function(ra,sa){return ra.structure[0].text.length-sa.structure[0].text.length;});var ha=[];for(var ia=0;ia<ga.length;ia++){var ja=ga[ia].trendingTopicID;if(!ja)continue;if(ha[ja]){ga.splice(ia--,1);}else ha[ja]=ja;}var ka=ca.filter(function(ra){return ra.keywordBootstrapType===j.keywordBootstrapTypes.serp_first&&this.unicodeMatch.prefixMatch(ra.structure[0].text,w.tokens[0]);},this),la=ca.filter(function(ra){return ra.keywordBootstrapType===j.keywordBootstrapTypes.popular&&this.unicodeMatch.prefixMatch(ra.structure[0].text,w.tokens[0]);},this),ma=la.concat(ka);ma.sort(function(ra,sa){sa.popularSearchScore-ra.popularSearchScore;});da=fa.concat(ga).concat(ma);ea=ca.filter(function(ra){return ra.type!==j.keywordType;});ea.sort(this._sortFunction);ca=ea.concat(da);}Array.prototype.push.apply(ca,r(this._getResultsFromCache.bind(this,ba,w),z));if(!i.hasKeywordBootstrap){ca.sort(this._sortFunction);if(!i.graphSearchV2&&i.keywordSearchEnabled)k.addExactMatch(w,ca,x);}var na={},oa=[],pa=false,qa=0;ca.forEach(function(ra){var sa=m.fromStruct(ra.structure);if(sa.hasType('blank')){oa.push(ra);return;}ra.semantic=ra.semantic.toLowerCase();if(!ra.termMatches)ra.termMatches=aa[ra.semantic];var ta=v.getUniqueSemantic(ra.semantic),ua=v.getUniqueSemantic(ra.alternateSemantic);if(!ta)return;var va=na[ta]||ua&&na[ua];if(va){if(ra.isJSBootstrapMatch){va.isJSBootstrapMatch=true;va.bootstrapCost=ra.bootstrapCost;}else if(va.isJSBootstrapMatch&&ra.backendCost!==undefined&&va.backendCost===undefined)va.backendCost=ra.backendCost;if(!!ra.tags)Object.assign(va.tags||{},ra.tags);return;}if(pa&&ra.blankFilled)return;if(ra.type.indexOf('browse_type')>=0){qa+=1;if(this.facebarConfig.maxGrammarResults!==undefined&&qa>this.facebarConfig.maxGrammarResults)return;}pa=pa||!!ra.blankFilled;na[ta]=ra;if(ua)na[ua]=ra;oa.push(ra);},this);return {results:oa};};v.prototype.saveResults=function(w,x,y,z,aa){'use strict';w=w.map(this._processBackendResult,this);var ba=[],ca={},da={};w.forEach(function(fa){da[fa.semantic]=true;});var ea=this._getBestQueryCache(x.cache_id);ea.results.forEach(function(fa){if(fa.type==='websuggestion')return;if(fa.exactMatchKeyword)return;if(fa.isExtendedResult)return;if(fa.semantic in ca)return;var ga=this._getDifferenceArrayTokens(fa.tokens,x.tokens),ha=this._getNumTokensMatching(ga,fa);ha=this._tryMatchingFinalInsertedEntity(ga,ha,fa);if(ha>0&&ha==ga.length||(fa.type==="shortcut"&&fa.termMatches.indexOf(x.tokens[x.tokens.length-1]))>=0){fa.cacheOnlyResult=!da[fa.semantic];ba.push(fa);}},this);if(i.limitCacheResult)ba=ba.slice(0,i.limitCacheResultNum);w.forEach(function(fa){fa.tokens=x.tokens;fa.cache_id_length=x.cache_id.length;if(!!fa.isTypeNamedXBootstrap)++fa.cache_id_length;ba.push(fa);},this);if(aa)Array.prototype.push.apply(ba,aa);if(this.queryCache[x.cache_id]===undefined)this.queryCache[x.cache_id]={};Object.assign(this.queryCache[x.cache_id],{tokens:x.tokens,results:ba,incomplete:y},z);};v.prototype.alreadyKnown=function(w){'use strict';return !!this.queryCache[w]&&!this.queryCache[w].incomplete;};v.prototype.stripBrackets=function(w){'use strict';return w.replace(/^[\[\{]/,'').replace(/[\]\}]$/,'');};v.prototype._extractStructure=function(w){'use strict';function x(aa,ba,ca){return {type:aa==='ent:extend_string'?'text':aa,text:ba,uid:ca||null};}function y(aa,ba){aa.split(' ').forEach(function(ca){if(ca!==''){if(ba)w.chunks.push(w.structure.length);w.structure.push(x('text',ca));}w.structure.push(x('text',' '));});w.structure.pop();}function z(aa){if(w.structure.length!==0||j.nonGrammarTypes[w.type])return aa;return aa.charAt(0).toUpperCase()+aa.substr(1);}w.structure=[];w.chunks=[];w.parse.display.forEach(function(aa){if(typeof aa==='string'){y(z(aa),true);}else if(aa.type==='ent:extend_string'){y(aa.text,true);}else if(aa.uid){var ba=this.getEntry(aa.uid,aa.fetchType);w.chunks.push(w.structure.length);if(ba==null)throw new Error('No entry found for uid \"'+aa.uid+'\", type \"'+aa.fetchType+'\" and piece text \"'+aa.text+'\"');if(ba.grammar_like){y(z(ba.text),false);}else{var ca=aa.type;if(aa.fetchType)ca+=':'+aa.fetchType;w.structure.push(x(ca,ba.text,aa.uid));}}else if(aa.type=='blank'){w.chunks.push(w.structure.length);w.structure.push(x(aa.type,'...'));}},this);return w;};v.prototype._getDifferenceArrayTokens=function(w,x){'use strict';if(!w.length)return [''].concat(x);var y=w.length-1,z=w[y];if(z==='')z=w[--y];var aa='';if(typeof z=='string'&&y<x.length)aa=x[y].substr(z.length);if(aa===''&&y+1<x.length&&x[y+1]==='')return [''];return [aa].concat(x.slice(y+1));};v.prototype._processBackendResult=function(w){'use strict';if(w.isTypeNamedXBootstrap&&w.cache_id_length)return w;w.semantic=w.semantic.toString();w.backendCost=w.cost;this._extractStructure(w);if(w.type.match(/^\{.*\}$/))w.useExtendedIndex=true;if(w.alternateSemantic)w.alternateSemantic=w.alternateSemantic.toLowerCase().replace(/\[(\d*)\]/g,'$1');if(w.parse.extendable){var x=null;w.parse.display.forEach(function(da){if(da.type!=="ent:extend_string")return;x=da;},this);if(!x||w.semantic.match(/\[.*\]/).length!==1){w.parse.extendable=false;}else{w.ext_node=x;w.ext_semantic=w.semantic.replace(/\[(.*)\]/g,'ext_string');w.ext_text=x.text;}}if(w.semantic.match(/\[\d*\]/)){var y=w.parse,z=y.pos;if(z===undefined){w.semantic=w.semantic.replace(/\[(\d*)\]/g,'$1');}else{var aa=y.remTokens[y.remTokens.length-1];if(y.remTokens.length&&w.structure[w.chunks[aa]]&&w.structure[w.chunks[aa]].uid){z=y.remTokens[y.remTokens.length-1];w.completed=true;}var ba=w.structure[w.chunks[z]].uid;if(ba===null){w.semantic=w.semantic.replace(/\[(\d*)\]/g,'$1');}else{var ca=new RegExp('\\['+ba+'\\]','g');w.unsubstituted_semantic=w.semantic;w.semantic=w.semantic.replace(ca,ba);if(y&&y.disambiguation&&y.disambiguation.length>0){y.disambiguation=y.disambiguation.filter(function(da){return da.indexOf('['+ba+']')!==-1;});y.unsubstituted_disambiguation=y.disambiguation.splice(0);y.disambiguation=y.disambiguation.map(function(da){return da.replace(ca,ba);});}}}}w.semantic=w.semantic.replace(/\[(.*)\]/g,'$1');w.tuid=JSON.stringify({semantic:w.semantic,structure:w.structure});return w;};v.prototype._sortFunction=function(w,x){'use strict';return (w.cost||0)-(x.cost||0);};v.prototype._getResultsFromCache=function(w,x,y){'use strict';var z=x.tokens,aa=this._getDifferenceArrayTokens(y.tokens,z),ba=[],ca=this._getNumTokensMatching(aa,y),da=this._tryMatchingFinalInsertedEntity(aa,ca,y);if(y.parse.extendable||y.isExtendedResult){var ea=this.extendResult(x,y);if(ea)ba.push(ea);if(y.isExtendedResult)return ba;}if(da>0&&da==aa.length&&!(y.type===n.result_type&&aa.length===1&&aa[0]==='"'))ba.push(y);if(y.type==="shortcut"&&y.termMatches.indexOf(x.tokens[z-1])>=0)ba.push(y);return ba;};v.prototype._addMatchingBootstrapResults=function(w,x,y){'use strict';var z=w.tokens;return r((function(aa){var ba=x[aa];if(ba===undefined)return [];var ca=[],da=l.getQueryFeatures(w);ba.forEach(function(ea){var fa=this.getEntry(ea,aa);if(!this._isTitleTermMatch(z,fa)&&!this._isAliasMatch(w.raw_text,fa))return;var ga=this._isExactNameMatch(z,fa)||this._isAliasMatch(w.raw_text,fa),ha=ga?0:this.facebarConfig.non_title_term_match_penalty,ia=this._isNonGrammarTermMatch(z,fa),ja=fa.grammar_costs?fa.grammar_costs['{'+aa+'}']:0,ka=ja+ha+this.facebarConfig.entity_cost+this.facebarConfig.grammar_stop_words_penalty*!ia,la=l.processEntityResult(aa,ea,fa.text,ka,w,da,y,ga,!ia);la.bootstrapCost=ka;la.isJSBootstrapMatch=true;if(aa===j.keywordType){la.iconClass=fa.iconClass;la.keywordBootstrapType=fa.keywordBootstrapType;la.parse=fa.parse;la.subtext=fa.subtext;la.boldedSubtext=fa.boldedSubtext;la.semantic=fa.semantic;la.popularSearchScore=fa.popularSearchScore;la.trendingTopicID=fa.trendingTopicID;la.photo=fa.photo;}ca.push(la);},this);return ca;}).bind(this),this.facebarConfig.bootstrap_types);};v.prototype._isTitleTermMatch=function(w,x){'use strict';var y=w[0]||{};if(typeof y=='object')return false;var z=x.titleToIndex;return w.length===1?this._isTokenizePrefixMatch(y,z):o.isExactMatch(y,z);};v.prototype._isExactNameMatch=function(w,x){'use strict';var y=w[0]||{};if(typeof y=='object')return false;var z=x.text;for(var aa=0;aa<w.length-1;++aa)if(w[aa]!==''&&!o.isExactMatch(w[aa],z))return false;return w.length>0&&this._isTokenizePrefixMatch(w[w.length-1],z);};v.prototype._isAliasMatch=function(w,x){'use strict';return x.alias!=null&&w!=null&&o.isExactMatch(x.alias,w);};v.prototype._isNonGrammarTermMatch=function(w,x){'use strict';var y=o.parse(x.titleToIndex.toLowerCase()),z=y.tokens.filter(function(ca){return ca!==''&&!this.facebarConfig.grammar_stop_words[ca];},this);z=z.join(' ');for(var aa=0;aa<w.length;++aa){if(typeof w[aa]=='object')return true;var ba=aa===w.length-1?this._isTokenizePrefixMatch(w[aa],z):o.isQueryMatch(w[aa],z);if(ba)return true;}return false;};v.prototype._getBootstrapMatchByType=function(w,x){'use strict';if(w.length===0)return [];var y=w.map(function(){return {};}),z=w[w.length-1]==='',aa={},ba,ca=z?w.length-1:w.length,da=w[ca-1];if(ca&&da.uid){this._pushBootstrapEntryAtPosition(y,ca-1,da.uid);return y;}for(var ea in this.bootstrapCache)if(ca&&this.unicodeMatch.prefixMatch(ea,da)&&(!z||ea===da))for(ba in this.bootstrapCache[ea])if(!aa[ba]){aa[ba]=1;this._addMatchedTerm(ba,ea,x);this._pushBootstrapEntryAtPosition(y,ca-1,ba);}for(var fa=ca-2;fa>=0;fa--){if(typeof w[fa]=='object')break;if(w[fa].length&&w[fa][0]=='"')break;for(ba in this.bootstrapCache[w[fa]]){if(!aa[ba])aa[ba]=0;if(aa[ba]+fa==ca-1){++aa[ba];this._addMatchedTerm(ba,w[fa],x);this._pushBootstrapEntryAtPosition(y,fa,ba);}}}return y;};v.prototype._addMatchedTerm=function(w,x,y){'use strict';(y[w]=y[w]||[]).push(x);return y;};v.prototype._pushBootstrapEntryAtPosition=function(w,x,y){'use strict';var z=this.getEntry(y);if(!z)return;var aa=[];if(z.grammar_costs){aa=Object.keys(z.grammar_costs).map(function(da){return this.stripBrackets(da);},this);}else aa=[z.type];for(var ba=0;ba<aa.length;ba++){var ca=aa[ba];if(w[x][ca]===undefined)w[x][ca]=[];w[x][ca].push(y);}};v.prototype._getNumTokensMatching=function(w,x){'use strict';var y=0,z=x.parse,aa=w.length,ba=null,ca=null;if(z.pos!==undefined){var da=x.structure[x.chunks[z.pos]];if(da){ba=da.uid;ca=da.type.split(':')[2];}}x.outputTokensUsed=[];x.termMatches=[];if(ba){y=this._prefixMatchEntity(w,z,ba,x.outputTokensUsed,ca,!!x.useExtendedIndex,x.termMatches);if(y===0||y===aa)return y;}else if(z.suffix&&aa==1&&z.suffix.indexOf(w[0])===0){return aa;}else if(z.suffix==w[0]){++y;}else return 0;var ea=[];z.remTokens=z.remTokens||[];for(var fa=0;fa<z.remTokens.length;fa++){if(typeof w[y]!='string'||x.chunks.length<=z.remTokens[fa]||x.structure.length<=x.chunks[z.remTokens[fa]]||x.structure[x.chunks[z.remTokens[fa]]].uid)break;var ga=x.structure[x.chunks[z.remTokens[fa]]].text;ea.push(ga.toLowerCase());}y=this._greedyMatchText(ea,w,y,z.remTokens,x.outputTokensUsed,x.isNullState);if(y==aa-1&&w[y]==='')return aa;return y;};v.prototype._prefixMatchEntity=function(w,x,y,z,aa,ba,ca){'use strict';x.entTokens=x.entTokens||[];if(x.entTokens.length===0){if(w[0]!=='')return 0;if(x.possessive&&w.length>1&&w[1]=='\'s'){z.push([x.pos+1]);return 2;}else return 1;}var da=false,ea=this.getEntry(y,aa);if(typeof aa!=='undefined'&&aa!==ea.fetchType)return 0;var fa=this.tokenize(ba?ea.textToIndex:ea.text,true),ga=[];for(var ha=0;ha<w.length+x.entTokens.length-1;ha++)if(ha<x.entTokens.length-1){ga.push(x.entTokens[ha]);}else if(ha==x.entTokens.length-1){ga.push(x.entTokens[ha]+w[0]);}else ga.push(w[ha-x.entTokens.length+1]);var ia=-x.entTokens.length+1;for(var ja=0;ja<ga.length;++ja){var ka=ga[ja];if(typeof ka!='string')break;if(ka===''){ia++;continue;}var la=false;for(var ma=0;ma<fa.length;ma++)if(fa[ma]==ka||ja===ga.length-1&&fa[ma].indexOf(ka)===0){if(ca)ca.push(fa[ma]);fa[ma]='';la=true;++ia;break;}if(la)continue;if(!x.possessive||ka.length<=2||ka.substr(ka.length-2)!='\'s')break;var na=ka.substr(0,ka.length-2);for(ma=0;ma<fa.length;ma++)if(fa[ma]==na){++ia;if(z)da=true;break;}break;}if(ia>0){if(da)z.push([x.pos+1]);return ia;}if(z===undefined)return 0;var oa=w[0],pa=oa;if(x.possessive&&oa.length>=2&&oa.substr(oa.length-2)=='\'s')pa=oa.substr(0,oa.length-2);x.suffix=x.suffix||'';if(w.length==1&&x.suffix.indexOf(oa)===0||x.suffix==pa||x.suffix==oa){if(pa!=oa&&x.suffix==pa)z.push([x.pos+1]);return 1;}return 0;};v.prototype._tryMatchingFinalInsertedEntity=function(w,x,y){'use strict';if(!y.completed||x<0)return x;var z=y.parse,aa=z.remTokens[z.remTokens.length-1],ba=y.structure[y.chunks[aa]],ca=this.getEntry(ba.uid,ba.type),da=this.tokenize(ca.text,true);x=this._greedyMatchText(da,w,x);if(x==w.length-1&&w[x]==='')return w.length;return x;};v.prototype._greedyMatchText=function(w,x,y,z,aa,ba){'use strict';for(var ca=0;ca<w.length;ca++){var da=w[ca];if(da==x[y]){if(aa!==undefined)aa.push(z[ca]);++y;continue;}if(y===x.length-1&&da.indexOf(x[y])===0){if(aa!==undefined)if(da==x[y]){aa.push([z[ca]]);}else aa.push([z[ca],x[y].length]);return x.length;}if(ba)break;}return y;};v.prototype._getBestQueryCache=function(w){'use strict';for(var x=w.length;x>=0;x--){var y=this.queryCache[w.slice(0,x)];if(y)return y;}};v.prototype._getFBObjectType=function(w){'use strict';if(this.typeaheadTypeMap[w]){return this.typeaheadTypeMap[w];}else return 'page';};v.prototype._isTokenizePrefixMatch=function(w,x){'use strict';return o.isPrefixMatch(this.unicodeMatch.prefixMatchPrepare(w),this.unicodeMatch.prefixMatchPrepare(x));};v.EPSILON=1e-05;v.getUniqueSemantic=function(w){if(!w)return;var x=[],y=[],z=[];w='('+w+')';var aa=w,ba=false;w.replace(/[\(\),]/g,function(ca,da){var ea;switch(ca){case ',':var fa=z.length-1;ea=aa.substr(z[fa],da-z[fa]);x[fa].push(ea);z[fa]=da+1;break;case '(':z.push(da+1);x.push([]);y.push(da+1);break;case ')':if(z.length===0)throw w+' is not a valid semantic string';var ga=z.pop();ea=aa.substr(ga,da-ga);ea=decodeURI(ea.replace(/%/g,'%25').replace(/\s/g,'+').trim());var ha=x.pop();ha.push(ea);var ia=ha.sort();for(var ja=1;ja<ia.length;ja++)if(ia[ja]==ia[ja-1])ba=true;var ka=ia.join(',');aa=aa.substr(0,y.pop())+ka+aa.substr(da);break;}return ca;});if(ba)return '';return aa.replace(/\((.*)\)/,'$1');};f.exports=v;},null);
__d("FacebarTimerUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getTimestamp:function(){return Date.now();}};f.exports=h;},null);
__d("FacebarTokenizer",["TokenizeUtil"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i="[^\"]",j=["\\s's","'s","\""+i+"*\"?"],k=[[/\s+$/,''],[/\"\s+/,'"'],[/\s+\"/,'"'],[/\"\"/,''],[/^\"$/,''],[/\s+/,' ']],l={tokenize:function(m,n){var o=[],p=0;m=m.replace(/\s/g,' ').toLowerCase();m.replace(new RegExp(j.join('|'),'g'),function(r,s){if(s>p){var t=m.substr(p,s-p);Array.prototype.push.apply(o,h.parse(t).tokens.slice(0));}var u=r;for(var v=0;v<k.length;v++){var w=k[v];u=u.replace(w[0],w[1]);}if(o.length&&u=='\'s'){o[o.length-1]+=u;}else if(u!=='')o.push(u);if(n)Array.prototype.push.apply(o,h.parse(r).tokens);p=s+r.length;});if(p<m.length){var q=m.substr(p,m.length-p);Array.prototype.push.apply(o,h.parse(q).tokens.slice(0));}return o;}};f.exports=l;},null);
__d('FacebarTypeaheadL2Terms',['FacebarJSConstants'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=3,j={addL2Terms:function(k,l,m,n){if(!n.suggestBackendL2Terms)return k;var o=[],p=[];k.forEach(function(r){if(r.exactMatchKeyword){r.tags.l2_suggestion=true;o.push(r);}else if(r.isKeywordL2){r.tags.l2_suggestion=true;r.type='l2suggestion';o.push(r);}else if(r.type!=='keywords')p.push(r);});var q=0;return p.map(function(r){if(h.entityTypes[r.type])if(q<i){q++;}else if(o.length)return o.pop();return r;});}};f.exports=j;},null);
__d('FacebarTypeaheadTypeNamedX',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={browse_type_user:'user',browse_type_page:'page',browse_type_place:'place',browse_type_group:'group',browse_type_application:'app'},i=1,j=2;k.addTypeNamedX=function(l,m,n,o){'use strict';var p=new k(),q=[],r=[];l.forEach(function(w){if(w.tags!=null)delete w.tags.hiddenSeeMore;if(w.isSeeMore){q.push(w);}else r.push(w);});if(!o.showTypeNamedX){q.forEach(function(w){if(w.tags!=null)w.tags.hiddenSeeMore=true;});return r;}var s=p.buildTypeNamedXBuckets(r,q,n,o),t=s[0],u=s[1];t.forEach(function(w){if(w.tags!=null)w.tags.displayedSeeMore=true;});var v=p.replaceResults(r,m,t);Array.prototype.push.apply(v,u);v.forEach(function(w){if(w.tags!=null)w.tags.hiddenSeeMore=true;});return r;};k.prototype.buildTypeNamedXBuckets=function(l,m,n,o){'use strict';var p={};o=o||{};l.forEach(function(t,u){var v=t.render_type||t.type;if(p[v]===undefined)p[v]={index:u,matchCount:0};if(!o.alwaysDisplayTypeNamedX&&t.text.toLowerCase().indexOf(n.toLowerCase())<0)return;p[v].matchCount++;});var q=[],r=[];m.forEach(function(t){var u=h[t.results_set_type];if(p[u]!==undefined&&p[u].matchCount>=i){q.push([t,p[u].index]);}else r.push(t);});q.sort(function(t,u){return t[1]-u[1];});var s=q.map(function(t){return t[0];});Array.prototype.push.apply(r,s.slice(j));s.length=Math.min(s.length,j);return [s,r];};k.prototype.replaceResults=function(l,m,n){'use strict';var o=[],p=Math.min(0,l.length-m)+n.length;for(var q=0;q<p;++q){var r=-1;for(var s=0;s<Math.min(m-q,l.length);++s){var t=l[s];if(!t.exactMatchKeyword&&t.type!=='websuggestion')r=s;}if(r>=0){o.push(l[r]);l.splice(r,1);}}Array.prototype.unshift.apply(l,n);return o;};function k(){'use strict';}f.exports=k;},null);
__d('ResultsBucketizer',['FacebarJSConstants','FacebarGlobalOptions'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){'use strict';this.$ResultsBucketizer1=k;this.$ResultsBucketizer2=l;}j.trimResults=function(k,l,m){'use strict';var n=[];k.forEach(function(o,p){if(o.indexBeforeBuckets>l)n.push({index:p,originalIndex:o.indexBeforeBuckets});});n.sort(function(o,p){return o.originalIndex-p.originalIndex;}).slice(m).sort(function(o,p){return p.index-o.index;}).forEach(function(o){k.splice(o.index,1);});};j.mergeBuckets=function(k,l){'use strict';var m=[];for(var n in l)if(!l[n].rule.hidden&&(!l[n].rule.xor||!l[l[n].rule.xor]))m.push(l[n]);m.sort(function(o,p){var q=(o.rule.position||0)-(p.rule.position||0);if(q!==0)return q;return o.results[0].indexBeforeBuckets-p.results[0].indexBeforeBuckets;});k.length=0;m.forEach((function(o,p){if(o.rule.maxPromotions!=null&&p<m.length-1)j.trimResults(o.results,m[p+1].results[0].indexBeforeBuckets,o.rule.maxPromotions);Array.prototype.push.apply(k,o.results);}).bind(this));};j.prototype.$ResultsBucketizer3=function(k,l){'use strict';if(l.propertyName==null)return l.bucketName||'default';var m=this.$ResultsBucketizer2(k,l.propertyName);if(m==null||l.propertyValue!=null&&''+m!==l.propertyValue)return false;return l.bucketName||l.propertyName+'.'+m;};j.prototype.$ResultsBucketizer4=function(k,l,m){'use strict';var n={},o=false;if(i.renderKeywordsFirst){o=true;}else o=k[0]!=null&&k[0].type===h.keywordType;if(o&&m==null)m=i.default_num_top_results_to_show;k.forEach((function(p,q){l.some((function(r){var s=this.$ResultsBucketizer3(p,r);if(s===false)return false;if(n[s]==null)n[s]={results:[],rule:r};if(o&&s===h.keywordType&&n[s].results.length>=m)return true;if(!!r.maxResults&&n[s].results.length>=r.maxResults)return true;p.bucketLineage.push({bucketName:s,bucketIndex:n[s].results.length});n[s].results.push(p);return true;}).bind(this));}).bind(this));return n;};j.prototype.$ResultsBucketizer5=function(k,l,m){'use strict';var n=this.$ResultsBucketizer1[l];if(!n)return {};var o=this.$ResultsBucketizer4(k,n,m);for(var p in o){var q=o[p].rule.subBucketRules;if(!!q)this.$ResultsBucketizer5(o[p].results,q,m);}j.mergeBuckets(k,o);return o;};j.prototype.$ResultsBucketizer6=function(k,l,m){'use strict';if(l.length<=m)return l.slice();var n=l.map(function(p){return p.indexBeforeBuckets;}),o=n.sort(function(p,q){return p-q;})[m];if(o==null)return l;return l.filter(function(p){return p.indexBeforeBuckets<o;});};j.prototype.bucketize=function(k,l,m,n){'use strict';k.forEach(function(p,q){p.bucketLineage=[];p.indexBeforeBuckets=q;});m=m||{};Object.assign(m,this.$ResultsBucketizer5(k,'main',n));var o=this.$ResultsBucketizer6(m,k,l);return o;};f.exports=j;},null);
__d('FacebarDataSource',['Arbiter','AsyncRequest','FacebarFindPeopleAndPages','FacebarGSv2Echo','FacebarNoFlickerResults','FacebarGlobalOptions','FacebarInviteCoworkers','FacebarJSConstants','FacebarResultStore','FacebarResultStoreUtils','FacebarKeywordSearchUtils','FacebarStructuredText','FacebarTimerUtils','FacebarTokenizer','FacebarTypeNamedXBootstrap','FacebarTypeNamedXTokenOptions','FacebarTypeaheadL2Terms','FacebarTypeaheadTypeNamedX','FacebarURI','ResultsBucketizer','ResultsBucketizerConfig','SearchDataSource','Vector','ViewportBounds','invariant','queryThenMutateDOM','setTimeoutAcrossTransitions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){if(c.__markCompiled)c.__markCompiled();var ja,ka,la=50,ma={};ja=babelHelpers.inherits(na,ca);ka=ja&&ja.prototype;function na(oa){'use strict';ka.constructor.call(this,oa);this._fetched_null_state=null;this._initialQueryData=null;this._curQueryId=-1;this._maxRemoteQueryId=-1;this._single_state=false;this._waitingQueries=0;this.mixGrammarAndEntity=oa.mixGrammarAndEntity!==undefined?oa.mixGrammarAndEntity:true;this._num_topresults_to_show=null;this.grammarVersion=oa.grammarVersion||'';if(!oa.grammarOptions)oa.grammarOptions={};this.recordingRoute='banzai_vital';this._maxGrammarResults=oa.grammarOptions.maxGrammarResults;this.nullStateEndpoint=oa.nullStateEndpoint||'/ajax/browse/null_state.php';this.setNullStateData(oa.nullStateData||{},true);this._minQueryLength=oa.minQueryLength||-1;this._performShortQuery=oa.performShortQuery||false;this._fixProcessLean=oa.grammarOptions.fixProcessLean||false;this.hasGSPreload=m.hasGSPreload;this.gsPreloadOptions=m.gsPreloadParams;this.throttleExecuteQuery();this.throttleSendRemoteQuery();this.throttleRenderResults();this.resultStoreOptions=oa.grammarOptions||{};this.resultStoreOptions.useNewExactNameMatch=oa.grammarOptions.useNewExactNameMatch==="true";this.defaultQuery=null;this._bypassBucketizer=false;this._resultsBucketizer=new aa(ba.rules,function(pa,qa){switch(qa){case 'isSeeMore':return pa.isSeeMore;case 'objectType':return pa.type;case 'resultSetType':return pa.results_set_type;case 'renderType':return pa.render_type||pa.type;case 'cacheOnlyResult':return pa.cacheOnlyResult;case 'closeEntity':return pa.bootstrapped||(!!pa.tags?pa.tags[qa]:undefined);default:return !!pa.tags?pa.tags[qa]:undefined;}});this.fetchNullState();this.initWithConfig(m.grammarConfig);h.subscribe('FacebarTypeahead.injectSuggestion',(function(pa,qa){return this.addSearchSuggestionToNullState(qa);}).bind(this));}na.prototype.addSearchSuggestionToNullState=function(oa){'use strict';if(!oa.query)return;var pa=r.makeFacebarEntry(oa.query);this.resultStore.addSuggestionEntryToNullState(pa,oa.interaction);this.inform('reloadNullstate',true);};na.prototype.initWithConfig=function(oa){'use strict';this.facebarConfig=oa;this.createResultStore();this.blockees={};if(this._fetched_null_state){this.setNullState(this._fetched_null_state);this._fetched_null_state=null;}};na.prototype.throttleExecuteQuery=function(){'use strict';var oa=m.executeQueryThrottleTime;this.executeQueryThrottled=ia.withBlocking(this.executeQuery,oa,this);};na.prototype.throttleSendRemoteQuery=function(){'use strict';var oa=m.sendRemoteQueryThrottleTime;if(oa===0){this.sendRemoteQueryThrottled=this.sendRemoteQuery;}else if(m.lazyThrottleRemoteQuery){var pa=Date.now(),qa=m.enableSendRemoteQueryDelay,ra=m.sendRemoteQueryDelayTime;this.sendRemoteQueryThrottled=(function(){for(var sa=arguments.length,ta=Array(sa),ua=0;ua<sa;ua++)ta[ua]=arguments[ua];var va=Date.now();if(pa+oa<va){pa=va;if(qa){ha((function(){this.sendRemoteQuery.apply(this,ta);}).bind(this),ra);}else this.sendRemoteQuery.apply(this,ta);}}).bind(this);}else this.sendRemoteQueryThrottled=ia.withBlocking(this.sendRemoteQuery,oa,this);};na.prototype.throttleRenderResults=function(){'use strict';var oa=m.renderThrottleTime;if(oa===0){this.renderResultsThrottled=this.renderResults;return;}var pa=Date.now();this.renderResultsThrottled=(function(qa,ra,sa,ta,ua){var va=Date.now();if(sa||pa+oa<va){pa=va;this.renderResults(qa,ra,sa,ta,ua);}}).bind(this);};na.prototype.createResultStore=function(){'use strict';this.facebarConfig.maxGrammarResults=this._maxGrammarResults;this.resultStore=new p(this.facebarConfig,u.tokenize,this.getEntry.bind(this),this.resultStoreOptions);if(this._fixProcessLean)this._processLean();this.subscribe('setSortFunction',(function(oa,pa){this.resultStore.setSortFunction(pa);}).bind(this));};na.prototype.dirty=function(){'use strict';this._nullStateFetched=false;this.resultStore.resetCaches();ka.dirty.call(this);};na.prototype.addEntries=function(oa){'use strict';this.resultStore.addBootstrap(this.processEntries(oa));};na.prototype._processLean=function(){'use strict';if(this._fixProcessLean){if(this._leanPayload&&this.resultStore){var oa,pa=this._leanPayload.entries;for(var qa in pa){oa=this.getEntry(qa);if(!oa)continue;for(var ra in pa[qa]){if(!oa.grammar_costs)oa.grammar_costs={};oa.grammar_costs['{'+ra+'}']=pa[qa][ra];}}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}}else ka._processLean.call(this);};na.prototype.setNullStateData=function(oa,pa){'use strict';if(pa)this.nullStateData={grammar_version:this.grammarVersion};Object.assign(this.nullStateData,oa);return this;};na.prototype.setNullState=function(oa){'use strict';this._null_state=oa;this.processEntries(this._null_state.entities);this.resultStore.setNullState(this._null_state.queries);var pa=v.typeNamedX;pa.forEach(function(qa){qa.parse.extendable=true;qa.qid=this._curQueryId;qa.isTypeNamedXBootstrap=true;},this);this.resultStore.addNullStateToQueryCache(this.getRawStructure(s.fromString('')),pa);this._typeNamedXResults={};pa.forEach(function(qa){this._typeNamedXResults[o.grammarToEntityTypes[qa.resultsSetType]]=qa;},this);};na.prototype.getNullStateTrending=function(){'use strict';return this._null_state.trending;};na.prototype.setSingleState=function(oa){'use strict';this._single_state=oa;};na.prototype.getSingleState=function(){'use strict';return this._single_state;};na.prototype.overrideNullState=function(oa){'use strict';!(this._null_state!=null)?fa(0):undefined;this._original_null_state=this._original_null_state||this._null_state;this.setNullState(oa);};na.prototype.restoreNullState=function(){'use strict';if(this._original_null_state)this.setNullState(this._original_null_state);};na.prototype.fetchNullState=function(){'use strict';if(this._nullStateFetched){this.activityStart();setTimeout(this.activityEnd.bind(this),0);return;}var oa=new i().setURI(this.nullStateEndpoint).setData(this.nullStateData).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(pa){if(this.resultStore){this.setNullState(pa.payload);this.inform('nullstateReady',true);}else this._fetched_null_state=pa.payload;this._nullStateFetched=true;}).bind(this)).setFinallyHandler(this.activityEnd.bind(this));this.activityStart();oa.send();};na.prototype.fetchNUXResults=function(oa){'use strict';if(!m.allowGrammar)return;oa=oa||{};var pa=new i().setURI(oa.URI).setData(this.nullStateData).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(qa){if(this.resultStore){this.overrideNullState(qa.payload);oa.success&&oa.success();}}).bind(this)).setFinallyHandler(this.activityEnd.bind(this));this.activityStart();pa.send();};na.prototype.toTypeaheadEntryUid=function(oa){'use strict';var pa,qa=s.fromStruct(oa.structure),ra=qa.getFragment(0);if(qa.getCount()==1&&ra.isType('ent')){var sa=ra.getType().split(':')[2];pa=this.getEntry(ra.getUID(),sa);pa.type=this.resultStore.stripBrackets(oa.type);}else{pa=this.getEntry(oa.tuid);if(!pa){pa={dynamic_cost:oa.dynamic_cost,extra_uri_params:oa.extra_uri_params,memcache:oa.fromMemcache,photo:oa.photo,results_set_type:oa.resultsSetType,tuid:oa.tuid,type:oa.type,uid:oa.tuid,tags:oa.tags};this.processEntries([pa]);pa=this.getEntry(oa.tuid);}pa.icon_class=oa.iconClass;if(m.renderKeywordSnippets){pa.category=oa.category;pa.subtext=oa.subtext;pa.boldedSubtext=oa.boldedSubtext;}}pa.error_info=oa.errorInfo;pa.logInfo=oa.logInfo;pa.structure=qa;pa.text=pa.structure.toString();pa.queryTypeText=oa.queryTypeText;pa.semantic=!!oa.isSingleState&&oa.singleStateSemantic?oa.singleStateSemantic:oa.semantic;pa.alternateSemantic=oa.alternateSemantic;pa.tree=oa.tree;pa.cost=oa.cost;pa.isSeeMore=!!oa.isSeeMore;pa.isNullState=!!oa.isNullState;pa.isSingleState=!!oa.isSingleState;pa.keywordSource=oa.keywordSource;pa.keyword=oa.keyword;var ta=oa.keyword_type;pa.isTrending=!!oa.isTrending||oa.keywordBootstrapType===o.keywordBootstrapTypes.trending||ta===o.keywordTypes.trending;pa.isCelebrity=ta===o.keywordTypes.celebrity;pa.isFootball=ta===o.keywordTypes.football;pa.isPhotos=ta===o.keywordTypes.photos;pa.isVideos=ta===o.keywordTypes.videos;pa.isHashtag=ta===o.keywordTypes.hashtag;pa.isLocal=ta===o.keywordTypes.local||ta===o.keywordTypes.local_category;pa.isCompany=ta===o.keywordTypes.company;pa.isMovie=ta===o.keywordTypes.movie;pa.isHappeningNow=ta===o.keywordTypes.happeningNow;pa.isSpecialIntentGeneric=ta===o.keywordTypes.specialIntentGeneric;pa.isLink=ta===o.keywordTypes.link;o.intentKeys.map(function(ua){pa.isSpecialIntent=pa.isSpecialIntent||pa[ua];});pa.isRecent=!!oa.isRecent;pa.isPrefetched=!!oa.isPrefetched;pa.isSuggestion=!!oa.isSuggestion;pa.isInjectedSuggestion=!!oa.isInjectedSuggestion;pa.isFromGSEF=!!oa.isFromGSEF;pa.entityInfo=oa.entityInfo;pa.cacheOnlyResult=oa.cacheOnlyResult||false;pa.isExtendedResult=oa.isExtendedResult||false;if(oa.isExtendedResult){pa.uri=z.getURI(this.facebarConfig,pa);}else pa.uri=pa.uri||z.getURI(this.facebarConfig,pa);pa.parse=oa.parse;pa.tags=oa.tags||{};pa.isKeywordL2=oa.isKeywordL2||false;pa.exactMatchKeyword=oa.exactMatchKeyword||false;pa.qid=oa.qid;pa.templateID=oa.templateID;if(oa.isJSBootstrapMatch){pa.isJSBootstrapMatch=oa.isJSBootstrapMatch;pa.backendCost=oa.backendCost;pa.bootstrapCost=oa.bootstrapCost;}this._replaceCategoryWithTermMatches(pa,oa);return pa.tuid;};na.prototype._replaceCategoryWithTermMatches=function(oa,pa){'use strict';if(oa.type!=="user"||!oa.term_to_subtitle||!pa.termMatches)return;var qa=[];pa.termMatches.forEach(function(sa){if(oa.term_to_subtitle[sa])qa.push(oa.term_to_subtitle[sa]);},this);if(oa.category===undefined)oa.category="";var ra=oa.category.split(" \xB7 ");ra.unshift.apply(ra,qa);ra=ra.filter(function(sa,ta,ua){return ta==ua.indexOf(sa);});oa.category=ra.splice(0,2).join(" \xB7 ");};na.prototype.getRawStructure=function(oa){'use strict';if(typeof oa=='string')oa=s.fromString(oa);if(this.resultStore)return this.resultStore.transformStructured(oa.toArray());};na.prototype.saveResult=function(oa){'use strict';this._initialQueryData=this.getUID(oa.uid,oa.fetchType);};na.prototype.isDefaultKeywordQuery=function(oa){'use strict';return oa.type===o.keywordType&&q.getTextFromResult(oa).toLowerCase()===this.value.getHash().trim().toLowerCase();};na.prototype.buildUids=function(oa){'use strict';if(!oa||!this.resultStore)return [];if(typeof oa==='string')oa=s.fromString(oa);var pa=this.getRawStructure(oa),qa=this.resultStore.getResults(pa,this.getMaxResults()),ra=qa.results;if(typeof ra==='undefined')return [];var sa=qa.null_state===true,ta=0;ra=ra.filter(function(xa,ya){if(!m.allowGrammar&&xa.type=='grammar')return false;return xa.semantic!='<blank>'&&(xa.type!='unimplemented'||ta++===0);},this);var ua=[],va=[],wa=[];ra.forEach(function(xa){if(xa.forcedPosition>0){wa.push(xa);}else if(xa.isSeeMore){ua.push(xa);}else va.push(xa);});if(sa){ra=this.orderNullState(ra,m.maxNullstateResultCount?m.maxNullstateResultCount:this.getMaxResults());}else ra=va;if(wa.length>0){wa.sort(function(xa,ya){return xa.forcedPosition-ya.forcedPosition;});wa.forEach(function(xa){ra.splice(xa.forcedPosition,0,xa);});}if(ua.length>0)ra.push.apply(ra,ua);return ra.map(this.toTypeaheadEntryUid,this);};na.prototype.orderNullState=function(oa,pa){'use strict';var qa={top:[],bottom:[],middle:[]},ra=function(ua){var va=ua.null_state_position;return qa.hasOwnProperty(va)?va:'middle';},sa=function(ua,va){return ua.original_cost-va.original_cost;};oa&&oa.forEach(function(ua){qa[ra(ua)].push(ua);},this);for(var ta in qa){qa[ta]=qa[ta].sort(sa).slice(0,pa);pa-=qa[ta].length;}return [].concat(qa.top,qa.middle,qa.bottom);};na.prototype.isEntity=function(oa){'use strict';if(!oa)return false;return (/^\d+$/.test(oa));};na.prototype.handleResponse=function(oa,pa){'use strict';if(!(oa.payload.errors)){this.processEntries(oa.payload.entities);if(oa.payload.blockees)oa.payload.blockees.forEach((function(qa){if(!this.blockees.hasOwnProperty(qa))this.blockees[qa.toLocaleLowerCase()]=qa;}).bind(this));oa.payload.results.forEach((function(qa){qa.qid=oa.queryId;if(!qa.parse)qa.parse={};qa.parse.entTokens=qa.parse.entTokens||[];qa.parse.remTokens=qa.parse.remTokens||[];qa.parse.suffix=qa.parse.suffix||'';if(this.isEntity(qa.semantic))qa=this._buildCommonEntityFields(qa,pa.tokens);}).bind(this));this.saveResults(oa,pa);}};na.prototype.saveResults=function(oa,pa){'use strict';var qa=[];if(oa.payload.seemore&&this._typeNamedXResults)oa.payload.seemore.forEach(function(ra){qa.push(this._typeNamedXResults[ra]);},this);if(oa.payload.prefetched)this.processPrefetched(oa.payload.prefetched);this.resultStore.saveResults(oa.payload.results,pa,oa.payload.incomplete,{},qa);};na.prototype.processPrefetched=function(oa){'use strict';for(var pa in oa){var qa=s.fromString(pa),ra=this.getRawStructure(qa),sa=oa[pa];this.processEntries(sa.entities);sa.results.forEach((function(ta){if(this.isEntity(ta.semantic))ta=this._buildCommonEntityFields(ta,ra.tokens);}).bind(this));this.resultStore.saveResults(sa.results,ra,sa.incomplete);}};na.prototype.processEntries=function(oa){'use strict';return oa.map(function(pa,qa){var ra=pa.uid=pa.uid+'';pa.textToIndex=this.getTitleTerms(pa);pa.titleToIndex=this.getTitleTerms(pa);ra=this.getUID(ra,pa.fetchType);var sa=this.getEntry(ra);if(!sa){this.setEntry(ra,{});sa=this.getEntry(ra);}else{delete pa.photo;if(!m.facebarUpdateSnippets){delete pa.category;delete pa.subtext;}}Object.assign(sa,pa);sa.tuid=ra;sa.index===undefined&&(sa.index=qa);return ra;},this);};na.prototype.getUID=function(oa,pa){'use strict';oa=oa+'';if(pa!==undefined){pa=/([^:]+:)?([^:]+)(:.*)?/.exec(pa)[2];return JSON.stringify([oa,pa]);}return oa;};na.prototype.getEntry=function(oa,pa){'use strict';var qa;oa=''+oa;qa=pa!=null?ka.getEntry.call(this,this.getUID(oa,pa))||ka.getEntry.call(this,oa):ka.getEntry.call(this,oa);return qa;};na.prototype.getEntryForFragment=function(oa){'use strict';return this.getEntry(oa.getUID(),oa.getTypePart(2));};na.prototype.getMaxResults=function(){'use strict';return this._numResults.max;};na.prototype.query=function(oa,pa,qa){'use strict';this.executeQueryThrottled(oa,this._initialQueryData,{keyPress:t.getTimestamp()});this._initialQueryData=null;};na.prototype.executeQuery=function(oa,pa,qa){'use strict';this._curQueryId++;qa.queryId=this._curQueryId;qa.startCacheQuery=t.getTimestamp();var ra=this.getMaxResults()+w.additionalResultsToFetch;this.setQueryData({qid:this._curQueryId,max_results:ra});this.inform('beforeQuery',{value:oa,queryId:this._curQueryId});this.value=oa;var sa=this.buildUids(oa,[]);qa.endCacheQuery=t.getTimestamp();if(pa&&sa.length===0)sa.push(pa);if(m.sendExistingIDs){var ta=[];sa.forEach(function(ua){var va=this.getEntry(ua);if(va&&va.type in o.entityTypes)ta.push(va.uid);},this);if(ta.length>0)this.setQueryData({qid:this._curQueryID,existing_ids:JSON.stringify(ta),max_results:ra});}this.inform('query',{value:oa,results:sa,queryId:this._curQueryId});if(this.resultStore)this.respond(oa,sa,false,false,qa);};na.prototype.shouldFetchMore=function(oa,pa){'use strict';if(!oa.is_empty&&m.fetchMoreKeywords){var qa=pa.filter(function(ra){return ra.type===o.keywordType;}).length;if(qa<m.default_num_top_results_to_show)return true;}if(oa.is_empty)return false;if(this.resultStore.alreadyKnown(oa.cache_id))return false;if(oa.raw_text&&this._isQueryTooShort(oa.raw_text))return false;if(m.alwaysFetchMore)return true;if(pa.length<this.getMaxResults()||this._performShortQuery)return true;return this.countValidResults(pa)<this.getMaxResults()||this._performShortQuery;};na.prototype.countValidResults=function(oa){'use strict';var pa=0;oa.forEach(function(qa){if(qa&&!qa.isNullState&&!qa.isSeeMore)pa++;},this);return pa;};na.prototype.sendRemoteQuery=function(oa,pa,qa,ra,sa){'use strict';var ta=this.getQueryData(oa.text_form);ta.gs_prefetch_mode=ra;if(sa)ta.max_results=sa;var ua=new i().setURI(this.queryEndpoint).setData(ta).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(va,wa){if(ra&&wa.payload.is_user)return;var xa=wa.payload;wa.queryId=va;wa.inputQuery=oa.text_form;if(xa.results!=null)xa.results.forEach((function(za){za.isSingleState=this._single_state;za.isFromGSEF=ra;}).bind(this));qa.endRemoteQuery=t.getTimestamp();this.inform('response_received',wa);this.handleResponse(wa,oa);var ya=[];if(xa.abandon_cache)ya=xa.results.map(this.toTypeaheadEntryUid,this);this.respond(pa,ya,true,xa&&(!xa.results||xa.results.length===0),qa,xa.num_topresults_to_show);this.inform('backend_response',wa);if(m.disable_snowballing){this.resultStore.resetQueryCache();this.saveResults(wa,oa);}}).bind(this,qa.queryId)).setFinallyHandler((function(){this.activityEnd();}).bind(this));this.inform('sending_request',ua);this._maxRemoteQueryId=qa.queryId;qa.waitingQueries=this._waitingQueries;qa.inflightRequests=i.getInflightCount();qa.startRemoteQuery=t.getTimestamp();ua.send();this.activityStart();};na.prototype.activityStart=function(){'use strict';if(!this._waitingQueries)this.inform('activity',{activity:true},h.BEHAVIOR_STATE);this._waitingQueries++;};na.prototype.activityEnd=function(){'use strict';this._waitingQueries--;if(!this._waitingQueries)this.inform('activity',{activity:false},h.BEHAVIOR_STATE);};na.prototype._bucketizeResults=function(oa,pa,qa){'use strict';pa=this._tagKeywordsSuggestions(pa);pa=x.addL2Terms(pa,this.getMaxResults(),oa.toString(),m);pa=y.addTypeNamedX(pa,this.getMaxResults(),oa.toString(),m);return this._resultsBucketizer.bucketize(pa,la,null,qa);};na.prototype._tagKeywordsSuggestions=function(oa){'use strict';if(!oa||oa.length===0)return oa;var pa=oa[0];if(pa.bootstrapped)return oa;if(pa.type==='grammar'||pa.cost<m.closeEntityThreshold&&pa.type==='user')return oa;return oa.map(function(qa){if(qa.type!==o.keywordType)return qa;qa=babelHelpers._extends({},qa);qa.tags.topBucket=true;return qa;});};na.prototype._buildCommonEntityFields=function(oa,pa){'use strict';if(oa.queryTypeText)return oa;if(m.unbreakParseDisplay){oa.parse.display=[{type:'ent:'+oa.type,uid:oa.semantic}];}else oa.parse.display=[{type:'ent:'+oa.type,uid:parseInt(oa.semantic,10)}];if(oa.parse.fetchType)oa.parse.display[0].fetchType=oa.parse.fetchType;oa.parse.entTokens=pa;oa.parse.pos=0;oa.resultsSetType='{'+oa.type+'}';oa.queryTypeText=o.defaultQueryTypeText;return oa;};na.prototype.setBypassBucketizer=function(oa){'use strict';this._bypassBucketizer=oa;};na.prototype.respond=function(oa,pa,qa,ra,sa,ta){'use strict';if(qa&&this.value){if(typeof this.value==='string')this.value=s.fromString(this.value);this.inform('remote_query_match',{isMatch:this.value.matches(oa),queryId:sa?sa.queryId:0});oa=this.value;if(!pa||pa.length===0)pa=this.buildUids(oa);}this.inform('reorderResults',pa);this.inform('respondValidUids',pa);var ua=pa.map(this.getEntry,this);ua.forEach(function(wa,xa){wa.fromCache=!qa;wa.isSingleState=this._single_state;},this);if(!qa&&(oa.getHash().length<512||oa.getHash().startsWith('http://')||oa.getHash().startsWith('https://'))){var va=this.getRawStructure(oa);if(this.shouldFetchMore(va,ua)){if(sa!=null)sa.dispatchRemoteQuery=t.getTimestamp();if(this.hasGSPreload){this.sendRemoteQueryThrottled(va,oa,sa,true,this.gsPreloadOptions.max_entities_to_fetch);this.sendRemoteQueryThrottled(va,oa,sa);}else this.sendRemoteQueryThrottled(va,oa,sa);}}if(!qa||!sa||sa.queryId===this._maxRemoteQueryId)this.renderResultsThrottled(oa,ua,qa,ra,ta);if(sa!=null)this.logLatencies(qa,sa);};na.prototype.renderResults=function(oa,pa,qa,ra,sa){'use strict';if(sa!=null){ma[String(oa)]=sa;}else sa=ma[String(oa)];k.insertInto(oa,pa,!qa,this._single_state);if(m.graphSearchV2&&m.renderKeywordsFirst&&m.hasFlickerFix&&oa!=null&&this._single_state!==true)l.insertInto(oa,pa,qa,this._waitingQueries!==0);if(!!oa&&(oa instanceof s&&!oa.isEmptyOrWhitespace())&&!this._bypassBucketizer)pa=this._bucketizeResults(oa,pa,sa);pa.length=Math.min(pa.length,this.getMaxResults());this.injectExtraResults(oa,pa);ra=qa&&pa.length===0;this.inform('respond',{value:oa,results:pa,isAsync:!!qa,isEmptyResults:ra});};na.prototype.injectExtraResults=function(oa,pa,qa){'use strict';j.insertInto(oa,pa,!qa,this._single_state);n.insertInto(oa,pa,!qa,this._single_state);};na.prototype.logLatencies=function(oa,pa){'use strict';var qa=t.getTimestamp();if(oa){this.inform('remote_query_latency',{queryId:pa.queryId,latencies:{queryStart:Math.max(pa.startRemoteQuery-pa.dispatchRemoteQuery,0),queryEnd:Math.max(pa.endRemoteQuery-pa.startRemoteQuery,0),keyPressToQueryDispatch:Math.max(pa.dispatchRemoteQuery-pa.keyPress,0),keyPressToQueryStart:Math.max(pa.startRemoteQuery-pa.keyPress,0),keyPressToQueryEnd:Math.max(pa.endRemoteQuery-pa.keyPress,0),render:Math.max(qa-pa.endRemoteQuery,0),inflightRequests:pa.inflightRequests,waitingQueries:pa.waitingQueries,keyPressToRender:Math.max(qa-pa.keyPress,0)}});}else this.inform('cache_query_latency',{queryId:pa.queryId,latencies:{queryStart:Math.max(pa.startCacheQuery-pa.keyPress,0),queryEnd:Math.max(pa.endCacheQuery-pa.startCacheQuery,0),keyPressToQueryEnd:Math.max(pa.endCacheQuery-pa.keyPress,0),render:Math.max(qa-pa.endCacheQuery,0),keyPressToRender:Math.max(qa-pa.keyPress,0)}});};na.prototype._updateMaxResults=function(){'use strict';ga((function(){var oa=da.getViewportDimensions().y,pa=ea.getTop()||42,qa=56,ra=48,sa=oa-pa-ra-25;this._maxResults=Math.max(this._numResults.min,Math.min(this._numResults.max,Math.floor(sa/qa)-1));this.value&&this.query(this.value);}).bind(this));};na.prototype.getCurQueryId=function(){'use strict';return this._curQueryId;};na.prototype.setTypenamedXOption=function(oa){'use strict';m.showTypeNamedX=oa;};na.prototype.setMinQueryLength=function(oa){'use strict';this._minQueryLength=oa;};na.prototype.setGrammarOption=function(oa){'use strict';m.allowGrammar=oa;};Object.assign(na.prototype,{events:['query','respond','bootstrapped','activity','ready']});f.exports=na;},null);
__d('FacebarTypeaheadDebugPane.react',['Banzai','LeftRight.react','React','Image.react'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'FacebarTypeaheadDebugPane',propTypes:{result:l.object.isRequired},getInitialState:function(){return {feedbackSent:false};},componentWillReceiveProps:function(n){if(n.result!==this.props.result)this.setState({feedbackSent:false});},sendFeedback:function(n){var o=this.props.result;if(o.decoration.entity===o)o.decoration.entity='';var p=JSON.stringify(o),q=JSON.stringify(o.debug.allResults),r={result:p,query:o.debug.query,position:o.debug.position,sid:o.debug.sid,allResults:q,isOK:n};h.post('facebar_feedback',r,{delay:0});this.setState({feedbackSent:true});this.setState({feedbackOK:n});return false;},renderDebugText:function(n){return j.createElement('div',{key:n},n);},render:function(){var n=this.sendFeedback.bind(this,true),o=this.sendFeedback.bind(this,false),p=this.state.feedbackSent,q=p&&this.state.feedbackOK,r=p&&!this.state.feedbackOK;return (j.createElement('div',{className:'fsm pam'},j.createElement(i,null,j.createElement('div',null,this.props.result.debug.map(this.renderDebugText)),j.createElement('div',null,j.createElement('div',{className:q?'':'hidden_elem'},j.createElement('strong',null,'Feedback sent'),j.createElement(k,{className:'mls',src:'/images/green_up.gif'})),j.createElement('div',{className:r?'':'hidden_elem'},j.createElement('strong',null,'Feedback sent'),j.createElement(k,{className:'mls',src:'/images/red_down.gif'})),j.createElement('div',{className:p?'hidden_elem':''},j.createElement('a',{href:'#',onClick:n},j.createElement(k,{src:'/images/green_up.gif'})),j.createElement('a',{href:'#',onClick:o},j.createElement(k,{className:'mls',src:'/images/red_down.gif'})))))));}});f.exports=m;},null);
__d('FacebarTypeaheadDiffText.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'FacebarTypeaheadDiffText',propTypes:{prefix:j.string,text:j.string},renderDiff:function(l,m){return (h.createElement('span',{className:"diffNode _5td3",key:m},l));},renderParts:function(){var l=this.props.prefix,m=this.props.text;if(l==null)return this.renderDiff(m,0);var n=m.toLowerCase().indexOf(l.toLowerCase());l=l.trim();if(n===0)m=m.slice(l.length);var o=m.split(/\b/).map(this.renderDiff);if(n===0)o.unshift(l);return o;},render:function(){return (h.createElement('span',this.props,this.renderParts()));}});k.generatePrefixes=function(l,m){var n=[],o,p;for(var q=0,r=m.length;q<r;q++){p=m[q].getText();o=l.slice(0,Math.min(l.length,p.length));if(o==='')return n;if(p.toLowerCase().indexOf(o.toLowerCase())===0){n.push(o);l=l.slice(o.length);}else return n;}return n;};f.exports=k;},null);
__d('FacebarTypeaheadHighlightedText.react',['BrowseFacebarHighlighter','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k=i.createClass({displayName:'FacebarTypeaheadHighlightedText',propTypes:{text:j.string,tokens:j.array},renderHighlight:function(l,m){if((m+1)%3===0){return i.createElement('span',{className:'highlightNode',key:m},l);}else if(l)return l;},renderParts:function(){var l=this.props.text,m=this.props.tokens;if(m&&l){var n=h.createRegex(m),o=l.split(n);return o.map(this.renderHighlight);}else return l;},render:function(){return (i.createElement('span',this.props,this.renderParts()));}});f.exports=k;},null);
__d('FacebarTypeaheadItem.react',['Badge.react','React','FacebarGlobalOptions','FacebarTypeaheadDebugPane.react','FacebarTypeaheadDiffText.react','FacebarTypeaheadHighlightedText.react','TimelineFilterOptions','URI','XUICloseButton.react','TypeaheadCanvasConfig','FacebarJSConstants','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=i.PropTypes;function v(x){var y=x.getTypePart(0);return y?'fragment'+y.charAt(0).toUpperCase()+y.substr(1):'fragment';}var w=i.createClass({displayName:'FacebarTypeaheadItem',propTypes:{result:u.object.isRequired,className:u.string,icon:u.object,token:u.object,highlight:u.array,prefix:u.string,message:u.object,valign:u.bool},getDefaultProps:function(){return {valign:true};},renderHighlightedFragment:function(x,y){return (i.createElement(m,{className:v(x),key:y,text:x.getText(),tokens:this.props.highlight}));},renderDiffedFragment:function(x,y,z){return (i.createElement(l,{className:v(x),key:z,prefix:y,text:x.getText()}));},renderText:function(){var x=this.props.result,y=x.displayStructure!=null?x.displayStructure.toArray():x.structure.toArray(),z=this.props.prefix;if(j.graphSearchV2&&!x.isSeeMore&&z!=null&&z.trim()!==''){var aa=l.generatePrefixes(z,y);return y.map((function(ba,ca){if(!aa[ca])aa[ca]='';return this.renderDiffedFragment(ba,aa[ca],ca);}).bind(this));}else return y.map(this.renderHighlightedFragment);},renderBadge:function(){if(this.props.result.photo&&this.props.showSecondaryIcon&&!this.props.result.isTrending)return (i.createElement('span',{className:"_34my"}));if(this.props.result.category&&this.props.result.category.toLowerCase()===q.category_games.toLowerCase()&&q.in_games_v1){return (i.createElement(h,{type:'game_blue',size:'medium'}));}else if(this.props.result.is_verified){return (i.createElement(h,{type:'verified',size:'medium'}));}else if(this.props.result.is_work_user){return (i.createElement(h,{type:'work',size:'medium'}));}else if(this.props.result.pages_verified_badge===1)return (i.createElement(h,{type:'page_gray_check',size:'medium'}));},renderIcon:function(){var x=this.props.result,y=x.icon_class;if(y){return (i.createElement('span',{className:"_k83"},i.createElement('span',{className:y})));}else if(x.photo)return (i.createElement('img',{className:"_20h",alt:'',src:x.photo}));},renderSecondaryIcon:function(){var x=this.props.result;if(x.photo&&this.props.showSecondaryIcon){return (i.createElement('div',{className:"_20h"},i.createElement('img',{alt:'',src:x.photo})));}else if(!x.isRecent&&x.isInjectedSuggestion)return (i.createElement('span',{className:"_3kxl"}));},renderLabel:function(){var x=' \u00B7 ',y=this.props.result,z="_53ad"+(this.props.valign&&this.props.token&&this.props.token.props&&this.props.token.props.text.length>0?' '+"_55y-":'')+(!y.category&&!y.subtext?' '+"_2vzo":'')+(!y.category&&!!y.subtext||y.category&&y.category.indexOf(x)<0&&!y.subtext?' '+"_2vzp":'')+(y.category&&!!y.subtext||y.category&&y.category.indexOf(x)>0?' '+"_2vzq":''),aa=i.createElement('span',{className:z},this.renderText(),this.renderBadge(),this.props.token),ba="_7gk"+(this.props.message?' '+"_5byz":'');return (i.createElement('span',{className:ba},aa,this.props.message));},renderMain:function(){var x=i.createElement('a',{className:"_6i1",href:this.props.result.uri},i.createElement('span',null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon()));if(this.props.result.isAsync)x=i.createElement('a',{className:"_6i1",href:'#',ajaxify:this.props.result.asyncURI,rel:'async'},i.createElement('span',null,this.props.icon||this.renderIcon(),this.renderLabel(),this.renderSecondaryIcon()));return (i.createElement('span',{className:"_205",rel:'ignore'},this.renderActivityLogXButton(),x));},renderActivityLogXButton:function(){if(this.props.result.keywordBootstrapType!==r.keywordBootstrapTypes.recent)return null;var x=new o('/me/allactivity');x.setQueryData({privacy_source:'activity_log',log_filter:n.SEARCH});return (i.createElement(p,{size:'medium',className:"_2d9t",href:x}));},renderDebug:function(){return this.props.result.debug?i.createElement(k,{result:this.props.result}):null;},render:function(){var x="_202"+(' '+"_5bl2")+(' '+"_6_k")+(j.graphSearchV2?' '+"_1et7":'')+(j.renderKeywordSnippets?' '+"_28vg":'')+(this.props.result.isCelebrity?' '+"_5g-n":'')+(this.props.result.isSeeMore?' '+"_qbs":'')+(this.props.result.isInjectedSuggestion?' '+"_3kxm":'')+(this.props.result.isTrending?' '+"_5g-o":'')+(this.props.result.isRecent?' '+"_jsd":'')+(this.props.result.isLocal?' '+"_1821":'')+(this.props.result.isFootball?' '+"_1822":'')+(this.props.result.isHashtag?' '+"_4z1b":'')+(this.props.result.isPhotos?' '+"_4z1c":'')+(this.props.result.isVideos?' '+"_4z1d":'')+(this.props.result.isInvalidated?' '+"_44vm":'');return (i.createElement('li',{className:t(x,this.props.className),onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,role:'option'},this.renderMain(),this.renderDebug()));}});f.exports=w;},null);
__d('FacebarTypeaheadToken.react',['FacebarTypeaheadHighlightedText.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=' \u00B7 ',m=i.createClass({displayName:'FacebarTypeaheadToken',propTypes:{text:k.array.isRequired,highlight:k.array,limit:k.number,mainClass:k.string,innerClass:k.string,leadingMiddot:k.bool,savedContext:k.string,category:k.string},render:function(){var n=null;if(this.props.savedContext)n=i.createElement('span',{className:"_10j2"},this.props.savedContext);var o=this.props.text;if(this.props.limit)o.splice(this.props.limit);o.forEach((function(s,t){if(t!==0||this.props.leadingMiddot||n)o[t]=l+s;}).bind(this));var p=i.createElement(h,{className:this.props.mainClass,tokens:this.props.highlight,text:o.shift()}),q=o.length?i.createElement(h,{tokens:this.props.highlight,className:"_53ab",text:o.join('')}):null,r=this.props.innerClass||"_53aa";return (i.createElement('span',{className:"_53a9"},i.createElement('span',{className:r},n,p,q)));}});f.exports=m;},null);
__d('FacebarTypeaheadTokenText',['HTML','FbtResult','getElementText'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='\u00B7';function l(p){if(p instanceof i){return p.toString();}else if(typeof p==='object'){return j(h(p).getRootNode());}else return p||'';}function m(p){return l(p).split(k).map(function(q){return q.trim();});}function n(p){var q={};return p.filter(function(r){var s=!q[r];q[r]=true;return s&&r;});}var o={textForEntity:function(p,q){var r=p.category||q[p.type]||'',s=p.subtext||'',t=p.boldedSubtext||'',u=m(r).concat(m(t)).concat(m(s));return n(u);},text:function(p){return n(m(p));}};f.exports=o;},null);
__d('FacebarTypeaheadEntityItem.react',['FacebarGlobalOptions','FacebarTypeaheadItem.react','FacebarTypeaheadToken.react','FacebarTypeaheadTokenText','React','TypeaheadFacepileX.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=l.createClass({displayName:'FacebarTypeaheadEntityItem',renderToken:function(){return (l.createElement(j,{highlight:this.getHighlightTokens(),text:k.textForEntity(this.props.result,{}),category:this.props.result.category,savedContext:this.props.result.saved_context}));},renderIcon:function(){if(this.props.result.isNullState){var q=this.props.result.icon_class?l.createElement('span',{className:this.props.result.icon_class}):l.createElement('img',{className:"_20h",src:this.props.result.photo});return (l.createElement('span',{className:!h.renderKeywordSnippets?"_k83":''},q));}if(this.props.result.size>1&&this.props.result.photos){return (l.createElement(m,{className:"_51l_",photos:this.props.result.photos,size:this.props.result.size}));}else if(this.props.result.photo)return (l.createElement('img',{className:"_20h",alt:'',src:this.props.result.photo}));},getHighlightTokens:function(){if(this.props.result.original_query){var q=this.props.result.original_query.toString().trim(),r=q.split(' '),s=r.length>1?[q].concat(r):[q];return s.filter(function(t){return t!=='';});}},render:function(){var q=this.props.className;if(this.props.result.isNullState)q=o(this.props.className,!h.renderKeywordSnippets?"_207":'');return (l.createElement(i,babelHelpers._extends({},this.props,{className:q,icon:this.renderIcon(),token:this.renderToken(),highlight:this.getHighlightTokens(),valign:true})));}});f.exports=p;},null);
__d('FacebarDisambiguationDialog',['Event','BrowseLogger','CSS','cx','Dialog','DOM','FacebarStructuredText','FacebarTypeaheadEntityItem.react','React','ReactDOM','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=650;function t(u,v,w,x,y){'use strict';this._sets=u;this._path=v;this._ondone=w;this._oncancel=x;this._selection=[];this._typeaheadSID=y;}t.prototype.show=function(){'use strict';new l().setTitle(r._("Which of these did you mean?")).setBody(this._createBody()).setContentWidth(s).setModal(true).setButtons([l.CONFIRM,l.CANCEL]).setHandler(this._handleDone.bind(this)).setCancelHandler(this._handleCancel.bind(this)).show();this._sets.forEach((function(u){var v=[];u.forEach(function(x){v.push(x.uid);});var w=u[0];i.logDisambiguationImpression(w.text,w.type,this._path,v.join(','),this._typeaheadSID);}).bind(this));};t.prototype._createBody=function(){'use strict';var u=[];this._sets.forEach((function(v,w){u.length&&u.push(m.create('li',{className:"_200"}));v.forEach((function(x){var y=this._createItem(x,w);this._selection[w]||this._selectItem(y);u.push(y.root);}).bind(this));}).bind(this));return m.create('ul',{className:'viewList disambiguationList'},u);};t.prototype._createItem=function(u,v){'use strict';var w={uri:null,subtext:u.subtext,category:u.category,photo:u.photo,type:u.type,structure:n.fromStruct([{text:u.text,type:'ent:'+u.type,uid:u.uid}])},x=m.create('div',{className:"_201"}),y=p.createElement(o,{result:w}),z=m.create('div');q.render(y,z);var aa=z.firstChild;j.addClass(aa,"_6i3");m.appendContent(aa,j.hide(x));var ba={setId:v,result:u,root:aa,check:x};h.listen(aa,'mouseover',this._toggleHover.bind(this,ba,true));h.listen(aa,'mouseout',this._toggleHover.bind(this,ba,false));h.listen(aa,'click',(function(event){this._selectItem(ba);return event.kill();}).bind(this));return ba;};t.prototype._toggleHover=function(u,v){'use strict';j.conditionClass(u.root,'selected',v);};t.prototype._toggleCheck=function(u,v){'use strict';j.conditionShow(u.check,v);};t.prototype._selectItem=function(u){'use strict';var v=this._selection[u.setId];this._selection[u.setId]=u;v&&this._toggleCheck(v,false);this._toggleCheck(u,true);};t.prototype._handleDone=function(u){'use strict';this._ondone(u==l.CONFIRM?this._selection.map((function(v){var w=v.result;i.logDisambiguationClick(w.text,w.type,this._path,w.index,w.uid,this._typeaheadSID);return w;}).bind(this)):null);};t.prototype._handleCancel=function(){'use strict';this._oncancel();};f.exports=t;},null);
__d('FacebarTypeahead',['Arbiter','Typeahead','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p,q,r,s){'use strict';l.constructor.call(this,n,o,p,q);this.getCore();this.proxyEvents();this.initBehaviors(r||[]);var t=this.core.subscribe('focus',(function(){if(s)s.init(this);this.core.unsubscribe(t);this.data.bootstrap(false);this.core.input.focus();}).bind(this));this.data.bootstrap(true);this.inform('init',this,h.BEHAVIOR_PERSISTENT);h.inform('Facebar/init',this,h.BEHAVIOR_PERSISTENT);}m.prototype.proxyEvents=function(){'use strict';var n,o=[],p=null,q=(function(){while(n=o.shift())this.inform(n[0],n[1]);p=null;}).bind(this);[this.data,this.view,this.core].forEach(function(r){r.subscribe(r.events,(function(s,t){o.push([s,t]);p=p||setTimeout(q,0);}).bind(this));},this);};Object.assign(m.prototype,{init:j});f.exports=m;},null);
__d('StructuredInputDOM',['createArrayFromMixed','CSS','cx','DOM','FacebarGlobalOptions','getElementText','isElementNode','isTextNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=function(){return l.graphSearchV2?"_4v1s":"_586o";},q={ENTITY_CLASS:p(),encodeText:function(r){return r.replace(/ /g,'\u00a0');},decodeText:function(r){return r.replace(/\u00a0/g,' ');},createIconNode:function(r){if(r&&typeof r=='object'){var s=k.create('i',{className:r.className,style:r.uri&&{backgroundImage:'url("'+r.uri+'")'}});s.setAttribute('data-select','ignore');return s;}},createTextNode:function(r){return k.create('span',{'data-si':true},q.encodeText(r||""));},createEntityNode:function(r,s){var t=q.encodeText(r.text),u=q.createIconNode(s.icon),v=k.create('span',{},u?[u,t]:t),w=(s.className||'').split(/\s+/);w.push(q.ENTITY_CLASS);w.forEach(i.addClass.bind(i,v));var x={si:true,uid:r.uid,type:r.type,text:t,fulltext:t,group:s.group,select:s.select,icon:JSON.stringify(s.icon||null)};for(var y in x)if(x[y]!=null)v.setAttribute('data-'+y,x[y]);return v;},convertToTextNode:function(r){r.className='';r.setAttribute('data-type','text');r.removeAttribute('data-group');r.removeAttribute('data-select');r.removeAttribute('data-icon');r.removeAttribute('data-uid');for(var s=r.firstChild;s;s=s.nextSibling)if(!o(s))k.remove(s);},isEntityNode:function(r){return n(r)&&i.hasClass(r,q.ENTITY_CLASS);},containsOnlyText:function(r,s){s=h(s);for(var t=r.firstChild;t;t=t.nextSibling)if(!(o(t)||r.nodeName in s))return false;return true;},getText:function(r){return m(r).replace(/ /g,'\u00a0');},getDecodedText:function(r){return q.decodeText(m(r));},getLength:function(r){return m(r).length;},getMarker:function(r,s,t){var u=r.firstChild;while(u){var v=q.getLength(u);if(v>s||!u.nextSibling){if(o(u)||!t){return {node:u,offset:Math.min(s,v)};}else return q.getMarker(u,s);}else s-=v;u=u.nextSibling;}}};f.exports=q;},null);
__d('StructuredInputUtil',['StructuredInputDOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(o,p,q){var r=o.substr(0,p).lastIndexOf(q);return r!==-1?r+1:0;}function j(o,p,q){var r=o.indexOf(q,p);return r!==-1?r:o.length;}function k(o,p,q){return (p===0||p===o.length||o.substr(p,q.length)==q);}function l(o,p,q,r){switch(p){case 'none':return q;case 'all':return r?o.length:0;case 'word':if(k(o,q,'\u00a0')){return q;}else if(r){return j(o,q,'\u00a0');}else return i(o,q,'\u00a0');}}function m(o,p){return p&&h.isEntityNode(o)&&!h.isEntityNode(p);}var n={getMarkerAtOffset:function(o,p){var q=o.firstChild,r=0,s=0;while(q){r+=s;s=h.getLength(q);if(r+s>p){break;}else q=q.nextSibling;}return {node:q||o.lastChild,offset:p-r};},validateEntityText:function(o){var p=h.getText(o),q=o.getAttribute('data-fulltext'),r=o.getAttribute('data-group');if(r=='hashtag'){var s=p.match(/#[^\s]+/);q=s&&s[0];}var t=p.indexOf(q),u={prefix:null,entity:null,suffix:null};switch(r){case 'none':u.entity=p;break;case 'hashtag':case 'all':if(t!=-1){u.prefix=p.substr(0,t);u.entity=p.substr(t,q.length);u.suffix=p.substr(t+q.length);}else u.suffix=p;break;case 'word':if(t!=-1){u.prefix=p.substr(0,t);p=p.substr(t);}var v=0,w=0;while(v<q.length){w=j(q,v+1,'\u00a0');if(p.substr(0,w)!=q.substr(0,w)){break;}else v=w;}u.entity=p.substr(0,v)||null;u.suffix=p.substr(v)||null;}return u;},getGrouping:function(o,p){var q=o.getAttribute('data-group'),r=o.getAttribute('data-select');if(p=='select'){return r=='group'?q:'none';}else return q;},snapMarkerToText:function(o,p){var q=o.node;if(h.isEntityNode(q)){var r=o.offset,s=n.getGrouping(q,p);if(s!='none')if(r===0){var t=q.previousSibling;if(m(q,t))return {node:t,offset:h.getLength(t)};}else if(r==h.getLength(q)){var u=q.nextSibling;if(m(q,u))return {node:u,offset:0};}}return o;},nextMarkerBoundary:function(o,p,q){var r=o.node;if(h.isEntityNode(r)&&(!p||o.offset!==0)){var s=n.getGrouping(r,q);if(s!='none')return {node:o.node,offset:l(h.getText(r),s,o.offset,p)};}return o;}};f.exports=n;},null);
__d('StructuredInputCleaner',['DOM','StructuredInputDOM','StructuredInputUtil','UserAgent_DEPRECATED','createArrayFromMixed','getElementText','isTextNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(p,q,r){'use strict';this._node=p;this._selection=q;this._wrapText=r;}o.prototype._cleanEntityNode=function(p){'use strict';var q=p.getAttribute('data-text'),r=i.getText(p);p.style.cssText='';if(q==r&&i.containsOnlyText(p,{I:true}))return null;var s=[],t=j.validateEntityText(p),u=i.createIconNode(JSON.parse(p.getAttribute('data-icon')));if(!t.entity&&(t.suffix&&!t.prefix||t.prefix&&!t.suffix)){i.convertToTextNode(p);p.setAttribute('data-text',r);return null;}if(t.prefix)s.push(this._createTextNode(t.prefix));if(t.entity){if(this._selection&&m(p)!==t.entity)this._selection.markDirty(p);h.setContent(p,u?[u,t.entity]:t.entity);p.setAttribute('data-text',t.entity);s.push(p);}if(t.suffix)s.push(this._createTextNode(t.suffix));return s;};o.prototype._removeSpecialNodes=function(){'use strict';var p=l(this._node.getElementsByTagName('script')),q=l(this._node.getElementsByTagName('style'));p.forEach(h.remove);q.forEach(h.remove);};o.prototype._collapseNodes=function(){'use strict';for(var p,q=this._node.firstChild;q;q=p){p=q.nextSibling;if(!n(q)&&!i.isEntityNode(q)&&!i.containsOnlyText(q))for(var r=q.lastChild;r;r=q.lastChild){this._node.insertBefore(r,p);p=r;}}};o.prototype._createTextNode=function(p){'use strict';if(this._wrapText){return i.createTextNode(p);}else return document.createTextNode(p);};o.prototype.replaceNodes=function(p,q){'use strict';if(q==null)return;var r=p.length?p[p.length-1].nextSibling:null;p.forEach(function(s){if(q.indexOf(s)===-1)h.remove(s);},this);q.reverse().forEach(function(s){if(p.indexOf(s)===-1)this._node.insertBefore(s,r);r=s;},this);};o.prototype.clean=function(){'use strict';this._removeSpecialNodes();this._collapseNodes();var p=[],q=(function(){if(p.length){this.replaceNodes(p,this._cleanTextNodes(p));p.length=0;}}).bind(this);Array.from(this._node.childNodes).forEach((function(r){if(i.isEntityNode(r)){this.replaceNodes([r],this._cleanEntityNode(r));q(p);}else p.push(r);}).bind(this));q();if(!this._node.firstChild&&k.firefox())this._node.appendChild(this._createTextNode());};o.prototype.endOnText=function(){'use strict';var p=(function(q,r){if(i.isEntityNode(q))this._node.insertBefore(this._createTextNode(),r?q:null);}).bind(this);p(this._node.firstChild,true);p(this._node.lastChild,false);};Object.assign(o.prototype,{_cleanTextNodes:(function(){var p=function(r){return (r.nodeName==='BR'||r.nodeName==='SPAN'&&q(r));},q=function(r){return r.getAttribute('data-si')&&i.containsOnlyText(r)&&i.getLength(r)>0;};return function(r){if(r.length!=1||!p(r[0])){var s=r.map(i.getText).join('').replace(/\s+/g,' ');return s?[this._createTextNode(s)]:[];}else{r[0].style.cssText='';return;}};})()});f.exports=o;},null);
__d("DOMSelection",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();(function(){var h=this,i={isPreceding:function(o,p){return p.compareDocumentPosition(o)&2;},contains:function(o,p){if(o.compareDocumentPosition!=null){return o.compareDocumentPosition(p)&16;}else return o.contains(p);},isCursorPreceding:function(o,p,q,r){if(o===q)return p<=r;if(i.isText(o)&&i.isText(q))return i.isPreceding(o,q);if(i.isText(o)&&!i.isText(q))return !i.isCursorPreceding(q,r,o,p);if(!i.contains(o,q))return i.isPreceding(o,q);if(o.childNodes.length<=p)return false;if(o.childNodes[p]===q)return 0<=r;return i.isPreceding(o.childNodes[p],q);},isText:function(o){return (o!=null?o.nodeType==3:false);},getChildIndex:function(o){var p=0;while(o=o.previousSibling)p++;return p;}},j=h.Selection=(function(){function o(p){this.win=p;}o.prototype.hasSelection=function(){return o.hasSelection(this.win);};o.prototype.isBidirectional=function(){return o.isBidirectional(this.win);};o.prototype.getOrigin=function(){return o.getOrigin(this.win);};o.prototype.getFocus=function(){return o.getFocus(this.win);};o.prototype.getStart=function(){return o.getStart(this.win);};o.prototype.getEnd=function(){return o.getEnd(this.win);};o.prototype.trySelection=function(p,q,r,s){return o.trySelection(this.win,p,q,r,s);};o.prototype.setSelection=function(p,q,r,s){return o.setSelection(this.win,p,q,r,s);};o.prototype.clearSelection=function(){return o.clearSelection(this.win);};return o;})();function k(){if(h.document.selection&&/MSIE 9\./.test(navigator.userAgent)){return false;}else return !!h.getSelection;}if(k()){j.supported=true;j.hasSelection=function(o){var p;return (p=o.getSelection())&&(p.focusNode!=null)&&(p.anchorNode!=null);};j.isBidirectional=function(o){return true;};j.getOrigin=function(o){var p;if(!((p=o.getSelection())&&(p.anchorNode!=null)))return null;return [p.anchorNode,p.anchorOffset];};j.getFocus=function(o){var p;if(!((p=o.getSelection())&&(p.focusNode!=null)))return null;return [p.focusNode,p.focusOffset];};j.getStart=function(o){var p,q,r,s,t,u;if(!j.hasSelection(o))return null;t=j.getOrigin(o),p=t[0],r=t[1];u=j.getFocus(o),q=u[0],s=u[1];if(i.isCursorPreceding(p,r,q,s))return [p,r];return [q,s];};j.getEnd=function(o){var p,q,r,s,t,u;if(!j.hasSelection(o))return null;t=j.getOrigin(o),p=t[0],r=t[1];u=j.getFocus(o),q=u[0],s=u[1];if(i.isCursorPreceding(p,r,q,s))return [q,s];return [p,r];};var l=function(o,p,q,s,t,u){var v=p.getSelection();if(!v)return;if(t==null)t=q;if(u==null)u=s;if(v.collapse&&v.extend){v.collapse(q,s);v.extend(t,u);}else{r=p.document.createRange();r.setStart(q,s);r.setEnd(t,u);if(o||!j.hasSelection(p)||(r.endContainer===t&&r.endOffset===u&&r.startContainer===q&&r.startOffset===s)){try{v.removeAllRanges();}catch(w){}v.addRange(r);}}};j.setSelection=l.bind(j,true);j.trySelection=l.bind(j,false);j.clearSelection=function(o){try{var q=o.getSelection();if(!q)return;q.removeAllRanges();}catch(p){}};j.getText=function(o){var p=o.getSelection();if(!p)return;return p.toString();};}else if(h.document.selection){var m=function(o,p,q){var r,s,t,u,v;s=o.createElement('a');r=p.duplicate();r.collapse(q);v=r.parentElement();while(true){v.insertBefore(s,s.previousSibling);r.moveToElementText(s);if(!(r.compareEndPoints((q?'StartToStart':'StartToEnd'),p)>0&&(s.previousSibling!=null)))break;}if(r.compareEndPoints((q?'StartToStart':'StartToEnd'),p)===-1&&s.nextSibling){r.setEndPoint((q?'EndToStart':'EndToEnd'),p);t=s.nextSibling;u=r.text.length;}else{t=s.parentNode;u=i.getChildIndex(s);}s.parentNode.removeChild(s);return [t,u];},n=function(o,p,q,r,s){var t,u,v,w,x;x=0;t=i.isText(r)?r:r.childNodes[s];u=i.isText(r)?r.parentNode:r;if(i.isText(r))x=s;w=o.createElement('a');u.insertBefore(w,t||null);v=o.body.createTextRange();v.moveToElementText(w);w.parentNode.removeChild(w);p.setEndPoint((q?'StartToStart':'EndToEnd'),v);return p[q?'moveStart':'moveEnd']('character',x);};j.supported=true;j.hasSelection=function(o){var p;if(!o.document.selection)return false;p=o.document.selection.createRange();return p&&p.parentElement().document===o.document;};j.getStart=function(o){var p;if(!j.hasSelection(o))return null;p=o.document.selection.createRange();return m(o.document,p,true);};j.getEnd=function(o){var p;if(!j.hasSelection(o))return null;p=o.document.selection.createRange();return m(o.document,p,false);};j.isBidirectional=function(o){return false;};j.getOrigin=function(o){return j.getStart(o);};j.getFocus=function(o){return j.getEnd(o);};var l=function(o,p,q,r,s,t){if(s==null)s=q;if(t==null)t=r;var u=p.document.body.createTextRange();n(p.document,u,false,s,t);n(p.document,u,true,q,r);return u.select();};j.setSelection=l.bind(j,true);j.trySelection=l.bind(j,false);j.clearSelection=function(o){return o.document.selection.empty();};j.getText=function(o){if(!j.hasSelection(o))return null;var p=o.document.selection.createRange();return p&&p.text;};}else j.supported=false;}).call(this);f.exports=Selection;},null);
__d('StructuredInputSelection',['DOM','DOMSelection','Scroll','Vector','StructuredInputUtil','StructuredInputDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(p){'use strict';var q=p.ownerDocument;this.window=q.defaultView||q.parentWindow;this.root=p;this.selection=false;this.start=new o(this,[]);this.end=new o(this,[]);this.update();}n.prototype.isSupported=function(){'use strict';return !!(i&&i.hasSelection);};n.prototype.update=function(){'use strict';this.selection=false;if(this.isSupported()&&this.root==document.activeElement)if(i.hasSelection(this.window)){var p=i.getStart(this.window),q=i.getEnd(this.window),r=i.getFocus(this.window);this.start=this.makeMarker(p);this.end=this.makeMarker(q);this.backward=p[0]==r[0]&&p[1]==r[1];this.selection=this.start.node&&this.end.node;}};n.prototype.makeMarker=function(p){'use strict';if(p[0]===this.root){return new o(this,[this.root.childNodes[p[1]],0]);}else return new o(this,p);};n.prototype.getFocus=function(){'use strict';return this.backward?this.start:this.end;};n.prototype.getOrigin=function(){'use strict';return this.backward?this.end:this.start;};n.prototype.move=function(p){'use strict';if(this.selection){this.start.move(p);this.start.snap();this.end.setPosition(this.start);return this.apply();}};n.prototype.expand=function(p){'use strict';if(this.selection){if(i.isBidirectional()){this.start.move(!p);this.start.snap();this.end.move(p);this.end.snap();}return this.apply();}};n.prototype.getText=function(){'use strict';if(this.selection&&this.isSupported()){var p=i.getText(this.window);return p;}};n.prototype.getOffset=function(){'use strict';if(this.selection)return this.start.rootOffset;};n.prototype.getLength=function(){'use strict';return (this.getText()||"").length;};n.prototype.setPosition=function(p,q){'use strict';this.backward=false;this.selection=true;this.start.setPosition(l.getMarkerAtOffset(this.root,p));this.start.snap();if(q>0){this.end.setPosition(l.getMarkerAtOffset(this.root,p+q));this.end.snap();}else this.end.setPosition(this.start);return this.apply();};n.prototype.hasRange=function(){'use strict';return this.selection&&(this.start.node!=this.end.node||this.start.offset!=this.end.offset);};n.prototype.scrollToFocus=function(){'use strict';var p=5,q=this.getFocus();if(q.node){var r=k.getElementDimensions(this.root).x,s=j.getLeft(this.root),t=q.node.offsetLeft+q.node.offsetWidth;if(t-s<p){j.setLeft(this.root,t-p);}else if(t-s>r-p)j.setLeft(this.root,t-r+p);}};n.prototype.apply=function(){'use strict';if(this.start.hasChanged()||this.end.hasChanged()){var p=this.getOrigin().getMarker(true),q=this.getFocus().getMarker(true);this.selection=this.selection&&p&&p.node&&q&&q.node;if(this.selection&&this.isSupported()){this.start.changed=false;this.end.changed=false;i.trySelection(this.window,p.node,p.offset,q.node,q.offset);return true;}}};n.prototype.markDirty=function(p){'use strict';if(h.contains(p,this.start.node,p))this.start.changed=true;if(h.contains(p,this.end.node,p))this.end.changed=true;};function o(p,q){'use strict';this.selection=p;this.node=q[0];this.offset=q[1];this.rootOffset=this.getRootOffset(q[0],q[1]);this.sibling=this.node&&this.node.previousSibling;this.changed=false;}o.prototype.hasChanged=function(){'use strict';return this.changed||!this.isNodeValid();};o.prototype.isNodeValid=function(){'use strict';if(m.getLength(this.node)>this.offset){var p=this.node;while(p=p.parentNode)if(p==this.selection.root)return true;}};o.prototype.getMarker=function(p){'use strict';if(this.isNodeValid()&&(p&&!this.node.firstChild||!p&&this.node.parentNode==this.selection.root)){return this;}else return m.getMarker(this.selection.root,this.rootOffset,p);};o.prototype.move=function(p){'use strict';this.node&&this.setPosition(l.nextMarkerBoundary(this.getMarker(false),p,'select'));};o.prototype.snap=function(){'use strict';this.node&&this.setPosition(l.snapMarkerToText(this.getMarker(false),'select'));};o.prototype.setPosition=function(p){'use strict';if(p.offset!=this.offset||p.node!=this.node){this.changed=true;this.node=p.node;this.offset=p.offset;this.rootOffset=this.getRootOffset(this.node,this.offset);}};o.prototype.getRootOffset=function(p,q){'use strict';var r=0,s=5;while(p&&r++<s)if(p===this.selection.root){return q;}else{var t=p;while(t=t.previousSibling)q+=m.getLength(t);p=p.parentNode;}};f.exports=n;},null);
__d('StructuredInput',['Arbiter','ArbiterMixin','CSS','DataStore','DOM','Event','Input','InputSelection','JSLogger','Keys','Locale','Parent','Scroll','StructuredInputCleaner','StructuredInputDOM','StructuredInputSelection','StructuredInputUtil','Style','UserAgent_DEPRECATED','createArrayFromMixed','createObjectFrom','csx','cx','emptyFunction','fbt','getActiveElement','isElementNode','isTextNode','mixin','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){if(c.__markCompiled)c.__markCompiled();var la,ma,na=229,oa=ba([q.UP,q.DOWN,q.LEFT,q.RIGHT,q.HOME,q.END]),pa=ba([q.BACKSPACE,q.DELETE]),qa=ba([q.SPACE,q.RETURN]),ra=ba('IUB'.split('').map(function(wa){return wa.charCodeAt(0);})),sa=z.firefox(),ta=z.ie(),ua=z.webkit();la=babelHelpers.inherits(va,ja(i));ma=la&&la.prototype;function va(wa){'use strict';ma.constructor.call(this);k.set(wa,'StructuredInput',this);this._root=wa;this._richInput=l.find(wa,"._586i");this._textInput=l.find(wa,"._586f");this._placeholderText=l.scry(wa,"._586j")[0];this._hintText=l.find(wa,"._586k");this._contentWidth=null;this._richWidth=null;this._hintNodes=[];h.subscribe(p.DUMP_EVENT,(function(xa,ya){ya.structuredInputState={initInputsFinished:!!this._initInputsFinished,initEventsFinished:!!this._initEventsFinished,cleanInputPreTogglesFinished:!!this._cleanInputPreTogglesFinished,cleanInputFinished:!!this._cleanInputFinished,elements:{richInput:!!this._richInput,textInput:!!this._textInput,placeholderText:!!this._placeholderText,hintText:!!this._hintText}};}).bind(this));this.init();}va.prototype.init=function(){'use strict';this.init=ea;this._initSelection();this._initCleaner();this._initInputs();this._initInputsFinished=true;this._initEvents();this._initEventsFinished=true;this._scheduledCleanInput=false;this._richChanged=false;this._textChanged=false;this._selectionChanged=false;this._selectionIgnore=false;this._imeMode=false;this.cleanInput();this.inform('init',null,h.BEHAVIOR_PERSISTENT);};va.prototype._initInputs=function(){'use strict';this._richInput.contentEditable=true;this._richInput.spellcheck=false;this._richInput.tabIndex=0;this._richInput.setAttribute('aria-label',fa._("Search Facebook"));this._textInput.tabIndex=-1;this._multiline=this._textInput.nodeName=='TEXTAREA';if(!j.shown(this._richInput)){var wa=o.get(this._textInput),xa=ga()===this._textInput;l.setContent(this._richInput,v.encodeText(n.getValue(this._textInput)));j.hide(this._textInput);j.show(this._richInput);this.cleanInput();if(xa){this._richInput.focus();this.setSelection({offset:wa.start,length:wa.end-wa.start});}}this.togglePlaceholder();this._toggleHint();};va.prototype._initEvents=function(){'use strict';var wa=null,xa=false,ya=(function(){this._richChanged=true;xa||this.scheduleCleanInput(true);}).bind(this),za=(function(){this._textChanged=true;xa||this.scheduleCleanInput(false);}).bind(this),ab=(function(){this._selectionChanged=true;this.scheduleCleanInput(false);}).bind(this),bb=(function(){this._imeMode=true;this._placeholderText&&j.hide(this._placeholderText);j.hide(this._hintText);}).bind(this),cb=(function(){this._imeMode=false;this._richChanged=true;this.cleanInput();}).bind(this);m.listen(this._richInput,'keydown',(function(db){wa=db.keyCode;if(db.ctrlKey&&db.keyCode in ra){return db.kill();}else if(db.keyCode in oa){ab();}else if(db.keyCode===q.BACKSPACE&&this._deleteTrailingChunk()){this._richChanged=true;this.cleanInput();return db.kill();}else if(db.keyCode in pa){ya();}else if(db.keyCode==na)bb();}).bind(this));m.listen(this._richInput,'keypress',(function(db){if(db.keyCode==q.RETURN){this._multiline&&this._insertText("\n");return db.kill();}else if(!this._selectionChanged&&this._selectionIsText()){za();}else ya();}).bind(this));if(!xa){m.listen(this._richInput,'keyup',(function(db){if((this._imeMode||db.keyCode!=wa)&&db.keyCode in qa){cb();return db.kill();}else if(this._imeMode){this._textChanged=true;this.cleanInput();}}).bind(this));if(sa)m.listen(this._richInput,'input',(function(){this._textChanged=true;this.cleanInput();}).bind(this));}else{m.listen(this._richInput,'compositionstart',bb);m.listen(this._richInput,'compositionend',function(){setTimeout(cb,0);});m.listen(this._richInput,'input',(function(){this._textChanged=true;if(!this._imeMode)if(!this._richChanged){this.cleanInput();}else this.scheduleCleanInput();}).bind(this));}m.listen(document,'selectionchange',(function(){if(this._selectionIgnore){this._selectionIgnore=false;}else this._selectionChanged=true;}).bind(this));m.listen(this._richInput,'mousedown',(function(){this._selectionChanged=true;this._selectionLength=0;this._selectionOffset=0;}).bind(this));m.listen(this._richInput,'mouseup',(function(){this._selectionChanged=true;this.scheduleCleanInput();}).bind(this));m.listen(this._richInput,'cut',(function(){this._richChanged=true;this.scheduleCleanInput(false);}).bind(this));m.listen(this._richInput,'paste',(function(db){this._richChanged=true;this.scheduleCleanInput(true);}).bind(this));m.listen(this._richInput,'drop',(function(db){this.focus();this.selectAll();this._insertClipboard(db&&db.dataTransfer);return db.kill();}).bind(this));m.listen(this._richInput,'dragover',function(db){db.dataTransfer.dropEffect='move';db.dataTransfer.effectAllowed='move';return db.kill();});m.listen(this._richInput,'focus',(function(db){this._toggleHint();this.inform('focus');}).bind(this));m.listen(this._richInput,'blur',(function(db){j.hide(this._hintText);this._imeMode=false;this._richChanged=true;this.scheduleCleanInput(false);this.inform('blur');}).bind(this));};va.prototype._initCleaner=function(){'use strict';this._cleaner=new u(this._richInput,this._selection,true);};va.prototype._initSelection=function(){'use strict';this._selection=new w(this._richInput);this._selectionLength=0;this._selectionOffset=0;};va.prototype._insertClipboard=function(wa){'use strict';if(wa&&typeof wa.getData==='function'){var xa=wa.getData('Text');this._insertText(xa);}};va.prototype._deleteTrailingChunk=function(wa){'use strict';var xa=this.getSelection();if(xa.length>0||xa.offset===0)return false;var ya=this.getSelection().offset-1,za=x.getMarkerAtOffset(this._richInput,ya);if(za&&v.isEntityNode(za.node)&&x.getGrouping(za.node,'select')!=='none'){l.remove(za.node);return true;}return false;};va.prototype._selectionIsText=function(){'use strict';var wa=this._selection.start.node,xa=this._selection.end.node;return wa&&wa===xa&&!v.isEntityNode(wa)&&!v.isEntityNode(wa.parentNode);};va.prototype._insertText=function(wa){'use strict';if(wa){var xa=l.create('div',{},wa);return this._insertNodes(xa);}};va.prototype._insertHTML=function(wa){'use strict';if(wa){var xa=l.create('div'),ya=new u(xa,null,false);xa.innerHTML=wa;ya.clean();return this._insertNodes(xa);}};va.prototype._insertNodes=function(wa){'use strict';if(document.selection){document.selection.createRange().pasteHTML(wa.innerHTML);}else document.execCommand('insertHTML',false,wa.innerHTML);this._richChanged=true;this.cleanInput();};va.prototype.togglePlaceholder=function(wa){'use strict';if(!this._placeholderText)return;var xa=v.getLength(this._richInput)===0;if(wa&&xa){j.show(this._placeholderText);}else j.conditionShow(this._placeholderText,xa&&!this._imeMode);};va.prototype._toggleHint=function(){'use strict';var wa=aa(this._hintNodes),xa=null,ya='',za=v.getText(this._richInput).toLowerCase();if(!this.hasFocus())return;if(this._contentOverflows()){j.hide(this._hintText);return;}while(wa.length&&ya.length<za.length){xa=wa.shift();ya+=v.getText(xa);}if(za.length&&ya.substr(0,za.length).toLowerCase()==za.toLowerCase()){l.setContent(this._hintText,Array.from(this._richInput.cloneNode(true).childNodes).filter(function(bb){return bb.tagName!=='BR';}));var ab=v.createTextNode(ya.substr(za.length));wa.unshift(ab);l.appendContent(this._hintText,l.create('span',{className:"_586h"},wa));j.show(this._hintText);j.hide(this._placeholderText);}else j.hide(this._hintText);};va.prototype._contentOverflows=function(){'use strict';if(this._richWidth===null)this._richWidth=this._richInput.clientWidth;if(this._contentWidth===null){var wa=this._richInput.lastChild;this._contentWidth=ha(wa)?wa.offsetLeft+wa.offsetWidth:0;}return this._contentWidth>this._richWidth;};va.prototype._forceTop=function(){'use strict';if(!this._multiline)t.setTop(this._richInput,0);t.setTop(this._root,0);};va.prototype._createStructureNodes=function(wa){'use strict';return wa.map((function(xa){return xa.uid||xa.type&&xa.type!='text'?v.createEntityNode(xa,xa.display||{}):v.createTextNode(xa.text);}).bind(this));};va.prototype._suppressInput=function(){'use strict';if(sa||ta){if(this._richClean)return;this._richClean=this._richInput.cloneNode(true);this._richClean.contentEditable=false;this._root.insertBefore(this._richClean,this._richInput.nextSibling);t.setLeft(this._richClean,t.getLeft(this._richInput));y.set(this._richInput,'padding',0);y.set(this._richInput,'height',0);}};va.prototype._revealInput=function(){'use strict';if(!this._richClean)return;y.set(this._richInput,'height','');y.set(this._richInput,'padding','');this._root.removeChild(this._richClean);this.focus();this._richClean=null;};va.prototype._cleanInput=function(){'use strict';var wa;if(this._textChanged&&!this._richChanged){this._selection.update();wa='change';}else if(this._richChanged||this._selectionChanged){this._selection.update();if(this._richChanged){this._contentWidth=null;this._cleaner.clean();this._cleaner.endOnText();this._selection.apply();wa='change';}if(this._selectionChanged){this._cleanSelection();if(this._selectionLength||!this._richChanged)wa='select';}}this._revealInput();this._forceTop();this._cleanInputPreTogglesFinished=true;if(this._richChanged||this._textChanged){this.togglePlaceholder();this._toggleHint();}this._selectionIgnore=true;this._selectionChanged=false;this._richChanged=false;this._textChanged=false;this._cleanInputFinished=true;wa&&this.inform(wa);};va.prototype._cleanSelection=function(){'use strict';var wa=this._selection.getLength(),xa=this._selection.getOffset();if(wa){this._selection.expand(wa>=this._selectionLength);wa=this._selection.getLength();xa=this._selection.getOffset();}this._selectionLength=wa;this._selectionOffset=xa;};va.prototype.cleanInput=function(){'use strict';this._scheduledCleanInput||this._cleanInput();};va.prototype.scheduleCleanInput=function(wa){'use strict';wa&&this._suppressInput();if(!this._scheduledCleanInput){this._scheduledCleanInput=true;ka((function(){this._cleanInput();this._scheduledCleanInput=false;}).bind(this),0);}};va.prototype.setEnabled=function(wa){'use strict';this._textInput.disabled=!wa;this._richInput.contentEditable=wa;};va.prototype.getRoot=function(){'use strict';return this._root;};va.prototype.getRichInput=function(){'use strict';return this._richInput;};va.prototype.getEnabled=function(){'use strict';return !this._textInput.disabled;};va.prototype.getText=function(){'use strict';return v.getDecodedText(this._richInput);};va.prototype.setText=function(wa){'use strict';l.setContent(this._richInput,v.createTextNode(wa));this._richChanged=false;this._selectionChanged=false;this.inform('change');};va.prototype.setHint=function(wa){'use strict';this._hintNodes=this._createStructureNodes(wa);this._toggleHint();};va.prototype.getStructure=function(){'use strict';var wa=[];Array.from(this._richInput.childNodes).forEach(function(xa){var ya=!ia(xa),za=v.getDecodedText(xa);za.length&&wa.push({text:za,uid:ya?xa.getAttribute('data-uid'):null,type:ya&&xa.getAttribute('data-type')||'text'});});return wa;};va.prototype.setStructure=function(wa){'use strict';l.setContent(this._richInput,this._createStructureNodes(wa));this._cleaner.clean();this._cleaner.endOnText();this.togglePlaceholder();this._toggleHint();this._richChanged=false;this._selectionChanged=false;this.inform('change');};va.prototype.getContentDimensions=function(){'use strict';var wa=this._richInput.lastChild;return {width:wa?wa.offsetLeft+wa.offsetWidth:0,height:wa?wa.offsetTop+wa.offsetHeight:0};};va.prototype.getSelection=function(){'use strict';if(this._selection)return {offset:this._selection.getOffset(),length:this._selection.getLength()};};va.prototype.setSelection=function(wa){'use strict';if(this.hasFocus()&&this._selection){this._selection.update();this._selection.setPosition(wa.offset,wa.length);this._selection.scrollToFocus();this._selectionChanged=false;this.inform('select');}};va.prototype.moveSelectionToEnd=function(){'use strict';this.setSelection({length:0,offset:v.getLength(this._richInput)});};va.prototype.isSelectionAtEnd=function(){'use strict';var wa=this.getSelection().offset,xa=v.getLength(this._richInput);return wa>=xa;};va.prototype.selectAll=function(){'use strict';this.setSelection({offset:0,length:v.getLength(this._richInput)});};va.prototype.hasFocus=function(){'use strict';return l.contains(this._root,document.activeElement);};va.prototype.focus=function(){'use strict';this._richInput.focus();};va.prototype.blur=function(){'use strict';var wa={position:'absolute',top:0,width:'1px',height:'1px'};if(r.isRTL()){wa.right='-100px';}else wa.left='-100px';var xa=l.create('input',{type:'text',tabIndex:-1,style:wa});l.appendContent(this._root,xa);var ya=function(){if(this.hasFocus()||ua&&document.activeElement===document.body){xa.focus();xa.blur();}};this.blur=ya;this.blur();};va.getInstance=function(wa){var xa=s.bySelector(wa,"._586g");if(!xa)throw new Error('No DOMElement structured input found using '+wa);return k.get(xa,'StructuredInput')||new va(xa);};f.exports=va;},null);
__d('FacebarTypeaheadInput',['ArbiterMixin','csx','DOM','FacebarStructuredText','StructuredInput','Vector','Locale','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q,r={text:{className:"text",group:"all",select:"none"},ent:{className:"entity",group:"all",select:"group"},'ent:hashtag_exact':{className:"entity",group:"hashtag",select:"none"}};function s(u){return Object.assign(u.toStruct(),{display:r[u.getType()]||r[u.getTypePart(0)]});}p=babelHelpers.inherits(t,o(h));q=p&&p.prototype;function t(u){'use strict';q.constructor.call(this);this.root=u;this.input=l.getInstance(u);this.value=null;this.selection={offset:0,length:0};this.resetOnChange=true;this.initEvents();}t.prototype.initEvents=function(){'use strict';var u=(function(v,w){this.inform(v,w);}).bind(this);this.input.subscribe('blur',u);this.input.subscribe('focus',u);this.input.subscribe('change',(function(v,w){if(this.resetOnChange)this.value=null;this.inform('change',w);}).bind(this));};t.prototype.togglePlaceholder=function(u){'use strict';return this.input.togglePlaceholder(u);};t.prototype.focus=function(){'use strict';this.input.focus();};t.prototype.blur=function(){'use strict';this.input.blur();};t.prototype.getElement=function(){'use strict';return this.root;};t.prototype.getRawPlaceholderElement=function(){'use strict';return j.find(this.root,"._586j");};t.prototype.getRawInputElement=function(){'use strict';return j.scry(this.root,"._586i")[0];};t.prototype.getValue=function(){'use strict';if(this.value===null)this.value=k.fromStruct(this.input.getStructure());return this.value;};t.prototype.getLength=function(){'use strict';return this.getValue().getLength();};t.prototype.resetPlaceholder=function(){'use strict';this.input.resetPlaceholder();};t.prototype.setValue=function(u,v){'use strict';this.value=u;this.resetOnChange=!!v;var w=u.toArray().map(s);this.input.setStructure(w);this.input.setSelection({offset:u.getLength(),length:0});this.resetOnChange=true;};t.prototype.storeSelection=function(){'use strict';this.selection=this.input.getSelection();};t.prototype.restoreSelection=function(){'use strict';if(this.selection)this.input.setSelection(this.selection);};t.prototype.clearSelection=function(){'use strict';this.input.setSelection({offset:this.getLength(),length:0});};t.prototype.setHint=function(u){'use strict';var v=u&&!u.hasRTL()&&!n.isRTL()?u.toArray().map(s):[];this.input.setHint(v);};t.prototype.isSelectionAtEnd=function(){'use strict';return this.input.isSelectionAtEnd();};t.prototype.selectInput=function(u){'use strict';this.input.setSelection({offset:u||0,length:this.getLength()});};t.prototype.getEndOffset=function(){'use strict';var u=m.getElementDimensions(this.root),v=this.input.getContentDimensions();return Math.min(u.x,v.width);};Object.assign(t.prototype,{events:['change','focus','blur']});f.exports=t;},null);
__d('FacebarTypeaheadWebSearch',['FacebarStructuredFragment','FacebarStructuredText'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=new h({type:'ent:websuggestion',text:'Web Search: ',uid:null}),k=j.getText().toLowerCase().trim();function l(o,p){if(!o||o.type!=='websuggestion')return;var q=p.getValue().toArray();q.forEach(function(r){if(r.isType('ent')&&!r.isType('ent','user')&&r.getUID())if(o.extra_uri_params){o.extra_uri_params.qh=r.getUID();return;}});}function m(o){return o.getType()===j.getType();}function n(o){'use strict';this._core=o.getCore();this._view=o.getView();this._input=this._core.input;this._isEnabled=false;}n.prototype.enable=function(){'use strict';this._isEnabled=true;this.changeListener=this._input.subscribe('change',this._changeWebSearch.bind(this));this.lockListener=this._input.subscribe('shortcut',this._lockWebSearch.bind(this));this.beforeSelectListener=this._view.subscribe('beforeSelect',this._beforeSelect.bind(this));this.beforeRenderListener=this._view.subscribe('beforeRender',this._beforeRender.bind(this));};n.prototype._changeWebSearch=function(){'use strict';var o=this._input.getValue(),p=o.toArray(),q=p[0];if(q&&q.getType()==='text')if(q.getText().toLowerCase().startsWith(k)){p.splice(0,1,j,new h({text:q.getText().substr(k.length).replace(/^ /,'')}));this._replaceFragments(p);}else if(p.length>1&&p.some(m)){var r='';p.forEach(function(s){if(m(s))return;r+=s.getText();});this._input.storeSelection();this._input.setValue(i.fromString(r));this._input.restoreSelection();}};n.prototype._replaceFragments=function(o){'use strict';this._input.storeSelection();this._input.setValue(new i(o));this._input.restoreSelection();};n.prototype._beforeSelect=function(o,p){'use strict';l(p.selected,this._input);return true;};n.prototype._beforeRender=function(o,p){'use strict';var q=this._input.getValue().toArray()[0],r=q&&m(q);p.results.forEach(function(s){if(s.type==='websuggestion')s.isLockedWebSearchMode=r;});return true;};n.prototype._lockWebSearch=function(o,p){'use strict';if(p.shift){var q=this._input.getValue().toArray()[0];if(!q||!m(q))this._input.setValue(new i([j]));}};n.prototype.disable=function(){'use strict';this.beforeSelectListener.unsubscribe();this.changeListener.unsubscribe();this.lockListener.unsubscribe();this.beforeRenderListener.unsubscribe();this._isEnabled=false;};n.addPrefix=function(o){'use strict';var p=m(o.getFragment(0))||o.getFragment(0).getText().toLowerCase().startsWith(k);if(!p){var q=[j].concat(o.toArray());return new i(q);}else return o;};f.exports=n;},null);
__d('FacebarTypeaheadCore',['Animation','Arbiter','ArbiterMixin','Base64','DOM','Event','FacebarGlobalOptions','FacebarJSConstants','FacebarKeywordSearchUtils','FacebarResultStoreUtils','FacebarStructuredText','FacebarTypeaheadInput','FacebarTypeaheadWebSearch','Keys','KeywordsSearchResultConfig','Parent','Style','URI','arrayContains','csx','cx','getActiveElement','invariant','mixin','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){if(c.__markCompiled)c.__markCompiled();var ga,ha;ga=babelHelpers.inherits(ia,ea(j));ha=ga&&ga.prototype;function ia(ja){'use strict';ha.constructor.call(this);Object.assign(this,ja);}ia.prototype.init=function(ja,ka,la){'use strict';if(window.getSelection===null)throw new Error('Facebar: window.getSelection is null!');this.init=function(){};this.data=ja;this.view=ka;this.root=la;this.facebarRoot=w.bySelector(la,"._585-");this.windowFocused=true;this.isFocused=false;this.hoverAnimation=null;this.stickyQuery=null;this.settedQuery=null;this.selectedQuery=null;this.currentQuery=null;this.isSuggestionBagdeVisible=false;this.initSubcomponents();this.initEvents();this.checkValue();this.checkSingleState();};ia.prototype.initSubcomponents=function(){'use strict';var ja=l.find(this.root,"._5861");this.input=new s(ja);this.view.setInputElement(this.input.getRawInputElement());};ia.prototype.initEvents=function(){'use strict';m.listen(this.root,'keydown',this.keydown.bind(this));m.listen(this.root,'keyup',this.keyup.bind(this));m.listen(this.root.parentNode,'mousedown',this.mousedown.bind(this));m.listen(this.view.getElement(),'mousedown',this.mousedown.bind(this));m.listen(window,'focus',this.focusWindow.bind(this));m.listen(window,'blur',this.blurWindow.bind(this));this.view.subscribe('select',this.selectView.bind(this));this.view.subscribe('highlight',this.highlightView.bind(this));this.view.subscribe('render',this.highlightView.bind(this));this.view.subscribe('hideHelp',this.performQuery.bind(this));this.input.subscribe('focus',this.focusInput.bind(this));this.input.subscribe('blur',this.blurInput.bind(this));this.input.subscribe('change',this.changeInput.bind(this));this.data.subscribe('activity',this.typeaheadActivity.bind(this));this.data.subscribe('respond',this.completeData.bind(this));this.data.subscribe('nullstateReady',this.performQueryIfVisible.bind(this));this.data.subscribe('reloadNullstate',this.performQuery.bind(this));i.subscribe('FacebarTypeahead.clearRecentSearches',(function(){return this.clearRecentSearches();}).bind(this));i.subscribe('FacebarTypeahead.focus',(function(){this.input.focus();fa((function(){this.input.clearSelection();}).bind(this),0);}).bind(this));fa(this.initFocus.bind(this),0);};ia.prototype.initFocus=function(){'use strict';if(!this.lazyFocused&&l.contains(this.input.root,ca())){this.lazyFocused=true;this.isFocused=true;this._newSession();this.inform('focus',{catchup:true});this.open(true);}};ia.prototype.setStartTime=function(ja){'use strict';this.inform('focusStartTime',{time:ja});};ia.prototype.cleanQuery=function(ja){'use strict';ja=babelHelpers._extends({},ja)||{};if(!ja.structure)ja.structure=new r();if(!n.allowGrammar||o.nonGrammarTypes[ja.type])ja.structure=r.fromString(ja.structure.toString());!(ja.structure instanceof r)?da(0):undefined;if(ja.type=='websuggestion'&&n.allowGrammar&&n.webSearchLockedInMode)ja.structure=t.addPrefix(ja.structure);return ja;};ia.prototype._unlockQuery=function(){'use strict';var ja=this.input.getValue();if(ja.hasType('ent')&&ja.trim().getCount()===1){this.input.storeSelection();this.input.setValue(r.fromString(ja.toString()));this.input.restoreSelection();}};ia.prototype.setPageQuery=function(ja){'use strict';ja=this.cleanQuery(ja);var ka=this.input.getValue(),la=ja.structure,ma=!la.isEmptyOrWhitespace()&&(ka.isEmptyOrWhitespace()||!ka.matches(la));return this.selectQuery(ja,ma);};ia.prototype.selectQuery=function(ja,ka){'use strict';ka=ka!==false;ja=this.cleanQuery(ja);if(ka||!this.selectedQuery){if(ka||this.getValue().isEmptyOrWhitespace())this.setQuery(ja);this.selectedQuery=ja;}return ja;};ia.prototype.completeSelection=function(){'use strict';var ja=this.view.getSelection();if(ja&&!ja.search){this.data.saveResult(ja);ja.structure=ja.structure.pad();this.setQuery(ja);return true;}};ia.prototype.setQuery=function(ja,ka){'use strict';ja=this.cleanQuery(ja);if(ja.structure.hasType('blank'))ja.structure=new r(ja.structure.toArray().filter(function(la){return la.getType()!='blank';}));this.input.setValue(ja.structure);this.settedQuery=ja;this.stickyQuery=ka===false?this.stickyQuery:ja;this.checkValue();this.checkSingleState();};ia.prototype.checkValue=function(){'use strict';if(this.value&&this.value.getHash()==this.input.getValue().getHash())return;this.checkBlockedSearch();this.performQueryIfVisible();this.showSearchSuggestionBadgeIfPossible();};ia.prototype.showSearchSuggestionBadgeIfPossible=function(){'use strict';if(this.isNullState()){if(!this.isSuggestionBagdeVisible&&this.data.resultStore.injectedSuggestionCount){i.inform('FacebarTypeahead.showSuggestionBadge');this.isSuggestionBagdeVisible=true;}}else if(this.isSuggestionBagdeVisible){i.inform('FacebarTypeahead.hideSuggestionBadge');this.isSuggestionBagdeVisible=false;}};ia.prototype.checkSingleState=function(){'use strict';var ja=this.input.getValue();this.data.setSingleState(ja.getCount()===1&&ja.hasType('ent'));};ia.prototype.checkBlockedSearch=function(){'use strict';var ja=this.input.getValue().toString().toLocaleLowerCase();if(!this.data.blockees||!this.data.blockees.hasOwnProperty(ja)){this.view.hideBlockNotification();}else this.view.showBlockNotification(this.data.blockees[ja]);};ia.prototype.isNullState=function(){'use strict';return this.input.getValue().getHash()==='';};ia.prototype.performQueryIfVisible=function(){'use strict';if(!this.view.visible)return;this.value=this.nextQuery=this.getValue();this.performQuery();};ia.prototype.performQuery=function(){'use strict';if(n.graphSearchV2)this.view.resetIndex();this.data.query(this.nextQuery);this.currentQuery=this.nextQuery;};ia.prototype.requery=function(){'use strict';if(this.currentQuery)this.data.query(this.currentQuery);};ia.prototype.executeQuery=function(ja){'use strict';var ka=this.isNullState();ja=this.cleanQuery(ja);var la=this.inform('execute',ja),ma=this.getSessionID();this.close();if(n.allowGrammar){this.selectQuery(ja);}else this.selectQuery();if(n.hasRecentSearchNullState&&ja.type!=='shortcut'&&(!ka||ja.isInjectedSuggestion)){this.data.resultStore.addRecentEntryToNullState(ja);if(ja.isInjectedSuggestion){i.inform('FacebarTypeahead.removeInjectedSuggestion');--this.data.resultStore.injectedSuggestionCount;this.performQuery();}}if(!la)this._navigateToQuery(ja,ma);};ia.prototype.getSearchType=function(){'use strict';return 'facebar';};ia.prototype._newSession=function(){'use strict';if(this._sessionID!=null)return;this._sessionID=Math.random().toString();this.inform('session',this._sessionID,i.BEHAVIOR_STATE);};ia.prototype._closeSession=function(){'use strict';this._sessionID=null;this.inform('session',null,i.BEHAVIOR_STATE);};ia.prototype.getSessionID=function(){'use strict';return this._sessionID;};ia.prototype._navigateToQuery=function(ja,ka){'use strict';var la=this.data.facebarConfig;if(ja.uri){ja.uri.addQueryData(ja.extra_uri_params);ja.uri.addQueryData({ref:'br_tf'});if(ja.structure&&(ja.type=='websuggestion'||ja.type==v.result_type||ja.type=='grammar'&&(!la||String(ja.uri.getPath()).startsWith(la.search_path)))){var ma=this.data.getRawStructure(ja.structure).text_form,na=k.encode(encodeURIComponent(ma)).replace(/\=+$/,''),oa={sid:ka,qs:na,gv:this.data.getQueryData().grammar_version},pa=k.encode(JSON.stringify(oa)).replace(/\=+$/,'');ja.uri.addQueryData({ref:pa,bs:ja.alternateSemantic});}ja.uri.go();return;}};ia.prototype.reset=function(){'use strict';this.selectQuery();this.inform('reset');this.showSearchSuggestionBadgeIfPossible();};ia.prototype.animateInputValue=function(ja,ka,la){'use strict';this.hoverAnimation&&this.hoverAnimation.stop();var ma=new h(ka).from('opacity',1).to('opacity',0).duration(150).ondone((function(){this.input.setValue(la);this.hoverAnimation=na.go();}).bind(this)),na=new h(ja).from('opacity',0).to('opacity',1).duration(150).ondone((function(){this.hoverAnimation=null;x.set(ka,'opacity','');x.set(ja,'opacity','');}).bind(this));x.set(ja,'opacity',0);this.hoverAnimation=ma.go();};ia.prototype.open=function(ja){'use strict';this.inform('open');this.view.show(this.facebarRoot.offsetWidth);this.input.focus({catchup:ja});this.checkValue();this.checkSingleState();if(!this.isFocused){this.isFocused=true;this._newSession();this.inform('focus');}};ia.prototype.close=function(){'use strict';this._closeSession();if(this.inform('close')===false)return;if((!this.value||this.value.isEmptyOrWhitespace())&&this.selectedQuery){this.input.setValue(this.selectedQuery.structure);}else if(this.stickyQuery)this.input.setValue(this.stickyQuery.structure);this.input.blur();this.view.hide();this.view.setAutoSelect(false);this.inform('session',null,i.BEHAVIOR_STATE);if(this.isFocused){this.isFocused=false;fa(this.inform.bind(this,'blur'),0);}};ia.prototype.getElement=function(){'use strict';return this.root;};ia.prototype.getValue=function(){'use strict';return this.input.getValue();};ia.prototype.getText=function(){'use strict';return this.getValue().toString();};ia.prototype.submitQuery=function(ja){'use strict';if(n.graphSearchV2&&this.view.index<0){var ka=this.input.getValue(),la=this.data.getRawStructure(ka);if(la&&!la.is_empty){var ma=!la.raw_text?q.getRawTextFromStructured(ka.toArray()):la.raw_text,na=p.makeFacebarEntry(ma);na.position=ja;this.inform('magSearch',na);this.executeQuery(na);}}else this.view.select();};ia.prototype.keydown=function(event){'use strict';var ja=true,ka=m.getKeyCode(event);if(event.metaKey===true)this.metaOnKeyDown=true;switch(ka){case u.ESC:this.close();break;case u.RIGHT:if(!n.disableLockingEntitiesOnRightArrow){ja=this.input.isSelectionAtEnd()&&this.completeSelection();}else ja=false;break;case u.TAB:var la=this.cleanQuery(this.view.getSelection()),ma=la.structure.hasType('blank');if(event.getModifiers().shift||!this.completeSelection()&&!this.loading){this.view.setAutoSelect(false);this.view.hide();ja=false;}else if(!ma&&!n.graphSearchV2)this.tabQueued=true;break;case u.UP:this.view.prev();break;case u.DOWN:this.view.next();break;case u.RETURN:var na=-2;this.submitQuery(na);break;case u.PAGE_UP:this.view.first();break;case 222:var oa=this.input.value.trim();if(!event.getModifiers().shift&&oa.endsOnType('ent'))this.input.setValue(oa);ja=false;break;default:var pa=ka<=46&&ka!==8&&ka!==32,qa=ka>=112&&ka<=126,ra=ka===144||ka===145,sa=ka===91||ka===92||ka===93||ka===224;if(!pa&&!qa&&!ra&&!event.metaKey&&!sa){this.data.setSingleState(false);if(n.autohighlight)this.view.setAutoSelect(true);}this.stickyQuery=null;ja=false;break;}this.input.storeSelection();if(ja)return event.kill();};ia.prototype.keyup=function(event){'use strict';var ja=m.getKeyCode(event),ka=ja<=46&&ja!==8&&ja!==32,la=ja>=112&&ja<=126,ma=ja===144||ja===145,na=ja===91||ja===92||ja===93||ja===224;if(!ka&&!la&&!ma&&!event.metaKey&&!na&&!this.metaOnKeyDown)if(n.unlockTextOnKeypress)this._unlockQuery();if(!na)this.metaOnKeyDown=false;};ia.prototype.mousedown=function(event){'use strict';if(n.autohighlight)this.view.setAutoSelect(true);this.input.storeSelection();if(w.byClass(event.target,"_50c9"))event.preventDefault();};ia.prototype.focusWindow=function(){'use strict';this.windowFocused=true;};ia.prototype.blurWindow=function(){'use strict';this.windowFocused=false;};ia.prototype.selectView=function(ja,ka){'use strict';if(!ka||!ka.selected)return;this.inform('select',ka);var la=this.cleanQuery(ka.selected);this.executeQuery(la);};ia.prototype.highlightView=function(){'use strict';var ja=this.view.getSelection();if(n.graphSearchV2){this.input.setHint(ja?ja.structure:null);}else ja&&this.input.setHint(ja.structure);};ia.prototype.blurInput=function(){'use strict';fa((function(){if(this.windowFocused||y.getRequestURI().getSubdomain()==='apps'){this.input.togglePlaceholder();this.close();}}).bind(this),0);};ia.prototype.changeInput=function(){'use strict';this.inform('change');this.checkValue();this.inform('change_end');};ia.prototype.focusInput=function(){'use strict';this.open();this.input.togglePlaceholder(false);};ia.prototype.updateData=function(){'use strict';this.view.setLoading(this.loading);};ia.prototype.completeData=function(ja,ka){'use strict';this.checkBlockedSearch();if(ka.forceDisplay||this.value&&this.value.matches(ka.value)){var la=n.graphSearchV2?!ka.results.length:!ka.results.length&&!this.loading&&ka.isEmptyResults;this.view.render(ka.value,ka.results,ka.isAsync,la);if(this.tabQueued&&this.completeSelection())delete this.tabQueued;}};ia.prototype.typeaheadActivity=function(ja,ka){'use strict';this.fetching=ka.activity;if(this.loading!==this.fetching){this.loading=this.fetching;this.updateData();}};ia.prototype.getNameTextFromSelected=function(){'use strict';var ja=this.settedQuery&&this.settedQuery.semantic,ka=this.data.facebarConfig&&this.data.facebarConfig.name_functions,la=ja&&ka&&ja.match(/[a-z-]+\([^()]+\)/g);if(la)for(var ma=0;ma<la.length;ma++){var na=la[ma].match(/([a-z-]+)\(([^()]+)\)/);if(na&&z(ka,na[1]))return na[2];}return this.value.toString();};ia.prototype.clearRecentSearches=function(){'use strict';this.data.resultStore.clearRecentSearches();};ia.clearRecentSearches=function(){'use strict';i.inform('FacebarTypeahead.clearRecentSearches');};Object.assign(ia.prototype,{events:['session','focus','select','change','execute','blur','focusStartTime','open']});f.exports=ia;},null);
__d('FacebarTypeaheadRecorder',['clickRefAction','Event','Keys','SearchTypeaheadRecorder','URI','Arbiter','FacebarTimerUtils','FacebarGlobalOptions','FacebarJSConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;q=babelHelpers.inherits(s,k);r=q&&q.prototype;function s(t){'use strict';r.constructor.call(this,t);this.userText="";this.nullStateCandidates=null;this.singleStateCandidates=null;this.queryTimes={};this._sessionDisabled=false;this.type="facebar";this._maxQueryID=0;this._isQueryMatch=true;}s.prototype.initEvents=function(t){'use strict';t.getCore().subscribe('session',(function(u,v){if(v===null){this.sessionEnd();}else this.sessionStart(v);}).bind(this));t.getCore().subscribe('select',(function(u,v){this.recordSelectInfo(v);}).bind(this));t.getCore().subscribe('magSearch',(function(u,v){this.recordMagSearch(v);}).bind(this));t.getCore().input.subscribe('shortcut',(function(u,v){this.recordShortcut(v);}).bind(this));t.getCore().subscribe('quickSelectRedirect',(function(u,v){this.recordQuickSelectInfo(v);}).bind(this));t.getView().subscribe('render',(function(u,v){this.recordRender(v);if(this.allFromNullState){this.nullStateCandidates=this.buildListTypeaheadRecords();}else if(this.allFromSingleState)this.singleStateCandidates=this.buildListTypeaheadRecords();}).bind(this));t.getView().subscribe('show',(function(u,v){if(!this.data.lastNullOrSingleStateFetchStartTime)return;this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}).bind(this));t.getView().subscribe('logPerformanceTiming',(function(u,v){this.performanceTimings[v.field]=v.value;}).bind(this));t.data.subscribe('query',(function(u,v){if(!v.value.isEmpty())this.recordCountStat('num_queries');this.recordAvgStat('num_results_from_cache',v.results.length);this.queryTimes[v.queryId]={send:n.getTimestamp()};}).bind(this));t.data.subscribe('sending_request',(function(u,v){var w=v.data.value;if(!w)return;this.backendQueries.push(w);}).bind(this));t.subscribe('navigation',(function(u,v){if(v&&v.structure){this.recordStat('navigation_input',JSON.stringify(v.structure.toStruct()));this.recordStat('navigation_text',v.structure.toString());}}).bind(this));t.data.subscribe('response_received',(function(u,v,w){if(this.queryTimes[v.queryId]){var x=this.queryTimes[v.queryId];x.recv=n.getTimestamp()-x.send;if(v&&v.payload)x.payload_size=JSON.stringify(v.payload).length;}}).bind(this));t.data.subscribe('remote_query_latency',(function(u,v){if(this.queryTimes[v.queryId]){var w=this.queryTimes[v.queryId];w.remoteQueryLatencies=v.latencies;}}).bind(this));t.data.subscribe('cache_query_latency',(function(u,v){if(this.queryTimes[v.queryId]){var w=this.queryTimes[v.queryId];w.cacheQueryLatencies=v.latencies;}}).bind(this));t.data.subscribe('backend_response',(function(u,v){if(this.queryTimes[v.queryId]){var w=this.queryTimes[v.queryId];w.render=n.getTimestamp()-w.send;if(v.payload.incomplete)w.incomplete=true;w.backendInfo=v.payload.info;if(this.core.scubaInfo)this.logToScuba(v,w,this.core.scubaInfo,v.inputQuery,this.type);}}).bind(this));t.getCore().subscribe('change',(function(u,v){this.userInput(this.core.getText());}).bind(this));t.data.subscribe('remote_query_match',(function(u,v){if(this._maxQueryID<v.queryId){this._maxQueryID=v.queryId;this._isQueryMatch=v.isMatch;}}).bind(this));m.subscribe('BrowseNUX/typing',this.disableThisSession.bind(this));m.subscribe('TestConsole/typing',this.disableThisSession.bind(this));t.subscribe('clear',(function(){this.recordAppendStat('before_clear_queries',this.userText);}).bind(this));i.listen(this.element,'keydown',(function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(i.getKeyCode(event)==j.BACKSPACE){if(!this._backspacing){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.core.getText());}}else this._backspacing=false;}).bind(this));this.core.subscribe('open',(function(u,v){if(v&&v.catchup)return;this.data.lastNullOrSingleStateFetchStartTime=Date.now();}).bind(this));this.core.subscribe('focusStartTime',(function(u,v){this.data.lastNullOrSingleStateFetchStartTime=v.time;}).bind(this));this.data.subscribe('beforeQuery',(function(u,v){if(!this.queryStartTime)this.queryStartTime=[];if(!this.query&&!this.data.lastNullOrSingleStateFetchStartTime)this.data.lastNullOrSingleStateFetchStartTime=Date.now();this.queryStartTime[this.query]=Date.now();}).bind(this));t.subscribe('filter',(function(u,v){this._unsupportedGrammarInfo=this.buildUnsupportedGrammarInfo(v);}).bind(this));t.getCore().subscribe('recordFunction',(function(u,v){this._extraRecorder.push(v);}).bind(this));this.data.subscribe('bootstrapped',(function(u,v){this.recordStat('bootstrap_size',v.size||-1);}).bind(this));};s.prototype._reset=function(t){'use strict';this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this._topreplace=false;this._inflightRequests={};};s.prototype.sessionStart=function(t){'use strict';this._sessionEnded=false;this.data.setQueryData({sid:t});this.recordStat('sid',t);if(!this.stats.session_start_time){this.recordStat('session_start_time',n.getTimestamp());var u=new Date(),v=u.getTimezoneOffset(),w=Date.now()-v*60*1000;this.recordStat('session_start_time_user_timezone',w);}this.recordStat('keypressed',0);this.queryTimes={};};s.prototype.sessionEnd=function(){'use strict';if(this._sessionEnded||this._sessionDisabled){if(this._sessionDisabled){this.reset();this._sessionDisabled=false;this._sessionEnded=true;}return;}this._sessionEnded=true;var t='typed';if(this.allFromNullState){t='nullstate';}else if(this.allFromSingleState)t='singlestate';this.recordStat('last_state',t);this.recordStat('session_end_time',n.getTimestamp());this.recordStat('grammar_version',this.data.getQueryData().grammar_version);this.submit();this.nullStateCandidates=null;this.singleStateCandidates=null;};s.prototype.disableThisSession=function(){'use strict';this._sessionDisabled=true;};s.prototype.userInput=function(t){'use strict';this.userText=t;};s.prototype.buildUnsupportedGrammarInfo=function(t){'use strict';var u=t.results?t.results[0]:null;if(!u||u.results_set_type!=='unimplemented')return null;return {unsupported_grammar:{category:u.error_info.category||'unknown',edge:u.error_info.blamed_edge}};};s.prototype.buildTypeaheadRecord=function(t,u){'use strict';var v=t.rankType||t.render_type||t.type,w=0,x=u;if(typeof t.groupIndex=='number'){w=t.groupIndex;x=t.indexInGroup;}var y={group_index:w,index_in_group:x,cost:t.cost,s_value:t.s_value||0,semantic:t.semantic,text:t.structure.toString(),cache_only:t.cacheOnlyResult?1:0,prefetched:t.isPrefetched?1:0,parse:t.parse,category:t.category,type:v,source:t.bootstrapped,grammar_results_type:(t.results_set_type||'').replace(/[\[\{](.*)[\]\}]/,'$1'),result_from_memcache:t.memcache,dynamic_cost:t.dynamic_cost,is_js_bootstrap_match:t.isJSBootstrapMatch,backend_cost:t.backendCost,bootstrap_cost:t.bootstrapCost,match_type:t.match_type,l_type:t.l_type,vertical_type:t.vertical_type,prefix_match:t.prefix_match,prefix_length:t.prefix_length,index_before_buckets:t.indexBeforeBuckets,bucket_lineage:t.bucketLineage,nullstate:t.isNullState,singlestate:t.isSingleState,query_id:t.qid,template_id:t.templateID,coeff_cost:typeof t.grammar_costs=='undefined'?-1:t.grammar_costs["{"+t.type+"}"],suggestion:t.isSuggestion,keyword_source:t.keywordSource,keyword_bootstrap_type:t.keywordBootstrapType,exact_match_suggestion:t.exactMatchKeyword?1:0};if(t.logInfo)y.backend_log_info=t.logInfo;if(t.s_token)y.s_token=t.s_token;if(t.s_categories)y.s_categories=t.s_categories;return y;};s.prototype.buildListTypeaheadRecords=function(){'use strict';var t=[];this.results&&this.results.forEach((function(u,v){if(u.uid!=='search')t.push(this.buildTypeaheadRecord(u,v));}).bind(this));return t;};s.prototype.recordShortcut=function(t){'use strict';this.recordStat('shortcut',1);this.recordStat('shortcut_with_shift',t.shift);};s.prototype.recordStats=function(t,u){'use strict';for(var v in u)this.recordStat(t+'_'+v,u[v]);};s.prototype.getTypeaheadIndex=function(t,u){'use strict';var v=typeof t.groupIndex=='number'?t.groupIndex+1:0;return u-v;};s.prototype.recordQuickSelectInfo=function(t){'use strict';var u={input_query:t.input_query,semantic:t.semantic,type:t.type,position:t.position,with_mouse:t.with_mouse,text:t.text,quick_select:1};this.recordStats('selected',u);this.recordStat('quick_select',1);};s.prototype.recordMagSearch=function(t){'use strict';var u={};u.text=t.text;u.semantic=t.semantic;u.type=t.type;u.input_query=t.text;u.position=t.position;this.recordStats('selected',u);};s.prototype.recordSelectInfo=function(t){'use strict';var u=t.selected,v=this.getTypeaheadIndex(u,t.index),w={};if(u.uid=='search'){w.selected_search=1;}else{w=this.buildTypeaheadRecord(u);var x=w.type=='friend'?'user':w.type;w.position=v;w[x]=1;}w.with_mouse=t.clicked?1:0;w.quick_select=0;w.input_query=this.userText;w.input_fragments=JSON.stringify(this.core.currentQuery.toStruct());var y=u.dataGT?{gt:JSON.parse(u.dataGT)}:{},z={href:u.path};h('click',z,null,null,y);this.recordStats('selected',w);this.recordAppendStat('selection_history',{selected:w,candidate_results:this.buildListTypeaheadRecords(),timestamp:n.getTimestamp()});var aa={};this._extraRecorder.forEach((function(ba){ba(t,this.results,aa);}).bind(this));this.recordStat('extra_select_info',JSON.stringify(aa));this.recordStat('selected_with_mouse',t.clicked?1:0);};s.prototype._dataToSubmit=function(){'use strict';this.recordStat('max_results',this.data._maxResults);if(this.stats&&this.stats.selected_input_query){this.recordStat('input_query',this.stats.selected_input_query);}else this.recordStat('input_query',this.userText);this.recordStat('uri',new l(window.location.href).toString());if(!this.stats.shortcut){this.recordStat('shortcut',0);this.recordStat('shortcut_with_shift',false);}var t=this.stats;for(var u in this.avgStats){var v=this.avgStats[u];t[u]=v[0]/v[1];}var w={candidate_results:this.buildListTypeaheadRecords(),timestamp:n.getTimestamp(),input_query:this.userText,remote_query_match:this._isQueryMatch};if(this._unsupportedGrammarInfo)Object.assign(w,this._unsupportedGrammarInfo);this.recordAppendStat('suggestions_at_end_of_session',w);if(this.nullStateCandidates)this.recordAppendStat('suggestions_at_nullstate_session',{candidate_results:this.nullStateCandidates});if(this.singleStateCandidates)this.recordAppendStat('suggestions_at_singlestate_session',{candidate_results:this.singleStateCandidates});this.recordAppendStat('query_times',this.queryTimes);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);}if(o.taSessionLoggingSample){var x=[];this.results.forEach(function(z){x.push([z.text||'',z.category||'',z.subtext||'']);});this.recordStat('raw_suggestions_text',x);}if(o.graphSearchV2){this.recordStat('experience_type','gsv2');}else this.recordStat('experience_type','facebar');for(var y in this.appendStats)t[y]=JSON.stringify(this.appendStats[y]);return t;};s.prototype.getDataToSubmit=function(){'use strict';return this._dataToSubmit();};s.prototype.reset=function(){'use strict';return this._reset();};s.prototype.submit=function(){'use strict';if(!this._sessionDisabled)r.submit.call(this);this.view.inform('feedback');this._reset();};Object.assign(s.prototype,{_sessionEnded:true,_extraRecorder:[],_banzaiRoute:'facebar'});f.exports=s;},null);
__d('FacebarTypeaheadV2',['CSS','csx','cx','DOM','Event','Parent'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o){this._view=o.getView();this._root=m.byClass(o.getElement(),"_585-");this._button=k.find(this._root,"._4w98");this._core=o.getCore();l.listen(this._button,'click',this.buttonDownAndClick.bind(this));l.listen(this._button,'mousedown',this.buttonDownAndClick.bind(this));l.listen(this._button,'mouseup',this.buttonUp.bind(this));this._core.subscribe('open',this.showButton.bind(this));this._core.subscribe('close',this.hideButton.bind(this));},showButton:function(){h.addClass(this._button,"_4w97");},hideButton:function(){if(h.hasClass(this._button,"_4w97"))h.removeClass(this._button,"_4w97");},buttonDownAndClick:function(event){event.preventDefault();},buttonUp:function(){if(!this._core.isFocused){this._core.focusInput();}else{var o=-1;this._core.submitQuery(o);}}};f.exports=n;},null);
__d('FacebarTypeaheadGrammarItem.react',['React','FacebarTypeaheadItem.react','FacebarTypeaheadToken.react','FacebarTypeaheadTokenText','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={user:m._("Person")},p=h.createClass({displayName:'FacebarTypeaheadGrammarItem',renderToken:function(){var q=this.props.result.decoration,r=this.props.result.ambiguity,s=r&&r.text,t=q&&q.entity||r&&r.entity;if(this.props.result.isRecent){var u=m._("Recent search");return (h.createElement(j,{text:[u],innerClass:"_53ab"}));}else if(s){return (h.createElement(j,{text:k.text(s)}));}else if(t)return (h.createElement(j,{text:k.textForEntity(t,o),limit:2,leadingMiddot:true}));},getClassName:function(){var q=this.props.result;if(q.isPeopleAndPagesSuggestion)return "_2enu";if(q.tags&&q.tags.displayedSeeMore)return "_10gs";return "_207";},render:function(){var q=this.renderToken(),r=q&&!q.props.leadingMiddot;return (h.createElement(i,babelHelpers._extends({},this.props,{className:n(this.props.className,this.getClassName()),valign:r,token:q})));}});f.exports=p;},null);
__d('FacebarTypeaheadKeywordItem.react',['FacebarGlobalOptions','FacebarTypeaheadItem.react','FacebarTypeaheadToken.react','FacebarTypeaheadTokenText','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=l.createClass({displayName:'FacebarTypeaheadKeywordItem',render:function(){var q=[n._("Search")];if(this.props.result.isTrending){q.push(n._("Trending"));}else if(this.props.result.type=='related')q=[n._("Related search")];if(h.renderKeywordSnippets){var r=k.textForEntity(this.props.result,{});if(r&&r.length)q=r;}var s=h.renderKeywordSnippets&&r!=null&&(r.length>1||this.props.result.boldedSubtext!=null),t=this.props.result.isSeeMore,u=t?null:l.createElement(j,{text:q,mainClass:(s?"_4jt7":'')+(s&&this.props.result.isSpecialIntent?' '+"_21z1":'')+(s&&this.props.result.isLocal?' '+"_2xfl":'')+(s&&this.props.result.isPhotos?' '+"_21z2":'')+(s&&this.props.result.isVideos?' '+"_21z4":'')+(s&&this.props.result.isSingleState&&this.props.result.exactMatchKeyword?' '+"_21z5":''),innerClass:"_53ab"});return (l.createElement(i,babelHelpers._extends({},this.props,{className:o(this.props.className,(!h.renderKeywordSnippets?"_207":'')+(' '+"_5d77")),token:u,prefix:this.props.result.query_string.toLowerCase(),showSecondaryIcon:h.showKeywordSuggestionPhotos})));}});f.exports=p;},null);
__d('FacebarTypeaheadNodeItem.react',['React','ReactDOM','DOM','isElementNode'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'FacebarTypeaheadNodeItem',render:function(){var m=this.props.result.node;return (h.createElement('li',this.props,!k(m)?m:null));},attachNode:function(m){var n=this.props.result.node;if(k(n))j.setContent(m,n);},componentDidMount:function(){this.attachNode(i.findDOMNode(this));},componentDidUpdate:function(m,n,o){this.attachNode(i.findDOMNode(this));},shouldComponentUpdate:function(m){return this.props.result.node!==m.result.node;}});f.exports=l;},null);
__d('FacebarTypeaheadRecentItem.react',['FacebarGlobalOptions','FacebarTypeaheadItem.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=j.createClass({displayName:'FacebarTypeaheadRecentItem',render:function(){return (j.createElement(i,babelHelpers._extends({},this.props,{className:l(this.props.className,!h.renderKeywordSnippets?"_207":''),icon:this.renderIcon()})));},renderIcon:function(){var n=this.props.result;if(!h.allowGrammar)return (j.createElement('img',{className:"_20h",src:n.photo}));var o=n.icon_class?j.createElement('span',{className:n.icon_class}):j.createElement('img',{className:"_20h",src:n.photo});return (j.createElement('span',{className:!h.renderKeywordSnippets||n.icon_class&&h.renderKeywordSnippets?"_k83":''},o));}});f.exports=m;},null);
__d('FacebarTypeaheadTrendingItem.react',['FacebarTypeaheadItem.react','FacebarTypeaheadToken.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=j.createClass({displayName:'FacebarTypeaheadTrendingItem',render:function(){var n=this.props.result.articleTitle||'',o=j.createElement(i,{text:[n],innerClass:"_53ab",leadingMiddot:true});return (j.createElement(h,babelHelpers._extends({},this.props,{className:l(this.props.className,"_207"),token:o,valign:false})));}});f.exports=m;},null);
__d('FacebarTypeaheadList.react',['ARIA','React','ReactDOM','StaticContainer.react','FacebarTypeaheadEntityItem.react','FacebarTypeaheadGrammarItem.react','FacebarTypeaheadKeywordItem.react','FacebarTypeaheadNodeItem.react','FacebarTypeaheadRecentItem.react','FacebarTypeaheadTrendingItem.react','LoadingIndicator.react','FacebarJSConstants','FacebarGlobalOptions','CSS','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=i.PropTypes,y={grammar:m,trending:q,related:n};y[s.browseTypes.keyword]=n;y[s.keywordType]=n;var z=i.createClass({displayName:'FacebarTypeaheadList',propTypes:{results:x.array,onRender:x.func,onSelect:x.func.isRequired,onHighlight:x.func.isRequired,isKeywordList:x.bool},getItemComponentConstructor:function(aa,ba){if(aa.node)return o;if(aa.isRecent)return p;if(aa.results_set_type===s.browseTypes.keyword)return n;if(aa.type&&y[aa.type])return y[aa.type];return l;},renderItem:function(aa,ba){var ca=this.getItemComponentConstructor(aa),da;if(aa.type===s.keywordType){da=aa.query_string+aa.semantic+aa.boldedSubtext+aa.subtext+aa.fromCache+(aa.isSeeMore?'see_more':'')+(aa.keywordBootstrapType?aa.keywordBootstrapType:'')+(aa.uid!=null?aa.uid:'');}else{da=aa.semantic||aa.uid||aa.tuid;da=da+aa.isNullState;if(t.facebarUpdateSnippets)da=da+aa.category+aa.subtext;}return (i.createElement(k,{key:da},i.createElement(ca,{result:aa,onClick:this.handleClick.bind(null,aa),onMouseEnter:this.handleMouseEnter.bind(null,aa)})));},renderFooter:function(){var aa="_3su"+(!this.props.loading?' '+"hidden_elem":'');return (i.createElement('li',{className:aa},i.createElement('div',{className:"_21f"},w._("Finding results"),i.createElement(r,{size:'medium',color:'white'}))));},componentDidMount:function(){var aa=j.findDOMNode(this);h.owns(this.props.accessibilityElement,aa);},hasValidRecentSearches:function(){if(!t.hasRecentSearchNullState||!this.props.results)return false;return this.props.results.some(function(aa){return aa.isRecent;});},render:function(){var aa=this.props.results,ba=[];if(aa)aa.forEach(function(ca){ba.push(this.renderItem(ca));},this);return (i.createElement('div',null,i.createElement('ul',{id:'facebar_typeahead_view_list',className:"_21c"+(this.props.isKeywordList?' '+"_2yob":''),'data-click':'Search',role:'listbox'},ba,this.renderFooter())));},handleClick:function(aa,ba){if(u.hasClass(ba.target,"_2d9t"))return;if(!ba.nativeEvent.isMiddleClick()&&!ba.nativeEvent.getModifiers().any){this.props.onSelect(aa);ba.preventDefault();}},handleMouseEnter:function(aa){this.props.onHighlight(aa);},componentDidUpdate:function(aa,ba,ca){this.props.onRender();},shouldComponentUpdate:function(aa){return this.props.loading!==aa.loading||this.props.results!==aa.results;}});f.exports=z;},null);
__d('FacebarTypeaheadView',['Arbiter','CSS','ContextualLayer','DOM','FacebarGlobalOptions','FacebarJSConstants','FacebarStructuredText','FacebarTypeaheadList.react','Parent','React','ReactDOM','ScriptPath','Style','TypeaheadView','performanceNow','csx','cx','fbt','URI','Link.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba,ca,da='unimplemented';ba=babelHelpers.inherits(ea,u);ca=ba&&ba.prototype;function ea(fa,ga){'use strict';ca.constructor.call(this,fa,ga);this.element=fa;this.sid='';this.index=-1;this.warningShown=false;this.autoSelect=false;this.flipCount=0;this.loading=false;this.handleRender=this.handleRender.bind(this);this.handleHighlight=this.handleHighlight.bind(this);this.handleSelect=this.handleSelect.bind(this);this.events=['highlight','render','filter','show'];}ea.prototype.init=function(){'use strict';this.initializeElements();};ea.prototype.initGSV2Elements=function(){'use strict';var fa=this.element;this.contentKeyword=k.find(fa,"._f7s");this.contentEntity=k.find(fa,"._2pda");this.contentRecent=k.find(fa,"._mn8");this.contentSuggestion=k.find(fa,"._2pl-");this.contentAdminedPages=k.find(fa,"._1e-s");this.contentSeeMore=k.find(fa,"._3-xd");this.keywordResultsContainer=k.create('div');this.entityResultsContainer=k.create('div');this.recentSearchContainer=k.create('div');this.seeMoreContainer=k.create('div');this.results=[];this.keywordResults=[];this.entityResults=[];};ea.prototype.initGSV2Construct=function(){'use strict';this.currentKeywordContainer=this.contentKeyword;this.currentEntityContainer=this.contentEntity;this.contentKeyword.appendChild(this.keywordResultsContainer);this.contentEntity.appendChild(this.entityResultsContainer);this.contentRecent.appendChild(this.recentSearchContainer);this.contentSeeMore.appendChild(this.seeMoreContainer);if(this.isNullState()){if(l.hasRecentOnTopNullState){this.resultsContainer.appendChild(this.contentRecent);this.resultsContainer.appendChild(this.contentKeyword);this.resultsContainer.appendChild(this.contentEntity);}else{this.resultsContainer.appendChild(this.contentKeyword);this.resultsContainer.appendChild(this.contentRecent);this.resultsContainer.appendChild(this.contentEntity);}return;}if(this.entityTop){this.resultsContainer.appendChild(this.contentEntity);this.resultsContainer.appendChild(this.contentKeyword);}else{this.resultsContainer.appendChild(this.contentKeyword);this.resultsContainer.appendChild(this.contentEntity);}if(!this.isNullState())this.resultsContainer.appendChild(this.contentSeeMore);};ea.prototype.initializeElements=function(){'use strict';var fa=this.element;this.isGSV2=l.graphSearchV2;this.dynamicRank=this.isGSV2;this.fixedBlendingOrder=l.blendingOrderKeywordFirst||l.blendingOrderEntityFirst;this.entityTop=l.blendingOrderEntityFirst&&!l.renderKeywordsFirst;this.content=k.find(fa,"._21r");this.warningNode=k.find(fa,"._553e");this.blockNotificationNode=k.find(fa,"._2hh");this.resultsContainer=k.create('div');if(this.isGSV2)this.initGSV2Elements();};ea.prototype.initializeList=function(){'use strict';this.renderTypeaheadList();this.content.appendChild(this.resultsContainer);if(this.isGSV2)this.initGSV2Construct();};ea.prototype.initializeLayer=function(){'use strict';this.layer=new j({context:p.byClass(this.causalElement,"_585-"),position:'below',causalElement:this.causalElement},this.element);var fa=this.layer.getContentRoot();this.root=k.find(fa,"._50c9");i.addClass(fa,"_5tlx");if(this.isGSV2)i.addClass(fa,"_5xzd");this.wrapper=fa;};ea.prototype.setInputElement=function(fa){'use strict';this.setAccessibilityControlElement(fa);this.causalElement=fa;this.initializeLayer();this.initializeList();};ea.prototype.setAutoSelect=function(fa){'use strict';this.autoSelect=fa;if(this.index===-1&&fa)this.first();};ea.prototype.getIndexOf=function(fa,ga){'use strict';for(var ha=0;ha<ga.length;ha++)if(fa.semantic===ga[ha].semantic&&fa.isSeeMore===ga[ha].isSeeMore&&fa.text===ga[ha].text)return ha;return -1;};ea.prototype.handleHighlight=function(fa){'use strict';this.highlight(this.getIndexOf(fa,this.results),false);};ea.prototype.handleSelect=function(fa){'use strict';this.handleHighlight(fa);this.select(true);};ea.prototype.show=function(fa){'use strict';if(!this.visible){this.inform('beforeShow',this.layer);t.set(this.wrapper,'minWidth',fa+'px');var ga=ca.show.call(this);this.first();this.layer.show();this.layer.updatePosition();this.inform('show');h.inform('layer_shown',{type:'FacebarTypeahead'});return ga;}};ea.prototype.hide=function(){'use strict';if(this.visible){this.layer.hide();ca.hide.call(this);this.inform('hide');h.inform('layer_hidden',{type:'FacebarTypeahead'});this.flipCount=0;}return this;};ea.prototype.select=function(fa){'use strict';var ga=this.results&&this.results[this.index];if(!ga){this.inform('quickSelect');return;}var ha=this.inform('beforeSelect',{index:this.index,selected:ga});if(ha!==false){s.setClickPointInfo({click:'Search'});ca.select.call(this,fa);}};ea.prototype.doesResultBelongToEntitySection=function(fa){'use strict';switch(fa.type){case m.keywordType:return false;case m.grammarType:return fa.tags&&fa.tags.displayedSeeMore;default:return true;}};ea.prototype.processGSV2Results=function(fa){'use strict';this.keywordResults=[];this.entityResults=[];var ga=[],ha=[],ia=[],ja=fa.some(function(ka){return ka.isSingleState;});fa.forEach((function(ka){if(this.doesResultBelongToEntitySection(ka)){this.entityResults.push(ka);}else if(ja){if(ka.alternateSemantic){ha.push(ka);}else if(ka.exactMatchKeyword){ia.push(ka);}else ga.push(ka);}else this.keywordResults.push(ka);}).bind(this));if(ja)this.keywordResults=ia.concat(ha.concat(ga));if(this.entityTop)return this.entityResults.concat(this.keywordResults);return this.keywordResults.concat(this.entityResults);};ea.prototype.reGenerateContainer=function(fa){'use strict';var ga=k.create('div');if(this.isNullState()){if(l.hasRecentOnTopNullState){ga.appendChild(this.contentRecent);ga.appendChild(this.currentKeywordContainer);ga.appendChild(this.currentEntityContainer);}else{ga.appendChild(this.currentKeywordContainer);ga.appendChild(this.contentRecent);ga.appendChild(this.currentEntityContainer);}return ga;}if(this.entityTop){ga.appendChild(this.currentEntityContainer);ga.appendChild(this.currentKeywordContainer);}else{ga.appendChild(this.currentKeywordContainer);ga.appendChild(this.currentEntityContainer);}if(!this.isNullState()&&!fa)ga.appendChild(this.contentSeeMore);return ga;};ea.prototype.buildResultsNoRegeneration=function(fa,ga){'use strict';if(this.dynamicRank&&fa.length>0&&!this.fixedBlendingOrder&&!l.renderKeywordsFirst&&this.flipCount<2){var ha=fa[0].type!==m.keywordType;if(l.hasFlipOnce&&this.value.toString()&&this.entityTop!=ha)this.flipCount++;this.entityTop=ha;}var ia=String(this.value);fa.forEach(function(la){la.query_string=ia;});this.results=fa;if(this.isGSV2){this.results=this.processGSV2Results(fa);if(this.seeMoreResult){var ja=this.results.indexOf(this.seeMoreResult);if(ja>-1)this.results.splice(ja,1);this.seeMoreResult=null;}if(!this.isNullState()&&!ga){this.seeMoreResult=this.inform('seeMore',{value:ia,results:this.results});if(this.seeMoreResult)this.results.push(this.seeMoreResult);}}var ka=v();this.renderTypeaheadList({results:this.results,loading:this.loading});this.inform('logPerformanceTiming',{field:'build_results_set_props_duration',value:v()-ka});};ea.prototype.buildResults=function(fa){'use strict';var ga=fa.some(function(ha){return ha.isSingleState;});this.buildResultsNoRegeneration(fa,ga);if(this.dynamicRank)this.resultsContainer=this.reGenerateContainer(ga);return this.resultsContainer;};ea.prototype.getGSV2Items=function(){'use strict';return ca.getItems.call(this).filter(function(fa){return !i.hasClass(fa,"_3su");});};ea.prototype.getItems=function(){'use strict';if(this.isGSV2)return this.getGSV2Items();return ca.getItems.call(this).slice(0,-1);};ea.prototype.handleRender=function(){'use strict';this.items=this.getItems();};ea.prototype.render=function(fa,ga,ha,ia){'use strict';this.inform('filter',{results:ga,value:fa});var ja=!fa||fa instanceof n&&fa.isEmptyOrWhitespace();i.conditionClass(this.wrapper,"_5qz2",!ga.length&&ja&&!this.getMegaphone());var ka=ga[0];if(ia&&!ja){if(!this.isGSV2)this.showWarning(y._("There are no results for '{query}'",[y.param('query',fa.toString())]));}else if(ka&&ka.results_set_type===da){if(!ka.error_info.suppress)this.showWarning(ka.error_info.errorMessage||y._("This search isn't currently supported."));}else this.hideWarning();if(this.inform('removeUnimplementedGrammar')!==false)ga=ga.filter((function(la){return la.results_set_type!==da;}).bind(this));ca.render.call(this,fa,ga,ha);};ea.prototype.reset=function(){'use strict';this.index=-1;this.items=[];this.results=[];this.value='';this.buildResults([]);this.inform('reset');return this;};ea.prototype.resetIndex=function(){'use strict';this.index=-1;};ea.prototype.getMegaphone=function(){'use strict';return k.scry(this.element,'.megaphone_location_gsv2_typeahead')[0];};ea.prototype.showBlockNotification=function(fa){'use strict';var ga=new z('https://www.facebook.com').setPath('/settings').addQueryData('tab','blocking'),ha=q.createElement('div',null,y._("You've blocked {fullName}. For more info on privacy and blocking, go to your {settings}.",[y.param('fullName',fa),y.param('settings',q.createElement(aa,{href:{url:ga}},y._("settings")))]));i.show(this.blockNotificationNode);r.render(ha,this.blockNotificationNode);};ea.prototype.hideBlockNotification=function(){'use strict';i.hide(this.blockNotificationNode);k.setContent(this.blockNotificationNode,'');};ea.prototype.showWarning=function(fa){'use strict';i.show(this.warningNode);k.setContent(this.warningNode,fa);this.warningShown=true;this.highlight(-1,false);};ea.prototype.hideWarning=function(){'use strict';i.hide(this.warningNode);this.warningShown=false;this.highlight(this.index,false);};ea.prototype.setLoading=function(fa){'use strict';if(this.loading!=fa){this.loading=fa;this.renderTypeaheadList({results:this.results,loading:fa});}};ea.prototype.first=function(){'use strict';this.index=this.autoSelect?0:-1;this.highlight(this.index);};ea.prototype.prev=function(){'use strict';if(this.isGSV2){if(this.index<0||this.index===0&&this.autoSelect)this.index=this.items.length;}else if(this.index<=0)this.index=this.items.length;this.ignoreMouseover=true;ca.prev.call(this);};ea.prototype.next=function(){'use strict';if(this.isGSV2&&this.autoSelect&&this.index>=this.items.length-1)this.index=-1;if(!this.isGSV2&&this.index+1>=this.items.length)this.index=-1;this.ignoreMouseover=true;ca.next.call(this);};ea.prototype.highlight=function(fa,ga){'use strict';ga=ga!==false&&this.index!=fa;if(!ga||this.inform('beforeHighlight')!==false){var ha=this.warningShown||!this.autoSelect?-1:0;ca.highlight.call(this,Math.max(ha,fa),ga);}};ea.prototype.isNullState=function(){'use strict';return !String(this.value).trim();};ea.prototype.updateCurrentKeywordContainer=function(){'use strict';var fa=this.currentKeywordContainer;if(this.isNullState()){this.currentKeywordContainer=this.contentSuggestion;}else this.currentKeywordContainer=this.contentKeyword;if(fa&&fa!==this.currentKeywordContainer){i.hide(fa);fa.removeChild(this.keywordResultsContainer);this.currentKeywordContainer.appendChild(this.keywordResultsContainer);}};ea.prototype.updateCurrentEntityContainer=function(){'use strict';var fa=this.currentEntityContainer,ga=!String(this.value).trim();if(ga&&this.entityResults){this.currentEntityContainer=this.contentAdminedPages;}else this.currentEntityContainer=this.contentEntity;if(fa&&fa!=this.currentEntityContainer){i.hide(fa);fa.removeChild(this.entityResultsContainer);this.currentEntityContainer.appendChild(this.entityResultsContainer);}};ea.prototype.hasValidRecentSearches=function(){'use strict';if(!l.hasRecentSearchNullState||!this.keywordResults)return false;return this.keywordResults.some(function(fa){return fa.isRecent;});};ea.prototype.copyProps=function(fa){'use strict';return babelHelpers._extends({accessibilityElement:this.accessibilityElement,onRender:this.handleRender,onHighlight:this.handleHighlight,onSelect:this.handleSelect},fa);};ea.prototype.renderList=function(fa,ga){'use strict';r.render(q.createElement(o,this.copyProps(fa)),ga);};ea.prototype.renderGSV2TypeaheadList=function(fa){'use strict';var ga=this.copyProps(Object.assign({},fa,{isKeywordList:true})),ha=this.copyProps(fa),ia=this.copyProps(Object.assign({},fa,{isKeywordList:true}));ga.results=this.isNullState()?this.keywordResults.filter(function(la){return !la.isRecent;}):this.keywordResults;ia.results=this.isNullState()?[]:this.results.filter(function(la){return la.isSeeMore;});ha.results=this.entityResults;if(ia.results.length>0||this.isNullState()){ga.loading=false;ha.loading=false;}else if(this.entityTop||ha.results.length===0){ha.loading=false;}else ga.loading=false;var ja=!!ga.results.length;this.renderList(ga,this.keywordResultsContainer);this.renderList(ha,this.entityResultsContainer);var ka=false;if(this.isNullState()){ga.results=this.keywordResults.filter(function(la){return la.isRecent;});this.renderList(ga,this.recentSearchContainer);ka=!!ga.results.length;}this.updateCurrentKeywordContainer();this.updateCurrentEntityContainer();this.renderList(ia,this.seeMoreContainer);i.conditionShow(this.currentKeywordContainer,ja);i.conditionShow(this.contentRecent,ka);i.conditionShow(this.currentEntityContainer,!!this.entityResults.length);i.conditionClass(this.element,"_3gbv",l.typeaheadkeywordStyle==='relaxed');i.conditionClass(this.element,"_3gbw",l.typeaheadkeywordStyle==='baggy');i.conditionShow(this.contentSeeMore,this.seeMoreResult!=null&&!this.isNullState());};ea.prototype.renderTypeaheadList=function(fa){'use strict';fa=fa||{};if(this.isGSV2){this.renderGSV2TypeaheadList(fa);}else this.renderList(fa,this.resultsContainer);};f.exports=ea;},null);
__d('DismissNUXOnFocus',['Arbiter','NavigationMessage','Run','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this.view=m.getCore().view;this.subscriptionsHandler=new k();}l.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(h.subscribe(i.NAVIGATION_BEGIN,(function(){this.disable();}).bind(this)));j.onLeave((function(){this.disable();}).bind(this));this.setup();};l.prototype.disable=function(){'use strict';this.teardown();};l.prototype.setup=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.view.subscribe('show',this.onViewShow.bind(this)));};l.prototype.teardown=function(){'use strict';this.subscriptionsHandler.release();};l.prototype.onViewShow=function(){'use strict';h.inform('SearchAwareness.weakDismissUnit');};f.exports=l;},null);
__d('FacebarTypeaheadDecorateEntities',['arrayContains','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(n){var o=[];n.forEach(function(p){if(p.isType('ent'))o.push(p.getUID());});return o;}function k(n,o){var p=null;n.structure.forEach(function(q){if(q.isType('ent')&&!h(o,q.getUID()))p=q;});return p;}function l(n,o,p){n.forEach(function(q){var r=k(q,o);q.decoration={entity:r&&p.getEntryForFragment(r)};});}function m(n){'use strict';this._typeahead=n;}m.prototype.enable=function(){'use strict';this._typeahead.view.subscribe('filter',(function(n,o){l(o.results,j(this._typeahead.core.getValue()),this._typeahead.data);}).bind(this));};Object.assign(m.prototype,{disable:i});f.exports=m;},null);
__d('FacebarTypeaheadDisambiguateResults',['FacebarDisambiguationDialog','FacebarStructuredFragment','FacebarStructuredText','URI','emptyFunction','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(w,x){var y={};w.forEach(function(ba){if(ba.type=='grammar'){var ca=x(ba.structure).toLowerCase();y[ca]=y[ca]||[];y[ca].push(ba);}});var z=[];for(var aa in y)if(y[aa].length>1)z.push(y[aa]);return z;}function o(w){var x=[];w.toArray().forEach(function(y,z){if(y.isType('ent'))x.push(z);});return x;}function p(w,x,y){var z={},aa={},ba={};x.forEach(function(da){var ea=w[0].structure.getFragment(da),fa=ea.getHash();aa[fa]=aa[fa]||[];ba[da]=aa[fa];w.forEach(function(ga){var ha=ga.structure.getFragment(da),ia=ha&&ha.getUID();if(ia&&!z.hasOwnProperty(ia)){aa[fa].push(y.getEntryForFragment(ha));z[ia]=true;}});});for(var ca in ba)if(ba[ca].length<=1)delete ba[ca];return ba;}function q(w,x){var y={},z=[];w.forEach(function(aa){var ba=aa.structure.getFragment(x).getUID();if(!y.hasOwnProperty(ba)){y[ba]=z.length;z.push([]);}z[y[ba]].push(aa);});return z;}function r(w,x,y){var z=w.shift();z.ambiguity.entities=x;y.push.apply(y,w);return z;}function s(w,x){var y=[],z=[],aa=false;w.forEach(function(ca){ca.ambiguity={fragment:null,entities:null,text:null};});n(w,function(ca){return ca.getHash();}).forEach(function(ca){var da=ca[0].structure,ea=o(da),fa=p(ca,ea,x);if(aa){r(ca,fa,y);return;}var ga=ea.pop();if(typeof ga=='number'){var ha=q(ca,ga);aa=ha.length>1;if(aa)delete fa[ga];ha.forEach(function(ia){var ja=r(ia,fa,y);if(aa){var ka=ja.structure.getFragment(ga).getUID();ja.ambiguity.entity=x.getEntry(ka);z.push(ja);}});}});y.forEach(function(ca){var da=w.indexOf(ca);da!=-1&&w.splice(da,1);});n(w,function(ca){return ca.toString();}).forEach(function(ca){ca.forEach(function(da){if(!da.ambiguity.entities)da.ambiguity.text=da.queryTypeText;});});var ba=w.indexOf(z[0]);z.slice(1).forEach(function(ca){var da=w.indexOf(ca);if(da!=-1&&da!=++ba){w.splice(da,1);w.splice(ba,0,ca);}});}function t(w,x){var y=w&&w.ambiguity&&w.ambiguity.entities,z=y&&Object.keys(y).map(Number),aa=x.core.input;if(!z||z.length===0)return false;var ba=function(ea){x.core.executeQuery(u(w,z,ea));},ca=function(){aa.focus();aa.input.moveSelectionToEnd();};y=y?m(y):[];var da=new h(y,w.uri.getPath(),ba,ca,x.getCore().getSessionID());aa.blur();da.show();return true;}function u(w,x,y){var z=w.structure.toArray(),aa=new k(w.uri),ba=aa.getPath().split('/');x.forEach(function(ca){var da=z[ca],ea=y.shift(),fa=ba.indexOf(String(da.getUID()));if(fa!=-1)ba[fa]=ea.uid;z[ca]=new i({uid:ea.uid,text:ea.text,type:'ent:'+ea.type});});return {uri:aa.setPath(ba.join('/')),structure:new j(z)};}function v(w){'use strict';this._typeahead=w;}v.prototype.enable=function(){'use strict';this._typeahead.view.subscribe('filter',(function(w,x){s(x.results,this._typeahead.data);}).bind(this));this._typeahead.view.subscribe('beforeSelect',(function(w,x){return !t(x.selected,this._typeahead);}).bind(this));};Object.assign(v.prototype,{disable:l});f.exports=v;},null);
__d("XBrowseWarmUserRequestArgsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/browse\/warm\/requestargs\/",{});},null);
__d('FacebarTypeaheadEarlyUserRequest',['AsyncRequest','XBrowseWarmUserRequestArgsController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._core=k.getCore();this._listener=null;}j.prototype.enable=function(){'use strict';this._listener=this._core.subscribe('focus',(function(k,l){new h().setURI(i.getURIBuilder().getURI()).send();this.disable();}).bind(this));};j.prototype.disable=function(){'use strict';this._listener&&this._core.unsubscribe(this._listener);};f.exports=j;},null);
__d('FacebarTypeaheadInjectedSuggestion',['Arbiter','DOM','csx','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=3,n=0,o;function p(q){'use strict';this.core=q.getCore();this.$FacebarTypeaheadInjectedSuggestion1=this.core.view;}p.prototype.enable=function(){'use strict';h.subscribe('FacebarTypeahead.injectedSuggestion',(function(){return this.addSuggestionTextToSearchBox();}).bind(this));h.subscribe('FacebarTypeahead.removeInjectedSuggestion',(function(){return this.removeSuggestionTextToSearchBox();}).bind(this));h.subscribe('FacebarTypeahead.showSuggestionBadge',(function(){return this.showSuggestionBadge(true);}).bind(this));h.subscribe('FacebarTypeahead.hideSuggestionBadge',(function(){return this.showSuggestionBadge(false);}).bind(this));};p.prototype.disable=function(){'use strict';this.$FacebarTypeaheadInjectedSuggestion2.unsubscribe();};p.prototype.showSuggestionBadge=function(q){'use strict';var r=i.scry(this.core.getElement(),"._5861")[0];if(r){var s=r.getElementsByClassName('injectedSearchSuggestion')[0];if(!s)return;if(q){s.style.visibility='visible';}else s.style.visibility='hidden';}};p.prototype.removeSuggestionTextToSearchBox=function(){'use strict';if(!n)return;--n;if(!n){var q=i.scry(this.core.getElement(),"._5861")[0],r=q.getElementsByClassName('injectedSearchSuggestion')[0];q.removeChild(r);}else if(o){var s=l._({"suggestion":"{suggestionCount} new suggestion","suggestions":"{suggestionCount} new suggestions"},[l.param('suggestionCount',n),l['enum'](n===1?'suggestion':'suggestions',{suggestion:'suggestion',suggestions:'suggestions'})]);o.innerText=s;}};p.prototype.addSuggestionTextToSearchBox=function(){'use strict';if(n){if(o&&n<m)o.innerText=n+1+' new suggestions';}else{var q=i.scry(this.core.getElement(),"._5861")[0];if(q){o=document.createElement('DIV');var r=document.createTextNode('1 new suggestion');o.style.cssFloat='right';o.appendChild(r);var s=document.createElement('DIV');s.className="_586j injectedSearchSuggestion";s.appendChild(o);q.appendChild(s);}}n+=1;};f.exports=p;},null);
__d('FacebarTypeaheadNavigation',['Arbiter','FacebarNavigation','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this._core=l.core;this._preserveQuery=false;this._typeahead=l;}k.prototype.enable=function(){'use strict';i.registerBehavior(this);this._core.subscribe('execute',this.executedUserQuery.bind(this));};k.prototype.executedUserQuery=function(l,m){'use strict';this._preserveQuery=true;};k.prototype.pageTransition=function(){'use strict';if(!this._preserveQuery){this._core.close();this._core.reset();}else this._preserveQuery=false;};k.prototype.setPageQuery=function(l){'use strict';l=this._core.setPageQuery(l);this._typeahead.inform('navigation',l,h.BEHAVIOR_PERSISTENT);};Object.assign(k.prototype,{disable:j});f.exports=k;},null);
__d('FacebarTypeaheadPrefixLengthOrderedCache',['emptyFunction','Arbiter'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._typeahead=k;}j.prototype.enable=function(){'use strict';this._typeahead.data.inform('setSortFunction',function(k,l){if(k.cache_id_length!==l.cache_id_length)return k.cache_id_length-l.cache_id_length;var m=(k.cost||0)-(l.cost||0);if(m!==0)return m;return (k.semantic||'').localeCompare(l.semantic||'');},i.BEHAVIOR_STATE);};Object.assign(j.prototype,{disable:h});f.exports=j;},null);
__d('FacebarTypeaheadQuickSelect',['FacebarStructuredText','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='/search/web/direct_search.php';function k(l){'use strict';this._core=l.getCore();this._view=l.getView();this._input=this._core.input;this._beforeSelectListener=null;this._quickSelectListener=null;}k.prototype.enable=function(){'use strict';this._beforeSelectListener=this._view.subscribe('beforeSelect',this._quickSelect.bind(this));this._quickSelectListener=this._view.subscribe('quickSelect',this._quickSelect.bind(this));};k.prototype._quickSelect=function(l,m){'use strict';if(m&&m.selected)return true;var n=this._input.getValue().toArray(),o=new h(n),p=o.toString();if(!p)return true;var q=new i(j).addQueryData('q',p),r={input_query:p,type:'quickselect',text:p,position:0,with_mouse:0,semantic:'quickselect('+q.toString()+')',extra_uri_params:{source:'quickselect',sid:this._core.getSessionID()},uri:q};this._core.inform('quickSelectRedirect',r);this._core.executeQuery(r);return false;};k.prototype.disable=function(){'use strict';this._beforeSelectListener&&this._view.unsubscribe(this._beforeSelectListener);this._quickSelectListener&&this._view.unsubscribe(this._quickSelectListener);};f.exports=k;},null);
__d('FacebarTypeaheadRecorderBasic',['FacebarTypeaheadRecorder'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';var j=this._typeahead;this._recorder=new h(j);};i.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._recorder=null;this._subscription=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('FacebarTypeaheadSeeMore',['FacebarGSv2Echo','FacebarKeywordSearchUtils','FacebarStructuredText','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n){'use strict';this.$FacebarTypeaheadSeeMore1=n.getCore();this.$FacebarTypeaheadSeeMore2=this.$FacebarTypeaheadSeeMore1.view;}m.prototype.enable=function(){'use strict';this.$FacebarTypeaheadSeeMore3=this.$FacebarTypeaheadSeeMore2.subscribe('seeMore',this.$FacebarTypeaheadSeeMore4.bind(this));};m.prototype.disable=function(){'use strict';this.$FacebarTypeaheadSeeMore3.unsubscribe();};m.prototype.$FacebarTypeaheadSeeMore4=function(n,o){'use strict';var p=o.value.toString().trim();p=h.normalizeValue(p);var q=i.makeFacebarEntry(p),r=l._("See all results for \"{query}\"",[l.param('query',p)]);return babelHelpers._extends({},q,{query_string:p,icon_class:"_5b1w",isSeeMore:true,structure:j.fromString(p),displayStructure:j.fromString(String(r)),uri:q.uri,tags:{},isSingleState:this.$FacebarTypeaheadSeeMore1.data.getSingleState()});};f.exports=m;},null);
__d('FacebarTypeaheadSelectAll',['requestAnimationFrame'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._core=j.getCore();this._listener=null;}i.prototype.enable=function(){'use strict';var j=this._core.input;this._listener=this._core.subscribe('focus',function(k,l){var m=l&&l.catchup;m||h(function(){j.selectInput();});});};i.prototype.disable=function(){'use strict';this._listener&&this._core.unsubscribe(this._listener);};f.exports=i;},null);
__d('FacebarTypeaheadShortcut',['FacebarTypeaheadShortcutConfig','KeyEventController','Run','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this._input=m.core.input;this._view=m.view;this._listener=null;}l.prototype.enable=function(){'use strict';this._registerListener();};l.prototype.disable=function(){'use strict';};l.prototype._registerListener=function(){'use strict';this._listener&&this._listener.remove();this._listener=i.registerKey('SLASH',this._handleKeydown.bind(this));j.onLeave((function(){k(this._registerListener.bind(this),0);}).bind(this));};l.prototype._handleKeydown=function(m){'use strict';var n=m.getModifiers().shift;if(n&&!h.gkWebShortcut)return;this._selectInput(n);return false;};l.prototype._selectInput=function(m){'use strict';this._view.setAutoSelect(true);this._input.focus();this._input.selectInput();this._input.inform('shortcut',{shift:m});};f.exports=l;},null);
__d('FacebarTypeaheadSizeAdjuster',['getElementChildren','clamp','emptyFunction','isTextNode','Style','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=12,o=20,p=50,q=200,r=5;function s(u){if(k(u))return 0;return m.getElementDimensions(u).x;}function t(u){'use strict';this._core=u.getCore();this._view=this._core.view;this._input=this._core.input;this._cachedSizes={};this._appliedSize=null;this._defaultSize=this.getDefaultFontSize();this._calculatedSize=this._defaultSize;this._containerWidth=this.getContainerWidth();}t.prototype.enable=function(){'use strict';this._input.subscribe('change',this.adjustFontSize.bind(this));this.adjustFontSize();};t.prototype.getContainerWidth=function(){'use strict';return m.getElementDimensions(this._input.getElement()).x;};t.prototype.getDefaultFontSize=function(){'use strict';var u=l.get(this._input.getElement(),'font-size'),v=/^([\d\.]+)px$/.exec(u),w=v&&Number(v[1]);return Math.max(n,Math.min(o,w));};t.prototype.calculateFontSize=function(){'use strict';var u=this.getTextWidth(),v=this._calculatedSize;if(u>this._containerWidth-p){v--;}else if(u<this._containerWidth-q)v++;this._calculatedSize=i(v,n,this._defaultSize);return this._calculatedSize;};t.prototype.getTextWidth=function(){'use strict';var u=this._calculatedSize+this.getValueKey();if(!this._cachedSizes.hasOwnProperty(u))this._cachedSizes[u]=this.measureTextWidth();return this._cachedSizes[u];};t.prototype.getValueKey=function(){'use strict';var u=this._core.getValue().getHash(),v=r*Math.floor(u.length/r);return u.substr(0,v);};t.prototype.measureTextWidth=function(){'use strict';var u=h(this._input.getRawInputElement());return u.reduce(function(v,w){return v+s(w);},0);};t.prototype.adjustFontSize=function(){'use strict';for(var u=0;u<10;u++){var v=this.calculateFontSize();if(v!=this._appliedSize){this._appliedSize=v;l.set(this._input.getElement(),'font-size',v+'px');l.set(this._view.content,'font-size',v+'px');}else break;}};Object.assign(t.prototype,{disable:j});f.exports=t;},null);
__d('SearchAwarenessLearningNUX',['Arbiter','CSS','DOM','NavigationMessage','Run','SearchAwarenessDispatcher','SearchAwarenessWebConfig','SearchPivotType','SubscriptionsHandler','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t){'use strict';this.core=t.getCore();this.view=this.core.view;this.data=this.core.data;this.debug=false;this.subscriptionsHandler=new p();this.showingFirstStep=true;this.setupComplete=false;this.setupSecondStepComplete=false;}s.prototype.enable=function(){'use strict';var t=this.core.getValue()!=null?this.core.getValue().toString():null;if(t==null||t.length>0&&!this.data.getSingleState())return;this.subscriptionsHandler.addSubscriptions(h.subscribe('SearchAwareness.triggerLearningNUX',(function(u,v){if(v.origin===o.LEARNING_NUX){this.setup();}else this.setupSecondStep();}).bind(this)),h.subscribe(k.NAVIGATION_BEGIN,(function(){this.disable();}).bind(this)));l.onLeave((function(){this.disable();}).bind(this));this.setup();};s.prototype.disable=function(){'use strict';this.teardown();};s.prototype.setup=function(){'use strict';if(this.setupComplete)return;var t=this.getHiddenAwarenessUnit(o.LEARNING_NUX),u=this.core.getValue()!=null?this.core.getValue().toString():null;if(t==null||u==null||u.length>0&&!this.data.getSingleState())return;this.config=JSON.parse(t.getAttribute('data-config'));if(this.config.ghost_text!=null){var v=j.scry(document.body,"._586i")[0];if(v){i.addClass(v,"_55me");v.setAttribute('data-ghost-text',this.config.ghost_text);}}this.firstStep=j.create('div',{'class':"_1qs6"},t);j.prependContent(this.view.getElement(),this.firstStep);this.subscriptionsHandler.addSubscriptions(this.view.subscribe('show',this.onViewShow.bind(this)),this.view.subscribe('hide',this.onViewHide.bind(this)),this.view.subscribe('filter',this.onViewFilter.bind(this)),this.view.subscribe('beforeSelect',this.onViewBeforeSelect.bind(this)));this.mask=j.create('div',{className:"_3lif"});j.appendContent(document.body,this.mask);this.showSecondStepAwarenessUnit();this.activationWindowTimer=setTimeout((function(){this.disable();}).bind(this),this.config.activation_window);this.setupComplete=true;};s.prototype.teardown=function(){'use strict';if(this.mask)i.removeClass(this.mask,"_3lih");i.removeClass(this.view.getElement(),"_3lii");i.removeClass(this.view.getElement(),"_1qs7");i.removeClass(this.view.getElement(),"_55mf");i.removeClass(this.view.getElement(),"_55mg");i.removeClass(this.core.getElement(),"_55mh");if(this.debug)return;if(this.mask){j.remove(this.mask);this.mask=null;}if(this.firstStep){j.remove(this.firstStep);this.firstStep=null;}if(this.secondStep){j.remove(this.secondStep);this.secondStep=null;}this.subscriptionsHandler.release();};s.prototype.setupSecondStep=function(){'use strict';if(this.setupSecondStepComplete||!this.setupComplete)return;var t=this.getHiddenAwarenessUnit(o.LEARNING_NUX_SECOND_STEP);if(t==null){this.setupSecondStepComplete=true;return;}this.secondStep=j.create('div',{className:"_3lig"},t);j.prependContent(this.view.getElement(),this.secondStep);this.setupSecondStepComplete=true;};s.prototype.getHiddenAwarenessUnit=function(t){'use strict';var u=j.scry(document.body,"._3lik"),v=undefined;for(var w=u,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var z;if(x){if(y>=w.length)break;z=w[y++];}else{y=w.next();if(y.done)break;z=y.value;}var aa=z,ba=aa.getAttribute('data-origin');if(ba===t&&aa.firstChild!=null)v=aa;}if(v==null)return undefined;var ca=v.firstChild;j.remove(v);return ca;};s.prototype.onViewShow=function(){'use strict';this.showOrHideFirstStep();clearTimeout(this.activationWindowTimer);i.addClass(this.mask,"_3lih");i.addClass(this.view.getElement(),"_3lii");};s.prototype.onViewHide=function(){'use strict';this.disable();};s.prototype.onViewFilter=function(t,u){'use strict';this.showOrHideFirstStep();var v=0;for(var w=0;w<u.results.length;w++){var x=u.results[w];if(x.type==='keyword'){v++;var y=x.uri.getQueryData();y[n.url_param_nux_trigger_key]=this.config.aw_id;x.uri.setQueryData(y);}else x.unselectable=true;}var z=this.core.getValue()!=null?this.core.getValue().toString():null,aa=z!=null&&z.length>0&&z.length<3&&v<3;i.conditionClass(this.core.getElement(),"_55mh",aa);if((this.config.block_ta_entity_clicks==null||this.config.block_ta_entity_clicks===false)&&z!=null&&z.length>=1)i.addClass(this.view.getElement(),"_55mf");};s.prototype.onViewBeforeSelect=function(t,u){'use strict';if(this.blockedClick||this.config.block_ta_entity_clicks!==true)return true;if(u.selected.type!=='keyword'){this.blockedClick=true;i.addClass(this.view.getElement(),"_55mf");i.addClass(this.view.getElement(),"_55mg");setTimeout((function(){i.removeClass(this.view.getElement(),"_55mg");}).bind(this),5000);return false;}return true;};s.prototype.showSecondStepAwarenessUnit=function(){'use strict';m.triggerLearningNUX(o.LEARNING_NUX_SECOND_STEP,this.config.encoded_query,this.config.actor_id,this.config.story_id,this.config.global_share_id);};s.prototype.showOrHideFirstStep=function(){'use strict';i.conditionClass(this.view.getElement(),"_1qs7",this.core.isNullState()||this.data.getSingleState());};f.exports=s;},null);
__d('SearchAwarenessSERPSurvey',['Arbiter','SearchAwarenessWebConfig','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this.view=l.getCore().view;this.subscriptionsHandler=new j();}k.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(h.subscribe('SearchAwareness.setupSurveyTriggers',(function(l,m){this.urlParamvalue=m.url_param_value;}).bind(this)),this.view.subscribe('hide',this.onViewHide.bind(this)),this.view.subscribe('filter',this.onViewFilter.bind(this)));};k.prototype.disable=function(){'use strict';this.teardown();};k.prototype.teardown=function(){'use strict';this.subscriptionsHandler.release();};k.prototype.onViewHide=function(){'use strict';if(this.urlParamvalue!=null)this.disable();};k.prototype.onViewFilter=function(l,m){'use strict';if(this.urlParamvalue==null)return;for(var n=0;n<m.results.length;n++){var o=m.results[n];if(o.type==='keyword'){var p=o.uri.getQueryData();p[i.url_param_survey_trigger_key]=this.urlParamvalue;o.uri.setQueryData(p);}}};f.exports=k;},null);
__d('TypeaheadSearchMegaphone',['AsyncRequest','DOM','DOMQuery','Event','Parent'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n){'use strict';this.$TypeaheadSearchMegaphone1=n;}m.prototype.enable=function(){'use strict';var n=j.scry(this.$TypeaheadSearchMegaphone1.getView().getElement(),'.megaphone_location_gsv2_typeahead')[0];if(!n)return;this.ajaxify=j.scry(n,'a.megaphone_hide_link[ajaxify]')[0].getAttribute('ajaxify');j.scry(n,'a').forEach(this.processLink,this);k.listen(n,'click',this.onClick.bind(this));};m.prototype.disable=function(){'use strict';};m.prototype.processLink=function(n){'use strict';if(n.getAttribute('ajaxify'))return;i.setAttributes(n,{target:'_blank'});};m.prototype.onClick=function(event){'use strict';var n=l.byTag(event.target,'a');if(!n||n.getAttribute('ajaxify'))return;h.bootstrap(this.ajaxify,n);};f.exports=m;},null);