/*!CK:942307675!*//*1452144639,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["OPZcv"]); }

__d('AvailableListConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ON_AVAILABILITY_CHANGED:'buddylist/availability-changed',ON_UPDATE_ERROR:'buddylist/update-error',ON_UPDATED:'buddylist/updated',ON_CHAT_NOTIFICATION_CHANGED:'chat-notification-changed',OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:'webStatus',FB_APP_STATUS:'fbAppStatus',MESSENGER_STATUS:'messengerStatus',OTHER_STATUS:'otherStatus',STATUS_ACTIVE:'active',STATUS_IDLE:'idle',STATUS_OFFLINE:'offline'};b.AvailableListConstants=f.exports=h;},null);
__d('LastActiveTimes',['ServerTime','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(o){if(!o||o<0)return '';var p=h.get()/1000-o,q=Math.floor(p/60),r=Math.floor(q/60),s=Math.floor(r/24);if(q<=1){return i._("{count}m",[i.param('count',1)]);}else if(q<60){return i._("{count}m",[i.param('count',q)]);}else if(r<24){return i._("{count}h",[i.param('count',r)]);}else if(s<3){return i._("{count}d",[i.param('count',s)]);}else return '';}function l(o,p){if(!(o in j)||j[o]<p)j[o]=p;}function m(o){if(o in j){return j[o];}else return 0;}var n={update:function(o){for(var p in o)l(p,o[p]);},getShortDisplay:function(o){return k(m(o));},get:function(o){return m(o);},getDebugData:function(){return j;}};f.exports=n;},null);
__d('PresenceUtil',['CurrentUser','randomInt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i(0,4294967295)+1;function k(){return j;}function l(){return h.isLoggedInNow();}f.exports={getSessionID:k,hasUserCookie:l};},null);
__d('PresencePrivacy',['Arbiter','AsyncRequest','ChannelConstants','CurrentUser','PresencePrivacyInitialData','JSLogger','PresenceUtil'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='/ajax/chat/privacy/settings.php',p='/ajax/chat/privacy/online_policy.php',q='/ajax/chat/privacy/visibility.php',r='friend_visibility',s='visibility',t='online_policy',u=babelHelpers._extends({},l.privacyData),v=l.visibility,w=babelHelpers._extends({},l.privacyData),x=v,y=l.onlinePolicy,z=y,aa=[],ba=false;function ca(){return m.create('blackbird');}var da=Object.assign(new h(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function ea(qa){var ra;for(ra in qa){var sa=qa[ra];if(ra==k.getID()){ca().error('set_viewer_visibility');throw new Error("Invalid to set current user's visibility");}switch(sa){case da.WHITELISTED:case da.BLACKLISTED:case da.UNLISTED:break;default:ca().error('set_invalid_friend_visibility',{id:ra,value:sa});throw new Error("Invalid state: "+sa);}}for(ra in qa)u[ra]=qa[ra];da.inform('privacy-changed');}function fa(qa,ra){var sa={};sa[qa]=ra;ea(sa);}function ga(qa){switch(qa){case da.ONLINE:case da.OFFLINE:break;default:ca().error('set_invalid_visibility',{value:qa});throw new Error("Invalid visibility: "+qa);}v=qa;da.inform('privacy-changed');da.inform('privacy-user-presence-changed');h.inform('chat/visibility-changed',{sender:this});}function ha(qa){switch(qa){case da.ONLINE_TO_WHITELIST:case da.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+qa);}y=qa;da.inform('privacy-user-presence-changed');da.inform('privacy-changed');}function ia(qa,ra){ba=true;qa.send();}function ja(qa,ra){aa.push({request:qa,data:ra});if(!ba){var sa=aa.shift();ia(sa.request,sa.data);}}function ka(qa,ra){var sa=qa.type;if(sa===r){var ta=ra.payload.user_availabilities;if(!Array.isArray(ta)){da.inform('privacy-availability-changed',{user_availabilities:ta});for(var ua in qa.settings)w[ua]=qa.settings[ua];}}else{if(sa===s){x=qa.visibility;}else if(sa===t)z=qa.online_policy;da.inform('privacy-user-presence-response');}ca().log('set_update_response',{data:qa,response:ra});}function la(qa,ra){if(v!==x)ga(x);if(y!==z)ha(z);Object.assign(u,w);da.inform('privacy-changed');aa=[];ca().log('set_error_response',{data:qa,response:ra});}function ma(qa){ba=false;if(aa.length>0){var ra=aa.shift();ia(ra.request,ra.data);}}function na(qa,ra){if(n!=null){var sa=qa.getData();sa.window_id=n.getSessionID();qa.setData(sa);}qa.setHandler(ka.bind(this,ra)).setErrorHandler(la.bind(this,ra)).setTransportErrorHandler(la.bind(this,ra)).setFinallyHandler(ma.bind(this)).setAllowCrossPageTransition(true);return qa;}function oa(qa,ra,sa){return na(new i(qa).setData(ra),sa);}function pa(qa,ra){var sa=ra.obj;if(sa.viewer_id!=k.getID()){ca().error('invalid_viewer_for_channel_message',{type:qa,data:ra});throw new Error("Viewer got from the channel is not the real viewer");}if(sa.window_id===n.getSessionID())return;var ta=sa.data;if(sa.event=='access_control_entry'){ta.target_ids.forEach(function(va){fa(va,ta.setting);w[va]=ta.setting;});}else{if(sa.event=='visibility_update'){var ua=!!ta.visibility?da.ONLINE:da.OFFLINE;ga(ua);x=ua;}else if(sa.event=='online_policy_update'){ha(ta.online_policy);z=ta.online_policy;}da.inform('privacy-user-presence-response');}ca().log('channel_message_received',{data:ra.obj});}Object.assign(da,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function(qa,ra,sa){},setVisibility:function(qa){x=v;ga(qa);var ra={visibility:qa},sa={type:s,visibility:qa},ta=oa(q,ra,sa);ja(ta,sa);ca().log('set_visibility',{data:ra});return qa;},getVisibility:function(){return v;},setOnlinePolicy:function(qa){z=y;ha(qa);var ra={online_policy:qa},sa={type:t,online_policy:qa},ta=oa(p,ra,sa);ja(ta,sa);ca().log('set_online_policy',{data:ra});return qa;},getOnlinePolicy:function(){return y;},getFriendVisibility:function(qa){return u[qa]||da.UNLISTED;},isUserOffline:function(){return this.getVisibility()===da.OFFLINE;},allows:function(qa){if(this.isUserOffline())return false;var ra=this.getOnlinePolicy();return ra===da.ONLINE_TO_WHITELIST?u[qa]==da.WHITELISTED:u[qa]!=da.BLACKLISTED;},setFriendsVisibility:function(qa,ra){if(qa.length>0){var sa={};for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];w[ua]=u[ua];sa[ua]=ra;}ea(sa);var va=ra;if(va==da.UNLISTED)va=w[qa[0]];var wa={users:qa,setting:ra,setting_type:va},xa={type:r,settings:sa},ya=oa(o,wa,xa);ja(ya,xa);ca().log('set_friend_visibility',{data:wa});}return ra;},setFriendVisibilityMap:function(qa,ra){for(var sa in qa)w[sa]=u[sa];ea(qa);var ta={type:r,settings:qa};ja(na(ra,ta),ta);ca().log('set_friend_visibility_from_map',{data:qa});},allow:function(qa){if(this.allows(qa)){ca().error('allow_already_allowed');throw new Error("allow() should only be called for users that "+"are not already allowed");}if(this.getVisibility()===da.OFFLINE){ca().error('allow_called_while_offline');throw new Error("allow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_WHITELIST?da.WHITELISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},disallow:function(qa){if(!this.allows(qa)){ca().error('disallow_already_disallowed');throw new Error("disallow() should only be called for users that "+"are not already disallowed");}if(this.getVisibility()===da.OFFLINE){ca().error('disallow_called_while_offline');throw new Error("disallow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_BLACKLIST?da.BLACKLISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},getBlacklist:function(){var qa=[];for(var ra in u)if(u[ra]===da.BLACKLISTED)qa.push(ra);return qa;},getWhitelist:function(){var qa=[];for(var ra in u)if(u[ra]===da.WHITELISTED)qa.push(ra);return qa;},getMapForTest:function(){return u;},setMapForTest:function(qa){u=qa;}});da.inform('privacy-changed');da.inform('privacy-user-presence-changed',h.BEHAVIOR_STATE);ca().log('initialized',{visibility:v,policy:y});h.subscribe(m.DUMP_EVENT,function(qa,ra){ra.presence_privacy={initial:l.privacyData,current:u};});h.subscribe(j.getArbiterType('privacy_changed'),pa.bind(this));h.subscribe(j.ON_CONFIG,(function(qa,ra){var sa=ra.getConfig('visibility',null);if(sa!==null&&typeof sa!=='undefined'){var ta=sa?da.ONLINE:da.OFFLINE;ga(ta);ca().log('config_visibility',{vis:ta});}}).bind(this));f.exports=da;},null);
__d('ChatVisibility',['Arbiter','JSLogger','PresencePrivacy'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={isOnline:function(){return j.getVisibility()===j.ONLINE;},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function(){return j.getOnlinePolicy()===j.ONLINE_TO_BLACKLIST&&j.getBlacklist().length>0;},isVisibleToSomeFriends:function(){return j.getOnlinePolicy()===j.ONLINE_TO_WHITELIST&&j.getWhitelist().length>0;},goOnline:function(l){if(j.getVisibility()===j.OFFLINE){i.create('blackbird').log('chat_go_online');j.setVisibility(j.ONLINE);h.inform('chat-visibility/go-online');}l&&l();},goOffline:function(l){if(j.getVisibility()===j.ONLINE){i.create('blackbird').log('chat_go_offline');j.setVisibility(j.OFFLINE);h.inform('chat-visibility/go-offline');}l&&l();},toggleVisibility:function(){if(k.isOnline()){k.goOffline();}else k.goOnline();}};f.exports=k;},null);
__d('PresenceStatus',['ArbiterMixin','AvailableListConstants','BanzaiODS','ChatVisibility','CurrentUser','LastActiveTimes','LogHistory','Set','PresencePrivacy','ServerTime','createObjectFrom','debounceAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();j.setEntitySample('presence',.0001);var t=n.getInstance('presence_status'),u={},v={},w={},x={},y=Object.assign({},h),z=s(function(){return y.inform('change');},0);Object.assign(y,{resetPresenceData:function(){v={};w={};},reset:function(){y.resetPresenceData();x={};},get:function(aa){if(aa==l.getID())return k.isOnline()?i.ACTIVE:i.OFFLINE;var ba=i.OFFLINE;if(aa in v)ba=v[aa];if(!p.allows(aa))ba=i.OFFLINE;return ba;},getCapabilities:function(aa){var ba=y.get(aa);if(ba==i.OFFLINE)return 0;var ca=w[aa];return ca?ca:0;},isPlayingCanvasGameUser:function(aa){return !!x[aa];},getGroup:function(aa){return aa.some(function(ba){if(ba==l.getID())return false;return y.get(ba)===i.ACTIVE;})?i.ACTIVE:i.OFFLINE;},set:function(aa,ba,ca,da,ea,fa){if(aa==l.getID())return false;var ga;if(ba!==null&&ba!==undefined){ba=ba==i.ACTIVE?i.ACTIVE:i.OFFLINE;var ha=y.get(aa);ga=ha!=ba;if(ga&&ha==i.ACTIVE||ba==i.ACTIVE){var ia={};ia[aa]=q.get()/1000;m.update(ia);}v[aa]=ba;}var ja=false;if(ea){ja=y.getCapabilities(aa)!=ea;w[aa]=ea;}var ka=ga||ja;if(ka&&!fa)z();return ka;},setPlayingCanvasGameFriends:function(aa){x=r(aa);},getOnlineIDs:function(){var aa,ba=[];for(aa in v)if(y.get(aa)===i.ACTIVE)ba.push(aa);return ba;},getOnlineCount:function(){return y.getOnlineIDs().length;},getPresenceStats:function(){var aa=0,ba=0,ca=0;for(var da in v){aa+=1;switch(y.get(da)){case i.OFFLINE:ba+=1;break;case i.ACTIVE:ca+=1;break;default:break;}}return {total:aa,offline:ba,active:ca};},getDebugInfo:function(aa){return {id:aa,presence:v[aa]};},getAllDebugInfo:function(){return {presence:v};},setMulti:function(aa,ba){var ca=false;for(var da in aa)y.set(da,aa[da].a,false,ba,aa[da].c,true)&&(ca=true);if(ca)z();},setMultiChatproxy:function(aa){var ba={};for(var ca in aa){if(aa[ca].lat)ba[ca]=aa[ca].lat;var da=aa[ca].p;if(da!==undefined)y.set(ca,da,false,'chatproxy',aa[ca].vc,true);}m.update(ba);z();},setMultiActive:function(aa,ba){var ca=false;aa.forEach(function(da){y.set(da,i.ACTIVE,false,ba,null,true)&&(ca=true);});if(ca)z();}});f.exports=y;},null);
__d('ChatproxyPresence',['Arbiter','AvailableListConstants','AvailableListInitialData','ChannelConstants','CurrentUser','LastActiveTimes','PresenceStatus','debounceAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q){'use strict';this.$ChatproxyPresence1=q;this.$ChatproxyPresence2=false;this.$ChatproxyPresence3=j.chatNotif;var r=j.availableList,s=j.activeList,t=j.lastActiveTimes,u=j.playingCanvasGameFriends;if(r&&Object.keys(r).length>0)n.setMulti(r,'available_list_initial_data');if(s)n.setMultiActive(s,'available_list_active');if(t&&!Array.isArray(t))m.update(t);if(u)n.setPlayingCanvasGameFriends(u);}p.prototype.subscribe=function(){'use strict';h.subscribe(k.getArbiterType('chatproxy-presence'),this.updatePresenceInfo.bind(this));h.subscribe(k.ON_INVALID_HISTORY,(function(){this.$ChatproxyPresence2=true;}).bind(this));};p.prototype.updatePresenceInfo=function(q,r){'use strict';if(this.$ChatproxyPresence2){this.$ChatproxyPresence2=false;n.resetPresenceData();}r=r.obj;var s=r.buddyList;if(j.gk_replace_available_list_chatproxy)n.setMultiChatproxy(s);var t=false;if(r.chatNotif!==undefined)t=this.$ChatproxyPresence3!==r.chatNotif;if(t)this.$ChatproxyPresence3=r.chatNotif;if(r.gamers)n.setPlayingCanvasGameFriends(r.gamers);if(j.gk_replace_available_list_chatproxy){if(t)this.$ChatproxyPresence1(i.ON_CHAT_NOTIFICATION_CHANGED,this.$ChatproxyPresence3);o((function(){this.$ChatproxyPresence1(i.ON_AVAILABILITY_CHANGED);}).bind(this),0)();}};p.prototype.getIsUserIdle=function(){'use strict';return this.$ChatproxyPresence4;};p.prototype.getWebChatNotification=function(){'use strict';return this.$ChatproxyPresence3;};f.exports=p;},null);
__d('ChatConfig',['ChatConfigInitialData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={},j={get:function(k,l){return k in i?i[k]:l;},set:function(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l;}Object.assign(i,k);},getDebugInfo:function(){return i;}};j.set(h);f.exports=j;},null);
__d('Poller',['ArbiterMixin','AsyncRequest','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,l(h));p=o&&o.prototype;function q(t){'use strict';p.constructor.call(this);this._config=babelHelpers._extends({clearOnQuicklingEvents:true,setupRequest:k,interval:null,maxRequests:Infinity,dontStart:false},t);this._handle=null;if(!this._config.dontStart)this.start();}q.prototype.start=function(){'use strict';if(this._polling)return this;this._requests=0;this.request();return this;};q.prototype.stop=function(){'use strict';this._cancelRequest();return this;};q.prototype.mute=function(){'use strict';this._muted=true;return this;};q.prototype.resume=function(){'use strict';if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}return this;};q.prototype.skip=function(){'use strict';this._skip=true;return this;};q.prototype.reset=function(){'use strict';return this.stop().start();};q.prototype.request=function(){'use strict';this._cancelRequest();this._polling=true;if(!s())return this._done();if(this._muted)return this;if(++this._requests>this._config.maxRequests)return this._done();var t=new i();t.setIsBackgroundRequest(true);var u=false;t.setInitialHandler(function(){return !u;});this._cancelRequest=(function(){u=true;this._cleanup();}).bind(this);t.setFinallyHandler(r.bind(this));t.setInitialHandler=k;t.setFinallyHandler=k;this._config.setupRequest(t,this);if(this._skip){this._skip=false;m(r.bind(this),0);}else t.send();return this;};q.prototype.isPolling=function(){'use strict';return this._polling;};q.prototype.isMuted=function(){'use strict';return this._muted;};q.prototype.setInterval=function(t){'use strict';if(t){this._config.interval=t;this.start();}};q.prototype.getInterval=function(){'use strict';return this._config.interval;};q.prototype._cleanup=function(){'use strict';if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=k;this._polling=false;};q.prototype._done=function(){'use strict';this._cleanup();this.inform('done',{sender:this});return this;};q.MIN_INTERVAL=2000;Object.assign(q.prototype,{_config:null,_requests:0,_muted:false,_polling:false,_skip:false,_cancelRequest:k});function r(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var t=this._config.interval;t=typeof t==='function'?t(this._requests):t;t=t>q.MIN_INTERVAL?t:q.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=n(this.request.bind(this),t);}else this._handle=m(this.request.bind(this),t);}else this._done();}function s(){return j.isLoggedInNow();}f.exports=q;},null);
__d('PresencePoller',['AvailableListConstants','AvailableListInitialData','BanzaiODS','ChatVisibility','CurrentUser','JSLogger','LastActiveTimes','Poller','PresencePrivacy','PresenceStatus','ServerTime','ShortProfiles','UserActivity','debounceAcrossTransitions','errorCode','ifRequired'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=5,y='/ajax/chat/buddy_list.php',z=i.pollInterval,aa=i.lazyPollInterval,ba=i.lazyThreshold,ca=m.create('available_list'),da='presence_poller';j.setEntitySample(da,.01);function ea(fa){'use strict';this.$PresencePoller1=fa;this.$PresencePoller2=false;this.$PresencePoller3=i.chatNotif;this.$PresencePoller4=false;this.$PresencePoller5=[];this.$PresencePoller6=new o({interval:z,setupRequest:this.$PresencePoller7.bind(this),clearOnQuicklingEvents:false,dontStart:true});if(k.isOnline()){this.$PresencePoller8=Date.now();this.$PresencePoller9=Date.now();this.$PresencePoller10=i.updateTime;}else{this.$PresencePoller8=0;this.$PresencePoller10=0;this.$PresencePoller9=0;}this.$PresencePoller11=0;this.$PresencePoller12('available_initial_data',i.updateTime,i.availableList,i.lastActiveTimes);t.subscribe((function(ga,ha){if(ha.idleness>z)this.forceUpdate();}).bind(this));p.subscribe('privacy-user-presence-changed',(function(){this.forceUpdate();}).bind(this));}ea.prototype.start=function(){'use strict';setTimeout(this.$PresencePoller6.start.bind(this.$PresencePoller6),0);};ea.prototype.restart=function(){'use strict';if(this.$PresencePoller6.isMuted()){this.$PresencePoller6.resume();this.forceUpdate();}};ea.prototype.stop=function(){'use strict';this.$PresencePoller6.mute();};ea.prototype.forceUpdate=function(){'use strict';this.$PresencePoller4=true;this.$PresencePoller6.request();};ea.prototype.getIsUserIdle=function(){'use strict';return this.$PresencePoller2;};ea.prototype.getWebChatNotification=function(){'use strict';return this.$PresencePoller3;};ea.prototype.getCallback=function(){'use strict';return this.$PresencePoller1;};ea.prototype.addExtraBuddy=function(fa){'use strict';if(this.$PresencePoller5.indexOf(fa)!==-1)return;this.$PresencePoller5.push(fa);};ea.prototype.$PresencePoller13=function(){'use strict';return u((function(){this.$PresencePoller1(h.ON_AVAILABILITY_CHANGED);}).bind(this),0)();};ea.prototype.$PresencePoller12=function(fa,ga,ha,ia){'use strict';this.$PresencePoller10=ga;if(!i.gk_replace_available_list_chatproxy||Object.keys(ha).length!=0)if(!Array.isArray(ha)){q.resetPresenceData();for(var ja in ha)q.set(ja,ha[ja].a,false,fa,ha[ja].c);}if(ia&&!Array.isArray(ia))n.update(ia);this.$PresencePoller13();};ea.prototype.$PresencePoller7=function(fa){'use strict';if(w('ChannelConnection',function(ia){return ia.isShutdown();})||!k.isOnline()){this.$PresencePoller6.skip();j.bumpEntityKey(da,'skip.offline');return;}if(Date.now()-this.$PresencePoller8<z){this.$PresencePoller6.skip();j.bumpEntityKey(da,'skip.recent');return;}j.bumpEntityKey(da,'request');this.$PresencePoller8=Date.now();var ga=s.getCachedProfileIDs().join(","),ha=true;if(i.gk_replace_available_list_chatproxy&&!this.$PresencePoller4&&this.$PresencePoller5.length===0)ha=false;this.$PresencePoller4=false;fa.setHandler(this.$PresencePoller14.bind(this)).setErrorHandler(this.$PresencePoller15.bind(this)).setOption('suppressErrorAlerts',true).setOption('retries',1).setData({user:l.getID(),cached_user_info_ids:ga,fetch_mobile:false,additional_buddies:this.$PresencePoller5,get_now_available_list:ha}).setURI(y).setAllowCrossPageTransition(true);};ea.prototype.$PresencePoller14=function(fa){'use strict';var ga=fa.getPayload(),ha=ga.buddy_list;if(!ha){this.$PresencePoller15(fa);return;}j.bumpEntityKey(da,'response');this.$PresencePoller16();this.$PresencePoller9=Date.now();r.update(ga.time);this.$PresencePoller11=0;this.$PresencePoller17();var ia=ha.userInfos;if(ia)s.setMulti(ia);this.$PresencePoller2=ha.userIsIdle;if(ha.chatNotif!==undefined&&ha.chatNotif!==this.$PresencePoller3){this.$PresencePoller3=ha.chatNotif;this.$PresencePoller1(h.ON_CHAT_NOTIFICATION_CHANGED,this.$PresencePoller3);}this.$PresencePoller12('buddy_list_poller',ga.time,ha.nowAvailableList,ha.last_active_times);};ea.prototype.$PresencePoller15=function(fa){'use strict';j.bumpEntityKey(da,'error');if(fa.getError()==1356007)return;this.$PresencePoller11++;if(this.$PresencePoller11>=x)this.$PresencePoller1(h.ON_UPDATE_ERROR);};ea.prototype.$PresencePoller17=function(){'use strict';var fa=t.isActive(ba)?z:aa;j.bumpEntityKey(da,'period.'+fa);this.$PresencePoller6.setInterval(fa);};ea.prototype.$PresencePoller16=function(){'use strict';var fa=Date.now(),ga=fa-this.$PresencePoller9;ca.log('buddylist_presence_stats',babelHelpers._extends({duration:ga},q.getPresenceStats()));};f.exports=ea;},null);
__d("TypingStates",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={INACTIVE:0,TYPING:1,QUITTING:2};f.exports=h;},null);
__d('AvailableList',['Arbiter','ArbiterMixin','AsyncRequest','AvailableListConstants','AvailableListInitialData','BanzaiODS','Bootloader','ChannelConstants','ChatConfig','ChatproxyPresence','ChatVisibility','ErrorUtils','JSLogger','LastActiveTimes','PresencePoller','PresencePrivacy','PresenceStatus','Run','ServerTime','ShortProfiles','TypingStates','debounceAcrossTransitions','emptyFunction','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){'use strict';if(c.__markCompiled)c.__markCompiled();m.setEntitySample('presence',.0001);var fa=babelHelpers._extends({},k,i);fa.subscribe([k.ON_AVAILABILITY_CHANGED,k.ON_UPDATE_ERROR],function(qa,ra){h.inform(qa,ra);});var ga=ca(function(){return fa.inform(k.ON_AVAILABILITY_CHANGED);},0);function ha(qa,ra,sa,ta,ua){var va=x.set(qa,ra,sa,ta,ua);if(va){var wa=ca(function(){return fa.inform(k.ON_AVAILABILITY_CHANGED,qa);},0);wa();}}function ia(qa){var ra=qa.payload.availability||{};for(var sa in ra)ha(sa&&sa.toString(),ra[sa].a,true,'mercury_tabs',ra[sa].c,ra[sa].p);}function ja(){if(!l.gk_replace_available_list_chatproxy)na&&na.restart();}function ka(){if(!l.gk_replace_available_list_chatproxy)na&&na.stop();}function la(qa){var ra=fa.getDebugInfo(qa),sa=ra.presence==k.ACTIVE;new j('/ajax/mercury/tabs_presence.php').setData({target_id:qa,to_online:sa,presence_source:ra.overlaySource,presence_time:ra.overlayTime}).setHandler(ia).setErrorHandler(da).setAllowCrossPageTransition(true).send();}function ma(qa,ra){ra.chat_config=p.getDebugInfo();ra.available_list_debug_info={};x.getOnlineIDs().forEach(function(sa){ra.available_list_debug_info[sa]=fa.getDebugInfo(sa);});ra.available_list_poll_interval=fa._poller&&fa._poller.getInterval();}var na=undefined,oa=undefined;if(l.gk_replace_available_list_chatproxy){try{oa=new q(function(event){fa.inform(event);});oa.subscribe();}catch(pa){s.reportError&&s.reportError(pa,false);}}else try{na=new v(function(event){fa.inform(event);});}catch(pa){s.reportError&&s.reportError(pa,false);}Object.assign(fa,{getChatproxyPresenceObject:function(){return oa;},getPresencePollerObject:function(){return na;},get:function(qa){return x.get(qa);},updateForID:function(qa){la(qa);if(l.gk_replace_available_list_chatproxy){if(w.getVisibility()==w.ONLINE)y.onAfterLoad(function(){return (n.loadModules(["ChannelManager","ChannelTransport"],function(ra,sa){sa.sendAdditionalBuddyRequest(ra.getCompleteConfig(),qa);}));});}else na&&na.addExtraBuddy(qa);},getWebChatNotification:function(){if(l.gk_replace_available_list_chatproxy){return oa&&oa.getWebChatNotification&&oa.getWebChatNotification();}else return na&&na.getWebChatNotification&&na.getWebChatNotification();},isUserIdle:function(){if(!l.gk_replace_available_list_chatproxy)return na&&na.getIsUserIdle();},isReady:function(){if(!l.gk_replace_available_list_chatproxy)return !!na;return !!oa;},set:function(qa,ra,sa,ta){ha(qa,ra,true,sa,ta);},update:function(){if(!l.gk_replace_available_list_chatproxy)na&&na.forceUpdate();},isIdle:function(qa){return fa.get(qa)==k.IDLE;},getDebugInfo:function(qa){var ra=x.getDebugInfo(qa),sa=aa.getNow(qa);if(sa)ra.name=sa.name;return ra;}});if(!l.gk_replace_available_list_chatproxy)na&&na.start();h.subscribe(t.DUMP_EVENT,ma);h.subscribe('chat-visibility/go-online',ja);h.subscribe('chat-visibility/go-offline',ka);w.subscribe(['privacy-changed','privacy-availability-changed','privacy-user-presence-response'],ga);ea('ChannelConnection',function(qa){return (qa.subscribe([qa.CONNECTED,qa.RECONNECTING,qa.SHUTDOWN,qa.MUTE_WARNING,qa.UNMUTE_WARNING],ga));});h.subscribe(o.getArbiterType('buddylist_overlay'),function(qa,ra){var sa={},ta=ra.obj.overlay;for(var ua in ta){fa.set(ua,ta[ua].a,ta[ua].s||'channel',ta[ua].vc);if(ta[ua].la)sa[ua]=ta[ua].la;}u.update(sa);});h.subscribe([o.getArbiterType('typ'),o.getArbiterType('ttyp')],function(qa,ra){var sa=ra.obj;if(sa.st===ba.TYPING){var ta=sa.from;if(r.isOnline()){m.bumpEntityKey('presence','stale_presence_check_typing');var ua=x.get(ta);if(ua!=k.ACTIVE){var va=u.get(ta)*1000,wa=z.get();if(!va){m.bumpEntityKey('presence','no_detailed_presence_typing');}else if(wa-va>5*60*1000){var xa='stale_presence_typing',ya=wa-va;if(ya<10*60*1000){xa+='600';}else if(ya<60*60*1000)xa+='3600';m.bumpEntityKey('presence',xa);}}}fa.set(ta&&ta.toString(),k.ACTIVE,'channel-typing');}});h.subscribe(o.getArbiterType('messaging'),function(qa,ra){if(!r.isOnline())return;var sa=ra.obj;if(sa.message&&sa.message.timestamp&&sa.message.sender_fbid){var ta=z.get(),ua=sa.message.timestamp;if(ta-ua<2*60*1000){m.bumpEntityKey('presence','stale_presence_check');var va=sa.message.sender_fbid,wa=x.get(va);if(wa==k.ACTIVE)return;var xa=u.get(va)*1000;if(!xa){m.bumpEntityKey('presence','no_detailed_presence');}else if(ua-xa>5*60*1000){var ya='stale_presence',za=ua-xa;if(za<10*60*1000){ya+='600';}else if(za<60*60*1000)ya+='3600';m.bumpEntityKey('presence',ya);}}}});b.AvailableList=f.exports=fa;},null);
__d('FBRTCDispatcher',['Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('FBRTCLogger',['Log','LogHistory','MarauderLogger','formatDate','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='webrtc',n='sent_message',o='received_message',p='send_succeeded',q='send_failed',r='info',s='call_action',t='client_event',u='client_error',v='type',w='msg_id',x='ack_msg_id',y='call_id',z='from',aa='to',ba='content',ca='tag',da='peer_id',ea='error_code',fa='trigger',ga='endcallstats',ha=null;ia.getInstance=function(){'use strict';if(!ha)ha=new ia();return ha;};function ia(){'use strict';this.$FBRTCLogger1=i.getInstance(m);}ia.prototype.logToConsole=function(ja){'use strict';var ka='Console';this.$FBRTCLogger2(null,null,ka,ja);this.$FBRTCLogger1.log(ka,ja);};ia.prototype.logReceivedMessage=function(ja,ka,la){'use strict';var ma={};ma[z]=ja;ma[y]=ka;ma[v]=la.type;ma[w]=la.msg_id;if(la.sdp)ma[ba]=la.sdp;if(la.ack_id)ma[x]=la.ack_id;this.$FBRTCLogger3(o,ma);this.$FBRTCLogger2(ja,ka,'Received',la.type+', '+la.msg_id);};ia.prototype.logSentMessage=function(ja,ka,la){'use strict';var ma={};ma[aa]=ja;ma[y]=ka;ma[v]=la.type;ma[w]=la.msg_id;if(la.sdp)ma[ba]=la.sdp;if(la.ack_id)ma[x]=la.ack_id;this.$FBRTCLogger3(n,ma);this.$FBRTCLogger2(ja,ka,'Sent',la.type+', '+la.msg_id);};ia.prototype.logSentMessageSuccess=function(ja,ka,la,ma){'use strict';var na={};na[da]=ja;na[y]=ka;na[v]=la;na[w]=ma;this.$FBRTCLogger3(p,na);};ia.prototype.logSentMessageFailure=function(ja,ka,la,ma,na){'use strict';var oa={};oa[da]=ja;oa[y]=ka;oa[v]=la;oa[w]=ma;oa[ea]=na;this.$FBRTCLogger3(q,oa);this.$FBRTCLogger2(ja,ka,'Send Failed',la+', '+na);};ia.prototype.logCallAction=function(ja,ka,la,ma,na){'use strict';var oa={};oa[da]=ja;oa[y]=ka;oa[s]=la;oa[ba]=ma;if(na)oa[fa]=na;this.$FBRTCLogger3(s,oa);this.$FBRTCLogger2(ja,ka,'CallAction',la+', '+ma);};ia.prototype.logEvent=function(ja,ka,event){'use strict';var la={};la[da]=ja;la[y]=ka;la[ba]=event;this.$FBRTCLogger3(t,la);this.$FBRTCLogger2(ja,ka,'Event',event);};ia.prototype.logInfo=function(ja,ka,la){'use strict';var ma={};ma[da]=ja;ma[y]=ka;ma[ba]=la;this.$FBRTCLogger3(r,ma);this.$FBRTCLogger2(ja,ka,'Info',la);};ia.prototype.logError=function(ja,ka,la){'use strict';var ma={};ma[da]=ja;ma[y]=ka;ma[ba]=la;this.$FBRTCLogger3(u,ma);this.$FBRTCLogger2(ja,ka,'Error',la);};ia.prototype.logErrorWithoutID=function(ja){'use strict';this.logError(null,null,ja);};ia.prototype.logEndCallSummary=function(ja){'use strict';if(!ja)return;var ka={};ka[da]=ja.peerID;ka[y]=ja.callID;ka[ca]=ga;ka[ba]=ja.toString();var la=ja.getExtraInfo();for(var ma in la)if(la.hasOwnProperty(ma))ka[ma]=la[ma];this.$FBRTCLogger3(r,ka);this.$FBRTCLogger2(ja.peerID,ja.callID,'Call Summary',ka);};ia.prototype.$FBRTCLogger3=function(ja,ka){'use strict';ka.page_id=l;this.$FBRTCLogger1.log(ja,ka);j.log(ja,m,ka);};ia.prototype.$FBRTCLogger2=function(ja,ka,la,ma){'use strict';};ia.CallAction={START_CALL:'start_call',RECEIVED_CALL:'received_call',ANSWER_CALL:'answer_call',END_CALL:'end_call',DENIED_PERMISSION:'denied_permission',SET_MUTE:'set_mute',SET_VIDEO_ON:'set_video_on',SET_SELF_VIEW_ON:'set_self_view_on',SET_FULLSCREEN_ON:'set_fullscreen_on',START_SKYPE:'start_skype',TRY_NEW:'try_new',OPEN_POPUP:'open_popup',POPUP_OPENED:'popup_opened',AUTO_DISABLE_VIDEO:'auto_disable_video',FAILED_GETTING_URI:'failed_getting_uri',OLD_URI:'old_uri',USER_SETTINGS_CHANGED:'user_settings_changed'};ia.Trigger={ADMIN_MESSAGE:'admin_message',CHAT_TAB_ICON:'chat_tab_icon',CHAT_TAB_ICON_TOUR:'chat_tab_icon_tour',CHAT_TAB_VOICE_ICON:'chat_tab_voice_icon',SKYPE_DEPRECATION_DIALOG:'skype_deprecation_dialog',REDIAL_BUTTON:'redial_button',RETURN_CALL:'return_call',WEB_MESSENGER:'web_messenger',POPUP_CALL_START_BUTTON:'popup_start_call_button',TIMELINE_PROFILE:'timeline_profile',UNKNOWN:'unknown',RESET_CALL:'install_screen_sharing_ext_dialog'};ia.Key={DEVICE_INFO:'device_info',RATING:'rating5',RATING_SHOWN:'rating_shown',SURVEY_CHOICE:'survey_choice',SURVEY_DETAILS:'survey_details',SURVEY_SHOWN:'survey_shown',INITIATED_BY_PAGE_ID:'initiated_by_page_id',PEER_IS_MOBILE:'peer_is_mobile'};f.exports=ia;},null);
__d('FBRTCLocalMessageQueue',['CacheStorage','FBRTCLogger','Map','RTCConfig'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='localstorage',m='RTC_',n='offer',o='offer_msg',p='data_',q=30*1000,r=15*1000,s=500,t=new j();function u(){'use strict';this.$FBRTCLocalMessageQueue1=i.getInstance();}u.prototype.enqueueOffer=function(v,w){'use strict';var x=this.$FBRTCLocalMessageQueue2(v,o);this.$FBRTCLocalMessageQueue3(x,n,w);};u.prototype.getOffer=function(v){'use strict';var w=this.$FBRTCLocalMessageQueue2(v,o);return this.$FBRTCLocalMessageQueue4(w,n);};u.prototype.removeOffer=function(v){'use strict';var w=this.$FBRTCLocalMessageQueue2(v,o);w.remove(n);};u.prototype.enqueueMessage=function(v,w,x,y){'use strict';var z=p+x.toString(),aa=t.get(v)||new j();aa.set(z,y);t.set(v,aa);this.$FBRTCLocalMessageQueue1.logToConsole('Queued '+z);};u.prototype.drainQueue=function(v,w){'use strict';var x=t.get(v)||new j(),y,z;for(var aa=x,ba=Array.isArray(aa),ca=0,aa=ba?aa:aa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){if(ba){if(ca>=aa.length)break;var da=aa[ca++];y=da[0];z=da[1];}else{ca=aa.next();if(ca.done)break;var ea=ca.value;y=ea[0];z=ea[1];}void y;w(z);}t.set(v,new j());};u.prototype.enableDequeuing=function(v,w,x,y){'use strict';if(y===undefined)y=r;this.$FBRTCLocalMessageQueue5(v,w,x,y);};u.prototype.$FBRTCLocalMessageQueue5=function(v,w,x,y){'use strict';var z=this.$FBRTCLocalMessageQueue2(v,w),aa=z.keys(),ba=aa.length;for(var ca=0;ca<ba;ca++){var da=this.$FBRTCLocalMessageQueue6(z,aa[ca]);if(da&&x)x(da);}this.$FBRTCLocalMessageQueue1.logToConsole('Dequeued '+ba+' ('+v+') with '+y+' left)');if(y>0){y-=s;setTimeout((function(){this.$FBRTCLocalMessageQueue5(v,w,x,y);}).bind(this),s);}};u.prototype.$FBRTCLocalMessageQueue3=function(v,w,x){'use strict';var y={__t:Date.now(),__d:x};v.set(w,y);};u.prototype.$FBRTCLocalMessageQueue4=function(v,w){'use strict';var x=v.get(w);if(x&&this.$FBRTCLocalMessageQueue7(x)){return x.__d;}else if(x)v.remove(w);return null;};u.prototype.$FBRTCLocalMessageQueue6=function(v,w){'use strict';var x=this.$FBRTCLocalMessageQueue4(v,w);if(x!==null){v.remove(w);return x;}return null;};u.prototype.$FBRTCLocalMessageQueue7=function(v){'use strict';return Date.now()-v.__t<q;};u.prototype.$FBRTCLocalMessageQueue2=function(v,w){'use strict';return new h(l,''+m+v+'_'+w+'_');};f.exports=u;},null);
__d('FBRTCCallControlActions',['FBRTCDispatcher','keyMirror'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null}),k={Types:j,hangUp:function(){h.dispatch({type:j.HANG_UP});},toggleMuteAudio:function(){h.dispatch({type:j.TOGGLE_MUTE_AUDIO});},toggleMuteVideo:function(){h.dispatch({type:j.TOGGLE_MUTE_VIDEO});},toggleFullScreen:function(){h.dispatch({type:j.TOGGLE_FULL_SCREEN});},toggleSelfView:function(){h.dispatch({type:j.TOGGLE_SELF_VIEW});},showSettings:function(){h.dispatch({type:j.SHOW_SETTINGS});},toggleScreenSharing:function(){h.dispatch({type:j.TOGGLE_SCREEN_SHARING});},startCall:function(){h.dispatch({type:j.START_CALL});},openScreenInNewWindow:function(){h.dispatch({type:j.OPEN_SCREEN_IN_NEW});},receivedSignalingMessage:function(l){h.dispatch({type:j.RECEIVED_SIGNALING_MESSAGE,message_type:l.msgType,message:l});},acceptEscalation:function(){h.dispatch({type:j.ACCEPT_ESCALATION});},declineEscalation:function(){h.dispatch({type:j.DECLINE_ESCALATION});},resetCall:function(l){h.dispatch({type:j.RESET_CALL,trigger:l});},parentWindowStartCall:function(){h.dispatch({type:j.PARENT_WINDOW_START_CALL});}};f.exports=k;},null);
__d('FBRTCSupport',['ChannelConstants','RTCConfig','UserAgent'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={isSendWebrtcSupported:function(){return i.SendNewVCGK;},isReceiveWebrtcSupported:function(){return i.ReceiveNewVCGK;},isVideoInteropSupported:function(){return i.VideoInteropGK;},isVideoCallBlockingSupported:function(){return i.VideoCallBlockingGK;},isWebrtcSupported:function(){return (j.isBrowser('Chrome >= 28')||j.isBrowser('Firefox >= 25')||j.isBrowser('Opera >= 20'));},isOSSupported:function(){return !j.isPlatform('Android')&&!j.isPlatform('iOS');},getCapabilities:function(){var l=0;if(this.isReceiveWebrtcSupported())l=h.CAPABILITY_VOIP_INTEROP;return l;}};f.exports=k;},null);
__d('FBRTCMessageListener',['Arbiter','ChannelConstants','FBRTCCallControlActions','FBRTCLocalMessageQueue','FBRTCSupport','RTCConfig','guid','invariant','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=45*1000,r='rtc_child_window_ready',s='rtc_child_window_start_call',t='rtc_child_window_message',u=[],v=null,w=null,x=null,y=null,z=null,aa=false,ba=null,ca={init:function(da,ea){if(aa)return;aa=true;h.subscribe(i.getArbiterType('webrtc'),(function(ga,ha){this._onMessage(ha.obj);}).bind(this));if(m.RtcConferencingGK)h.subscribe(i.getArbiterType('rtc_multi_json'),(function(ga,ha){this._onMultiwayMessage(ha.obj);}).bind(this));this._localMessageQueue=new k();if(m.PassMessagesBetweenWindowsGK){if(l.isWebrtcSupported()&&window.addEventListener){var fa=da?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener('message',fa,false);}if(da)this._connectToParentWindow(ea);}},setParentWindowNonce:function(da){y=da;},generateNewNonce:function(){z=n();return z;},setMultiwayMessageHandler:function(da,ea){!!ba?o(0):undefined;ba=ea?da.bind(ea):da;},_onMultiwayMessage:function(da){this.emit('multiwayMessageReceived',da);if(ba)ba(da);},setMessageHandler:function(da,ea){!!v?o(0):undefined;v=ea?da.bind(ea):da;while(u.length)v(u.shift());},removeMessageHandler:function(){v=null;},_onMessage:function(da){this.emit('messageReceived',da);if(v){v(da);}else u.push(da);this._passMessageToChildWindow(da);},_connectToParentWindow:function(da){if(window.opener&&window.opener.postMessage){var ea={type:r,nonce:y,childNonce:this.generateNewNonce(),peerID:da};window.opener.postMessage(ea,window.location.origin);}},_verifyWindowMessage:function(event){return event.origin===window.location.origin&&event.data&&z&&event.data.nonce===z;},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===r){this.setParentWindowNonce(event.data.childNonce);this._setChildWindow(event.source);this._replayQueuedMessagesToChild(event.data.peerID,w);}},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===t)this._onMessage(event.data.message);if(event.data.type===s)j.parentWindowStartCall();},_replayQueuedMessagesToChild:function(da,ea){this._localMessageQueue.drainQueue(da,function(fa){var ga={type:t,nonce:y,message:fa};ea.postMessage(ga,window.location.origin);});},_setChildWindow:function(da){w=da;clearTimeout(x);x=setTimeout(function(){w=null;},q);this._startCallInChildWindow();this.generateNewNonce();},_passMessageToChildWindow:function(da){if(w){var ea={type:t,nonce:y,message:da};w.postMessage(ea,window.location.origin);}},_startCallInChildWindow:function(){if(w){var da={type:s,nonce:y};w.postMessage(da,window.location.origin);}}};p(ca,{messageReceived:true,multiwayMessageReceived:true});f.exports=ca;},null);
__d('SoundPlayer',['Arbiter','Flash','URI','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={},m=null,n=false,o='so_sound_player',p='/swf/cigars/SoundPlayer.swf?v=1',q=null,r={};function s(ca){var da=new j(ca);if(!da.getDomain())return new j(window.location.href).setPath(da.getPath()).toString();return ca;}function t(ca){var da=new j(ca).getPath();if(/\.mp3$/.test(da))return 'audio/mpeg';if(/\.og[ga]$/.test(da))return 'audio/ogg';return '';}function u(){if(!q){var ca=document.createElement('audio');if(!ca||!ca.canPlayType)return null;ca.setAttribute('preload','auto');document.body.appendChild(ca);q=ca;}return q;}function v(ca){return r[ca];}function w(ca,da){r[ca]=da;}function x(){var ca=document[o]||window[o];if(ca)if(!ca.playSound&&ca.length)ca=ca[0];return ca&&ca.playSound&&ca.loopSound?ca:null;}function y(){return n;}function z(ca,da,ea){m={path:ca,sync:da,loop:ea};}function aa(){n=true;if(m){var ca=x();if(m.loop){ca.loopSound(m.path,m.sync);}else ca.playSound(m.path,m.sync);}}var ba={init:function(ca){ca=k(ca);var da;for(var ea=0;ea<ca.length;++ea){da=ca[ea];if(l[da])return;}var fa=u();for(ea=0;fa&&ea<ca.length;++ea){da=ca[ea];if(fa.canPlayType(da)){l[da]=true;return;}}l['audio/mpeg']=true;if(x())return;try{h.registerCallback(aa,['sound/player_ready','sound/ready']);var ha=document.createElement('div');ha.id='sound_player_holder';document.body.appendChild(ha);var ia=window[o]=i.embed(p,ha,{allowscriptaccess:'always',wmode:'transparent'},{swf_id:o});ia.setAttribute('id',o);ia.setAttribute('width','1px');ia.setAttribute('height','1px');h.inform('sound/player_ready');}catch(ga){}},createAndPlayNewNative:function(ca,da){var ea=document.createElement('audio');ea.setAttribute('preload','auto');document.body.appendChild(ea);ea.src=s(ca);if(da){ea.setAttribute('loop','');}else ea.removeAttribute('loop');ea.play();w(ca,ea);return;},play:function(ca,da){ca=k(ca);var ea=u(),fa,ga;for(var ha=0;ea&&ha<ca.length;++ha){fa=ca[ha];var ia=v(fa);if(ia){if(da){ia.setAttribute('loop','');}else ia.removeAttribute('loop');ia.play();return;}ga=t(fa);if(!ea.canPlayType(ga))continue;ba.init([ga]);ba.createAndPlayNewNative(fa,da);return;}for(ha=0;ha<ca.length;++ha){fa=s(ca[ha]);ga=t(fa);if(ga!='audio/mpeg')continue;ba.init([ga]);var ja=x();if(!y()){z(fa,true,da);return;}else if(ja){if(da){ja.loopSound(fa,true);}else ja.playSound(fa,true);return;}}},stop:function(ca){ca=k(ca);for(var da=0;da<ca.length;++da){var ea=s(ca[da]),fa=v(ca[da]),ga=x();if(fa&&fa.src==ea){fa.pause();fa.removeAttribute('src');fa.src=ea;}else ga&&ga.stopSound(ea);}}};f.exports=ba;},null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='fb_sounds_playing3';function l(){var p=i.getLocalStorage();if(p)try{var r=p[k];if(r){r=JSON.parse(r);if(Array.isArray(r))return r;}}catch(q){}return [];}function m(p){var q=i.getLocalStorage();if(q){var r=l();r.push(p);while(r.length>5)r.shift();try{q[k]=JSON.stringify(r);}catch(s){}}}function n(p){return l().some(function(q){return q===p;});}var o={play:function(p,q,r){p=j(p);q=q||p[0]+Math.floor(Date.now()/1000);if(n(q))return;h.play(p,r);m(q);},isSupported:function(){return !!i.getLocalStorage();}};f.exports=o;},null);
__d('SoundRPC',['Event','FBJSON','SoundSynchronizer'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n,o){j.play(m,n,o);}var l={playLocal:k,playRemote:function(m,n,o,p){var q={name:'SoundRPC',data:{paths:n,sync:o,loop:p}};m.postMessage(i.stringify(q),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){h.listen(window,'message',function(m){if(!/\.facebook.com$/.test(m.origin))return;var n={};try{n=i.parse(m.data);}catch(o){}if(n.name==='SoundRPC')k(n.data.paths,n.data.sync,n.data.loop);});}};f.exports=l;},null);